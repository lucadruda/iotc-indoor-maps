/*! For license information please see 2.8e1b0082.chunk.js.LICENSE.txt */
(this["webpackJsonpmap-site"]=this["webpackJsonpmap-site"]||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(86)},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return l}));var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}Object.create;function l(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}Object.create},,function(e,t,n){e.exports=n(91)},function(e,t,n){"use strict";e.exports=n(111)},function(e,t,n){"use strict";var r,i,o;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),function(e){e[e.center=0]="center",e[e.contain=1]="contain",e[e.cover=2]="cover",e[e.none=3]="none",e[e.centerCover=4]="centerCover",e[e.centerContain=5]="centerContain"}(r||(r={})),function(e){e[e.landscape=0]="landscape",e[e.portrait=1]="portrait"}(i||(i={})),function(e){e[e.notLoaded=0]="notLoaded",e[e.loaded=1]="loaded",e[e.error=2]="error",e[e.errorLoaded=3]="errorLoaded"}(o||(o={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(39),i=void 0;try{i=window}catch(a){}function o(e){if(!r.a&&"undefined"!==typeof i){var t=e;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:i}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a}));var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={topLeftEdge:0,topCenter:1,topRightEdge:2,topAutoEdge:3,bottomLeftEdge:4,bottomCenter:5,bottomRightEdge:6,bottomAutoEdge:7,leftTopEdge:8,leftCenter:9,leftBottomEdge:10,rightTopEdge:11,rightCenter:12,rightBottomEdge:13}},,function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,l,"next",e)}function l(e){r(a,i,o,s,l,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return i}))},function(e,t,n){(function(e,n){!function(t){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function i(e,t){return e(t={exports:{}},t.exports),t.exports}var o=i((function(e,t){function n(e,t){var n,a;r?i?(n="var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk);",r(a={}),o=t(a),"undefined"!=typeof window&&(o.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"})))):i=t:r=t}var r,i,o;e.exports=(n(0,(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n="1.14.0-rc4",r=i;function i(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}i.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},i.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},i.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},i.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if((r=1)<i)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;o<e?n=i:r=i,i=.5*(r-n)+n}return i},i.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var o=a;function a(e,t){this.x=e,this.y=t}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x;return t*t+(e=e.y-this.y)*e},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y;return e=e[2]*this.x+e[3]*this.y,this.x=t,this.y=e,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e);return e=t*this.x-n*this.y,t=n*this.x+t*this.y,this.x=e,this.y=t,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e);return e=t.x+n*(this.x-t.x)-r*(this.y-t.y),t=t.y+r*(this.x-t.x)+n*(this.y-t.y),this.x=e,this.y=t,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(e){return e instanceof a||!Array.isArray(e)?e:new a(e[0],e[1])};var s="undefined"!=typeof self?self:{},l=Math.pow(2,53)-1;function u(e,t,n,i){var o=new r(e,t,n,i);return function(e){return o.solve(e)}}var c=u(.25,.1,.25,1);function p(e,t,n){return Math.min(n,Math.max(t,e))}function h(e,t,n){var r;return(r=((e-t)%(r=n-t)+r)%r+t)===t?n:r}function d(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o,a=i[r];for(o in a)e[o]=a[o]}return e}var f=1;function m(){return f++}function g(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function y(e){return e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function v(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function _(e,t){return-1!==e.indexOf(t,e.length-t.length)}function b(e,t,n){var r,i={};for(r in e)i[r]=t.call(n||this,e[r],r,e);return i}function x(e,t,n){var r,i={};for(r in e)t.call(n||this,e[r],r,e)&&(i[r]=e[r]);return i}function w(e){return Array.isArray(e)?e.map(w):"object"==typeof e&&e?b(e,w):e}var S={};function E(e){S[e]||("undefined"!=typeof console&&console.warn(e),S[e]=!0)}function C(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function T(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(e){var t={};return e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){return i=r||i,t[n]=!i||i.toLowerCase(),""})),t["max-age"]&&(e=parseInt(t["max-age"],10),isNaN(e)?delete t["max-age"]:t["max-age"]=e),t}var k=null;function P(e){var t;return null==k&&(t=e.navigator?e.navigator.userAgent:null,k=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))),k}function A(e){try{var t=s[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var M,O,L,R,D=s.performance&&s.performance.now?s.performance.now.bind(s.performance):Date.now.bind(Date),z=s.requestAnimationFrame||s.mozRequestAnimationFrame||s.webkitRequestAnimationFrame||s.msRequestAnimationFrame,N=s.cancelAnimationFrame||s.mozCancelAnimationFrame||s.webkitCancelAnimationFrame||s.msCancelAnimationFrame,B={now:D,frame:function(e){var t=z(e);return{cancel:function(){return N(t)}}},getImageData:function(e,t){void 0===t&&(t=0);var n=s.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return(M=M||s.document.createElement("a")).href=e,M.href},hardwareConcurrency:s.navigator&&s.navigator.hardwareConcurrency||4,get devicePixelRatio(){return s.devicePixelRatio},get prefersReducedMotion(){return!!s.matchMedia&&(O=null==O?s.matchMedia("(prefers-reduced-motion: reduce)"):O).matches}},F={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},j={supported:!1,testSupport:function(e){!U&&R&&(V?q(e):L=e)}},U=!1,V=!1;function q(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,R),e.isContextLost())return;j.supported=!0}catch(e){}e.deleteTexture(t),U=!0}s.document&&((R=s.document.createElement("img")).onload=function(){L&&q(L),V=!(L=null)},R.onerror=function(){U=!0,L=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var H="01";function W(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()}function G(e){return 0===e.indexOf("mapbox:")}W.prototype._createSkuToken=function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",H,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},W.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},W.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},W.prototype.normalizeStyleURL=function(e,t){return G(e)?((e=Y(e)).path="/styles/v1"+e.path,this._makeAPIURL(e,this._customAccessToken||t)):e},W.prototype.normalizeGlyphsURL=function(e,t){return G(e)?((e=Y(e)).path="/fonts/v1"+e.path,this._makeAPIURL(e,this._customAccessToken||t)):e},W.prototype.normalizeSourceURL=function(e,t){return G(e)?((e=Y(e)).path="/v4/"+e.authority+".json",e.params.push("secure"),this._makeAPIURL(e,this._customAccessToken||t)):e},W.prototype.normalizeSpriteURL=function(e,t,n,r){var i=Y(e);return G(e)?(i.path="/styles/v1"+i.path+"/sprite"+t+n,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=""+t+n,J(i))},W.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!G(e))return e;var n=Y(e);return e=2<=B.devicePixelRatio||512===t?"@2x":"",t=j.supported?".webp":"$1",n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,e+t),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path,t=this._customAccessToken||function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||F.ACCESS_TOKEN,F.REQUIRE_ACCESS_TOKEN&&t&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,t)},W.prototype.canonicalizeTileURL=function(e,t){var n=Y(e);return n.path.match(/(^\/v4\/)/)&&n.path.match(/\.[\w]+$/)?(e="mapbox://tiles/",e+=n.path.replace("/v4/",""),n=n.params,(n=t?n.filter((function(e){return!e.match(/^access_token=/)})):n).length&&(e+="?"+n.join("&")),e):e},W.prototype.canonicalizeTileset=function(e,t){for(var n=!!t&&G(t),r=[],i=0,o=e.tiles||[];i<o.length;i+=1){var a=o[i];K(a)?r.push(this.canonicalizeTileURL(a,n)):r.push(a)}return r},W.prototype._makeAPIURL=function(e,t){var n,r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=Y(F.API_URL);if(e.protocol=i.protocol,e.authority=i.authority,"http"!==e.protocol||0<=(n=e.params.indexOf("secure"))&&e.params.splice(n,1),"/"!==i.path&&(e.path=""+i.path+e.path),!F.REQUIRE_ACCESS_TOKEN)return J(e);if(!(t=t||F.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token="+t),J(e)};var Z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function K(e){return Z.test(e)}var X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Y(e){if(!(e=e.match(X)))throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function J(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var $="mapbox.eventData";function Q(e){if(!e)return null;var t;if(!(e=e.split("."))||3!==e.length)return null;try{return JSON.parse((t=e[1],decodeURIComponent(s.atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(e){return null}}var ee=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ee.prototype.getStorageKey=function(e){var t=Q(F.ACCESS_TOKEN),n="";return n=t&&t.u?(t=t.u,s.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))})))):F.ACCESS_TOKEN||"",e?$+"."+e+":"+n:$+":"+n},ee.prototype.fetchEventData=function(){var e=A("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=s.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=s.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){E("Unable to read from LocalStorage")}},ee.prototype.saveEventData=function(){var e=A("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{s.localStorage.setItem(n,this.anonId),1<=Object.keys(this.eventData).length&&s.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){E("Unable to write to LocalStorage")}},ee.prototype.processRequests=function(e){},ee.prototype.postEvent=function(e,t,r,i){var o,a=this;F.EVENTS_URL&&((o=Y(F.EVENTS_URL)).params.push("access_token="+(i||F.ACCESS_TOKEN||"")),e={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:H,userId:this.anonId},e=t?d(e,t):e,e={url:J(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([e])},this.pendingRequest=Ae(e,(function(e){a.pendingRequest=null,r(e),a.saveEventData(),a.processRequests(i)})))},ee.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var te,ne,re=((te=ee)&&(ie.__proto__=te),((ie.prototype=Object.create(te&&te.prototype)).constructor=ie).prototype.postMapLoadEvent=function(e,t,n,r){this.skuToken=n,(F.EVENTS_URL&&r||F.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return G(e)||K(e)})))&&this.queueRequest({id:t,timestamp:Date.now()},r)},ie.prototype.processRequests=function(e){var t,n,r=this;this.pendingRequest||0===this.queue.length||(n=this.queue.shift(),t=n.id,n=n.timestamp,t&&this.success[t]||(this.anonId||this.fetchEventData(),y(this.anonId)||(this.anonId=g()),this.postEvent(n,{skuToken:this.skuToken},(function(e){e||t&&(r.success[t]=!0)}),e)))},ie);function ie(){te.call(this,"map.load"),this.success={},this.skuToken=""}function oe(e){ne.call(this,"appUserTurnstile"),this._customAccessToken=e}var ae,se,le=new((ne=ee)&&(oe.__proto__=ne),((oe.prototype=Object.create(ne&&ne.prototype)).constructor=oe).prototype.postTurnstileEvent=function(e,t){F.EVENTS_URL&&F.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return G(e)||K(e)}))&&this.queueRequest(Date.now(),t)},oe.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=Q(F.ACCESS_TOKEN),r=n?n.u:F.ACCESS_TOKEN,i=r!==this.eventData.tokenU;y(this.anonId)||(this.anonId=g(),i=!0);var o,a,s=this.queue.shift();if(!(i=!this.eventData.lastSuccess||(o=new Date(this.eventData.lastSuccess),a=new Date(s),n=(s-this.eventData.lastSuccess)/864e5,i||1<=n||n<-1||o.getDate()!==a.getDate())))return this.processRequests();this.postEvent(s,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=s,t.eventData.tokenU=r)}),e)}},oe),ue=le.postTurnstileEvent.bind(le),ce=(Oa=new re).postMapLoadEvent.bind(Oa),pe="mapbox-tiles",he=500,de=50;function fe(){s.caches&&!ae&&(ae=s.caches.open(pe))}function me(e,t,n){var r,i;fe(),ae&&(r={status:t.status,statusText:t.statusText,headers:new s.Headers},t.headers.forEach((function(e,t){return r.headers.set(t,e)})),(i=I(t.headers.get("Cache-Control")||""))["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(e,t){if(void 0===se)try{new Response(new ReadableStream),se=!0}catch(e){se=!1}se?t(e.body):e.blob().then(t)}(t,(function(t){var n=new s.Response(t,r);fe(),ae&&ae.then((function(t){return t.put(ge(e.url),n)})).catch((function(e){return E(e.message)}))}))))}function ge(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function ye(e,t){if(fe(),!ae)return t(null);var n=ge(e.url);ae.then((function(e){e.match(n).then((function(r){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0);return e=I(e.headers.get("Cache-Control")||""),t>Date.now()&&!e["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}var ve,_e=1/0;function be(){return ve=null==ve?s.OffscreenCanvas&&new s.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof s.createImageBitmap:ve}var xe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xe);var we,Se=((we=Error)&&(Ee.__proto__=we),((Ee.prototype=Object.create(we&&we.prototype)).constructor=Ee).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},Ee);function Ee(e,t,n){401===t&&K(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),we.call(this,e),this.status=t,this.url=n,this.name=this.constructor.name,this.message=e}var Ce=T()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===s.location.protocol?s.parent:s).location.href},Te=function(e){return/^file:/.test(e)||/^file:/.test(Ce())&&!/^\w+:/.test(e)};function Ie(e,t){var n=new s.AbortController,r=new s.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ce(),signal:n.signal}),i=!1,o=!1,a=0<(u=r.url).indexOf("sku=")&&K(u);function l(n,a,s){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){o||(a&&s&&me(r,a,s),i=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))}"json"===e.type&&r.headers.set("Accept","application/json");var u=function(n,i,u){if(!o){if(n&&"SecurityError"!==n.message&&E(n),i&&u)return l(i);var c=Date.now();s.fetch(r).then((function(n){if(n.ok){var r=a?n.clone():null;return l(n,r,c)}return t(new Se(n.statusText,n.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}};return a?ye(r,u):u(null,null),{cancel:function(){o=!0,i||n.abort()}}}function ke(e,t){if(!Te(e.url)){if(s.fetch&&s.Request&&s.AbortController&&s.Request.prototype.hasOwnProperty("signal"))return Ie(e,t);if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}return function(e,t){var n,r=new s.XMLHttpRequest;for(n in r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer"),e.headers)r.setRequestHeader(n,e.headers[n]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=function(){t(new Error(r.statusText))},r.onload=function(){if((200<=r.status&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===e.type)try{n=JSON.parse(r.response)}catch(n){return t(n)}t(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else t(new Se(r.statusText,r.status,e.url))},r.send(e.body),{cancel:function(){return r.abort()}}}(e,t)}var Pe=function(e,t){return ke(d(e,{type:"arrayBuffer"}),t)},Ae=function(e,t){return ke(d(e,{method:"POST"}),t)},Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Oe(e,t){if(j.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Re>=F.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return Le.push(n),n}function r(){if(!i)for(i=!0,Re--;Le.length&&Re<F.MAX_PARALLEL_IMAGE_REQUESTS;){var e=Le.shift(),t=e.requestParameters,n=e.callback;e.cancelled||(e.cancel=Oe(t,n).cancel)}}Re++;var i=!1,o=Pe(e,(function(e,n,i,o){var a;r(),e?t(e):n&&(be()?(e=n,a=t,e=new s.Blob([new Uint8Array(n)],{type:"image/png"}),s.createImageBitmap(e).then((function(e){a(null,e)})).catch((function(e){a(new Error("Could not load image because of "+e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))):function(e,t,n,r){var i=new s.Image,o=s.URL;i.onload=function(){t(null,i),o.revokeObjectURL(i.src),i.onload=null,s.requestAnimationFrame((function(){i.src=Me}))},i.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new s.Blob([new Uint8Array(e)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=e.byteLength?o.createObjectURL(a):Me}(n,t,i,o))}));return{cancel:function(){o.cancel(),r()}}}var Le=[],Re=0;function De(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function ze(e,t,n){n&&n[e]&&-1!==(t=n[e].indexOf(t))&&n[e].splice(t,1)}var Ne,Be=function(e,t){d(this,t=void 0===t?{}:t),this.type=e},Fe=((Ne=Be)&&(je.__proto__=Ne),(je.prototype=Object.create(Ne&&Ne.prototype)).constructor=je);function je(e,t){Ne.call(this,"error",d({error:e},t=void 0===t?{}:t))}function Ue(){}Ue.prototype.on=function(e,t){return this._listeners=this._listeners||{},De(e,t,this._listeners),this},Ue.prototype.off=function(e,t){return ze(e,t,this._listeners),ze(e,t,this._oneTimeListeners),this},Ue.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},De(e,t,this._oneTimeListeners),this},Ue.prototype.fire=function(e,t){var n=(e="string"==typeof e?new Be(e,t||{}):e).type;if(this.listens(n)){for(var r=0,i=(e.target=this)._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,e);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];ze(n,s,this._oneTimeListeners),s.call(this,e)}(t=this._eventedParent)&&(d(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),t.fire(e))}else e instanceof Fe&&console.error(e.error);return this},Ue.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&0<this._listeners[e].length||this._oneTimeListeners&&this._oneTimeListeners[e]&&0<this._oneTimeListeners[e].length||this._eventedParent&&this._eventedParent.listens(e)};var Ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!(Ue.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this})},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},qe=function(e,t,n,r){this.message=(e?e+": ":"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function He(e){var t=e.key;return(e=e.value)?[new qe(t,e,"constants have been deprecated as of v8")]:[]}function We(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o,a=i[r];for(o in a)e[o]=a[o]}return e}function Ge(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ze(e){if(Array.isArray(e))return e.map(Ze);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t,n={};for(t in e)n[t]=Ze(e[t]);return n}return Ge(e)}var Ke,Xe=((Ke=Error)&&(Ye.__proto__=Ke),(Ye.prototype=Object.create(Ke&&Ke.prototype)).constructor=Ye);function Ye(e,t){Ke.call(this,t),this.message=t,this.key=e}function Je(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,r=t;n<r.length;n+=1){var i=(o=r[n])[0],o=o[1];this.bindings[i]=o}}Je.prototype.concat=function(e){return new Je(this,e)},Je.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Je.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var $e={kind:"null"},Qe={kind:"number"},et={kind:"string"},tt={kind:"boolean"},nt={kind:"color"},rt={kind:"object"},it={kind:"value"},ot={kind:"collator"},at={kind:"formatted"},st={kind:"resolvedImage"};function lt(e,t){return{kind:"array",itemType:e,N:t}}function ut(e){if("array"!==e.kind)return e.kind;var t=ut(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}var ct=[$e,Qe,et,tt,nt,at,rt,lt(it),st];function pt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!pt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=ct;n<r.length;n+=1)if(!pt(r[n],t))return null}return"Expected "+ut(e)+" but found "+ut(t)+" instead."}function ht(e,t){return t.some((function(t){return t.kind===e.kind}))}function dt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var ft=t((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:255<e?255:e}function i(e){return e<0?0:1<e?1:e}function o(e){return"%"===e[e.length-1]?r(parseFloat(e)/100*255):r(parseInt(e))}function a(e){return"%"===e[e.length-1]?i(parseFloat(e)/100):i(parseFloat(e))}function s(e,t,n){return n<0?n+=1:1<n&&--n,6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t=e.replace(/ /g,"").toLowerCase();if(t in n)return n[t].slice();if("#"===t[0])return 4===t.length?0<=(l=parseInt(t.substr(1),16))&&l<=4095?[(3840&l)>>4|(3840&l)>>8,240&l|(240&l)>>4,15&l|(15&l)<<4,1]:null:7===t.length&&0<=(l=parseInt(t.substr(1),16))&&l<=16777215?[(16711680&l)>>16,(65280&l)>>8,255&l,1]:null;var i=t.indexOf("(");if(e=t.indexOf(")"),-1!==i&&e+1===t.length){var l=t.substr(0,i),u=t.substr(i+1,e-(i+1)).split(","),c=1;switch(l){case"rgba":if(4!==u.length)return null;c=a(u.pop());case"rgb":return 3!==u.length?null:[o(u[0]),o(u[1]),o(u[2]),c];case"hsla":if(4!==u.length)return null;c=a(u.pop());case"hsl":if(3!==u.length)return null;var p,h=(parseFloat(u[0])%360+360)%360/360,d=a(u[1]);return[r(255*s(p=2*(p=a(u[2]))-(d=p<=.5?p*(d+1):p+d-p*d),d,h+1/3)),r(255*s(p,d,h)),r(255*s(p,d,h-1/3)),c];default:return null}}return null}}catch(e){}})).parseCSSColor,mt=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};function gt(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale||[],{sensitivity:this.sensitivity,usage:"search"})}function yt(e,t,n,r,i){this.text=e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}mt.parse=function(e){if(e){if(e instanceof mt)return e;if("string"==typeof e&&(e=ft(e)))return new mt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}},mt.prototype.toString=function(){var e=(r=this.toArray())[0],t=r[1],n=r[2],r=r[3];return"rgba("+Math.round(e)+","+Math.round(t)+","+Math.round(n)+","+r+")"},mt.prototype.toArray=function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]},mt.black=new mt(0,0,0,1),mt.white=new mt(1,1,1,1),mt.transparent=new mt(0,0,0,0),mt.red=new mt(1,0,0,1),gt.prototype.compare=function(e,t){return this.collator.compare(e,t)},gt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale||[]).resolvedOptions().locale};var vt=function(e){this.sections=e};vt.fromString=function(e){return new vt([new yt(e,null,null,null,null)])},vt.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))},vt.factory=function(e){return e instanceof vt?e:vt.fromString(e)},vt.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")},vt.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r,i=n[t];i.image?e.push(["image",i.image.name]):(e.push(i.text),r={},i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),e.push(r))}return e};var _t=function(e){this.name=e.name,this.available=e.available};function bt(e,t,n,r){return"number"==typeof e&&0<=e&&e<=255&&"number"==typeof t&&0<=t&&t<=255&&"number"==typeof n&&0<=n&&n<=255?void 0===r||"number"==typeof r&&0<=r&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function xt(e){if(null===e)return 1;if("string"==typeof e)return 1;if("boolean"==typeof e)return 1;if("number"==typeof e)return 1;if(e instanceof mt)return 1;if(e instanceof gt)return 1;if(e instanceof vt)return 1;if(e instanceof _t)return 1;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!xt(n[t]))return;return 1}if("object"==typeof e){for(var r in e)if(!xt(e[r]))return;return 1}}function wt(e){if(null===e)return $e;if("string"==typeof e)return et;if("boolean"==typeof e)return tt;if("number"==typeof e)return Qe;if(e instanceof mt)return nt;if(e instanceof gt)return ot;if(e instanceof vt)return at;if(e instanceof _t)return st;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var o=wt(i[r]);if(t){if(t!==o){t=it;break}}else t=o}return lt(t||it,n)}return rt}function St(e){var t=typeof e;return null===e?"":"string"==t||"number"==t||"boolean"==t?String(e):e instanceof mt||e instanceof vt||e instanceof _t?e.toString():JSON.stringify(e)}function Et(e,t){this.type=e,this.value=t}function Ct(e){this.name="ExpressionEvaluationError",this.message=e}function Tt(e,t){this.type=e,this.args=t}_t.prototype.toString=function(){return this.name},_t.fromString=function(e){return e?new _t({name:e,available:!1}):null},_t.prototype.serialize=function(){return["image",this.name]},Et.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!xt(e[1]))return t.error("invalid value");var n=e[1];return e=wt(n),t=t.expectedType,"array"!==e.kind||0!==e.N||!t||"array"!==t.kind||"number"==typeof t.N&&0!==t.N||(e=t),new Et(e,n)},Et.prototype.evaluate=function(){return this.value},Et.prototype.eachChild=function(){},Et.prototype.outputDefined=function(){return!0},Et.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof mt?["rgba"].concat(this.value.toArray()):this.value instanceof vt?this.value.serialize():this.value},Ct.prototype.toJSON=function(){return this.message};var It={string:et,number:Qe,boolean:tt,object:rt};function kt(e){this.type=at,this.sections=e}function Pt(e){this.type=st,this.input=e}function At(e,t){this.type=e,this.args=t}Tt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,r=1,i=e[0];if("array"===i){if(2<e.length){var o=e[1];if("string"!=typeof o||!(o in It)||"object"===o)return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=It[o],r++}else o=it;if(3<e.length){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);n=e[2],r++}n=lt(o,n)}else n=It[i];for(var a=[];r<e.length;r++){var s=t.parse(e[r],r,it);if(!s)return null;a.push(s)}return new Tt(n,a)},Tt.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!pt(this.type,wt(n)))return n;if(t===this.args.length-1)throw new Ct("Expected value to be of type "+ut(this.type)+", but found "+ut(wt(n))+" instead.")}return null},Tt.prototype.eachChild=function(e){this.args.forEach(e)},Tt.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},Tt.prototype.serialize=function(){var e,t=this.type,n=[t.kind];return"array"===t.kind&&("string"!==(e=t.itemType).kind&&"number"!==e.kind&&"boolean"!==e.kind||(n.push(e.kind),("number"==typeof(t=t.N)||1<this.args.length)&&n.push(t))),n.concat(this.args.map((function(e){return e.serialize()})))},kt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=e.length-1;++o){var a=e[o];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=t.parse(a["font-scale"],1,Qe)))return null;var l=null;if(a["text-font"]&&!(l=t.parse(a["text-font"],1,lt(et))))return null;var u=null;if(a["text-color"]&&!(u=t.parse(a["text-color"],1,nt)))return null;var c=r[r.length-1];c.scale=s,c.font=l,c.textColor=u}else{if(!(c=t.parse(e[o],1,it)))return null;if("string"!==(u=c.type.kind)&&"value"!==u&&"null"!==u&&"resolvedImage"!==u)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:c,scale:null,font:null,textColor:null})}}return new kt(r)},kt.prototype.evaluate=function(e){return new vt(this.sections.map((function(t){var n=t.content.evaluate(e);return wt(n)===st?new yt("",n,null,null,null):new yt(St(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))},kt.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}},kt.prototype.outputDefined=function(){return!1},kt.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}return e},Pt.parse=function(e,t){return 2!==e.length?t.error("Expected two arguments."):(e=t.parse(e[1],1,et))?new Pt(e):t.error("No image name provided.")},Pt.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=_t.fromString(t);return n&&e.availableImages&&(n.available=-1<e.availableImages.indexOf(t)),n},Pt.prototype.eachChild=function(e){e(this.input)},Pt.prototype.outputDefined=function(){return!1},Pt.prototype.serialize=function(){return["image",this.input.serialize()]};var Mt={"to-boolean":tt,"to-color":nt,"to-number":Qe,"to-string":et};function Ot(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}At.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");if(("to-boolean"===(n=e[0])||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var n=Mt[n],r=[],i=1;i<e.length;i++){var o=t.parse(e[i],i,it);if(!o)return null;r.push(o)}return new At(n,r)},At.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t=0,n=this.args;t<n.length;t+=1){var r,i=null;if((r=n[t].evaluate(e))instanceof mt)return r;if("string"==typeof r){var o=e.parseColor(r);if(o)return o}else if(Array.isArray(r)&&!(i=r.length<3||4<r.length?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":bt(r[0],r[1],r[2],r[3])))return new mt(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Ct(i||"Could not parse color from value '"+("string"==typeof r?r:String(JSON.stringify(r)))+"'")}if("number"!==this.type.kind)return"formatted"===this.type.kind?vt.fromString(St(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?_t.fromString(St(this.args[0].evaluate(e))):St(this.args[0].evaluate(e));for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(e)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new Ct("Could not convert "+JSON.stringify(a)+" to number.")},At.prototype.eachChild=function(e){this.args.forEach(e)},At.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},At.prototype.serialize=function(){if("formatted"===this.type.kind)return new kt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Pt(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild((function(t){e.push(t.serialize())})),e};var Lt=["Unknown","Point","LineString","Polygon"];Ot.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ot.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Lt[this.feature.type]:this.feature.type:null},Ot.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ot.prototype.canonicalID=function(){return this.canonical},Ot.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ot.prototype.parseColor=function(e){return this._parseColorCache[e]||(this._parseColorCache[e]=mt.parse(e))};var Rt=function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r};function Dt(e,t,n){this.type=ot,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}Rt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Rt.prototype.eachChild=function(e){this.args.forEach(e)},Rt.prototype.outputDefined=function(){return!1},Rt.prototype.serialize=function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))},Rt.parse=function(e,t){var n=e[0],r=Rt.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,o=(_=Array.isArray(r)?[[r[1],r[2]]]:r.overloads).filter((function(t){return t=t[0],!Array.isArray(t)||t.length===e.length-1})),a=null,s=0,l=o;s<l.length;s+=1){for(var u=(c=l[s])[0],c=c[1],p=(a=new nn(t.registry,t.path,null,t.scope),[]),h=!1,d=1;d<e.length;d++){var f=e[d],m=Array.isArray(u)?u[d-1]:u.type;if(!(m=a.parse(f,1+p.length,m))){h=!0;break}p.push(m)}if(!h)if(Array.isArray(u)&&u.length!==p.length)a.error("Expected "+u.length+" arguments, but found "+p.length+" instead.");else{for(var g=0;g<p.length;g++){var y=Array.isArray(u)?u[g]:u.type,v=p[g];a.concat(g+1).checkSubtype(y,v.type)}if(0===a.errors.length)return new Rt(n,i,c,p)}}if(1===o.length)(r=t.errors).push.apply(r,a.errors);else{for(var _=(o.length?o:_).map((function(e){return e=e=e[0],Array.isArray(e)?"("+e.map(ut).join(", ")+")":"("+ut(e.type)+"...)"})).join(" | "),b=[],x=1;x<e.length;x++){var w=t.parse(e[x],1+b.length);if(!w)return null;b.push(ut(w.type))}t.error("Expected arguments of type "+_+", but found ("+b.join(", ")+") instead.")}return null},Rt.register=function(e,t){for(var n in Rt.definitions=t)e[n]=Rt},Dt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,tt);if(!r)return null;var i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,tt);return i?(e=null,n.locale&&!(e=t.parse(n.locale,1,et))?null:new Dt(r,i,e)):null},Dt.prototype.evaluate=function(e){return new gt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Dt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Dt.prototype.outputDefined=function(){return!1},Dt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var zt=8192;function Nt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Bt(e,t){return!(e[0]<=t[0])&&!(e[2]>=t[2])&&!(e[1]<=t[1])&&!(e[3]>=t[3])}function Ft(e,t){var n=(180+e[0])/360;return e=e[1],e=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360,t=Math.pow(2,t.z),[Math.round(n*t*zt),Math.round(e*t*zt)]}function jt(e,t){for(var n,r,i,o,a=!1,s=0,l=t.length;s<l;s++)for(var u=t[s],c=0,p=u.length;c<p-1;c++){if(n=u[c],r=u[c+1],o=i=void 0,i=e[0]-n[0],o=e[1]-n[1],n=e[0]-r[0],i*(r=e[1]-r[1])-n*o==0&&i*n<=0&&o*r<=0)return;n=e,o=u[c],r=u[c+1],o[1]>n[1]!=r[1]>n[1]&&n[0]<(r[0]-o[0])*(n[1]-o[1])/(r[1]-o[1])+o[0]&&(a=!a)}return a}function Ut(e,t,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=t[0]-n[0];return e=t[1]-n[1],t=r[0]-n[0],e=a*(n=r[1]-n[1])-t*e,0<(o=i*n-t*o)&&e<0||o<0&&0<e}function Vt(e,t,n){for(var r,i,o,a,s,l,u=0,c=n;u<c.length;u+=1)for(var p=c[u],h=0;h<p.length-1;++h)if(r=e,i=t,o=p[h],a=p[h+1],l=s=void 0,s=[i[0]-r[0],i[1]-r[1]],0!=(l=[a[0]-o[0],a[1]-o[1]])[0]*s[1]-l[1]*s[0]&&Ut(r,i,o,a)&&Ut(o,a,r,i))return 1}function qt(e,t){for(var n=0;n<e.length;++n)if(!jt(e[n],t))return;for(var r=0;r<e.length-1;++r)if(Vt(e[r],e[r+1],t))return;return 1}function Ht(e,t,n){for(var r=[],i=0;i<e.length;i++){for(var o=[],a=0;a<e[i].length;a++){var s=Ft(e[i][a],n);Nt(t,s),o.push(s)}r.push(o)}return r}function Wt(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=Ht(e[i],t,n);r.push(o)}return r}function Gt(e,t,n,r){var i,o;(e[0]<n[0]||e[0]>n[2])&&(0===(o=e[0]-n[0]>(i=.5*r)?-r:n[0]-e[0]>i?r:0)&&(o=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=o),Nt(t,e)}function Zt(e,t,n,r){for(var i=Math.pow(2,r.z)*zt,o=[r.x*zt,r.y*zt],a=[],s=0,l=e;s<l.length;s+=1)for(var u=0,c=l[s];u<c.length;u+=1){var p;Gt(p=[(p=c[u]).x+o[0],p.y+o[1]],t,n,i),a.push(p)}return a}function Kt(e,t,n,r){for(var i=Math.pow(2,r.z)*zt,o=[r.x*zt,r.y*zt],a=[],s=0,l=e;s<l.length;s+=1){for(var u=[],c=0,p=l[s];c<p.length;c+=1){var h;Nt(t,h=[(h=p[c]).x+o[0],h.y+o[1]]),u.push(h)}a.push(u)}if(t[2]-t[0]<=i/2){(e=t)[0]=e[1]=1/0,e[2]=e[3]=-1/0;for(var d=0,f=a;d<f.length;d+=1)for(var m=0,g=f[d];m<g.length;m+=1)Gt(g[m],t,n,i)}return a}function Xt(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){var o=Ht(t.coordinates,r,i),a=Zt(e.geometry(),n,r,i);if(!Bt(n,r))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!jt(l[s],o))return!1}if("MultiPolygon"===t.type){var u=Wt(t.coordinates,r,i);if(i=Zt(e.geometry(),n,r,i),!Bt(n,r))return!1;for(var c=0,p=i;c<p.length;c+=1)if(!function(e,t){for(var n=0;n<t.length;n++)if(jt(e,t[n]))return 1}(p[c],u))return!1}return!0}function Yt(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){var o=Ht(t.coordinates,r,i),a=Kt(e.geometry(),n,r,i);if(!Bt(n,r))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!qt(l[s],o))return!1}if("MultiPolygon"===t.type){var u=Wt(t.coordinates,r,i);if(i=Kt(e.geometry(),n,r,i),!Bt(n,r))return!1;for(var c=0,p=i;c<p.length;c+=1)if(!function(e,t){for(var n=0;n<t.length;n++)if(qt(e,t[n]))return 1}(p[c],u))return!1}return!0}var Jt=function(e,t){this.type=tt,this.geojson=e,this.geometries=t};function $t(e){if(e instanceof Rt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Jt)return!1;var t=!0;return e.eachChild((function(e){t&&!$t(e)&&(t=!1)})),t}function Qt(e){if(!(e instanceof Rt&&"feature-state"===e.name)){var t=!0;return e.eachChild((function(e){t&&!Qt(e)&&(t=!1)})),t}}function en(e,t){if(e instanceof Rt&&0<=t.indexOf(e.name))return!1;var n=!0;return e.eachChild((function(e){n&&!en(e,t)&&(n=!1)})),n}function tn(e,t){this.type=t.type,this.name=e,this.boundExpression=t}Jt.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(xt(e[1])){var n=e[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Jt(n,n.features[r].geometry)}else if("Feature"===n.type){if("Polygon"===(e=n.geometry.type)||"MultiPolygon"===e)return new Jt(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Jt(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Jt.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return Xt(e,this.geometries);if("LineString"===e.geometryType())return Yt(e,this.geometries)}return!1},Jt.prototype.eachChild=function(){},Jt.prototype.outputDefined=function(){return!0},Jt.prototype.serialize=function(){return["within",this.geojson]},tn.parse=function(e,t){return 2!==e.length||"string"!=typeof e[1]?t.error("'var' expression requires exactly one string literal argument."):(e=e[1],t.scope.has(e)?new tn(e,t.scope.get(e)):t.error('Unknown variable "'+e+'". Make sure "'+e+'" has been bound in an enclosing "let" expression before using it.',1))},tn.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},tn.prototype.eachChild=function(){},tn.prototype.outputDefined=function(){return!1},tn.prototype.serialize=function(){return["var",this.name]};var nn=function(e,t,n,r,i){void 0===t&&(t=[]),void 0===r&&(r=new Je),void 0===i&&(i=[]),this.registry=e,this.path=t,this.key=t.map((function(e){return"["+e+"]"})).join(""),this.scope=r,this.errors=i,this.expectedType=n};function rn(e,t){for(var n,r,i,o=e.length-1,a=0,s=o;a<=s;)if(r=e[n=Math.floor((a+s)/2)],i=e[n+1],r<=t){if(n===o||t<i)return n;a=n+1}else{if(!(t<r))throw new Ct("Input is not a number.");s=n-1}return 0}nn.prototype.parse=function(e,t,n,r,i){return void 0===i&&(i={}),(t?this.concat(t,n,r):this)._parse(e,i)},nn.prototype._parse=function(e,t){function n(e,t,n){return"assert"===n?new Tt(t,[e]):"coerce"===n?new At(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;if(a=this.registry[r]){var i=a.parse(e,this);if(!i)return null;if(this.expectedType){var o=this.expectedType,a=i.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==a.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(o,a))return null}else i=n(i,o,t.typeAnnotation||"coerce");else i=n(i,o,t.typeAnnotation||"assert")}if(!(i instanceof Et)&&"resolvedImage"!==i.type.kind&&function e(t){if(t instanceof tn)return e(t.boundExpression);if(t instanceof Rt&&"error"===t.name)return!1;if(t instanceof Dt)return!1;if(t instanceof Jt)return!1;var n=t instanceof At||t instanceof Tt,r=!0;return t.eachChild((function(t){r=n?r&&e(t):r&&t instanceof Et})),!!r&&$t(t)&&en(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(i)){t=new Ot;try{i=new Et(i.type,i.evaluate(t))}catch(e){return this.error(e.message),null}}return i}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},nn.prototype.concat=function(e,t,n){return e="number"==typeof e?this.path.concat(e):this.path,n=n?this.scope.concat(n):this.scope,new nn(this.registry,e,t||null,n,this.errors)},nn.prototype.error=function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];var r=""+this.key+t.map((function(e){return"["+e+"]"})).join("");this.errors.push(new Xe(r,e))},nn.prototype.checkSubtype=function(e,t){return(t=pt(e,t))&&this.error(t),t};var on=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=(a=i[r])[0],a=a[1];this.labels.push(o),this.outputs.push(a)}};function an(e,t,n){return e*(1-n)+t*n}on.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var n=t.parse(e[1],1,Qe);if(!n)return null;var r=[],i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(var o=1;o<e.length;o+=2){var a=1===o?-1/0:e[o],s=e[o+1],l=o,u=o+1;if("number"!=typeof a)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);if(!(u=t.parse(s,u,i)))return null;i=i||u.type,r.push([a,u])}return new on(i,n,r)},on.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return(r>=t[i-1]?n[i-1]:n[rn(t,r)]).evaluate(e)},on.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},on.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},on.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)0<t&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var sn=Object.freeze({__proto__:null,number:an,color:function(e,t,n){return new mt(an(e.r,t.r,n),an(e.g,t.g,n),an(e.b,t.b,n),an(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,r){return an(e,t[r],n)}))}}),ln=4/29,un=6/29,cn=3*un*un,pn=un*un*un,hn=Math.PI/180,dn=180/Math.PI;function fn(e){return pn<e?Math.pow(e,1/3):e/cn+ln}function mn(e){return un<e?e*e*e:cn*(e-ln)}function gn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function yn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vn(e){var t=yn(e.r),n=yn(e.g),r=yn(e.b),i=fn((.4124564*t+.3575761*n+.1804375*r)/.95047),o=fn(.2126729*t+.7151522*n+.072175*r);return{l:116*o-16,a:500*(i-o),b:200*(o-fn((.0193339*t+.119192*n+.9503041*r)/1.08883)),alpha:e.a}}function _n(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=+mn(t),n=.95047*mn(n),r=1.08883*mn(r),new mt(gn(3.2404542*n-1.5371385*t-.4985314*r),gn(-.969266*n+1.8760108*t+.041556*r),gn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}var bn={forward:vn,reverse:_n,interpolate:function(e,t,n){return{l:an(e.l,t.l,n),a:an(e.a,t.a,n),b:an(e.b,t.b,n),alpha:an(e.alpha,t.alpha,n)}}},xn={forward:function(e){var t=vn(e),n=t.l,r=t.a,i=t.b;return{h:(t=Math.atan2(i,r)*dn)<0?360+t:t,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*hn,n=e.c;return _n({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:(r=e.h,i=t.h,r+n*(180<(i-=r)||i<-180?i-360*Math.round(i/360):i)),c:an(e.c,t.c,n),l:an(e.l,t.l,n),alpha:an(e.alpha,t.alpha,n)};var r,i}},wn=Object.freeze({__proto__:null,lab:bn,hcl:xn}),Sn=function(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=(l=a[o])[0],l=l[1];this.labels.push(s),this.outputs.push(l)}};function En(e,t,n,r){return r-=n,n=e-n,0==r?0:1===t?n/r:(Math.pow(t,n)-1)/(Math.pow(t,r)-1)}Sn.interpolationFactor=function(e,t,n,i){var o=0;return"exponential"===e.name?o=En(t,e.base,n,i):"linear"===e.name?o=En(t,1,n,i):"cubic-bezier"===e.name&&(e=e.controlPoints,o=new r(e[0],e[1],e[2],e[3]).solve(En(t,1,n,i))),o},Sn.parse=function(e,t){var n=e[0],r=e[1],i=e[2],o=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);if(4!==(a=r.slice(1)).length||a.some((function(e){return"number"!=typeof e||e<0||1<e})))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:a}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,2,Qe)))return null;var s=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=nt:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(var u=0;u<o.length;u+=2){var c=o[u],p=o[u+1],h=u+3,d=u+4;if("number"!=typeof c)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(s.length&&s[s.length-1][0]>=c)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);if(!(d=t.parse(p,d,l)))return null;l=l||d.type,s.push([c,d])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Sn(l,n,r,i,s):t.error("Type "+ut(l)+" is not interpolatable.")},Sn.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);if(r>=t[(o=t.length)-1])return n[o-1].evaluate(e);var i=rn(t,r),o=t[i];return t=t[i+1],o=Sn.interpolationFactor(this.interpolation,r,o,t),t=n[i].evaluate(e),e=n[i+1].evaluate(e),"interpolate"===this.operator?sn[this.type.kind.toLowerCase()](t,e,o):"interpolate-hcl"===this.operator?xn.reverse(xn.interpolate(xn.forward(t),xn.forward(e),o)):bn.reverse(bn.interpolate(bn.forward(t),bn.forward(e),o))},Sn.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},Sn.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},Sn.prototype.serialize=function(){for(var e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var Cn=function(e,t){this.type=e,this.args=t};Cn.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=e.slice(1);o<a.length;o+=1){var s=a[o];if(!(s=t.parse(s,1+i.length,n,void 0,{typeAnnotation:"omit"})))return null;n=n||s.type,i.push(s)}return e=r&&i.some((function(e){return pt(r,e.type)})),new Cn(e?it:n,i)},Cn.prototype.evaluate=function(e){for(var t,n=null,r=0,i=0,o=this.args;i<o.length&&(r++,(n=o[i].evaluate(e))&&n instanceof _t&&!n.available&&(t=t||n.name,n=null,r===this.args.length&&(n=t)),null===n);i+=1);return n},Cn.prototype.eachChild=function(e){this.args.forEach(e)},Cn.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},Cn.prototype.serialize=function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e};var Tn=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};function In(e,t,n){this.type=e,this.index=t,this.input=n}function kn(e,t){this.type=tt,this.needle=e,this.haystack=t}function Pn(e,t,n){this.type=Qe,this.needle=e,this.haystack=t,this.fromIndex=n}function An(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}function Mn(e,t,n){this.type=e,this.branches=t,this.otherwise=n}function On(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}function Ln(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Rn(e,t,n,r){return 0===r.compare(t,n)}function Dn(e,t,n){var r="=="!==e&&"!="!==e;return i.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],o=t.parse(e[1],1,it);if(!o)return null;if(!Ln(n,o.type))return t.concat(1).error('"'+n+"\" comparisons are not supported for type '"+ut(o.type)+"'.");var a=t.parse(e[2],2,it);if(!a)return null;if(!Ln(n,a.type))return t.concat(2).error('"'+n+"\" comparisons are not supported for type '"+ut(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '"+ut(o.type)+"' and '"+ut(a.type)+"'.");if(r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Tt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Tt(o.type,[a]))),n=null,4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(n=t.parse(e[3],3,ot)))return null}return new i(o,a,n)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=wt(o),l=wt(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new Ct('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}return this.collator&&!r&&this.hasUntypedArgument&&(s=wt(o),l=wt(a),"string"!==s.kind||"string"!==l.kind)?t(i,o,a):this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)},i.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t},i;function i(e,t,n){this.type=tt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}}function zn(e,t,n,r,i){this.type=et,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}Tn.prototype.evaluate=function(e){return this.result.evaluate(e)},Tn.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},Tn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],r=1;r<e.length-1;r+=2){var i=e[r];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}var a=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return a?new Tn(n,a):null},Tn.prototype.outputDefined=function(){return this.result.outputDefined()},Tn.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var r=(i=n[t])[0],i=i[1];e.push(r,i.serialize())}return e.push(this.result.serialize()),e},In.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Qe);return e=t.parse(e[2],2,lt(t.expectedType||it)),n&&e?new In((t=e.type).itemType,n,e):null},In.prototype.evaluate=function(e){var t=this.index.evaluate(e);if(e=this.input.evaluate(e),t<0)throw new Ct("Array index out of bounds: "+t+" < 0.");if(t>=e.length)throw new Ct("Array index out of bounds: "+t+" > "+(e.length-1)+".");if(t!==Math.floor(t))throw new Ct("Array index must be an integer, but found "+t+" instead.");return e[t]},In.prototype.eachChild=function(e){e(this.index),e(this.input)},In.prototype.outputDefined=function(){return!1},In.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]},kn.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,it);return e=t.parse(e[2],2,it),n&&e?ht(n.type,[tt,et,Qe,$e,it])?new kn(n,e):t.error("Expected first argument to be of type boolean, string, number or null, but found "+ut(n.type)+" instead"):null},kn.prototype.evaluate=function(e){var t=this.needle.evaluate(e);if(!(e=this.haystack.evaluate(e)))return!1;if(!dt(t,["boolean","string","number","null"]))throw new Ct("Expected first argument to be of type boolean, string, number or null, but found "+ut(wt(t))+" instead.");if(!dt(e,["string","array"]))throw new Ct("Expected second argument to be of type array or string, but found "+ut(wt(e))+" instead.");return 0<=e.indexOf(t)},kn.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},kn.prototype.outputDefined=function(){return!0},kn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]},Pn.parse=function(e,t){if(e.length<=2||5<=e.length)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,it),r=t.parse(e[2],2,it);return n&&r?ht(n.type,[tt,et,Qe,$e,it])?4!==e.length?new Pn(n,r):(e=t.parse(e[3],3,Qe))?new Pn(n,r,e):null:t.error("Expected first argument to be of type boolean, string, number or null, but found "+ut(n.type)+" instead"):null},Pn.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!dt(t,["boolean","string","number","null"]))throw new Ct("Expected first argument to be of type boolean, string, number or null, but found "+ut(wt(t))+" instead.");if(!dt(n,["string","array"]))throw new Ct("Expected second argument to be of type array or string, but found "+ut(wt(n))+" instead.");return this.fromIndex?(e=this.fromIndex.evaluate(e),n.indexOf(t,e)):n.indexOf(t)},Pn.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Pn.prototype.outputDefined=function(){return!1},Pn.prototype.serialize=function(){if(null==this.fromIndex||void 0===this.fromIndex)return["index-of",this.needle.serialize(),this.haystack.serialize()];var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]},An.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var i={},o=[],a=2;a<e.length-1;a+=2){var s=e[a],l=e[a+1];Array.isArray(s)||(s=[s]);var u=t.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,wt(h)))return null}else n=wt(h);if(void 0!==i[String(h)])return u.error("Branch labels must be unique.");i[String(h)]=o.length}if(!(l=t.parse(l,a,r)))return null;r=r||l.type,o.push(l)}var d=t.parse(e[1],1,it);if(!d)return null;var f=t.parse(e[e.length-1],e.length-1,r);return!f||"value"!==d.type.kind&&t.concat(1).checkSubtype(n,d.type)?null:new An(n,r,d,i,o,f)},An.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(wt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},An.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},An.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()},An.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(p=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[p][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=n;l<u.length;l+=1){var c,p=(c=u[l])[0];1===(c=c[1]).length?t.push(s(c[0])):t.push(c.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t},Mn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],i=1;i<e.length-1;i+=2){var o=t.parse(e[i],i,tt);if(!o)return null;var a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=t.parse(e[e.length-1],e.length-1,n);return s?new Mn(n,r,s):null},Mn.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=(i=n[t])[0],i=i[1];if(r.evaluate(e))return i.evaluate(e)}return this.otherwise.evaluate(e)},Mn.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=(i=n[t])[0],i=i[1];e(r),e(i)}e(this.otherwise)},Mn.prototype.outputDefined=function(){return this.branches.every((function(e){return e[0],e[1].outputDefined()}))&&this.otherwise.outputDefined()},Mn.prototype.serialize=function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e},On.parse=function(e,t){if(e.length<=2||5<=e.length)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,it),r=t.parse(e[2],2,Qe);return n&&r?ht(n.type,[lt(it),et,it])?4!==e.length?new On(n.type,n,r):(e=t.parse(e[3],3,Qe))?new On(n.type,n,r,e):null:t.error("Expected first argument to be of type array or string, but found "+ut(n.type)+" instead"):null},On.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!dt(t,["string","array"]))throw new Ct("Expected first argument to be of type array or string, but found "+ut(wt(t))+" instead.");return this.endIndex?(e=this.endIndex.evaluate(e),t.slice(n,e)):t.slice(n)},On.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},On.prototype.outputDefined=function(){return!1},On.prototype.serialize=function(){if(null==this.endIndex||void 0===this.endIndex)return["slice",this.input.serialize(),this.beginIndex.serialize()];var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]};var Nn=Dn("==",(function(e,t,n){return t===n}),Rn),Bn=Dn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!Rn(0,t,n,r)})),Fn=Dn("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),jn=Dn(">",(function(e,t,n){return n<t}),(function(e,t,n,r){return 0<r.compare(t,n)})),Un=Dn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Vn=Dn(">=",(function(e,t,n){return n<=t}),(function(e,t,n,r){return 0<=r.compare(t,n)}));function qn(e){this.type=Qe,this.input=e}zn.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Qe);if(!n)return null;var r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=t.parse(r.locale,1,et)))return null;var o=null;if(r.currency&&!(o=t.parse(r.currency,1,et)))return null;var a=null;return r["min-fraction-digits"]&&!(a=t.parse(r["min-fraction-digits"],1,Qe))?null:(e=null,r["max-fraction-digits"]&&!(e=t.parse(r["max-fraction-digits"],1,Qe))?null:new zn(n,i,o,a,e))},zn.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},zn.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},zn.prototype.outputDefined=function(){return!1},zn.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]},qn.parse=function(e,t){return 2!==e.length?t.error("Expected 1 argument, but found "+(e.length-1)+" instead."):(e=t.parse(e[1],1))?"array"!==e.type.kind&&"string"!==e.type.kind&&"value"!==e.type.kind?t.error("Expected argument of type string or array, but found "+ut(e.type)+" instead."):new qn(e):null},qn.prototype.evaluate=function(e){if("string"==typeof(e=this.input.evaluate(e)))return e.length;if(Array.isArray(e))return e.length;throw new Ct("Expected value to be of type string or array, but found "+ut(wt(e))+" instead.")},qn.prototype.eachChild=function(e){e(this.input)},qn.prototype.outputDefined=function(){return!1},qn.prototype.serialize=function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e};var Hn={"==":Nn,"!=":Bn,">":jn,"<":Fn,">=":Vn,"<=":Un,array:Tt,at:In,boolean:Tt,case:Mn,coalesce:Cn,collator:Dt,format:kt,image:Pt,in:kn,"index-of":Pn,interpolate:Sn,"interpolate-hcl":Sn,"interpolate-lab":Sn,length:qn,let:Tn,literal:Et,match:An,number:Tt,"number-format":zn,object:Tt,slice:On,step:on,string:Tt,"to-boolean":At,"to-color":At,"to-number":At,"to-string":At,var:tn,within:Jt};function Wn(e,t){var n=t[0],r=t[1],i=t[2];if(t=t[3],e=bt(n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e),t=t?t.evaluate(e):1))throw new Ct(e);return new mt(n/255*t,r/255*t,i/255*t,t)}function Gn(e,t){return void 0===(e=t[e])?null:e}function Zn(e){return{type:e}}function Kn(e){return{result:"success",value:e}}function Xn(e){return{result:"error",value:e}}function Yn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Jn(e){return e.expression&&-1<e.expression.parameters.indexOf("zoom")}function $n(e){return e.expression&&e.expression.interpolated}function Qn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function er(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function tr(e){return e}function nr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function rr(e,t,n,r,i){return nr(typeof n===i?r[n]:void 0,e.default,t.default)}function ir(e,t,n){return"number"!==Qn(n)?nr(e.default,t.default):1===(t=e.stops.length)||n<=e.stops[0][0]?e.stops[0][1]:n>=e.stops[t-1][0]?e.stops[t-1][1]:(n=rn(e.stops.map((function(e){return e[0]})),n),e.stops[n][1])}function or(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==Qn(n))return nr(e.default,t.default);if(1===(o=e.stops.length))return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[o-1][0])return e.stops[o-1][1];var i,o=rn(e.stops.map((function(e){return e[0]})),n),a=function(e,t,n,r){return r-=n,n=e-n,0==r?0:1===t?n/r:(Math.pow(t,n)-1)/(Math.pow(t,r)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1],u=sn[t.type]||tr;return e.colorSpace&&"rgb"!==e.colorSpace&&(i=wn[e.colorSpace],u=function(e,t){return i.reverse(i.interpolate(i.forward(e),i.forward(t),a))}),"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return u(n,r,a)}}:u(s,l,a)}function ar(e,t,n){return"color"===t.type?n=mt.parse(n):"formatted"===t.type?n=vt.fromString(n.toString()):"resolvedImage"===t.type?n=_t.fromString(n.toString()):Qn(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),nr(n,e.default,t.default)}Rt.register(Hn,{error:[{kind:"error"},[et],function(e,t){throw new Ct((t=t[0]).evaluate(e))}],typeof:[et,[it],function(e,t){return ut(wt(t[0].evaluate(e)))}],"to-rgba":[lt(Qe,4),[nt],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[nt,[Qe,Qe,Qe],Wn],rgba:[nt,[Qe,Qe,Qe,Qe],Wn],has:{type:tt,overloads:[[[et],function(e,t){return t[0].evaluate(e)in e.properties()}],[[et,rt],function(e,t){var n=t[0];return t=t[1],n.evaluate(e)in t.evaluate(e)}]]},get:{type:it,overloads:[[[et],function(e,t){return Gn(t[0].evaluate(e),e.properties())}],[[et,rt],function(e,t){var n=t[0];return t=t[1],Gn(n.evaluate(e),t.evaluate(e))}]]},"feature-state":[it,[et],function(e,t){return Gn(t[0].evaluate(e),e.featureState||{})}],properties:[rt,[],function(e){return e.properties()}],"geometry-type":[et,[],function(e){return e.geometryType()}],id:[it,[],function(e){return e.id()}],zoom:[Qe,[],function(e){return e.globals.zoom}],"heatmap-density":[Qe,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Qe,[],function(e){return e.globals.lineProgress||0}],accumulated:[it,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Qe,Zn(Qe),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[Qe,Zn(Qe),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:Qe,overloads:[[[Qe,Qe],function(e,t){var n=t[0];return t=t[1],n.evaluate(e)-t.evaluate(e)}],[[Qe],function(e,t){return-t[0].evaluate(e)}]]},"/":[Qe,[Qe,Qe],function(e,t){var n=t[0];return t=t[1],n.evaluate(e)/t.evaluate(e)}],"%":[Qe,[Qe,Qe],function(e,t){var n=t[0];return t=t[1],n.evaluate(e)%t.evaluate(e)}],ln2:[Qe,[],function(){return Math.LN2}],pi:[Qe,[],function(){return Math.PI}],e:[Qe,[],function(){return Math.E}],"^":[Qe,[Qe,Qe],function(e,t){var n=t[0];return t=t[1],Math.pow(n.evaluate(e),t.evaluate(e))}],sqrt:[Qe,[Qe],function(e,t){return t=t[0],Math.sqrt(t.evaluate(e))}],log10:[Qe,[Qe],function(e,t){return t=t[0],Math.log(t.evaluate(e))/Math.LN10}],ln:[Qe,[Qe],function(e,t){return t=t[0],Math.log(t.evaluate(e))}],log2:[Qe,[Qe],function(e,t){return t=t[0],Math.log(t.evaluate(e))/Math.LN2}],sin:[Qe,[Qe],function(e,t){return t=t[0],Math.sin(t.evaluate(e))}],cos:[Qe,[Qe],function(e,t){return t=t[0],Math.cos(t.evaluate(e))}],tan:[Qe,[Qe],function(e,t){return t=t[0],Math.tan(t.evaluate(e))}],asin:[Qe,[Qe],function(e,t){return t=t[0],Math.asin(t.evaluate(e))}],acos:[Qe,[Qe],function(e,t){return t=t[0],Math.acos(t.evaluate(e))}],atan:[Qe,[Qe],function(e,t){return t=t[0],Math.atan(t.evaluate(e))}],min:[Qe,Zn(Qe),function(e,t){return Math.min.apply(Math,t.map((function(t){return t.evaluate(e)})))}],max:[Qe,Zn(Qe),function(e,t){return Math.max.apply(Math,t.map((function(t){return t.evaluate(e)})))}],abs:[Qe,[Qe],function(e,t){return t=t[0],Math.abs(t.evaluate(e))}],round:[Qe,[Qe],function(e,t){return(e=t[0].evaluate(e))<0?-Math.round(-e):Math.round(e)}],floor:[Qe,[Qe],function(e,t){return t=t[0],Math.floor(t.evaluate(e))}],ceil:[Qe,[Qe],function(e,t){return t=t[0],Math.ceil(t.evaluate(e))}],"filter-==":[tt,[et,it],function(e,t){var n=t[0];return t=t[1],e.properties()[n.value]===t.value}],"filter-id-==":[tt,[it],function(e,t){return t=t[0],e.id()===t.value}],"filter-type-==":[tt,[et],function(e,t){return t=t[0],e.geometryType()===t.value}],"filter-<":[tt,[et,it],function(e,t){var n=t[0];return t=t[1],typeof(n=e.properties()[n.value])==typeof(t=t.value)&&n<t}],"filter-id-<":[tt,[it],function(e,t){return t=t[0],typeof(e=e.id())==typeof(t=t.value)&&e<t}],"filter->":[tt,[et,it],function(e,t){var n=t[0];return t=t[1],typeof(n=e.properties()[n.value])==typeof(t=t.value)&&t<n}],"filter-id->":[tt,[it],function(e,t){return t=t[0],typeof(e=e.id())==typeof(t=t.value)&&t<e}],"filter-<=":[tt,[et,it],function(e,t){var n=t[0];return t=t[1],typeof(n=e.properties()[n.value])==typeof(t=t.value)&&n<=t}],"filter-id-<=":[tt,[it],function(e,t){return t=t[0],typeof(e=e.id())==typeof(t=t.value)&&e<=t}],"filter->=":[tt,[et,it],function(e,t){var n=t[0];return t=t[1],typeof(n=e.properties()[n.value])==typeof(t=t.value)&&t<=n}],"filter-id->=":[tt,[it],function(e,t){return t=t[0],typeof(e=e.id())==typeof(t=t.value)&&t<=e}],"filter-has":[tt,[it],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[tt,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[tt,[lt(et)],function(e,t){return 0<=t[0].value.indexOf(e.geometryType())}],"filter-id-in":[tt,[lt(it)],function(e,t){return 0<=t[0].value.indexOf(e.id())}],"filter-in-small":[tt,[et,lt(it)],function(e,t){var n=t[0];return 0<=t[1].value.indexOf(e.properties()[n.value])}],"filter-in-large":[tt,[et,lt(it)],function(e,t){var n=t[0];return t=t[1],function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=1+i}return!1}(e.properties()[n.value],t.value,0,t.value.length-1)}],all:{type:tt,overloads:[[[tt,tt],function(e,t){var n=t[0];return t=t[1],n.evaluate(e)&&t.evaluate(e)}],[Zn(tt),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:tt,overloads:[[[tt,tt],function(e,t){var n=t[0];return t=t[1],n.evaluate(e)||t.evaluate(e)}],[Zn(tt),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[tt,[tt],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[tt,[et],function(e,t){var n=t[0];return!(t=e.globals&&e.globals.isSupportedScript)||t(n.evaluate(e))}],upcase:[et,[et],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[et,[et],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[et,Zn(it),function(e,t){return t.map((function(t){return St(t.evaluate(e))})).join("")}],"resolved-locale":[et,[ot],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var sr=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Ot,this._defaultValue=t?"color"===(e=t).type&&er(e.default)?new mt(0,0,0,0):"color"===e.type?mt.parse(e.default)||null:void 0===e.default?null:e.default:null,this._enumValues=t&&"enum"===t.type?t.values:null};function lr(e){return Array.isArray(e)&&0<e.length&&"string"==typeof e[0]&&e[0]in Hn}function ur(e,t){var n,r;return(e=(r=new nn(Hn,[],t?(n={color:nt,string:et,number:Qe,enum:et,boolean:tt,formatted:at,resolvedImage:st},"array"!==(r=t).type?n[r.type]:lt(n[r.value]||it,r.length)):void 0)).parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0))?Kn(new sr(e,t)):Xn(r.errors)}function cr(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Qt(t.expression)}function pr(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Qt(t.expression),this.interpolationType=r}function hr(e,t){if("error"===(e=ur(e,t)).result)return e;var n=e.value.expression,r=$t(n);if(!r&&!Yn(t))return Xn([new Xe("","data expressions not supported")]);var i=en(n,["zoom"]);return i||Jn(t)?(n=function e(t){var n=null;if(t instanceof Tn)n=e(t.result);else if(t instanceof Cn)for(var r=0,i=t.args;r<i.length;r+=1){var o=i[r];if(n=e(o))break}else(t instanceof on||t instanceof Sn)&&t.input instanceof Rt&&"zoom"===t.input.name&&(n=t);return n instanceof Xe||t.eachChild((function(t){(t=e(t))instanceof Xe?n=t:!n&&t?n=new Xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&t&&n!==t&&(n=new Xe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n),n||i?n instanceof Xe?Xn([n]):n instanceof Sn&&!$n(t)?Xn([new Xe("",'"interpolate" expressions cannot be used with this property')]):n?(t=n instanceof Sn?n.interpolation:void 0,Kn(new pr(r?"camera":"composite",e.value,n.labels,t))):Kn(new cr(r?"constant":"source",e.value)):Xn([new Xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])):Xn([new Xe("","zoom expressions not supported")])}sr.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,i,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},sr.prototype.evaluate=function(e,t,n,r,i,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Ct("Expected value to be one of "+Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}},cr.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)},cr.prototype.evaluate=function(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)},pr.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)},pr.prototype.evaluate=function(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)},pr.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?Sn.interpolationFactor(this.interpolationType,e,t,n):0};var dr=function(e,t){this._parameters=e,this._specification=t,We(this,function e(t,n){var r,i="color"===n.type,o=t.stops&&"object"==typeof t.stops[0][0],a=o||void 0!==t.property,s=o||!a;if(a=t.type||($n(n)?"exponential":"interval"),i&&((t=We({},t)).stops&&(t.stops=t.stops.map((function(e){return[e[0],mt.parse(e[1])]}))),t.default?t.default=mt.parse(t.default):t.default=mt.parse(n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!wn[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===a)l=or;else if("interval"===a)l=ir;else if("categorical"===a){for(var l=rr,u=Object.create(null),c=0,p=t.stops;c<p.length;c+=1){var h=p[c];u[h[0]]=h[1]}r=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error('Unknown function type "'+a+'"');l=ar}if(o){for(var d={},f=[],m=0;m<t.stops.length;m++){var g=t.stops[m],y=g[0].zoom;void 0===d[y]&&(d[y]={zoom:y,type:t.type,property:t.property,default:t.default,stops:[]},f.push(y)),d[y].stops.push([g[0].value,g[1]])}for(var v=[],_=0,b=f;_<b.length;_+=1){var x=b[_];v.push([d[x].zoom,e(d[x],n)])}return{kind:"composite",interpolationType:o={name:"linear"},interpolationFactor:Sn.interpolationFactor.bind(void 0,o),zoomStops:v.map((function(e){return e[0]})),evaluate:function(e,r){return e=e.zoom,or({stops:v,base:t.base},n,e).evaluate(e,r)}}}return s?{kind:"camera",interpolationType:a="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null,interpolationFactor:Sn.interpolationFactor.bind(void 0,a),zoomStops:t.stops.map((function(e){return e[0]})),evaluate:function(e){return e=e.zoom,l(t,n,e,u,r)}}:{kind:"source",evaluate:function(e,i){return void 0===(i=i&&i.properties?i.properties[t.property]:void 0)?nr(t.default,n.default):l(t,n,i,u,r)}}}(this._parameters,this._specification))};function fr(e){var t,n,r=e.key,i=e.value,o=e.valueSpec||{},a=e.objectElementValidators||{},s=e.style,l=e.styleSpec,u=[];if("object"!==(e=Qn(i)))return[new qe(r,i,"object expected, "+e+" found")];for(t in i){var c=t.split(".")[0],p=o[c]||o["*"],h=void 0;if(a[c])h=a[c];else if(o[c])h=Fr;else if(a["*"])h=a["*"];else{if(!o["*"]){u.push(new qe(r,i[t],'unknown property "'+t+'"'));continue}h=Fr}u=u.concat(h({key:(r&&r+".")+t,value:i[t],valueSpec:p,style:s,styleSpec:l,object:i,objectKey:t},i))}for(n in o)a[n]||o[n].required&&void 0===o[n].default&&void 0===i[n]&&u.push(new qe(r,i,'missing required property "'+n+'"'));return u}function mr(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Fr;if("array"!==Qn(t))return[new qe(o,t,"array expected, "+Qn(t)+" found")];if(n.length&&t.length!==n.length)return[new qe(o,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new qe(o,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===Qn(n.value)&&(s=n.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:i,key:o+"["+u+"]"}));return l}function gr(e){var t=e.key,n=e.value,r=e.valueSpec;return"number"!==(e="number"===(e=Qn(n))&&n!=n?"NaN":e)?[new qe(t,n,"number expected, "+e+" found")]:"minimum"in r&&n<r.minimum?[new qe(t,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new qe(t,n,n+" is greater than the maximum value "+r.maximum)]:[]}function yr(e){var t,n,r,i=e.valueSpec,o=Ge(e.value.type),a={},s="categorical"!==o&&void 0===e.value.property,l=!s,u="array"===Qn(e.value.stops)&&"array"===Qn(e.value.stops[0])&&"object"===Qn(e.value.stops[0][0]),c=fr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new qe(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(mr({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===Qn(n)&&0===n.length&&t.push(new qe(e.key,n,"array must have at least one stop")),t},default:function(e){return Fr({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&s&&c.push(new qe(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||c.push(new qe(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!$n(e.valueSpec)&&c.push(new qe(e.key,e.value,"exponential functions not supported")),8<=e.styleSpec.$version&&(l&&!Yn(e.valueSpec)?c.push(new qe(e.key,e.value,"property functions not supported")):s&&!Jn(e.valueSpec)&&c.push(new qe(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==e.value.property||c.push(new qe(e.key,e.value,'"property" property is required')),c;function p(e){var t=[],o=e.value,s=e.key;if("array"!==Qn(o))return[new qe(s,o,"array expected, "+Qn(o)+" found")];if(2!==o.length)return[new qe(s,o,"array length 2 expected, length "+o.length+" found")];if(u){if("object"!==Qn(o[0]))return[new qe(s,o,"object expected, "+Qn(o[0])+" found")];if(void 0===o[0].zoom)return[new qe(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new qe(s,o,"object stop key must have value")];if(r&&r>Ge(o[0].zoom))return[new qe(s,o[0].zoom,"stop zoom values must appear in ascending order")];Ge(o[0].zoom)!==r&&(r=Ge(o[0].zoom),n=void 0,a={}),t=t.concat(fr({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:gr,value:h}}))}else t=t.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},o));return lr(Ze(o[1]))?t.concat([new qe(s+"[1]",o[1],"expressions are not allowed in function stops.")]):t.concat(Fr({key:s+"[1]",value:o[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function h(e,r){var s=Qn(e.value),l=Ge(e.value);if(r=null!==e.value?e.value:r,t){if(s!==t)return[new qe(e.key,r,s+" stop domain type must match previous stop domain type "+t)]}else t=s;return"number"!==s&&"string"!==s&&"boolean"!==s?[new qe(e.key,r,"stop domain value must be a number, string, or boolean")]:"number"===s||"categorical"===o?"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==n&&l<n?[new qe(e.key,r,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in a?[new qe(e.key,r,"stop domain values must be unique")]:(a[l]=!0,[])):[new qe(e.key,r,"integer expected, found "+l)]:(s="number expected, "+s+" found",Yn(i)&&void 0===o&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(e.key,r,s)])}}function vr(e){var t=("property"===e.expressionContext?hr:ur)(Ze(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new qe(""+e.key+t.key,e.value,t.message)}));if(t=t.value.expression||t.value._styleExpression.expression,"property"===e.expressionContext&&"text-font"===e.propertyKey&&!t.outputDefined())return[new qe(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Qt(t))return[new qe(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Qt(t))return[new qe(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!en(t,["zoom","feature-state"]))return[new qe(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!$t(t))return[new qe(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _r(e){var t=e.key,n=e.value,r=e.valueSpec;return e=[],Array.isArray(r.values)?-1===r.values.indexOf(Ge(n))&&e.push(new qe(t,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(Ge(n))&&e.push(new qe(t,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),e}function br(e){if(!0===e||!1===e)return 1;if(Array.isArray(e)&&0!==e.length)switch(e[0]){case"has":return 2<=e.length&&"$id"!==e[1]&&"$type"!==e[1];case"in":return 3<=e.length&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var r=n[t];if(!br(r)&&"boolean"!=typeof r)return}return 1;default:return 1}}dr.deserialize=function(e){return new dr(e._parameters,e._specification)};var xr={type:"boolean",default:!(dr.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function wr(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};var t=ur(e=br(e)?e:Er(e),xr);if("error"===t.result)throw new Error(t.value.map((function(e){return e.key+": "+e.message})).join(", "));return{filter:function(e,n,r){return t.value.evaluate(e,n,{},r)},needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var n=1;n<t.length;n++)if(e(t[n]))return!0;return!1}(e)}}function Sr(e,t){return e<t?-1:t<e?1:0}function Er(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Cr(e[1],e[2],"=="):"!="===n?kr(Cr(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Cr(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(Er))):"all"===n?["all"].concat(e.slice(1).map(Er)):"none"===n?["all"].concat(e.slice(1).map(Er).map(kr)):"in"===n?Tr(e[1],e.slice(2)):"!in"===n?kr(Tr(e[1],e.slice(2))):"has"===n?Ir(e[1]):"!has"===n?kr(Ir(e[1])):"within"!==n||e}function Cr(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function Tr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return 200<t.length&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Sr)]]:["filter-in-small",e,["literal",t]]}}function Ir(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function kr(e){return["!",e]}function Pr(e){return br(Ze(e.value))?vr(We({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var n=t.value,r=t.key;if("array"!==Qn(n))return[new qe(r,n,"array expected, "+Qn(n)+" found")];var i,o=t.styleSpec,a=[];if(n.length<1)return[new qe(r,n,"filter array must have at least 1 element")];switch(a=a.concat(_r({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:t.style,styleSpec:t.styleSpec})),Ge(n[0])){case"<":case"<=":case">":case">=":2<=n.length&&"$type"===Ge(n[1])&&a.push(new qe(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new qe(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":2<=n.length&&"string"!==(i=Qn(n[1]))&&a.push(new qe(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=Qn(n[s]),"$type"===Ge(n[1])?a=a.concat(_r({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new qe(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)a=a.concat(e({key:r+"["+l+"]",value:n[l],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Qn(n[1]),2!==n.length?a.push(new qe(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new qe(r+"[1]",n[1],"string expected, "+i+" found"));break;case"within":i=Qn(n[1]),2!==n.length?a.push(new qe(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==i&&a.push(new qe(r+"[1]",n[1],"object expected, "+i+" found"))}return a}(e)}function Ar(e,t){var n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[t+"_"+e.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Fr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});if(!(s=e.valueSpec||s[a]))return[new qe(n,o,'unknown property "'+a+'"')];if("string"===Qn(o)&&Yn(s)&&!s.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new qe(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var u=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&u.push(new qe(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&er(Ze(o))&&"identity"===Ge(o.type)&&u.push(new qe(n,o,'"text-font" does not support identity functions'))),u.concat(Fr({key:e.key,value:o,valueSpec:s,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Mr(e){return Ar(e,"paint")}function Or(e){return Ar(e,"layout")}function Lr(e){var t=[],n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new qe(r,n,'either "type" or "ref" is required'));var a,s,l,u=Ge(n.type),c=Ge(n.ref);if(n.id)for(var p=Ge(n.id),h=0;h<e.arrayIndex;h++){var d=i.layers[h];Ge(d.id)===p&&t.push(new qe(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+d.id.__line__))}return"ref"in n?(["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new qe(r,n[e],'"'+e+'" is prohibited for ref layers'))})),i.layers.forEach((function(e){Ge(e.id)===c&&(a=e)})),a?a.ref?t.push(new qe(r,n.ref,"ref cannot reference another ref layer")):u=Ge(a.type):t.push(new qe(r,n.ref,'ref layer "'+c+'" not found'))):"background"!==u&&(n.source?(l=(s=i.sources&&i.sources[n.source])&&Ge(s.type),s?"vector"===l&&"raster"===u?t.push(new qe(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===l&&"raster"!==u?t.push(new qe(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==l||n["source-layer"]?"raster-dem"===l&&"hillshade"!==u?t.push(new qe(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==u||!n.paint||!n.paint["line-gradient"]||"geojson"===l&&s.lineMetrics||t.push(new qe(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new qe(r,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new qe(r,n.source,'source "'+n.source+'" not found'))):t.push(new qe(r,n,'missing required property "source"'))),t=t.concat(fr({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Fr({key:r+".type",value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:Pr,layout:function(e){return fr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Or(We({layerType:u},e))}}})},paint:function(e){return fr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Mr(We({layerType:u},e))}}})}}}))}function Rr(e){var t=e.value,n=e.key;return"string"!==(e=Qn(t))?[new qe(n,t,"string expected, "+e+" found")]:[]}var Dr={promoteId:function(e){var t=e.key,n=e.value;if("string"===Qn(n))return Rr({key:t,value:n});var r,i=[];for(r in n)i.push.apply(i,Rr({key:t+"."+r,value:n[r]}));return i}};function zr(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new qe(n,t,'"type" is required')];var o,a=Ge(t.type);switch(a){case"vector":case"raster":case"raster-dem":return fr({key:n,value:t,valueSpec:r["source_"+a.replace("-","_")],style:e.style,styleSpec:r,objectElementValidators:Dr});case"geojson":if(o=fr({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Dr}),t.cluster)for(var s in t.clusterProperties){var l=(u=t.clusterProperties[s])[0],u=u[1];l="string"==typeof l?[l,["accumulated"],["get",s]]:l,o.push.apply(o,vr({key:n+"."+s+".map",value:u,expressionContext:"cluster-map"})),o.push.apply(o,vr({key:n+"."+s+".reduce",value:l,expressionContext:"cluster-reduce"}))}return o;case"video":return fr({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return fr({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new qe(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return _r({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Nr(e){var t,n=e.value,r=e.styleSpec,i=r.light,o=e.style,a=[];if(e=Qn(n),void 0===n)return a;if("object"!==e)return a.concat([new qe("light",n,"object expected, "+e+" found")]);for(t in n){var s=t.match(/^(.*)-transition$/);a=s&&i[s[1]]&&i[s[1]].transition?a.concat(Fr({key:t,value:n[t],valueSpec:r.transition,style:o,styleSpec:r})):i[t]?a.concat(Fr({key:t,value:n[t],valueSpec:i[t],style:o,styleSpec:r})):a.concat([new qe(t,n[t],'unknown property "'+t+'"')])}return a}var Br={"*":function(){return[]},array:mr,boolean:function(e){var t=e.value,n=e.key;return"boolean"!==(e=Qn(t))?[new qe(n,t,"boolean expected, "+e+" found")]:[]},number:gr,color:function(e){var t=e.key,n=e.value;return"string"!==(e=Qn(n))?[new qe(t,n,"color expected, "+e+" found")]:null===ft(n)?[new qe(t,n,'color expected, "'+n+'" found')]:[]},constants:He,enum:_r,filter:Pr,function:yr,layer:Lr,object:fr,source:zr,light:Nr,string:Rr,formatted:function(e){return 0===Rr(e).length?[]:vr(e)},resolvedImage:function(e){return 0===Rr(e).length?[]:vr(e)}};function Fr(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&er(Ge(t))?yr(e):n.expression&&lr(Ze(t))?vr(e):n.type&&Br[n.type]?Br[n.type](e):fr(We({},e,{valueSpec:n.type?r[n.type]:n}))}function jr(e){var t=e.value,n=e.key;return(e=Rr(e)).length||(-1===t.indexOf("{fontstack}")&&e.push(new qe(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&e.push(new qe(n,t,'"glyphs" url must include a "{range}" token'))),e}function Ur(e,t){var n=(n=[]).concat(Fr({key:"",value:e,valueSpec:(t=void 0===t?Ve:t).$root,styleSpec:t,style:e,objectElementValidators:{glyphs:jr,"*":function(){return[]}}}));return Vr(n=e.constants?n.concat(He({key:"constants",value:e.constants,style:e,styleSpec:t})):n)}function Vr(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function qr(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return Vr(e.apply(this,t))}}Ur.source=qr(zr),Ur.light=qr(Nr),Ur.layer=qr(Lr),Ur.filter=qr(Pr),Ur.paintProperty=qr(Mr),Ur.layoutProperty=qr(Or);var Hr=Ur,Wr=Hr.light,Gr=Hr.paintProperty,Zr=Hr.layoutProperty;function Kr(e,t){var n=!1;if(t&&t.length)for(var r=0,i=t;r<i.length;r+=1){var o=i[r];e.fire(new Fe(new Error(o.message))),n=!0}return n}var Xr=Jr,Yr=3;function Jr(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],n=i[2],this.d=t+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[Yr+o],s=i[Yr+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[Yr+r.length],u=i[Yr+r.length+1];this.keys=i.subarray(l,u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0,t=n/t*e,this.min=-t,this.max=e+t}Jr.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Jr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Jr.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Jr.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;return e<=o&&t<=o&&a<=n&&a<=r&&!i?Array.prototype.slice.call(this.keys):(a=[],this._forEachCell(e,t,n,r,this._queryCell,a,{},i),a)},Jr.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var h,d=l[p];void 0===a[d]&&(h=4*d,(s?s(c[0+h],c[1+h],c[2+h],c[3+h]):e<=c[2+h]&&t<=c[3+h]&&n>=c[0+h]&&r>=c[1+h])?(a[d]=!0,o.push(u[d])):a[d]=!1)}},Jr.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(n),p=this._convertToCellCoord(r),h=l;h<=c;h++)for(var d=u;d<=p;d++){var f=this.d*d+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(d),this._convertFromCellCoord(h+1),this._convertFromCellCoord(d+1)))&&i.call(this,e,t,n,r,f,o,a,s))return}},Jr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Jr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Jr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Yr+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[Yr+a]=o,i.set(s,o),o+=s.length}return i[Yr+e.length]=o,i.set(this.keys,o),o+=this.keys.length,i[Yr+e.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var $r,Qr=s.ImageData,ei=s.ImageBitmap,ti={};function ni(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),ti[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for($r in ni("Object",Object),Xr.serialize=function(e,t){return e=e.toArrayBuffer(),t&&t.push(e),{buffer:e}},Xr.deserialize=function(e){return new Xr(e.buffer)},ni("Grid",Xr),ni("Color",mt),ni("Error",Error),ni("ResolvedImage",_t),ni("StylePropertyFunction",dr),ni("StyleExpression",sr,{omit:["_evaluator"]}),ni("ZoomDependentExpression",pr),ni("ZoomConstantExpression",cr),ni("CompoundExpression",Rt,{omit:["_evaluate"]}),Hn)Hn[$r]._classRegistryKey||ni("Expression_"+$r,Hn[$r]);function ri(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function ii(e){return ei&&e instanceof ei}function oi(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(ri(e)||ii(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof Qr)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],i=0,o=e;i<o.length;i+=1){var a=o[i];r.push(oi(a,t))}return r}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);var s=(n=e.constructor)._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l,u=n.serialize?n.serialize(e,t):{};if(!n.serialize){for(var c in e)e.hasOwnProperty(c)&&(0<=ti[s].omit.indexOf(c)||(l=e[c],u[c]=0<=ti[s].shallow.indexOf(c)?l:oi(l,t)));e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}function ai(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ri(e)||ii(e)||ArrayBuffer.isView(e)||e instanceof Qr)return e;if(Array.isArray(e))return e.map(ai);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);var t=e.$name||"Object",n=ti[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,o=Object.keys(e);i<o.length;i+=1){var a,s=o[i];"$name"!==s&&(a=e[s],r[s]=0<=ti[t].shallow.indexOf(s)?a:ai(a))}return r}function si(){this.first=!0}si.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var li={"Latin-1 Supplement":function(e){return 128<=e&&e<=255},Arabic:function(e){return 1536<=e&&e<=1791},"Arabic Supplement":function(e){return 1872<=e&&e<=1919},"Arabic Extended-A":function(e){return 2208<=e&&e<=2303},"Hangul Jamo":function(e){return 4352<=e&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return 5120<=e&&e<=5759},Khmer:function(e){return 6016<=e&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return 6320<=e&&e<=6399},"General Punctuation":function(e){return 8192<=e&&e<=8303},"Letterlike Symbols":function(e){return 8448<=e&&e<=8527},"Number Forms":function(e){return 8528<=e&&e<=8591},"Miscellaneous Technical":function(e){return 8960<=e&&e<=9215},"Control Pictures":function(e){return 9216<=e&&e<=9279},"Optical Character Recognition":function(e){return 9280<=e&&e<=9311},"Enclosed Alphanumerics":function(e){return 9312<=e&&e<=9471},"Geometric Shapes":function(e){return 9632<=e&&e<=9727},"Miscellaneous Symbols":function(e){return 9728<=e&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return 11008<=e&&e<=11263},"CJK Radicals Supplement":function(e){return 11904<=e&&e<=12031},"Kangxi Radicals":function(e){return 12032<=e&&e<=12255},"Ideographic Description Characters":function(e){return 12272<=e&&e<=12287},"CJK Symbols and Punctuation":function(e){return 12288<=e&&e<=12351},Hiragana:function(e){return 12352<=e&&e<=12447},Katakana:function(e){return 12448<=e&&e<=12543},Bopomofo:function(e){return 12544<=e&&e<=12591},"Hangul Compatibility Jamo":function(e){return 12592<=e&&e<=12687},Kanbun:function(e){return 12688<=e&&e<=12703},"Bopomofo Extended":function(e){return 12704<=e&&e<=12735},"CJK Strokes":function(e){return 12736<=e&&e<=12783},"Katakana Phonetic Extensions":function(e){return 12784<=e&&e<=12799},"Enclosed CJK Letters and Months":function(e){return 12800<=e&&e<=13055},"CJK Compatibility":function(e){return 13056<=e&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return 13312<=e&&e<=19903},"Yijing Hexagram Symbols":function(e){return 19904<=e&&e<=19967},"CJK Unified Ideographs":function(e){return 19968<=e&&e<=40959},"Yi Syllables":function(e){return 40960<=e&&e<=42127},"Yi Radicals":function(e){return 42128<=e&&e<=42191},"Hangul Jamo Extended-A":function(e){return 43360<=e&&e<=43391},"Hangul Syllables":function(e){return 44032<=e&&e<=55215},"Hangul Jamo Extended-B":function(e){return 55216<=e&&e<=55295},"Private Use Area":function(e){return 57344<=e&&e<=63743},"CJK Compatibility Ideographs":function(e){return 63744<=e&&e<=64255},"Arabic Presentation Forms-A":function(e){return 64336<=e&&e<=65023},"Vertical Forms":function(e){return 65040<=e&&e<=65055},"CJK Compatibility Forms":function(e){return 65072<=e&&e<=65103},"Small Form Variants":function(e){return 65104<=e&&e<=65135},"Arabic Presentation Forms-B":function(e){return 65136<=e&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return 65280<=e&&e<=65519}};function ui(e){for(var t=0,n=e;t<n.length;t+=1)if(pi(n[t].charCodeAt(0)))return!0;return!1}function ci(e){for(var t=0,n=e;t<n.length;t+=1)if(!function(e){return!li.Arabic(e)&&!li["Arabic Supplement"](e)&&!li["Arabic Extended-A"](e)&&!li["Arabic Presentation Forms-A"](e)&&!li["Arabic Presentation Forms-B"](e)}(n[t].charCodeAt(0)))return;return 1}function pi(e){return 746===e||747===e||!(e<4352)&&(li["Bopomofo Extended"](e)||li.Bopomofo(e)||li["CJK Compatibility Forms"](e)&&!(65097<=e&&e<=65103)||li["CJK Compatibility Ideographs"](e)||li["CJK Compatibility"](e)||li["CJK Radicals Supplement"](e)||li["CJK Strokes"](e)||!(!li["CJK Symbols and Punctuation"](e)||12296<=e&&e<=12305||12308<=e&&e<=12319||12336===e)||li["CJK Unified Ideographs Extension A"](e)||li["CJK Unified Ideographs"](e)||li["Enclosed CJK Letters and Months"](e)||li["Hangul Compatibility Jamo"](e)||li["Hangul Jamo Extended-A"](e)||li["Hangul Jamo Extended-B"](e)||li["Hangul Jamo"](e)||li["Hangul Syllables"](e)||li.Hiragana(e)||li["Ideographic Description Characters"](e)||li.Kanbun(e)||li["Kangxi Radicals"](e)||li["Katakana Phonetic Extensions"](e)||li.Katakana(e)&&12540!==e||!(!li["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||65306<=e&&e<=65310||65339===e||65341===e||65343===e||65371<=e&&e<=65503||65507===e||65512<=e&&e<=65519)||!(!li["Small Form Variants"](e)||65112<=e&&e<=65118||65123<=e&&e<=65126)||li["Unified Canadian Aboriginal Syllabics"](e)||li["Unified Canadian Aboriginal Syllabics Extended"](e)||li["Vertical Forms"](e)||li["Yijing Hexagram Symbols"](e)||li["Yi Syllables"](e)||!!li["Yi Radicals"](e))}function hi(e){return!(pi(e)||(e=e,li["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||li["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||li["Letterlike Symbols"](e)||li["Number Forms"](e)||li["Miscellaneous Technical"](e)&&(8960<=e&&e<=8967||8972<=e&&e<=8991||8996<=e&&e<=9e3||9003===e||9085<=e&&e<=9114||9150<=e&&e<=9165||9167===e||9169<=e&&e<=9179||9186<=e&&e<=9215)||li["Control Pictures"](e)&&9251!==e||li["Optical Character Recognition"](e)||li["Enclosed Alphanumerics"](e)||li["Geometric Shapes"](e)||li["Miscellaneous Symbols"](e)&&!(9754<=e&&e<=9759)||li["Miscellaneous Symbols and Arrows"](e)&&(11026<=e&&e<=11055||11088<=e&&e<=11097||11192<=e&&e<=11243)||li["CJK Symbols and Punctuation"](e)||li.Katakana(e)||li["Private Use Area"](e)||li["CJK Compatibility Forms"](e)||li["Small Form Variants"](e)||li["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||9984<=e&&e<=10087||10102<=e&&e<=10131||65532===e||65533===e))}function di(e){return 1424<=e&&e<=2303||li["Arabic Presentation Forms-A"](e)||li["Arabic Presentation Forms-B"](e)}function fi(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=r[n];if(i=i.charCodeAt(0),!t&&di(i)||2304<=i&&i<=3583||3840<=i&&i<=4255||li.Khmer(i))return!1}return!0}var mi={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},gi=null,yi=mi.unavailable,vi=null,_i=function(e){e&&"string"==typeof e&&-1<e.indexOf("NetworkError")&&(yi=mi.error),gi&&gi(e)};function bi(){Ei.fire(new Be("pluginStateChange",{pluginStatus:yi,pluginURL:vi}))}function xi(){return yi}function wi(){if(yi!==mi.deferred||!vi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");yi=mi.loading,bi(),vi&&Pe({url:vi},(function(e){e?_i(e):(yi=mi.loaded,bi())}))}function Si(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new si,this.transition={})}var Ei=new Ue,Ci={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return yi===mi.loaded||null!=Ci.applyArabicShaping},isLoading:function(){return yi===mi.loading},setState:function(e){yi=e.pluginStatus,vi=e.pluginURL},isParsed:function(){return null!=Ci.applyArabicShaping&&null!=Ci.processBidirectionalText&&null!=Ci.processStyledBidirectionalText},getPluginURL:function(){return vi}};function Ti(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(er(e))return new dr(e,t);if(lr(e)){var n=hr(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return e.key+": "+e.message})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=mt.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===t?e.specification.default:t,e.specification)}function Ii(e){this.property=e,this.value=new Ti(e,void 0)}function ki(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}Si.prototype.isSupportedScript=function(e){return fi(e,Ci.isLoaded())},Si.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Si.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}},Ti.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ti.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)},Ii.prototype.transitioned=function(e,t){return new Pi(this.property,this.value,t,d({},e.transition,this.transition),e.now)},Ii.prototype.untransitioned=function(){return new Pi(this.property,this.value,null,{},0)},ki.prototype.getValue=function(e){return w(this._values[e].value.value)},ki.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ii(this._values[e].property)),this._values[e].value=new Ti(this._values[e].property,null===t?void 0:w(t))},ki.prototype.getTransition=function(e){return w(this._values[e].transition)},ki.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ii(this._values[e].property)),this._values[e].transition=w(t)||void 0},ki.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i),void 0!==(i=this.getTransition(r))&&(e[r+"-transition"]=i)}return e},ki.prototype.transitioned=function(e,t){for(var n=new Ai(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(e,t._values[o])}return n},ki.prototype.untransitioned=function(){for(var e=new Ai(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e};var Pi=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Pi.prototype.possiblyEvaluate=function(e,t,n){var r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;return o?r>this.end||this.value.isDataDriven()?(this.prior=null,i):r<this.begin?o.possiblyEvaluate(e,t,n):(r=(r-this.begin)/(this.end-this.begin),this.property.interpolate(o.possiblyEvaluate(e,t,n),i,function(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(r))):i};var Ai=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};function Mi(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}function Oi(e,t,n){this.property=e,this.value=t,this.parameters=n}Ai.prototype.possiblyEvaluate=function(e,t,n){for(var r=new Li(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(e,t,n)}return r},Ai.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var n=t[e];if(this._values[n].prior)return!0}return!1},Mi.prototype.getValue=function(e){return w(this._values[e].value)},Mi.prototype.setValue=function(e,t){this._values[e]=new Ti(this._values[e].property,null===t?void 0:w(t))},Mi.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e},Mi.prototype.possiblyEvaluate=function(e,t,n){for(var r=new Li(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(e,t,n)}return r},Oi.prototype.isConstant=function(){return"constant"===this.value.kind},Oi.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},Oi.prototype.evaluate=function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)};var Li=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};function Ri(e){this.specification=e}Li.prototype.get=function(e){return this._values[e]},Ri.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Ri.prototype.interpolate=function(e,t,n){var r=sn[this.specification.type];return r?r(e,t,n):e};var Di=function(e,t){this.specification=e,this.overrides=t};Di.prototype.possiblyEvaluate=function(e,t,n,r){return"constant"===e.expression.kind||"camera"===e.expression.kind?new Oi(this,{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)},t):new Oi(this,e.expression,t)},Di.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Oi(this,{kind:"constant",value:void 0},e.parameters);var r=sn[this.specification.type];return r?new Oi(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e},Di.prototype.evaluate=function(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)};var zi,Ni=((zi=Di)&&(Bi.__proto__=zi),((Bi.prototype=Object.create(zi&&zi.prototype)).constructor=Bi).prototype.possiblyEvaluate=function(e,t,n,r){return void 0===e.value?new Oi(this,{kind:"constant",value:void 0},t):"constant"===e.expression.kind?(r=e.expression.evaluate(t,null,{},n,r),r="resolvedImage"===e.property.specification.type&&"string"!=typeof r?r.name:r,new Oi(this,{kind:"constant",value:r=this._calculate(r,r,r,t)},t)):"camera"!==e.expression.kind?new Oi(this,e.expression,t):new Oi(this,{kind:"constant",value:e=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t)},t)},Bi.prototype.evaluate=function(e,t,n,r,i,o){return"source"!==e.kind?"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value:(o=e.evaluate(t,n,r,i,o),this._calculate(o,o,o,t))},Bi.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},Bi.prototype.interpolate=function(e){return e},Bi);function Bi(){zi.apply(this,arguments)}var Fi=function(e){this.specification=e};Fi.prototype.possiblyEvaluate=function(e,t,n,r){if(void 0!==e.value)return"constant"!==e.expression.kind?this._calculate(e.expression.evaluate(new Si(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Si(Math.floor(t.zoom),t)),e.expression.evaluate(new Si(Math.floor(t.zoom+1),t)),t):(r=e.expression.evaluate(t,null,{},n,r),this._calculate(r,r,r,t))},Fi.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},Fi.prototype.interpolate=function(e){return e};var ji=function(e){this.specification=e};function Ui(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){(r=e[t]).specification.overridable&&this.overridableProperties.push(t);var n=this.defaultPropertyValues[t]=new Ti(r,void 0),r=this.defaultTransitionablePropertyValues[t]=new Ii(r);this.defaultTransitioningPropertyValues[t]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=n.possiblyEvaluate({})}}ji.prototype.possiblyEvaluate=function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)},ji.prototype.interpolate=function(){return!1},ni("DataDrivenProperty",Di),ni("DataConstantProperty",Ri),ni("CrossFadedDataDrivenProperty",Ni),ni("CrossFadedProperty",Fi),ni("ColorRampProperty",ji);var Vi,qi="-transition",Hi=((Vi=Ue)&&(Wi.__proto__=Vi),((Wi.prototype=Object.create(Vi&&Vi.prototype)).constructor=Wi).prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},Wi.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},Wi.prototype.setLayoutProperty=function(e,t,n){if(void 0===n&&(n={}),null!=t){var r="layers."+this.id+".layout."+e;if(this._validate(Zr,r,e,t,n))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t},Wi.prototype.getPaintProperty=function(e){return _(e,qi)?this._transitionablePaint.getTransition(e.slice(0,-qi.length)):this._transitionablePaint.getValue(e)},Wi.prototype.setPaintProperty=function(e,t,n){if(void 0===n&&(n={}),null!=t){var r="layers."+this.id+".paint."+e;if(this._validate(Gr,r,e,t,n))return!1}if(_(e,qi))return this._transitionablePaint.setTransition(e.slice(0,-qi.length),t||void 0),!1;r="cross-faded-data-driven"===(i=this._transitionablePaint._values[e]).property.specification["property-type"],n=i.value.isDataDriven();var i=i.value;return this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e),(t=this._transitionablePaint._values[e].value).isDataDriven()||n||r||this._handleOverridablePaintPropertyUpdate(e,i,t)},Wi.prototype._handleSpecialPaintPropertyUpdate=function(e){},Wi.prototype._handleOverridablePaintPropertyUpdate=function(e,t,n){return!1},Wi.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},Wi.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},Wi.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},Wi.prototype.recalculate=function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)},Wi.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),x(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))},Wi.prototype._validate=function(e,t,n,r,i){return(!(i=void 0===i?{}:i)||!1!==i.validate)&&Kr(this,e.call(Hr,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))},Wi.prototype.is3D=function(){return!1},Wi.prototype.isTileClipped=function(){return!1},Wi.prototype.hasOffscreenPass=function(){return!1},Wi.prototype.resize=function(){},Wi.prototype.isStateDependent=function(){for(var e in this.paint._values)if((e=this.paint.get(e))instanceof Oi&&Yn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0;return!1},Wi);function Wi(e,t){if(Vi.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Mi(t.layout)),t.paint)){for(var n in this._transitionablePaint=new ki(t.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Li(t.paint)}}var Gi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Zi=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8};function Ki(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map((function(e){var i=(a=e.type,Gi[a].BYTES_PER_ELEMENT),o=n=Xi(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:Xi(n,Math.max(r,t)),alignment:t}}function Xi(e,t){return Math.ceil(e/t)*t}(Rs=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}).serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Rs.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Rs.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Rs.prototype.clear=function(){this.length=0},Rs.prototype.resize=function(e){this.reserve(e),this.length=e},Rs.prototype.reserve=function(e){e>this.capacity&&(this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),e=this.uint8,this._refreshViews(),e&&this.uint8.set(e))},Rs.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Yi,Ji=((Yi=Rs)&&($i.__proto__=Yi),(($i.prototype=Object.create(Yi&&Yi.prototype)).constructor=$i).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},$i.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},$i.prototype.emplace=function(e,t,n){var r=2*e;return this.int16[0+r]=t,this.int16[1+r]=n,e},$i);function $i(){Yi.apply(this,arguments)}Ji.prototype.bytesPerElement=4,ni("StructArrayLayout2i4",Ji);var Qi,eo=((Qi=Rs)&&(to.__proto__=Qi),((to.prototype=Object.create(Qi&&Qi.prototype)).constructor=to).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},to.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},to.prototype.emplace=function(e,t,n,r,i){var o=4*e;return this.int16[0+o]=t,this.int16[1+o]=n,this.int16[2+o]=r,this.int16[3+o]=i,e},to);function to(){Qi.apply(this,arguments)}eo.prototype.bytesPerElement=8,ni("StructArrayLayout4i8",eo);var no,ro=((no=Rs)&&(io.__proto__=no),((io.prototype=Object.create(no&&no.prototype)).constructor=io).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},io.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},io.prototype.emplace=function(e,t,n,r,i,o,a){var s=6*e;return this.int16[0+s]=t,this.int16[1+s]=n,this.int16[2+s]=r,this.int16[3+s]=i,this.int16[4+s]=o,this.int16[5+s]=a,e},io);function io(){no.apply(this,arguments)}ro.prototype.bytesPerElement=12,ni("StructArrayLayout2i4i12",ro);var oo,ao=((oo=Rs)&&(so.__proto__=oo),((so.prototype=Object.create(oo&&oo.prototype)).constructor=so).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},so.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},so.prototype.emplace=function(e,t,n,r,i,o,a){var s=4*e,l=8*e;return this.int16[0+s]=t,this.int16[1+s]=n,this.uint8[4+l]=r,this.uint8[5+l]=i,this.uint8[6+l]=o,this.uint8[7+l]=a,e},so);function so(){oo.apply(this,arguments)}ao.prototype.bytesPerElement=8,ni("StructArrayLayout2i4ub8",ao);var lo,uo=((lo=Rs)&&(co.__proto__=lo),((co.prototype=Object.create(lo&&lo.prototype)).constructor=co).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},co.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},co.prototype.emplace=function(e,t,n){var r=2*e;return this.float32[0+r]=t,this.float32[1+r]=n,e},co);function co(){lo.apply(this,arguments)}uo.prototype.bytesPerElement=8,ni("StructArrayLayout2f8",uo);var po,ho=((po=Rs)&&(fo.__proto__=po),((fo.prototype=Object.create(po&&po.prototype)).constructor=fo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},fo.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,i,o,a,s,l,u)},fo.prototype.emplace=function(e,t,n,r,i,o,a,s,l,u,c){var p=10*e;return this.uint16[0+p]=t,this.uint16[1+p]=n,this.uint16[2+p]=r,this.uint16[3+p]=i,this.uint16[4+p]=o,this.uint16[5+p]=a,this.uint16[6+p]=s,this.uint16[7+p]=l,this.uint16[8+p]=u,this.uint16[9+p]=c,e},fo);function fo(){po.apply(this,arguments)}ho.prototype.bytesPerElement=20,ni("StructArrayLayout10ui20",ho);var mo,go=((mo=Rs)&&(yo.__proto__=mo),((yo.prototype=Object.create(mo&&mo.prototype)).constructor=yo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},yo.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,l,u,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,r,i,o,a,s,l,u,c,p)},yo.prototype.emplace=function(e,t,n,r,i,o,a,s,l,u,c,p,h){var d=12*e;return this.int16[0+d]=t,this.int16[1+d]=n,this.int16[2+d]=r,this.int16[3+d]=i,this.uint16[4+d]=o,this.uint16[5+d]=a,this.uint16[6+d]=s,this.uint16[7+d]=l,this.int16[8+d]=u,this.int16[9+d]=c,this.int16[10+d]=p,this.int16[11+d]=h,e},yo);function yo(){mo.apply(this,arguments)}go.prototype.bytesPerElement=24,ni("StructArrayLayout4i4ui4i24",go);var vo,_o=((vo=Rs)&&(bo.__proto__=vo),((bo.prototype=Object.create(vo&&vo.prototype)).constructor=bo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},bo.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},bo.prototype.emplace=function(e,t,n,r){var i=3*e;return this.float32[0+i]=t,this.float32[1+i]=n,this.float32[2+i]=r,e},bo);function bo(){vo.apply(this,arguments)}_o.prototype.bytesPerElement=12,ni("StructArrayLayout3f12",_o);var xo,wo=((xo=Rs)&&(So.__proto__=xo),((So.prototype=Object.create(xo&&xo.prototype)).constructor=So).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},So.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},So.prototype.emplace=function(e,t){return this.uint32[+e+0]=t,e},So);function So(){xo.apply(this,arguments)}wo.prototype.bytesPerElement=4,ni("StructArrayLayout1ul4",wo);var Eo,Co=((Eo=Rs)&&(To.__proto__=Eo),((To.prototype=Object.create(Eo&&Eo.prototype)).constructor=To).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},To.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,l){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s,l)},To.prototype.emplace=function(e,t,n,r,i,o,a,s,l,u){var c=10*e,p=5*e;return this.int16[0+c]=t,this.int16[1+c]=n,this.int16[2+c]=r,this.int16[3+c]=i,this.int16[4+c]=o,this.int16[5+c]=a,this.uint32[3+p]=s,this.uint16[8+c]=l,this.uint16[9+c]=u,e},To);function To(){Eo.apply(this,arguments)}Co.prototype.bytesPerElement=20,ni("StructArrayLayout6i1ul2ui20",Co);var Io,ko=((Io=Rs)&&(Po.__proto__=Io),((Po.prototype=Object.create(Io&&Io.prototype)).constructor=Po).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Po.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},Po.prototype.emplace=function(e,t,n,r,i,o,a){var s=6*e;return this.int16[0+s]=t,this.int16[1+s]=n,this.int16[2+s]=r,this.int16[3+s]=i,this.int16[4+s]=o,this.int16[5+s]=a,e},Po);function Po(){Io.apply(this,arguments)}ko.prototype.bytesPerElement=12,ni("StructArrayLayout2i2i2i12",ko);var Ao,Mo=((Ao=Rs)&&(Oo.__proto__=Ao),((Oo.prototype=Object.create(Ao&&Ao.prototype)).constructor=Oo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Oo.prototype.emplaceBack=function(e,t,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)},Oo.prototype.emplace=function(e,t,n,r,i,o){var a=4*e,s=8*e;return this.float32[0+a]=t,this.float32[1+a]=n,this.float32[2+a]=r,this.int16[6+s]=i,this.int16[7+s]=o,e},Oo);function Oo(){Ao.apply(this,arguments)}Mo.prototype.bytesPerElement=16,ni("StructArrayLayout2f1f2i16",Mo);var Lo,Ro=((Lo=Rs)&&(Do.__proto__=Lo),((Do.prototype=Object.create(Lo&&Lo.prototype)).constructor=Do).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Do.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},Do.prototype.emplace=function(e,t,n,r,i){var o=12*e,a=3*e;return this.uint8[0+o]=t,this.uint8[1+o]=n,this.float32[1+a]=r,this.float32[2+a]=i,e},Do);function Do(){Lo.apply(this,arguments)}Ro.prototype.bytesPerElement=12,ni("StructArrayLayout2ub2f12",Ro);var zo,No=((zo=Rs)&&(Bo.__proto__=zo),((Bo.prototype=Object.create(zo&&zo.prototype)).constructor=Bo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Bo.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},Bo.prototype.emplace=function(e,t,n,r){var i=3*e;return this.uint16[0+i]=t,this.uint16[1+i]=n,this.uint16[2+i]=r,e},Bo);function Bo(){zo.apply(this,arguments)}No.prototype.bytesPerElement=6,ni("StructArrayLayout3ui6",No);var Fo,jo=((Fo=Rs)&&(Uo.__proto__=Fo),((Uo.prototype=Object.create(Fo&&Fo.prototype)).constructor=Uo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Uo.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m,g){var y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m,g)},Uo.prototype.emplace=function(e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m,g,y){var v=24*e,_=12*e,b=48*e;return this.int16[0+v]=t,this.int16[1+v]=n,this.uint16[2+v]=r,this.uint16[3+v]=i,this.uint32[2+_]=o,this.uint32[3+_]=a,this.uint32[4+_]=s,this.uint16[10+v]=l,this.uint16[11+v]=u,this.uint16[12+v]=c,this.float32[7+_]=p,this.float32[8+_]=h,this.uint8[36+b]=d,this.uint8[37+b]=f,this.uint8[38+b]=m,this.uint32[10+_]=g,this.int16[22+v]=y,e},Uo);function Uo(){Fo.apply(this,arguments)}jo.prototype.bytesPerElement=48,ni("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jo);var Vo,qo=((Vo=Rs)&&(Ho.__proto__=Vo),((Ho.prototype=Object.create(Vo&&Vo.prototype)).constructor=Ho).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Ho.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m,g,y,v,_,b,x,w,S,E,C,T,I){var k=this.length;return this.resize(k+1),this.emplace(k,e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m,g,y,v,_,b,x,w,S,E,C,T,I)},Ho.prototype.emplace=function(e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m,g,y,v,_,b,x,w,S,E,C,T,I,k){var P=34*e,A=17*e;return this.int16[0+P]=t,this.int16[1+P]=n,this.int16[2+P]=r,this.int16[3+P]=i,this.int16[4+P]=o,this.int16[5+P]=a,this.int16[6+P]=s,this.int16[7+P]=l,this.uint16[8+P]=u,this.uint16[9+P]=c,this.uint16[10+P]=p,this.uint16[11+P]=h,this.uint16[12+P]=d,this.uint16[13+P]=f,this.uint16[14+P]=m,this.uint16[15+P]=g,this.uint16[16+P]=y,this.uint16[17+P]=v,this.uint16[18+P]=_,this.uint16[19+P]=b,this.uint16[20+P]=x,this.uint16[21+P]=w,this.uint16[22+P]=S,this.uint32[12+A]=E,this.float32[13+A]=C,this.float32[14+A]=T,this.float32[15+A]=I,this.float32[16+A]=k,e},Ho);function Ho(){Vo.apply(this,arguments)}qo.prototype.bytesPerElement=68,ni("StructArrayLayout8i15ui1ul4f68",qo);var Wo,Go,Zo,Ko=((Wo=Rs)&&(Xo.__proto__=Wo),((Xo.prototype=Object.create(Wo&&Wo.prototype)).constructor=Xo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},Xo.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},Xo.prototype.emplace=function(e,t){return this.float32[+e+0]=t,e},Xo);function Xo(){Wo.apply(this,arguments)}function Yo(){Go.apply(this,arguments)}function Jo(){Zo.apply(this,arguments)}Ko.prototype.bytesPerElement=4,ni("StructArrayLayout1f4",Ko),(Go=Rs)&&(Yo.__proto__=Go),((Yo.prototype=Object.create(Go&&Go.prototype)).constructor=Yo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},Yo.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},Yo.prototype.emplace=function(e,t,n,r){var i=3*e;return this.int16[0+i]=t,this.int16[1+i]=n,this.int16[2+i]=r,e},(D=Yo).prototype.bytesPerElement=6,ni("StructArrayLayout3i6",D),(Zo=Rs)&&(Jo.__proto__=Zo),((Jo.prototype=Object.create(Zo&&Zo.prototype)).constructor=Jo).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},Jo.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},Jo.prototype.emplace=function(e,t,n,r){var i=4*e;return this.uint32[0+2*e]=t,this.uint16[2+i]=n,this.uint16[3+i]=r,e},(ee=Jo).prototype.bytesPerElement=8,ni("StructArrayLayout1ul2ui8",ee);var $o,Qo,ea=(($o=Rs)&&(ta.__proto__=$o),((ta.prototype=Object.create($o&&$o.prototype)).constructor=ta).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},ta.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},ta.prototype.emplace=function(e,t,n){var r=2*e;return this.uint16[0+r]=t,this.uint16[1+r]=n,e},ta);function ta(){$o.apply(this,arguments)}function na(){Qo.apply(this,arguments)}ea.prototype.bytesPerElement=4,ni("StructArrayLayout2ui4",ea),(Qo=Rs)&&(na.__proto__=Qo),((na.prototype=Object.create(Qo&&Qo.prototype)).constructor=na).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},na.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},na.prototype.emplace=function(e,t){return this.uint16[+e+0]=t,e},(le=na).prototype.bytesPerElement=2,ni("StructArrayLayout1ui2",le);var ra,ia=((ra=Rs)&&(oa.__proto__=ra),((oa.prototype=Object.create(ra&&ra.prototype)).constructor=oa).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},oa.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},oa.prototype.emplace=function(e,t,n,r,i){var o=4*e;return this.float32[0+o]=t,this.float32[1+o]=n,this.float32[2+o]=r,this.float32[3+o]=i,e},oa);function oa(){ra.apply(this,arguments)}ia.prototype.bytesPerElement=16,ni("StructArrayLayout4f16",ia);var aa=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new o(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Zi);aa.prototype.size=20;var sa,la=((sa=Co)&&(ua.__proto__=sa),((ua.prototype=Object.create(sa&&sa.prototype)).constructor=ua).prototype.get=function(e){return new aa(this,e)},ua);function ua(){sa.apply(this,arguments)}ni("CollisionBoxArray",la);var ca=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(e){this._structArray.uint8[this._pos1+37]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+38]=e},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,n),t}(Zi);ca.prototype.size=48;var pa,ha=((pa=jo)&&(da.__proto__=pa),((da.prototype=Object.create(pa&&pa.prototype)).constructor=da).prototype.get=function(e){return new ca(this,e)},da);function da(){pa.apply(this,arguments)}ni("PlacedSymbolArray",ha);var fa=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+12]=e},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,n),t}(Zi);fa.prototype.size=68;var ma,ga=((ma=qo)&&(ya.__proto__=ma),((ya.prototype=Object.create(ma&&ma.prototype)).constructor=ya).prototype.get=function(e){return new fa(this,e)},ya);function ya(){ma.apply(this,arguments)}ni("SymbolInstanceArray",ga);var va,_a=((va=Ko)&&(ba.__proto__=va),((ba.prototype=Object.create(va&&va.prototype)).constructor=ba).prototype.getoffsetX=function(e){return this.float32[+e+0]},ba);function ba(){va.apply(this,arguments)}ni("GlyphOffsetArray",_a);var xa,wa=((xa=D)&&(Sa.__proto__=xa),((Sa.prototype=Object.create(xa&&xa.prototype)).constructor=Sa).prototype.getx=function(e){return this.int16[3*e+0]},Sa.prototype.gety=function(e){return this.int16[3*e+1]},Sa.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},Sa);function Sa(){xa.apply(this,arguments)}ni("SymbolLineVertexArray",wa);var Ea=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(Zi);Ea.prototype.size=8;var Ca,Ta=((Ca=ee)&&(Ia.__proto__=Ca),((Ia.prototype=Object.create(Ca&&Ca.prototype)).constructor=Ia).prototype.get=function(e){return new Ea(this,e)},Ia);function Ia(){Ca.apply(this,arguments)}function ka(e){this.segments=e=void 0===e?[]:e}ni("FeatureIndexArray",Ta);var Pa=Ki([{name:"a_pos",components:2,type:"Int16"}],4).members;function Aa(e,t){return 256*(e=p(Math.floor(e),0,255))+p(Math.floor(t),0,255)}ka.prototype.prepareSegment=function(e,t,n,r){var i=this.segments[this.segments.length-1];return ka.MAX_VERTEX_ARRAY_LENGTH<e&&E("Max vertices per segment is "+ka.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!i||i.vertexLength+e>ka.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},ka.prototype.get=function(){return this.segments},ka.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n,r=t[e];for(n in r.vaos)r.vaos[n].destroy()}},ka.simpleSegment=function(e,t,n,r){return new ka([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},ka.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ni("SegmentVector",ka);var Ma=Ki([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Oa=(re=t((function(e){e.exports=function(e,t){for(var n,r,i=3&e.length,o=e.length-i,a=t,s=3432918353,l=461845907,u=0;u<o;)r=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,a=27492+(65535&(n=5*(65535&(a=(a^=r=(65535&(r=(r=(65535&r)*s+(((r>>>16)*s&65535)<<16)&4294967295)<<15|r>>>17))*l+(((r>>>16)*l&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(n>>>16)&65535)<<16);switch(r=0,i){case 3:r^=(255&e.charCodeAt(u+2))<<16;case 2:r^=(255&e.charCodeAt(u+1))<<8;case 1:a^=r=(65535&(r=(r=(65535&(r^=255&e.charCodeAt(u)))*s+(((r>>>16)*s&65535)<<16)&4294967295)<<15|r>>>17))*l+(((r>>>16)*l&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}})),t((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;4<=r;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}))),La=re;function Ra(){this.ids=[],this.positions=[],this.indexed=!1}Nn=Oa,La.murmur3=re,La.murmur2=Nn,Ra.prototype.add=function(e,t,n,r){this.ids.push(Na(e)),this.positions.push(t,n,r)},Ra.prototype.getPositions=function(e){for(var t=Na(e),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=t?r=i:n=1+i}for(var o=[];this.ids[n]===t;){var a=this.positions[3*n],s=this.positions[3*n+1],l=this.positions[3*n+2];o.push({index:a,start:s,end:l}),n++}return o},Ra.serialize=function(e,t){var n=new Float64Array(e.ids);return function e(t,n,r,i){for(;r<i;){for(var o=t[r+i>>1],a=r-1,s=i+1;;){for(;t[++a]<o;);for(;t[--s]>o;);if(s<=a)break;Ba(t,a,s),Ba(n,3*a,3*s),Ba(n,3*a+1,3*s+1),Ba(n,3*a+2,3*s+2)}s-r<i-s?(e(t,n,r,s),r=s+1):(e(t,n,s+1,i),i=s)}}(n,e=new Uint32Array(e.positions),0,n.length-1),t&&t.push(n.buffer,e.buffer),{ids:n,positions:e}},Ra.deserialize=function(e){var t=new Ra;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Da,za=Math.pow(2,53)-1;function Na(e){var t=+e;return!isNaN(t)&&t<=za?t:La(String(e))}function Ba(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Fa(e,t){Da.call(this,e,t),this.current=0}ni("FeaturePositionMap",Ra),Bn=function(e,t){this.gl=e.gl,this.location=t},(Da=Bn)&&(Fa.__proto__=Da),((Fa.prototype=Object.create(Da&&Da.prototype)).constructor=Fa).prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},jn=Fa;var ja,Ua,Va,qa=((ja=Bn)&&(Ha.__proto__=ja),((Ha.prototype=Object.create(ja&&ja.prototype)).constructor=Ha).prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},Ha);function Ha(e,t){ja.call(this,e,t),this.current=0}function Wa(e,t){Ua.call(this,e,t),this.current=[0,0]}function Ga(e,t){Va.call(this,e,t),this.current=[0,0,0]}(Ua=Bn)&&(Wa.__proto__=Ua),((Wa.prototype=Object.create(Ua&&Ua.prototype)).constructor=Wa).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},Fn=Wa,(Va=Bn)&&(Ga.__proto__=Va),((Ga.prototype=Object.create(Va&&Va.prototype)).constructor=Ga).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},Vn=Ga;var Za,Ka=((Za=Bn)&&(Xa.__proto__=Za),((Xa.prototype=Object.create(Za&&Za.prototype)).constructor=Xa).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},Xa);function Xa(e,t){Za.call(this,e,t),this.current=[0,0,0,0]}var Ya,Ja=((Ya=Bn)&&($a.__proto__=Ya),(($a.prototype=Object.create(Ya&&Ya.prototype)).constructor=$a).prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},$a);function $a(e,t){Ya.call(this,e,t),this.current=mt.transparent}var Qa,es=new Float32Array(16);function ts(e,t){Qa.call(this,e,t),this.current=es}function ns(e){return[Aa(255*e.r,255*e.g),Aa(255*e.b,255*e.a)]}function rs(e,t,n){this.value=e,this.uniformNames=t.map((function(e){return"u_"+e})),this.type=n}function is(e,t){this.uniformNames=t.map((function(e){return"u_"+e})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}function os(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new r}function as(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((function(e){return"u_"+e+"_t"})),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o}function ss(e,t,n,r,i,o){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}function ls(e,t,n){this.binders={},this._buffers=[];var r,i,o,a,s,l,u,c=[];for(r in e.paint._values)n(r)&&(a=e.paint.get(r))instanceof Oi&&Yn(a.property.specification)&&(l=r,u=e.type,i={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(u+"-","").replace(/-/g,"_")],o=a.value,l=a.property.specification.type,u=a.property.useIntegerZoom,a="cross-faded"===(a=a.property.specification["property-type"])||"cross-faded-data-driven"===a,"constant"===o.kind?(this.binders[r]=a?new is(o.value,i):new rs(o.value,i,l),c.push("/u_"+r)):"source"===o.kind||a?(s=cs(r,l,"source"),this.binders[r]=a?new ss(o,l,u,t,s,e.id):new os(o,i,l,s),c.push("/a_"+r)):(s=cs(r,l,"composite"),this.binders[r]=new as(o,i,l,u,t,s),c.push("/z_"+r)));this.cacheKey=c.sort().join("")}function us(e,t,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var r=0,i=e;r<i.length;r+=1){var o=i[r];this.programConfigurations[o.id]=new ls(o,t,n)}this.needsUpload=!1,this._featureMap=new Ra,this._bufferOffset=0}function cs(e,t,n){return(e={"line-pattern":{source:ho,composite:ho},"fill-pattern":{source:ho,composite:ho},"fill-extrusion-pattern":{source:ho,composite:ho}}[e])&&e[n]||{color:{source:uo,composite:ia},number:{source:Ko,composite:uo}}[t][n]}(Qa=Bn)&&(ts.__proto__=Qa),((ts.prototype=Object.create(Qa&&Qa.prototype)).constructor=ts).prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},Un=ts,rs.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},rs.prototype.getBinding=function(e,t,n){return new("color"===this.type?Ja:qa)(e,t)},is.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},is.prototype.setUniform=function(e,t,n,r){(r="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null)&&e.set(r)},is.prototype.getBinding=function(e,t,n){return new("u_pattern"===n.substr(0,9)?Ka:qa)(e,t)},os.prototype.populatePaintArray=function(e,t,n,r,i){var o=this.paintVertexArray.length;i=this.expression.evaluate(new Si(0),t,{},r,[],i),this.paintVertexArray.resize(e),this._setPaintValue(o,e,i)},os.prototype.updatePaintArray=function(e,t,n,r){r=this.expression.evaluate({zoom:0},n,r),this._setPaintValue(e,t,r)},os.prototype._setPaintValue=function(e,t,n){if("color"===this.type)for(var r=ns(n),i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=e;o<t;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},os.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},os.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},as.prototype.populatePaintArray=function(e,t,n,r,i){var o=this.expression.evaluate(new Si(this.zoom),t,{},r,[],i);r=this.expression.evaluate(new Si(this.zoom+1),t,{},r,[],i),i=this.paintVertexArray.length,this.paintVertexArray.resize(e),this._setPaintValue(i,e,o,r)},as.prototype.updatePaintArray=function(e,t,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r);r=this.expression.evaluate({zoom:this.zoom+1},n,r),this._setPaintValue(e,t,i,r)},as.prototype._setPaintValue=function(e,t,n,r){if("color"===this.type)for(var i=ns(n),o=ns(r),a=e;a<t;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},as.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},as.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},as.prototype.setUniform=function(e,t){t=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,t=p(this.expression.interpolationFactor(t,this.zoom,this.zoom+1),0,1),e.set(t)},as.prototype.getBinding=function(e,t,n){return new qa(e,t)},ss.prototype.populatePaintArray=function(e,t,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)},ss.prototype.updatePaintArray=function(e,t,n,r,i){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],i)},ss.prototype._setPaintValues=function(e,t,n,r){if(r&&n){var i=n.min,o=n.mid,a=(n=n.max,r[i]),s=r[o],l=r[n];if(a&&s&&l)for(var u=e;u<t;u++)this.zoomInPaintVertexArray.emplace(u,s.tl[0],s.tl[1],s.br[0],s.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],s.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,s.tl[0],s.tl[1],s.br[0],s.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],s.pixelRatio,l.pixelRatio)}},ss.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Ma.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Ma.members,this.expression.isStateDependent))},ss.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},ls.prototype.getMaxValue=function(e){return(e=this.binders[e])instanceof os||e instanceof as?e.maxValue:0},ls.prototype.populatePaintArrays=function(e,t,n,r,i){for(var o in this.binders)((o=this.binders[o])instanceof os||o instanceof as||o instanceof ss)&&o.populatePaintArray(e,t,n,r,i)},ls.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders)(n=this.binders[n])instanceof is&&n.setConstantPatternPositions(e,t)},ls.prototype.updatePaintArrays=function(e,t,n,r,i){var o,a=!1;for(o in e)for(var s=0,l=t.getPositions(o);s<l.length;s+=1){var u,c=l[s],p=n.feature(c.index);for(u in this.binders){var h,d=this.binders[u];(d instanceof os||d instanceof as||d instanceof ss)&&!0===d.expression.isStateDependent&&(h=r.paint.get(u),d.expression=h.value,d.updatePaintArray(c.start,c.end,p,e[o],i),a=!0)}}return a},ls.prototype.defines=function(){var e,t=[];for(e in this.binders){var n=this.binders[e];(n instanceof rs||n instanceof is)&&t.push.apply(t,n.uniformNames.map((function(e){return"#define HAS_UNIFORM_"+e})))}return t},ls.prototype.getBinderAttributes=function(){var e,t=[];for(e in this.binders){var n=this.binders[e];if(n instanceof os||n instanceof as)for(var r=0;r<n.paintVertexAttributes.length;r++)t.push(n.paintVertexAttributes[r].name);else if(n instanceof ss)for(var i=0;i<Ma.members.length;i++)t.push(Ma.members[i].name)}return t},ls.prototype.getBinderUniforms=function(){var e,t=[];for(e in this.binders){var n=this.binders[e];if(n instanceof rs||n instanceof is||n instanceof as)for(var r=0,i=n.uniformNames;r<i.length;r+=1){var o=i[r];t.push(o)}}return t},ls.prototype.getPaintVertexBuffers=function(){return this._buffers},ls.prototype.getUniforms=function(e,t){var n,r=[];for(n in this.binders){var i=this.binders[n];if(i instanceof rs||i instanceof is||i instanceof as)for(var o=0,a=i.uniformNames;o<a.length;o+=1){var s,l=a[o];t[l]&&(s=i.getBinding(e,t[l],l),r.push({name:l,property:n,binding:s}))}}return r},ls.prototype.setUniforms=function(e,t,n,r){for(var i=0,o=t;i<o.length;i+=1){var a=(l=o[i]).name,s=l.property,l=l.binding;this.binders[s].setUniform(l,r,n.get(s),a)}},ls.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];e&&n instanceof ss?(t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer)&&this._buffers.push(t):(n instanceof os||n instanceof as)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},ls.prototype.upload=function(e){for(var t in this.binders)((t=this.binders[t])instanceof os||t instanceof as||t instanceof ss)&&t.upload(e);this.updatePaintBuffers()},ls.prototype.destroy=function(){for(var e in this.binders)((e=this.binders[e])instanceof os||e instanceof as||e instanceof ss)&&e.destroy()},us.prototype.populatePaintArrays=function(e,t,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(e,t,r,i,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},us.prototype.updatePaintArrays=function(e,t,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,this._featureMap,t,a,r)||this.needsUpload}},us.prototype.get=function(e){return this.programConfigurations[e]},us.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},us.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ni("ConstantBinder",rs),ni("CrossFadedConstantBinder",is),ni("SourceExpressionBinder",os),ni("CrossFadedCompositeBinder",ss),ni("CompositeExpressionBinder",as),ni("ProgramConfiguration",ls,{omit:["_buffers"]}),ni("ProgramConfigurationSet",us);var ps=8192,hs=Math.pow(2,14)-1,ds=-hs-1;function fs(e){for(var t=ps/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o],s=Math.round(a.x*t),l=Math.round(a.y*t);a.x=p(s,ds,hs),a.y=p(l,ds,hs),(s<a.x||s>a.x+1||l<a.y||l>a.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function ms(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?fs(e):[]}}function gs(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function ys(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ji,this.indexArray=new No,this.segments=new ka,this.programConfigurations=new us(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}function vs(e,t){for(var n=0;n<e.length;n++)if(Cs(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(Cs(e,t[r]))return!0;return!!xs(e,t)}function _s(e,t){if(1===e.length)return Es(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(Cs(e,r[i]))return!0;for(var o=0;o<e.length;o++)if(Es(t,e[o]))return!0;for(var a=0;a<t.length;a++)if(xs(e,t[a]))return!0;return!1}function bs(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(3<=e.length)for(var o=0;o<i.length;o++)if(Cs(e,i[o]))return!0;if(function(e,t,n){if(1<e.length){if(xs(e,t))return!0;for(var r=0;r<t.length;r++)if(ws(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(ws(e[i],t,n))return!0;return!1}(e,i,n))return!0}return!1}function xs(e,t){if(0!==e.length&&0!==t.length)for(var n,r,i=0;i<e.length-1;i++)for(var o=e[i],a=e[i+1],s=0;s<t.length-1;s++){var l=t[s],u=t[s+1];if(r=a,C(n=o,l=l,u=u)!==C(r,l,u)&&C(n,r,l)!==C(n,r,u))return 1}}function ws(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(Ss(e,t[i-1],t[i])<r)return 1}function Ss(e,t,n){var r=t.distSqr(n);return 0===r||(r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r)<0?e.distSqr(t):1<r?e.distSqr(n):e.distSqr(n.sub(t)._mult(r)._add(t))}function Es(e,t){for(var n,r,i=!1,o=0;o<e.length;o++)for(var a,s=0,l=(a=e[o]).length-1;s<a.length;l=s++)n=a[s],r=a[l],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(i=!i);return i}function Cs(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Ts(e,t,n,r,i){for(var a=0,s=e;a<s.length;a+=1){var l=s[a];if(t<=l.x&&n<=l.y&&r>=l.x&&i>=l.y)return!0}var u=[new o(t,n),new o(t,i),new o(r,i),new o(r,n)];if(2<e.length)for(var c=0,p=u;c<p.length;c+=1)if(Cs(e,p[c]))return!0;for(var h=0;h<e.length-1;h++)if(function(e,t,n){var r=n[0],i=n[2];return!(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)&&((i=C(e,t,n[0]))!==C(e,t,n[1])||i!==C(e,t,n[2])||i!==C(e,t,n[3]))}(e[h],e[h+1],u))return!0;return!1}function Is(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function ks(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ps(e,t,n,r,i){if(!t[0]&&!t[1])return e;var a=o.convert(t)._mult(i);"viewport"===n&&a._rotate(-r);for(var s=[],l=0;l<e.length;l++){var u=e[l];s.push(u.sub(a))}return s}ys.prototype.populate=function(e,t,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.feature,c=l.id,p=l.index,h=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f=ms(u,d);this.layers[0]._featureFilter.filter(new Si(this.zoom),f,n)&&(l=o?o.evaluate(f,{},n):void 0,l={id:c,properties:u.properties,type:u.type,sourceLayerIndex:h,index:p,geometry:d?f.geometry:fs(u),patterns:{},sortKey:l},i.push(l))}o&&i.sort((function(e,t){return e.sortKey-t.sortKey}));for(var m=0,g=i;m<g.length;m+=1){var y=g[m],v=y.geometry,_=y.index,b=y.sourceLayerIndex,x=e[_].feature;this.addFeature(y,v,_,n),t.featureIndex.insert(x,v,_,b,this.index)}},ys.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},ys.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ys.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ys.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pa),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ys.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ys.prototype.addFeature=function(e,t,n,r){for(var i=0,o=t;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var l,u=s[a],c=u.x,p=u.y;c<0||ps<=c||p<0||ps<=p||(u=(l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey)).vertexLength,gs(this.layoutVertexArray,c,p,-1,-1),gs(this.layoutVertexArray,c,p,1,-1),gs(this.layoutVertexArray,c,p,1,1),gs(this.layoutVertexArray,c,p,-1,1),this.indexArray.emplaceBack(u,u+1,u+2),this.indexArray.emplaceBack(u,u+3,u+2),l.vertexLength+=4,l.primitiveLength+=2)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)},ni("CircleBucket",ys,{omit:["layers"]});var As,Ms,Os,Ls,Rs=new Ui({"circle-sort-key":new Di(Ve.layout_circle["circle-sort-key"])}),Ds={paint:new Ui({"circle-radius":new Di(Ve.paint_circle["circle-radius"]),"circle-color":new Di(Ve.paint_circle["circle-color"]),"circle-blur":new Di(Ve.paint_circle["circle-blur"]),"circle-opacity":new Di(Ve.paint_circle["circle-opacity"]),"circle-translate":new Ri(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Ri(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ri(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ri(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Di(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Di(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Di(Ve.paint_circle["circle-stroke-opacity"])}),layout:Rs},zs="undefined"!=typeof Float32Array?Float32Array:Array;function Ns(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bs(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],d=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2];return t=n[3],e[0]=_*r+b*s+x*p+t*m,e[1]=_*i+b*l+x*h+t*g,e[2]=_*o+b*u+x*d+t*y,e[3]=_*a+b*c+x*f+t*v,_=n[4],b=n[5],x=n[6],t=n[7],e[4]=_*r+b*s+x*p+t*m,e[5]=_*i+b*l+x*h+t*g,e[6]=_*o+b*u+x*d+t*y,e[7]=_*a+b*c+x*f+t*v,_=n[8],b=n[9],x=n[10],t=n[11],e[8]=_*r+b*s+x*p+t*m,e[9]=_*i+b*l+x*h+t*g,e[10]=_*o+b*u+x*d+t*y,e[11]=_*a+b*c+x*f+t*v,_=n[12],b=n[13],x=n[14],t=n[15],e[12]=_*r+b*s+x*p+t*m,e[13]=_*i+b*l+x*h+t*g,e[14]=_*o+b*u+x*d+t*y,e[15]=_*a+b*c+x*f+t*v,e}function Fs(e,t,n){var r=t[0],i=t[1],o=t[2];return t=t[3],e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*t,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*t,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*t,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*t,e}function js(e){Ls.call(this,e,Ds)}function Us(e,t){return t=Fs([],[e.x,e.y,0,1],t),new o(t[0]/t[3],t[1]/t[3])}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)}),Co=Bs,jo=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},As=new zs(3),zs!=Float32Array&&(As[0]=0,As[1]=0,As[2]=0),Ms=new zs(4),zs!=Float32Array&&(Ms[0]=0,Ms[1]=0,Ms[2]=0,Ms[3]=0),qo=function(e){var t=e[0];return t*t+(e=e[1])*e},Os=new zs(2),zs!=Float32Array&&(Os[0]=0,Os[1]=0),(Ls=Hi)&&(js.__proto__=Ls),((js.prototype=Object.create(Ls&&Ls.prototype)).constructor=js).prototype.createBucket=function(e){return new ys(e)},js.prototype.queryRadius=function(e){return Is("circle-radius",this,e)+Is("circle-stroke-width",this,e)+ks(this.paint.get("circle-translate"))},js.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a,s){e=Ps(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),n=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);for(var l,u="map"===this.paint.get("circle-pitch-alignment"),c=u?e:(l=s,e.map((function(e){return Us(e,l)}))),p=u?n*a:n,h=0,d=r;h<d.length;h+=1)for(var f=0,m=d[h];f<m.length;f+=1){var g=m[f],y=u?g:Us(g,s),v=p;if(g=Fs([],[g.x,g.y,0,1],s),"viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=g[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=o.cameraToCenterDistance/g[3]),g=v,Cs(v=c,y=y)||ws(y,v,g))return!0}return!1},D=js;var Vs,qs=((Vs=ys)&&(Hs.__proto__=Vs),(Hs.prototype=Object.create(Vs&&Vs.prototype)).constructor=Hs);function Hs(){Vs.apply(this,arguments)}function Ws(e,t,n,r){var i=t.width;if(t=t.height,r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*t*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*t*n);return e.width=i,e.height=t,e.data=r,e}function Gs(e,t,n){var r=t.width,i=t.height;r===e.width&&i===e.height||(Zs(e,t=Ws({},{width:r,height:i},n),{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function Zs(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,l=0;l<i.height;l++)for(var u=((n.y+l)*e.width+n.x)*o,c=((r.y+l)*t.width+r.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[u+p];return t}function Ks(e,t){Ws(this,e,1,t)}function Xs(e,t){Ws(this,e,4,t)}ni("HeatmapBucket",qs,{omit:["layers"]}),Ks.prototype.resize=function(e){Gs(this,e,1)},Ks.prototype.clone=function(){return new Ks({width:this.width,height:this.height},new Uint8Array(this.data))},Ks.copy=function(e,t,n,r,i){Zs(e,t,n,r,i,1)},Xs.prototype.resize=function(e){Gs(this,e,4)},Xs.prototype.replace=function(e,t){t?this.data.set(e):e instanceof Uint8ClampedArray?this.data=new Uint8Array(e.buffer):this.data=e},Xs.prototype.clone=function(){return new Xs({width:this.width,height:this.height},new Uint8Array(this.data))},Xs.copy=function(e,t,n,r,i){Zs(e,t,n,r,i,4)},ni("AlphaImage",Ks),ni("RGBAImage",Xs);var Ys,Js={paint:new Ui({"heatmap-radius":new Di(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Di(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ri(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ji(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ri(Ve.paint_heatmap["heatmap-opacity"])})};function $s(e){function t(t,r,i){n[e.evaluationKey]=i,i=e.expression.evaluate(n),o.data[t+r+0]=Math.floor(255*i.r/i.a),o.data[t+r+1]=Math.floor(255*i.g/i.a),o.data[t+r+2]=Math.floor(255*i.b/i.a),o.data[t+r+3]=Math.floor(255*i.a)}var n={},r=e.resolution||256,i=e.clips?e.clips.length:1,o=e.image||new Xs({width:r,height:i});if(e.clips)for(var a=0,s=0;a<i;++a,s+=4*r)for(var l=0,u=0;l<r;l++,u+=4){var c=l/(r-1),p=e.clips[a];t(s,u,p.start*(1-c)+p.end*c)}else for(var h=0,d=0;h<r;h++,d+=4)t(0,d,h/(r-1));return o}function Qs(e){Ys.call(this,e,Js),this._updateColorRamp()}(Ys=Hi)&&(Qs.__proto__=Ys),((Qs.prototype=Object.create(Ys&&Ys.prototype)).constructor=Qs).prototype.createBucket=function(e){return new qs(e)},Qs.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},Qs.prototype._updateColorRamp=function(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=$s({expression:e,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},Qs.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},Qs.prototype.queryRadius=function(){return 0},Qs.prototype.queryIntersectsFeature=function(){return!1},Qs.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},Zi=Qs;var el,tl={paint:new Ui({"hillshade-illumination-direction":new Ri(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ri(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ri(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ri(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ri(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ri(Ve.paint_hillshade["hillshade-accent-color"])})};function nl(e){el.call(this,e,tl)}(el=Hi)&&(nl.__proto__=el),((nl.prototype=Object.create(el&&el.prototype)).constructor=nl).prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},ee=nl;var rl=Ki([{name:"a_pos",components:2,type:"Int16"}],4).members,il=ol;function ol(e,t,n){n=n||2;var r,i,o,a,s,l=t&&t.length,u=l?t[0]*n:e.length,c=al(e,0,u,n,!0),p=[];if(!c||c.next===c.prev)return p;if(l&&(c=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=al(e,t[i]*r,a=i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(function(e){for(var t=e,n=e;(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),(t=t.next)!==e;);return n}(a));for(s.sort(ul),i=0;i<s.length;i++)n=function(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&a<s){if((a=s)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}}while((r=r.next)!==t);if(!n)return null;if(i===a)return n;var l,u=n,c=n.x,p=n.y,h=1/0;for(r=n;i>=r.x&&r.x>=c&&i!==r.x&&pl(o<p?i:a,o,c,p,o<p?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),yl(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&function(e,t){return hl(e.prev,e,t.prev)<0&&hl(t.next,e,e.next)<0}(n,r)))&&(n=r,h=l)),(r=r.next)!==u;);return n}(e,t);if(!n)return t;var r=vl(n,e);return e=sl(n,n.next),sl(r,r.next),t===n?e:t}(s[i],n),n=sl(n,n.next);return n}(e,t,c,n)),e.length>80*n){for(var h=r=e[0],d=i=e[1],f=n;f<u;f+=n)(o=e[f])<h&&(h=o),(a=e[f+1])<d&&(d=a),r<o&&(r=o),i<a&&(i=a);s=0!==(s=Math.max(r-h,i-d))?1/s:0}return ll(c,p,n,h,d,s),p}function al(e,t,n,r,i){var o,a;if(i===0<wl(e,t,n,r))for(o=t;o<n;o+=r)a=_l(o,e[o],e[o+1],a);else for(o=n-r;t<=o;o-=r)a=_l(o,e[o],e[o+1],a);return a&&dl(a,a.next)&&(bl(a),a=a.next),a}function sl(e,t){if(!e)return e;t=t||e;var n,r=e;do{if(n=!1,r.steiner||!dl(r,r.next)&&0!==hl(r.prev,r,r.next))r=r.next;else{if(bl(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function ll(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){for(var i=e;null===i.z&&(i.z=cl(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==e;);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,o=e=null,a=0;n;){for(a++,r=n,t=s=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;0<s||0<l&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(n=(i=n).nextZ,s--):(r=(i=r).nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}}while(o.nextZ=null,u*=2,1<a)}(i)}(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?function(e,t,n,r){var i=e.prev,o=e,a=e.next;if(0<=hl(i,o,a))return!1;for(var s=(i.x<o.x?i.x<a.x?i:a:o.x<a.x?o:a).x,l=(i.y<o.y?i.y<a.y?i:a:o.y<a.y?o:a).y,u=(i.x>o.x?i.x>a.x?i:a:o.x>a.x?o:a).x,c=(i.y>o.y?i.y>a.y?i:a:o.y>a.y?o:a).y,p=cl(s,l,t,n,r),h=cl(u,c,t,n,r),d=e.prevZ,f=e.nextZ;d&&d.z>=p&&f&&f.z<=h;){if(d!==e.prev&&d!==e.next&&pl(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=hl(d.prev,d,d.next))return!1;if(d=d.prevZ,f!==e.prev&&f!==e.next&&pl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=hl(f.prev,f,f.next))return!1;f=f.nextZ}for(;d&&d.z>=p;){if(d!==e.prev&&d!==e.next&&pl(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=hl(d.prev,d,d.next))return!1;d=d.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&pl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=hl(f.prev,f,f.next))return!1;f=f.nextZ}return!0}(e,r,i,o):function(e){var t=e.prev,n=e,r=e.next;if(0<=hl(t,n,r))return!1;for(var i=e.next.next;i!==e.prev;){if(pl(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=hl(i.prev,i,i.next))return!1;i=i.next}return!0}(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),bl(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?ll(e=function(e,t,n){var r=e;do{var i=r.prev,o=r.next.next}while(!dl(i,o)&&fl(i,r,r.next,o)&&yl(i,o)&&yl(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),bl(r),bl(r.next),r=e=o),(r=r.next)!==e);return sl(r)}(sl(e),t,n),t,n,r,i,o,2):2===a&&function(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&fl(n,n.next,e,t))return!0}while((n=n.next)!==e);return!1}(e,t)&&(yl(e,t)&&yl(t,e)&&function(e,t){for(var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==e;);return r}(e,t)&&(hl(e.prev,e,t.prev)||hl(e,t.prev,t))||dl(e,t)&&0<hl(e.prev,e,e.next)&&0<hl(t.prev,t,t.next))}(a,s)){var l=vl(a,s);return a=sl(a,a.next),l=sl(l,l.next),ll(a,t,n,r,i,o),ll(l,t,n,r,i,o)}s=s.next}}while((a=a.next)!==e)}(e,t,n,r,i,o):ll(sl(e),t,n,r,i,o,1);break}}}function ul(e,t){return e.x-t.x}function cl(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function pl(e,t,n,r,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(r-s)-(n-a)*(t-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function hl(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function dl(e,t){return e.x===t.x&&e.y===t.y}function fl(e,t,n,r){var i=gl(hl(e,t,n)),o=gl(hl(e,t,r)),a=gl(hl(n,r,e)),s=gl(hl(n,r,t));return i!==o&&a!==s||0===i&&ml(e,n,t)||0===o&&ml(e,r,t)||0===a&&ml(n,e,r)||!(0!==s||!ml(n,t,r))}function ml(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function gl(e){return 0<e?1:e<0?-1:0}function yl(e,t){return hl(e.prev,e,e.next)<0?0<=hl(e,t,e.next)&&0<=hl(e,e.prev,t):hl(e,t,e.prev)<0||hl(e,e.next,t)<0}function vl(e,t){var n=new xl(e.i,e.x,e.y),r=new xl(t.i,t.x,t.y),i=e.next,o=t.prev;return(e.next=t).prev=e,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function _l(e,t,n,r){return n=new xl(e,t,n),r?(n.next=r.next,(n.prev=r).next.prev=n,r.next=n):(n.prev=n).next=n,n}function bl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xl(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wl(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function Sl(e,t,n,r,i){!function e(t,n,r,i,o){for(;r<i;){var a,s,l,u,c;600<i-r&&(a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1),e(t,n,u=Math.max(r,Math.floor(n-s*l/a+c)),c=Math.min(i,Math.floor(n+(a-s)*l/a+c)),o));var p=t[n],h=r,d=i;for(El(t,r,n),0<o(t[i],p)&&El(t,r,i);h<d;){for(El(t,h,d),h++,d--;o(t[h],p)<0;)h++;for(;0<o(t[d],p);)d--}0===o(t[r],p)?El(t,r,d):El(t,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}}(e,t,n||0,r||e.length-1,i||Cl)}function El(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Cl(e,t){return e<t?-1:t<e?1:0}function Tl(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,o=[],a=0;a<n;a++){var s=function(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}(e[a]);0!==s&&(e[a].area=Math.abs(s),(i=void 0===i?s<0:i)===s<0?(r&&o.push(r),r=[e[a]]):r.push(e[a]))}if(r&&o.push(r),1<t)for(var l=0;l<o.length;l++)o[l].length<=t||(Sl(o[l],t,1,o[l].length-1,Il),o[l]=o[l].slice(0,t));return o}function Il(e,t){return t.area-e.area}function kl(e,t,n){for(var r=n.patternDependencies,i=!1,o=0,a=t;o<a.length;o+=1){var s=a[o].paint.get(e+"-pattern");s.isConstant()||(i=!0),(s=s.constantOr(null))&&(r[s.to]=i=!0,r[s.from]=!0)}return i}function Pl(e,t,n,r,i){for(var o=i.patternDependencies,a=0,s=t;a<s.length;a+=1){var l,u,c=s[a],p=c.paint.get(e+"-pattern").value;"constant"!==p.kind&&(l=p.evaluate({zoom:r-1},n,{},i.availableImages),u=p.evaluate({zoom:r},n,{},i.availableImages),p=p.evaluate({zoom:r+1},n,{},i.availableImages),l=l&&l.name?l.name:l,u=u&&u.name?u.name:u,p=p&&p.name?p.name:p,o[l]=!0,o[u]=!0,o[p]=!0,n.patterns[c.id]={min:l,mid:u,max:p})}return n}function Al(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ji,this.indexArray=new No,this.indexArray2=new ea,this.programConfigurations=new us(e.layers,e.zoom),this.segments=new ka,this.segments2=new ka,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}Oa=ol,ol.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(wl(e,0,o,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(wl(e,u,c,n))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,d=r[s+1]*n,f=r[s+2]*n;p+=Math.abs((e[h]-e[f])*(e[1+d]-e[1+h])-(e[h]-e[d])*(e[1+f]-e[1+h]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},ol.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);0<i&&(r+=e[i-1].length,n.holes.push(r))}return n},il.default=Oa,Al.prototype.populate=function(e,t,n){this.hasPattern=kl("fill",this.layers,t);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,a=e;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d=ms(l,h);this.layers[0]._featureFilter.filter(new Si(this.zoom),d,n)&&(s=r?r.evaluate(d,{},n,t.availableImages):void 0,s={id:u,properties:l.properties,type:l.type,sourceLayerIndex:p,index:c,geometry:h?d.geometry:fs(l),patterns:{},sortKey:s},i.push(s))}r&&i.sort((function(e,t){return e.sortKey-t.sortKey}));for(var f=0,m=i;f<m.length;f+=1){var g,y=m[f],v=y.geometry,_=y.index,b=y.sourceLayerIndex;this.hasPattern?(g=Pl("fill",this.layers,y,this.zoom,t),this.patternFeatures.push(g)):this.addFeature(y,v,_,n,{}),y=e[_].feature,t.featureIndex.insert(y,v,_,b,this.index)}},Al.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Al.prototype.addFeatures=function(e,t,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,t,n)}},Al.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Al.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Al.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rl),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Al.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Al.prototype.addFeature=function(e,t,n,r,i){for(var o=0,a=Tl(t,500);o<a.length;o+=1){for(var s=a[o],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var p=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),h=p.vertexLength,d=[],f=[],m=0,g=s;m<g.length;m+=1){var y=g[m];if(0!==y.length){y!==s[0]&&f.push(d.length/2);var v=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),_=v.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(_+y.length-1,_),d.push(y[0].x),d.push(y[0].y);for(var b=1;b<y.length;b++)this.layoutVertexArray.emplaceBack(y[b].x,y[b].y),this.indexArray2.emplaceBack(_+b-1,_+b),d.push(y[b].x),d.push(y[b].y);v.vertexLength+=y.length,v.primitiveLength+=y.length}}for(var x=il(d,f),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(h+x[w],h+x[w+1],h+x[w+2]);p.vertexLength+=l,p.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)},ni("FillBucket",Al,{omit:["layers","patternFeatures"]}),re=new Ui({"fill-sort-key":new Di(Ve.layout_fill["fill-sort-key"])});var Ml,Ol={paint:new Ui({"fill-antialias":new Ri(Ve.paint_fill["fill-antialias"]),"fill-opacity":new Di(Ve.paint_fill["fill-opacity"]),"fill-color":new Di(Ve.paint_fill["fill-color"]),"fill-outline-color":new Di(Ve.paint_fill["fill-outline-color"]),"fill-translate":new Ri(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Ri(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ni(Ve.paint_fill["fill-pattern"])}),layout:re};function Ll(e){Ml.call(this,e,Ol)}(Ml=Hi)&&(Ll.__proto__=Ml),((Ll.prototype=Object.create(Ml&&Ml.prototype)).constructor=Ll).prototype.recalculate=function(e,t){Ml.prototype.recalculate.call(this,e,t),"constant"===(t=this.paint._values["fill-outline-color"]).value.kind&&void 0===t.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},Ll.prototype.createBucket=function(e){return new Al(e)},Ll.prototype.queryRadius=function(){return ks(this.paint.get("fill-translate"))},Ll.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a){return _s(Ps(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},Ll.prototype.isTileClipped=function(){return!0},Nn=Ll;var Rl=Ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Dl=zl;function zl(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Nl,this,t)}function Nl(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}zl.types=["Unknown","Point","LineString","Polygon"],zl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n,r=e.readVarint()+e.pos,i=1,a=0,s=0,l=0,u=[];e.pos<r;)if(a<=0&&(i=7&(n=e.readVarint()),a=n>>3),a--,1===i||2===i)s+=e.readSVarint(),l+=e.readSVarint(),1===i&&(t&&u.push(t),t=[]),t.push(new o(s,l));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}return t&&u.push(t),u},zl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=1/0,l=-1/0,u=1/0,c=-1/0;e.pos<n;)if(i<=0&&(r=7&(t=e.readVarint()),i=t>>3),i--,1===r||2===r)(o+=e.readSVarint())<s&&(s=o),l<o&&(l=o),(a+=e.readSVarint())<u&&(u=a),c<a&&(c=a);else if(7!==r)throw new Error("unknown command "+r);return[s,u,l,c]},zl.prototype.toGeoJSON=function(e,t,n){var r,i=this.extent*Math.pow(2,n),o=this.extent*e,a=this.extent*t,s=this.loadGeometry();function l(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+a)/i;e[t]=[360*(n.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(t=zl.types[this.type],this.type){case 1:for(var u=[],c=0;c<s.length;c++)u[c]=s[c][0];l(s=u);break;case 2:for(c=0;c<s.length;c++)l(s[c]);break;case 3:for(s=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=function(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}(e[o]);0!==a&&((r=void 0===r?a<0:r)===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(s),c=0;c<s.length;c++)for(r=0;r<s[c].length;r++)l(s[c][r])}return 1===s.length?s=s[0]:t="Multi"+t,t={type:"Feature",geometry:{type:t,coordinates:s},properties:this.properties},"id"in this&&(t.id=this.id),t};var Bl=Fl;function Fl(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(jl,this,t),this.length=this._features.length}function jl(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1==r?e.readString():2==r?e.readFloat():3==r?e.readDouble():4==r?e.readVarint64():5==r?e.readVarint():6==r?e.readSVarint():7==r?e.readBoolean():null}return t}(n))}function Ul(e,t,n){3!==e||(n=new Bl(n,n.readVarint()+n.pos)).length&&(t[n.name]=n)}Fl.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");return this._pbf.pos=this._features[e],e=this._pbf.readVarint()+this._pbf.pos,new Dl(this._pbf,e,this.extent,this._keys,this._values)};var Vl={VectorTile:function(e,t){this.layers=e.readFields(Ul,{},t)},VectorTileFeature:Dl,VectorTileLayer:Bl},ql=Vl.VectorTileFeature.types,Hl=Math.pow(2,13);function Wl(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*Hl)+a,i*Hl*2,o*Hl*2,Math.round(s))}function Gl(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ro,this.indexArray=new No,this.programConfigurations=new us(e.layers,e.zoom),this.segments=new ka,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}Gl.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=kl("fill-extrusion",this.layers,t);for(var r=0,i=e;r<i.length;r+=1){var o=(c=i[r]).feature,a=c.id,s=c.index,l=c.sourceLayerIndex,u=this.layers[0]._featureFilter.needGeometry,c=ms(o,u);this.layers[0]._featureFilter.filter(new Si(this.zoom),c,n)&&(c={id:a,sourceLayerIndex:l,index:s,geometry:u?c.geometry:fs(o),properties:o.properties,type:o.type,patterns:{}},this.hasPattern?this.features.push(Pl("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,s,n,{}),t.featureIndex.insert(o,c.geometry,s,l,this.index,!0))}},Gl.prototype.addFeatures=function(e,t,n){for(var r=0,i=this.features;r<i.length;r+=1){var o=i[r],a=o.geometry;this.addFeature(o,a,o.index,t,n)}},Gl.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Gl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Gl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gl.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Rl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Gl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Gl.prototype.addFeature=function(e,t,n,r,i){for(var o,a=0,s=Tl(t,500);a<s.length;a+=1){for(var l=s[a],u=0,c=0,p=l;c<p.length;c+=1)u+=p[c].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),d=0,f=l;d<f.length;d+=1){var m=f[d];if(0!==m.length&&!((o=m).every((function(e){return e.x<0}))||o.every((function(e){return e.x>ps}))||o.every((function(e){return e.y<0}))||o.every((function(e){return e.y>ps}))))for(var g=0,y=0;y<m.length;y++){var v,_,b,x=m[y];1<=y&&(b=v=m[y-1],(_=x).x===b.x&&(_.x<0||_.x>ps)||_.y===b.y&&(_.y<0||_.y>ps)||(h.vertexLength+4>ka.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)),b=x.sub(v)._perp()._unit(),32768<g+(_=v.dist(x))&&(g=0),Wl(this.layoutVertexArray,x.x,x.y,b.x,b.y,0,0,g),Wl(this.layoutVertexArray,x.x,x.y,b.x,b.y,0,1,g),g+=_,Wl(this.layoutVertexArray,v.x,v.y,b.x,b.y,0,0,g),Wl(this.layoutVertexArray,v.x,v.y,b.x,b.y,0,1,g),b=h.vertexLength,this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),h.vertexLength+=4,h.primitiveLength+=2))}}if(h.vertexLength+u>ka.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===ql[e.type]){for(var w=[],S=[],E=h.vertexLength,C=0,T=l;C<T.length;C+=1){var I=T[C];if(0!==I.length){I!==l[0]&&S.push(w.length/2);for(var k=0;k<I.length;k++){var P=I[k];Wl(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),w.push(P.x),w.push(P.y)}}}for(var A=il(w,S),M=0;M<A.length;M+=3)this.indexArray.emplaceBack(E+A[M],E+A[M+2],E+A[M+1]);h.primitiveLength+=A.length/3,h.vertexLength+=u}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)},ni("FillExtrusionBucket",Gl,{omit:["layers","features"]});var Zl,Kl={paint:new Ui({"fill-extrusion-opacity":new Ri(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Di(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ri(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ri(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ni(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Di(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Di(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ri(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Xl(e){Zl.call(this,e,Kl)}function Yl(e,t){return e.x*t.x+e.y*t.y}function Jl(e,t){if(1===e.length){for(var n,r=0,i=t[r++];!n||i.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var o=t[r],a=e[0],s=n.sub(i),l=o.sub(i),u=a.sub(i),c=Yl(s,s),p=Yl(s,l);if(a=((a=Yl(l,l))*(s=Yl(u,s))-p*(u=Yl(u,l)))/(l=c*a-p*p),l=(c*u-p*s)/l,l=i.z*(1-a-l)+n.z*a+o.z*l,isFinite(l))return l}return 1/0}for(var h=1/0,d=0,f=t;d<f.length;d+=1){var m=f[d];h=Math.min(h,m.z)}return h}function $l(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){t.gradients[e.id]={}})),this.layoutVertexArray=new ao,this.layoutVertexArray2=new uo,this.indexArray=new No,this.programConfigurations=new us(e.layers,e.zoom),this.segments=new ka,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}(Zl=Hi)&&(Xl.__proto__=Zl),((Xl.prototype=Object.create(Zl&&Zl.prototype)).constructor=Xl).prototype.createBucket=function(e){return new Gl(e)},Xl.prototype.queryRadius=function(){return ks(this.paint.get("fill-extrusion-translate"))},Xl.prototype.is3D=function(){return!0},Xl.prototype.queryIntersectsFeature=function(e,t,n,r,i,a,s,l){return a=Ps(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),s=this.paint.get("fill-extrusion-height").evaluate(t,n),n=this.paint.get("fill-extrusion-base").evaluate(t,n),a=function(e,t,n){for(var r=[],i=0,a=e;i<a.length;i+=1){var s;Fs(s=[(s=a[i]).x,s.y,n,1],s,t),r.push(new o(s[0]/s[3],s[1]/s[3]))}return r}(a,l,0),l=function(e,t,n,r){for(var i=[],a=[],s=r[8]*t,l=r[9]*t,u=r[10]*t,c=r[11]*t,p=r[8]*n,h=r[9]*n,d=r[10]*n,f=r[11]*n,m=0,g=e;m<g.length;m+=1){for(var y=[],v=[],_=0,b=g[m];_<b.length;_+=1){var x=(T=b[_]).x,w=T.y,S=r[0]*x+r[4]*w+r[12],E=r[1]*x+r[5]*w+r[13],C=(I=r[2]*x+r[6]*w+r[14])+u,T=(k=r[3]*x+r[7]*w+r[15])+c,I=(x=S+p,w=E+h,I+d),k=k+f;(E=new o((S+s)/T,(E+l)/T)).z=C/T,y.push(E),(w=new o(x/k,w/k)).z=I/k,v.push(w)}i.push(y),a.push(v)}return[i,a]}(r,n,s,l),function(e,t,n){var r=1/0;_s(n,t)&&(r=Jl(n,t[0]));for(var i=0;i<t.length;i++)for(var o=t[i],a=e[i],s=0;s<o.length-1;s++){var l=o[s],u=o[s+1],c=a[s];vs(n,l=[l,u,a[s+1],c,l])&&(r=Math.min(r,Jl(n,l)))}return r!==1/0&&r}(l[0],l[1],a)},Bn=Xl;var Ql=Ki([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,eu=Ki([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,tu=Vl.VectorTileFeature.types,nu=Math.cos(Math.PI/180*37.5),ru=Math.pow(2,14)/.5;$l.prototype.populate=function(e,t,n){this.hasPattern=kl("line",this.layers,t);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],o=0,a=e;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d=ms(l,h);this.layers[0]._featureFilter.filter(new Si(this.zoom),d,n)&&(s=r?r.evaluate(d,{},n):void 0,s={id:u,properties:l.properties,type:l.type,sourceLayerIndex:p,index:c,geometry:h?d.geometry:fs(l),patterns:{},sortKey:s},i.push(s))}r&&i.sort((function(e,t){return e.sortKey-t.sortKey}));for(var f=0,m=i;f<m.length;f+=1){var g,y=m[f],v=y.geometry,_=y.index,b=y.sourceLayerIndex;this.hasPattern?(g=Pl("line",this.layers,y,this.zoom,t),this.patternFeatures.push(g)):this.addFeature(y,v,_,n,{}),y=e[_].feature,t.featureIndex.insert(y,v,_,b,this.index)}},$l.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},$l.prototype.addFeatures=function(e,t,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,t,n)}},$l.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},$l.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$l.prototype.upload=function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,eu)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ql),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},$l.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},$l.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},$l.prototype.addFeature=function(e,t,n,r,i){var o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var c=0,p=t;c<p.length;c+=1){var h=p[c];this.addLine(h,e,a,s,l,u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)},$l.prototype.addLine=function(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<e.length-1;a++)this.totalDistance+=e[a].dist(e[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===tu[t.type],l=e.length;2<=l&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===n&&(i=1.05);var c=this.overscaling<=16?15*ps/(512*this.overscaling):0,p=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),h=void 0,d=void 0,f=void 0,m=void 0;this.e1=this.e2=-1,s&&(y=e[l-2],m=e[u].sub(y)._unit()._perp());for(var g=u;g<l;g++)if(!(d=g===l-1?s?e[u+1]:void 0:e[g+1])||!e[g].equals(d)){m&&(f=m),y&&(h=y);var y=e[g],v=(m=d?d.sub(y)._unit()._perp():f,(f=f||m).add(m));0===v.x&&0===v.y||v._unit();var _=f.x*m.x+f.y*m.y,b=0!=(w=v.x*m.x+v.y*m.y)?1/w:1/0,x=2*Math.sqrt(2-2*w),w=w<nu&&h&&d,S=0<f.x*m.y-f.y*m.x;w&&u<g&&2*c<(E=y.dist(h))&&(C=y.sub(y.sub(h)._mult(c/E)._round()),this.updateDistance(h,C),this.addCurrentVertex(C,f,0,0,p),h=C);var E=h&&d,C=E?n:s?"butt":r;if(E&&"round"===C&&(b<o?C="miter":b<=2&&(C="fakeround")),"bevel"===(C="miter"===C&&i<b?"bevel":C)&&(2<b&&(C="flipbevel"),b<i&&(C="miter")),h&&this.updateDistance(h,y),"miter"===C)v._mult(b),this.addCurrentVertex(y,v,0,0,p);else if("flipbevel"===C)100<b?v=m.mult(-1):(T=b*f.add(m).mag()/f.sub(m).mag(),v._perp()._mult(T*(S?-1:1))),this.addCurrentVertex(y,v,0,0,p),this.addCurrentVertex(y,v.mult(-1),0,0,p);else if("bevel"===C||"fakeround"===C){var T=-Math.sqrt(b*b-1);if(b=S?T:0,T=S?0:T,h&&this.addCurrentVertex(y,f,b,T,p),"fakeround"===C)for(var I=Math.round(180*x/Math.PI/20),k=1;k<I;k++){var P,A=k/I;.5!==A&&(A+=A*(P=A-.5)*(A-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*P*P+(.848013+_*(.215638*_-1.06021)))),A=m.sub(f)._mult(A)._add(f)._unit()._mult(S?-1:1),this.addHalfVertex(y,A.x,A.y,!1,S,0,p)}d&&this.addCurrentVertex(y,m,-b,-T,p)}else"butt"===C?this.addCurrentVertex(y,v,0,0,p):"square"===C?this.addCurrentVertex(y,v,v=h?1:-1,v,p):"round"===C&&(h&&(this.addCurrentVertex(y,f,0,0,p),this.addCurrentVertex(y,f,1,1,p,!0)),d&&(this.addCurrentVertex(y,m,-1,-1,p,!0),this.addCurrentVertex(y,m,0,0,p)));w&&g<l-1&&2*c<(w=y.dist(d))&&(w=y.add(d.sub(y)._mult(c/w)._round()),this.updateDistance(y,w),this.addCurrentVertex(w,m,0,0,p),y=w)}}},$l.prototype.addCurrentVertex=function(e,t,n,r,i,o){var a=t.x+t.y*n,s=t.y-t.x*n,l=-t.x+t.y*r,u=-t.y-t.x*r;this.addHalfVertex(e,a,s,o=void 0!==o&&o,!1,n,i),this.addHalfVertex(e,l,u,o,!0,-r,i),this.distance>ru/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,n,r,i,o))},$l.prototype.addHalfVertex=function(e,t,n,r,i,o,a){var s=e.x,l=e.y;e=.5*(this.lineClips?this.scaledDistance*(ru-1):this.scaledDistance),this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&e)<<2,e>>6),this.lineClips&&(e=this.scaledDistance-this.lineClips.start,u=this.lineClips.end-this.lineClips.start,this.layoutVertexArray2.emplaceBack(e/u,this.lineClipsArray.length));var u=a.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),i?this.e2=u:this.e1=u},$l.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},$l.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},ni("LineBucket",$l,{omit:["layers","patternFeatures"]}),Rs=new Ui({"line-cap":new Ri(Ve.layout_line["line-cap"]),"line-join":new Di(Ve.layout_line["line-join"]),"line-miter-limit":new Ri(Ve.layout_line["line-miter-limit"]),"line-round-limit":new Ri(Ve.layout_line["line-round-limit"]),"line-sort-key":new Di(Ve.layout_line["line-sort-key"])});var iu,ou={paint:new Ui({"line-opacity":new Di(Ve.paint_line["line-opacity"]),"line-color":new Di(Ve.paint_line["line-color"]),"line-translate":new Ri(Ve.paint_line["line-translate"]),"line-translate-anchor":new Ri(Ve.paint_line["line-translate-anchor"]),"line-width":new Di(Ve.paint_line["line-width"]),"line-gap-width":new Di(Ve.paint_line["line-gap-width"]),"line-offset":new Di(Ve.paint_line["line-offset"]),"line-blur":new Di(Ve.paint_line["line-blur"]),"line-dasharray":new Fi(Ve.paint_line["line-dasharray"]),"line-pattern":new Ni(Ve.paint_line["line-pattern"]),"line-gradient":new ji(Ve.paint_line["line-gradient"])}),layout:Rs};function au(){iu.apply(this,arguments)}var su,lu=new((iu=Di)&&(au.__proto__=iu),((au.prototype=Object.create(iu&&iu.prototype)).constructor=au).prototype.possiblyEvaluate=function(e,t){return t=new Si(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),iu.prototype.possiblyEvaluate.call(this,e,t)},au.prototype.evaluate=function(e,t,n,r){return t=d({},t,{zoom:Math.floor(t.zoom)}),iu.prototype.evaluate.call(this,e,t,n,r)},au)(ou.paint.properties["line-width"].specification);function uu(e){su.call(this,e,ou),this.gradientVersion=0}function cu(e,t){return 0<t?t+2*e:e}lu.useIntegerZoom=!0,(su=Hi)&&(uu.__proto__=su),((uu.prototype=Object.create(su&&su.prototype)).constructor=uu).prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&(e=this._transitionablePaint._values["line-gradient"].value.expression,this.stepInterpolant=e._styleExpression.expression instanceof on,this.gradientVersion=(this.gradientVersion+1)%l)},uu.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},uu.prototype.recalculate=function(e,t){su.prototype.recalculate.call(this,e,t),this.paint._values["line-floorwidth"]=lu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},uu.prototype.createBucket=function(e){return new $l(e)},uu.prototype.queryRadius=function(e){e=cu(Is("line-width",this,t=e),Is("line-gap-width",this,t));var t=Is("line-offset",this,t);return e/2+Math.abs(t)+ks(this.paint.get("line-translate"))},uu.prototype.queryIntersectsFeature=function(e,t,n,r,i,a,s){return e=Ps(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),a=s/2*cu(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),bs(e,r=(n=this.paint.get("line-offset").evaluate(t,n))?function(e,t){for(var n=[],r=new o(0,0),i=0;i<e.length;i++){for(var a=e[i],s=[],l=0;l<a.length;l++){var u=a[l-1],c=a[l],p=a[l+1];u=0===l?r:c.sub(u)._unit()._perp(),p=l===a.length-1?r:p.sub(c)._unit()._perp(),p=(u=u._add(p)._unit()).x*p.x+u.y*p.y,u._mult(1/p),s.push(u._mult(t)._add(c))}n.push(s)}return n}(r,n*s):r,a)},uu.prototype.isTileClipped=function(){return!0},Oa=uu;var pu=Ki([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hu=Ki([{name:"a_projected_pos",components:3,type:"Float32"}],4),du=(Ki([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ki([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),fu=(Ki([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4));function mu(e,t,n){return e.sections.forEach((function(e){var r;e.text=(r=e.text,e=n,"uppercase"===(e=t.layout.get("text-transform").evaluate(e,{}))?r=r.toLocaleUpperCase():"lowercase"===e&&(r=r.toLocaleLowerCase()),r=Ci.applyArabicShaping?Ci.applyArabicShaping(r):r)})),e}re=Ki([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),Ki([{name:"triangle",components:3,type:"Uint16"}]),Ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ki([{type:"Float32",name:"offsetX"}]),Ki([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var gu={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},yu=24,vu=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?i-1:0,h=n?-1:1;for(n=e[t+p],p+=h,o=n&(1<<-c)-1,n>>=-c,c+=s;0<c;o=256*o+e[t+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+e[t+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(n?-1:1);a+=Math.pow(2,r),o-=u}return(n?-1:1)*a*Math.pow(2,o-r)},_u=function(e,t,n,r,i,o){var a,s,l=8*o-i-1,u=(1<<l)-1,c=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1;for(o=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+c?p/r:p*Math.pow(2,1-c))*r&&(a++,r/=2),u<=a+c?(s=0,a=u):1<=a+c?(s=(t*r-1)*Math.pow(2,i),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));8<=i;e[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[n+h]=255&a,h+=d,a/=256,l-=8);e[n+h-d]|=128*o},bu=xu;function xu(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}xu.Varint=0,xu.Fixed64=1,xu.Bytes=2,xu.Fixed32=5;var wu=4294967296,Su=1/wu,Eu="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Cu(e){return e.type===xu.Bytes?e.readVarint()+e.pos:e.pos+1}function Tu(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Iu(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;e<=i;i--)n.buf[i+r]=n.buf[i]}function ku(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Pu(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Au(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Mu(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Ou(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Lu(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Ru(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Du(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function zu(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Nu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Bu(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Fu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}xu.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Nu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Fu(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Nu(this.buf,this.pos)+Nu(this.buf,this.pos+4)*wu;return this.pos+=8,e},readSFixed64:function(){var e=Nu(this.buf,this.pos)+Fu(this.buf,this.pos+4)*wu;return this.pos+=8,e},readFloat:function(){var e=vu(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=vu(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n=t[this.pos++],r=127&n;return n<128?r:(r|=(127&(n=t[this.pos++]))<<7,n<128?r:(r|=(127&(n=t[this.pos++]))<<14,n<128?r:(r|=(127&(n=t[this.pos++]))<<21,n<128?r:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Tu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Tu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Tu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Tu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Tu(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Tu(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&t[this.pos])<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e,t=this.readVarint()+this.pos,n=this.pos;return 12<=(this.pos=t)-n&&Eu?(e=this.buf,Eu.decode(e.subarray(n,t))):function(e,t,n){for(var r,i,o,a="",s=t;s<n;){var l=e[s],u=null,c=239<l?4:223<l?3:191<l?2:1;if(n<s+c)break;1===c?l<128&&(u=l):2===c?128==(192&(r=e[s+1]))&&(u=(31&l)<<6|63&r)<=127&&(u=null):3===c?(r=e[s+1],i=e[s+2],128==(192&r)&&128==(192&i)&&((u=(15&l)<<12|(63&r)<<6|63&i)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(r=e[s+1],i=e[s+2],o=e[s+3],128==(192&r)&&128==(192&i)&&128==(192&o)&&((u=(15&l)<<18|(63&r)<<12|(63&i)<<6|63&o)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,a+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),a+=String.fromCharCode(u),s+=c}return a}(this.buf,n,t)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==xu.Bytes)return e.push(this.readVarint(t));var n=Cu(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==xu.Bytes)return e.push(this.readSVarint());var t=Cu(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==xu.Bytes)return e.push(this.readBoolean());var t=Cu(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==xu.Bytes)return e.push(this.readFloat());var t=Cu(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==xu.Bytes)return e.push(this.readDouble());var t=Cu(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==xu.Bytes)return e.push(this.readFixed32());var t=Cu(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==xu.Bytes)return e.push(this.readSFixed32());var t=Cu(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==xu.Bytes)return e.push(this.readFixed64());var t=Cu(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==xu.Bytes)return e.push(this.readSFixed64());var t=Cu(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){if((e&=7)===xu.Varint)for(;127<this.buf[this.pos++];);else if(e===xu.Bytes)this.pos=this.readVarint()+this.pos;else if(e===xu.Fixed32)this.pos+=4;else{if(e!==xu.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t,n=this.length||16;n<this.pos+e;)n*=2;n!==this.length&&((t=new Uint8Array(n)).set(this.buf),this.buf=t,this.length=n)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Bu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Bu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Bu(this.buf,-1&e,this.pos),Bu(this.buf,Math.floor(e*Su),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Bu(this.buf,-1&e,this.pos),Bu(this.buf,Math.floor(e*Su),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?function(e,t){var n,r;if(0<=e?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:r=r+1|(n=0)),0x10000000000000000<=e||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t){t.buf[t.pos++]=127&e|128,e>>>=7,t.buf[t.pos++]=127&e|128,e>>>=7,t.buf[t.pos++]=127&e|128,e>>>=7,t.buf[t.pos++]=127&e|128,e>>>=7,t.buf[t.pos]=127&e}(n,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if(55295<(r=t.charCodeAt(o))&&r<57344){if(!i){56319<r||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos),128<=(e=this.pos-t)&&Iu(t,e,this),this.pos=t-1,this.writeVarint(e),this.pos+=e},writeFloat:function(e){this.realloc(4),_u(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),_u(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this),128<=(t=this.pos-n)&&Iu(n,t,this),this.pos=n-1,this.writeVarint(t),this.pos+=t},writeMessage:function(e,t,n){this.writeTag(e,xu.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,ku,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Pu,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Ou,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Au,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Mu,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Lu,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Ru,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Du,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,zu,t)},writeBytesField:function(e,t){this.writeTag(e,xu.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,xu.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,xu.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,xu.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,xu.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,xu.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,xu.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,xu.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,xu.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,xu.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var ju=3;function Uu(e,t,n){1===e&&n.readMessage(Vu,t)}function Vu(e,t,n){var r,i,o,a,s;3===e&&(r=(s=n.readMessage(qu,{})).id,i=s.bitmap,o=s.width,a=s.height,e=s.left,n=s.top,s=s.advance,t.push({id:r,bitmap:new Ks({width:o+2*ju,height:a+2*ju},i),metrics:{width:o,height:a,left:e,top:n,advance:s}}))}function qu(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var Hu=ju;function Wu(e){for(var t=0,n=0,r=0,i=e;r<i.length;r+=1){var o=i[r];t+=o.w*o.h,n=Math.max(n,o.w)}e.sort((function(e,t){return t.h-e.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],s=0,l=0,u=0,c=e;u<c.length;u+=1)for(var p=c[u],h=a.length-1;0<=h;h--){var d,f=a[h];if(!(p.w>f.w||p.h>f.h)){p.x=f.x,p.y=f.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h?(d=a.pop(),h<a.length&&(a[h]=d)):p.h===f.h?(f.x+=p.w,f.w-=p.w):(p.w===f.w||a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:l,fill:t/(s*l)||0}}function Gu(e,t){var n=t.pixelRatio,r=t.version,i=t.stretchX,o=t.stretchY;t=t.content,this.paddedRect=e,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=t,this.version=r}var Zu=1;(Ni={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}}).tl.get=function(){return[this.paddedRect.x+Zu,this.paddedRect.y+Zu]},Ni.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Zu,this.paddedRect.y+this.paddedRect.h-Zu]},Ni.tlbr.get=function(){return this.tl.concat(this.br)},Ni.displaySize.get=function(){return[(this.paddedRect.w-2*Zu)/this.pixelRatio,(this.paddedRect.h-2*Zu)/this.pixelRatio]},Object.defineProperties(Gu.prototype,Ni),ji=function(e,t){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(e,n,i),this.addImages(t,r,i);var o,a,s,l=new Xs({width:(i=(s=Wu(i)).w)||1,height:(s=s.h)||1});for(o in e){var u=e[o],c=n[o].paddedRect;Xs.copy(u.data,l,{x:0,y:0},{x:c.x+Zu,y:c.y+Zu},u.data)}for(a in t){var p=t[a],h=(m=r[a].paddedRect).x+Zu,d=m.y+Zu,f=p.data.width,m=p.data.height;Xs.copy(p.data,l,{x:0,y:0},{x:h,y:d},p.data),Xs.copy(p.data,l,{x:0,y:m-1},{x:h,y:d-1},{width:f,height:1}),Xs.copy(p.data,l,{x:0,y:0},{x:h,y:d+m},{width:f,height:1}),Xs.copy(p.data,l,{x:f-1,y:0},{x:h-1,y:d},{width:1,height:m}),Xs.copy(p.data,l,{x:0,y:0},{x:h+f,y:d},{width:1,height:m})}this.image=l,this.iconPositions=n,this.patternPositions=r},ji.prototype.addImages=function(e,t,n){for(var r in e){var i=e[r],o={x:0,y:0,w:i.data.width+2*Zu,h:i.data.height+2*Zu};n.push(o),t[r]=new Gu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},ji.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},ji.prototype.patchUpdatedImage=function(e,t,n){var r;e&&t&&e.version!==t.version&&(e.version=t.version,e=(r=e.tl)[0],r=r[1],n.update(t.data,void 0,{x:e,y:r}))},ni("ImagePosition",Gu),ni("ImageAtlas",ji);var Ku={horizontal:1,vertical:2,horizontalOnly:3},Xu=-17;function Yu(){this.scale=1,this.fontStack="",this.imageName=null}Yu.forText=function(e,t){var n=new Yu;return n.scale=e||1,n.fontStack=t,n},Yu.forImage=function(e){var t=new Yu;return t.imageName=e,t};var Ju=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function $u(e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m){var g=Ju.fromFeature(e,i);if(p===Ku.vertical&&g.verticalizePunctuation(),e=Ci.processBidirectionalText,i=Ci.processStyledBidirectionalText,e&&1===g.sections.length)for(var y=[],v=0,_=e(g.toString(),ic(g,u,o,t,r,d,f));v<_.length;v+=1){var b=_[v],x=new Ju;x.text=b,x.sections=g.sections;for(var w=0;w<b.length;w++)x.sectionIndex.push(0);y.push(x)}else if(i){y=[];for(var S=0,E=i(g.text,g.sectionIndex,ic(g,u,o,t,r,d,f));S<E.length;S+=1){var C=E[S],T=new Ju;T.text=C[0],T.sectionIndex=C[1],T.sections=g.sections,y.push(T)}}else y=function(e,t){for(var n=[],r=e.text,i=0,o=0,a=t;o<a.length;o+=1){var s=a[o];n.push(e.substring(i,s)),i=s}return i<r.length&&n.push(e.substring(i,r.length)),n}(g,ic(g,u,o,t,r,d,f));return function(e,t,n,r,i,o,a,s,l,u,c,p){for(var h=0,d=Xu,f=0,m=0,g="right"===s?1:"left"===s?0:.5,y=0,v=0,_=i;v<_.length;v+=1){var b=_[v];b.trim();var x=b.getMaxScale(),w=(x-1)*yu,S={positionedGlyphs:[],lineOffset:0},E=(e.positionedLines[y]=S).positionedGlyphs,C=0;if(b.length()){for(var T=0;T<b.length();T++){var I=b.getSection(T),k=b.getSectionIndex(T),P=b.getCharCode(T),A=0,M=null,O=null,L=null,R=yu,D=!(l===Ku.horizontal||!c&&!pi(P)||c&&(Qu[P]||function(e){return li.Arabic(e)||li["Arabic Supplement"](e)||li["Arabic Extended-A"](e)||li["Arabic Presentation Forms-A"](e)||li["Arabic Presentation Forms-B"](e)}(P)));if(I.imageName){var z=r[I.imageName];if(!z)continue;L=I.imageName,e.iconsInText=e.iconsInText||!0,O=z.paddedRect;var N=z.displaySize;I.scale=I.scale*yu/p,M={width:N[0],height:N[1],left:Zu,top:-Hu,advance:D?N[1]:N[0]},A=w+(z=yu-N[1]*I.scale),R=M.advance,0<(N=D?N[0]*I.scale-yu*x:N[1]*I.scale-yu*x)&&C<N&&(C=N)}else{if((N=(N=n[I.fontStack])&&N[P])&&N.rect)O=N.rect,M=N.metrics;else{if(!(N=(N=t[I.fontStack])&&N[P]))continue;M=N.metrics}A=(x-I.scale)*yu}D?(e.verticalizable=!0,E.push({glyph:P,imageName:L,x:h,y:d+A,vertical:D,scale:I.scale,fontStack:I.fontStack,sectionIndex:k,metrics:M,rect:O}),h+=R*I.scale+u):(E.push({glyph:P,imageName:L,x:h,y:d+A,vertical:D,scale:I.scale,fontStack:I.fontStack,sectionIndex:k,metrics:M,rect:O}),h+=M.advance*I.scale+u)}0!==E.length&&(B=h-u,f=Math.max(B,f),function(e,t,n,r,i){if(r||i)for(var o=(o=e[n]).metrics.advance*o.scale,a=(e[n].x+o)*r,s=t;s<=n;s++)e[s].x-=a,e[s].y+=i}(E,0,E.length-1,g,C)),h=0;var B=o*x+C;S.lineOffset=Math.max(C,w),d+=B,m=Math.max(B,m),++y}else d+=o,++y}var F=d-Xu;a=(s=oc(a)).horizontalAlign,s=s.verticalAlign,function(e,t,n,r,i,o,a,s,l){var u=(t-n)*i,c=0;c=o!==a?-s*r-Xu:(-r*l+.5)*a;for(var p=0,h=e;p<h.length;p+=1)for(var d=0,f=h[p].positionedGlyphs;d<f.length;d+=1){var m=f[d];m.x+=u,m.y+=c}}(e.positionedLines,g,a,s,f,m,o,F,i.length),e.top+=-s*F,e.bottom=e.top+F,e.left+=-a*f,e.right=e.left+f}(c={positionedLines:f=[],text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:p,iconsInText:!1,verticalizable:!1},t,n,r,y,a,s,l,p,u,h,m),!function(e){for(var t=0,n=e;t<n.length;t+=1)if(0!==n[t].positionedGlyphs.length)return;return 1}(f)&&c}Ju.fromFeature=function(e,t){for(var n=new Ju,r=0;r<e.sections.length;r++){var i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n},Ju.prototype.length=function(){return this.text.length},Ju.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Ju.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Ju.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Ju.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;r&&hi(r)&&!gu[e[n+1]]||i&&hi(i)&&!gu[e[n-1]]||!gu[e[n]]?t+=e[n]:t+=gu[e[n]]}return t}(this.text)},Ju.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Qu[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;0<=r&&e<=r&&Qu[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},Ju.prototype.substring=function(e,t){var n;return(n=new Ju).text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},Ju.prototype.toString=function(){return this.text},Ju.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)},Ju.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(Yu.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(n)},Ju.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";0!==t.length?(e=this.getNextImageSectionCharCode())?(this.text+=String.fromCharCode(e),this.sections.push(Yu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401"):E("Can't add FormattedSection with an empty image.")},Ju.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Qu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ec={};function tc(e,t,n,r,i,o){return t.imageName?(r=r[t.imageName])?r.displaySize[0]*t.scale*yu/o+i:0:(e=(n=n[t.fontStack])&&n[e])?e.metrics.advance*t.scale+i:0}function nc(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function rc(e,t,n,r,i,o){for(var a=null,s=nc(t,n,i,o),l=0,u=r;l<u.length;l+=1){var c=u[l],p=nc(t-c.x,n,i,o)+c.badness;p<=s&&(a=c,s=p)}return{index:e,x:t,priorBreak:a,badness:s}}function ic(e,t,n,r,i,o,a){if("point"!==o)return[];if(!e)return[];for(var s,l=[],u=function(e,t,n,r,i,o){for(var a=0,s=0;s<e.length();s++){var l=e.getSection(s);a+=tc(e.getCharCode(s),l,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,a),c=0<=e.text.indexOf("\u200b"),p=0,h=0;h<e.length();h++){var d,f=e.getSection(h),m=e.getCharCode(h);Qu[m]||(p+=tc(m,f,r,i,t,a)),h<e.length()-1&&(d=!((s=m)<11904)&&(!!li["Bopomofo Extended"](s)||!!li.Bopomofo(s)||!!li["CJK Compatibility Forms"](s)||!!li["CJK Compatibility Ideographs"](s)||!!li["CJK Compatibility"](s)||!!li["CJK Radicals Supplement"](s)||!!li["CJK Strokes"](s)||!!li["CJK Symbols and Punctuation"](s)||!!li["CJK Unified Ideographs Extension A"](s)||!!li["CJK Unified Ideographs"](s)||!!li["Enclosed CJK Letters and Months"](s)||!!li["Halfwidth and Fullwidth Forms"](s)||!!li.Hiragana(s)||!!li["Ideographic Description Characters"](s)||!!li["Kangxi Radicals"](s)||!!li["Katakana Phonetic Extensions"](s)||!!li.Katakana(s)||!!li["Vertical Forms"](s)||!!li["Yi Radicals"](s)||!!li["Yi Syllables"](s)),(ec[m]||d||f.imageName)&&l.push(rc(h+1,p,u,l,(s=m,m=0,10===s&&(m-=1e4),d&&c&&(m+=150),40!==s&&65288!==s||(m+=50),41!==(f=e.getCharCode(h+1))&&65289!==f||(m+=50),m),!1)))}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(rc(e.length(),p,u,l,0,!0))}function oc(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function ac(e,t,n,r,i,o){var a;(e=e.image).content&&(u=e.content,c=e.pixelRatio||1,a=[u[0]/c,u[1]/c,e.displaySize[0]-u[2]/c,e.displaySize[1]-u[3]/c]);var s,l,u=t.left*o,c=t.right*o;return u="width"===n||"both"===n?(l=i[0]+u-r[3],i[0]+c+r[1]):(l=i[0]+(u+c-e.displaySize[0])/2)+e.displaySize[0],c=t.top*o,o=t.bottom*o,o="height"===n||"both"===n?(s=i[1]+c-r[0],i[1]+o+r[2]):(s=i[1]+(c+o-e.displaySize[1])/2)+e.displaySize[1],{image:e,top:s,right:u,bottom:o,left:l,collisionPadding:a}}ec[10]=!0,ec[32]=!0,ec[38]=!0,ec[40]=!0,ec[41]=!0,ec[43]=!0,ec[45]=!0,ec[47]=!0,ec[173]=!0,ec[183]=!0,ec[8203]=!0,ec[8208]=!0,ec[8211]=!0,ec[8231]=!0;var sc,lc=((sc=o)&&(uc.__proto__=sc),((uc.prototype=Object.create(sc&&sc.prototype)).constructor=uc).prototype.clone=function(){return new uc(this.x,this.y,this.angle,this.segment)},uc);function uc(e,t,n,r){sc.call(this,e,t),this.angle=n,void 0!==r&&(this.segment=r)}ni("Anchor",lc);var cc=128;function pc(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Si(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=e;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<e+1;)a++;a=Math.min(r.length-1,a);var s=r[o];return t=r[a],"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:t,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:t,minSize:n.evaluate(new Si(s)),maxSize:n.evaluate(new Si(t)),interpolationType:i}}function hc(e,t,n){var r=t.uSize,i=t.uSizeT;return t=n.lowerSize,n=n.upperSize,"source"===e.kind?t/cc:"composite"===e.kind?an(t/cc,n/cc,i):r}function dc(e,t){var n,r,i,o=0,a=0;return"constant"===e.kind?a=e.layoutSize:"source"!==e.kind&&(n=e.interpolationType,r=e.minZoom,i=e.maxZoom,i=n?p(Sn.interpolationFactor(n,t,r,i),0,1):0,"camera"===e.kind?a=an(e.minSize,e.maxSize,i):o=i),{uSizeT:o,uSize:a}}function fc(e,t,n,r,i){if(void 0===t.segment)return 1;for(var o=t,a=t.segment+1,s=0;-n/2<s;){if(--a<0)return;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var l=[],u=0;s<n/2;){var c=e[a-1],p=e[a],h=e[a+1];if(!h)return;for(c=c.angleTo(p)-p.angleTo(h),c=Math.abs((c+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:c}),u+=c;s-l[0].distance>r;)u-=l.shift().angleDelta;if(i<u)return;a++,s+=p.dist(h)}return 1}function mc(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function gc(e,t,n){return e?.6*t*n:0}function yc(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function vc(e,t,n,r,i,o,a,s,l){var u=gc(r,o,a),c=yc(r,i);return t-(r=c*a)<t/4&&(t=r+t/4),function e(t,n,r,i,o,a,s,l,u){for(var c=a/2,p=mc(t),h=0,d=n-r,f=[],m=0;m<t.length-1;m++){for(var g=t[m],y=t[m+1],v=g.dist(y),_=y.angleTo(g);d+r<h+v;){var b=((d+=r)-h)/v,x=an(g.x,y.x,b);b=an(g.y,y.y,b),0<=x&&x<u&&0<=b&&b<u&&0<=d-c&&d+c<=p&&((b=new lc(x,b,_,m))._round(),i&&!fc(t,b,a,i,o)||f.push(b))}h+=v}return l||f.length||s||(f=e(t,h/2,r,i,o,a,s,!0,u)),f}(e,(i=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l)?t/2*s%t:(c/2+2*o)*a*s%t,t,u,n,r,i,!1,l)}function _c(e,t,n,r,i){for(var a=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<t&&h.x<t||(p.x<t?p=new o(t,p.y+(h.y-p.y)*((t-p.x)/(h.x-p.x)))._round():h.x<t&&(h=new o(t,p.y+(h.y-p.y)*((t-p.x)/(h.x-p.x)))._round()),p.y<n&&h.y<n||(p.y<n?p=new o(p.x+(h.x-p.x)*((n-p.y)/(h.y-p.y)),n)._round():h.y<n&&(h=new o(p.x+(h.x-p.x)*((n-p.y)/(h.y-p.y)),n)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new o(r,p.y+(h.y-p.y)*((r-p.x)/(h.x-p.x)))._round():h.x>=r&&(h=new o(r,p.y+(h.y-p.y)*((r-p.x)/(h.x-p.x)))._round()),p.y>=i&&h.y>=i||(p.y>=i?p=new o(p.x+(h.x-p.x)*((i-p.y)/(h.y-p.y)),i)._round():h.y>=i&&(h=new o(p.x+(h.x-p.x)*((i-p.y)/(h.y-p.y)),i)._round()),u&&p.equals(u[u.length-1])||a.push(u=[p]),u.push(h)))))}return a}Rs=Object.freeze({__proto__:null,getSizeData:pc,evaluateSizeForFeature:hc,evaluateSizeForZoom:dc,SIZE_PACK_FACTOR:cc});var bc=Zu;function xc(e,t,n,r){var i=[],a=e.image,s=a.pixelRatio,l=a.paddedRect.w-2*bc,u=a.paddedRect.h-2*bc,c=e.right-e.left,p=e.bottom-e.top,h=a.stretchX||[[0,l]],d=a.stretchY||[[0,u]],f=function(e,t){return e+t[1]-t[0]},m=h.reduce(f,0),g=d.reduce(f,0),y=l-m,v=u-g,_=0,b=m,x=0,w=g,S=0,E=y,C=0,T=v;function I(r,i,l,u){var h=(r.stretch-_)/b*c+e.left,d=r.fixed-S-E*r.stretch/m,f=(i.stretch-x)/w*p+e.top,y=i.fixed-C-T*i.stretch/g,v=(l.stretch-_)/b*c+e.left,I=l.fixed-S-E*l.stretch/m,k=(u.stretch-x)/w*p+e.top,P=u.fixed-C-T*u.stretch/g,A=new o(h,f);return f=new o(v,f),v=new o(v,k),k=new o(h,k),d=new o(d/s,y/s),y=new o(I/s,P/s),(I=t*Math.PI/180)&&(P=Math.sin(I),I=Math.cos(I),A._matMult(I=[I,-P,P,I]),f._matMult(I),k._matMult(I),v._matMult(I)),r=r.stretch+r.fixed,l=l.stretch+l.fixed,i=i.stretch+i.fixed,u=u.stretch+u.fixed,{tl:A,tr:f,bl:k,br:v,tex:{x:a.paddedRect.x+bc+r,y:a.paddedRect.y+bc+i,w:l-r,h:u-i},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:d,pixelOffsetBR:y,minFontScaleX:E/s/c,minFontScaleY:T/s/p,isSDF:n}}if(a.content&&r&&(f=a.content,_=wc(h,0,f[0]),x=wc(d,0,f[1]),b=wc(h,f[0],f[2]),w=wc(d,f[1],f[3]),S=f[0]-_,C=f[1]-x,E=f[2]-f[0]-b,T=f[3]-f[1]-w),r&&(a.stretchX||a.stretchY))for(var k=Sc(h,y,m),P=Sc(d,v,g),A=0;A<k.length-1;A++)for(var M=k[A],O=k[A+1],L=0;L<P.length-1;L++){var R=P[L],D=P[L+1];i.push(I(M,R,O,D))}else i.push(I({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:1+l},{fixed:0,stretch:1+u}));return i}function wc(e,t,n){for(var r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];r+=Math.max(t,Math.min(n,a[1]))-Math.max(t,Math.min(n,a[0]))}return r}function Sc(e,t,n){for(var r=[{fixed:-bc,stretch:0}],i=0,o=e;i<o.length;i+=1){var a=(l=o[i])[0],s=l[1],l=r[r.length-1];r.push({fixed:a-l.stretch,stretch:l.stretch}),r.push({fixed:a-l.stretch,stretch:l.stretch+(s-a)})}return r.push({fixed:t+bc,stretch:n}),r}function Ec(e,t,n,r,i,a,s,l,u,c){var p,h,d,f;this.boxStartIndex=e.length,u?(d=a.top,h=a.bottom,(p=a.collisionPadding)&&(d-=p[1],h+=p[3]),0<(f=h-d)&&(f=Math.max(10,f),this.circleDiameter=f)):(u=a.top*s-l,p=a.bottom*s+l,h=a.left*s-l,d=a.right*s+l,(f=a.collisionPadding)&&(h-=f[0]*s,u-=f[1]*s,d+=f[2]*s,p+=f[3]*s),c&&(l=new o(h,u),a=new o(d,u),f=new o(h,p),s=new o(d,p),c=c*Math.PI/180,l._rotate(c),a._rotate(c),f._rotate(c),s._rotate(c),h=Math.min(l.x,a.x,f.x,s.x),d=Math.max(l.x,a.x,f.x,s.x),u=Math.min(l.y,a.y,f.y,s.y),p=Math.max(l.y,a.y,f.y,s.y)),e.emplaceBack(t.x,t.y,h,u,d,p,n,r,i)),this.boxEndIndex=e.length}function Cc(e,t){if(void 0===t&&(t=Tc),this.data=e=void 0===e?[]:e,this.length=this.data.length,this.compare=t,0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function Tc(e,t){return e<t?-1:t<e?1:0}function Ic(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var r=1/0,i=1/0,a=-1/0,s=-1/0,l=e[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<i)&&(i=c.y),(!u||c.x>a)&&(a=c.x),(!u||c.y>s)&&(s=c.y)}var p=Math.min(a-r,s-i),h=p/2,d=new Cc([],kc);if(0===p)return new o(r,i);for(var f=r;f<a;f+=p)for(var m=i;m<s;m+=p)d.push(new Pc(f+h,m+h,h,e));for(var g=function(e){for(var t=0,n=0,r=0,i=e[0],o=0,a=i.length,s=a-1;o<a;s=o++){var l=i[o],u=i[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,t+=3*c}return new Pc(n/t,r/t,0,e)}(e),y=d.length;d.length;){var v=d.pop();(v.d>g.d||!g.d)&&(g=v,n&&console.log("found best %d after %d probes",Math.round(1e4*v.d)/1e4,y)),v.max-g.d<=t||(h=v.h/2,d.push(new Pc(v.p.x-h,v.p.y-h,h,e)),d.push(new Pc(v.p.x+h,v.p.y-h,h,e)),d.push(new Pc(v.p.x-h,v.p.y+h,h,e)),d.push(new Pc(v.p.x+h,v.p.y+h,h,e)),y+=4)}return n&&(console.log("num probes: "+y),console.log("best distance: "+g.d)),g.p}function kc(e,t){return t.max-e.max}function Pc(e,t,n,r){this.p=new o(e,t),this.h=n,this.d=function(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var o=t[i],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>e.y!=c.y>e.y&&e.x<(c.x-u.x)*(e.y-u.y)/(c.y-u.y)+u.x&&(n=!n),r=Math.min(r,Ss(e,u,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Cc.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Cc.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,0<this.length&&(this.data[0]=t,this._down(0)),e}},Cc.prototype.peek=function(){return this.data[0]},Cc.prototype._up=function(e){for(var t=this.data,n=this.compare,r=t[e];0<e;){var i=e-1>>1,o=t[i];if(0<=n(r,o))break;t[e]=o,e=i}t[e]=r},Cc.prototype._down=function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=t[o],s=o+1;if(s<this.length&&n(t[s],a)<0&&(a=t[o=s]),0<=n(a,i))break;t[e]=a,e=o}t[e]=i};var Ac=Number.POSITIVE_INFINITY;function Mc(e,t){return t[1]!==Ac?function(e,t,n){var r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){var n=0,r=0,i=(t=t<0?0:t)/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function Oc(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Lc=255,Rc=Lc*cc;function Dc(e,t,n,r,i,a,s,l,u,c,p,h,d,f,m){var g=function(e,t,n,r,i,a,s){for(var l=n.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,u=[],c=0,p=e.positionedLines;c<p.length;c+=1)for(var h=p[c],d=0,f=h.positionedGlyphs;d<f.length;d+=1){var m,g,y,v,_,b,x,w,S,E,C,T,I,k,P=f[d];P.rect&&(m=P.rect||{},S=Hu+1,g=!0,_=1,w=0,E=(r||s)&&P.vertical,C=P.metrics.advance*P.scale/2,s&&e.verticalizable&&(x=(P.scale-1)*yu,T=(yu-P.metrics.width*P.scale)/2,w=h.lineOffset/2-(P.imageName?-T:x)),P.imageName&&(g=(b=a[P.imageName]).sdf,_=b.pixelRatio,S=Zu/_),y=r?[P.x+C,P.y]:[0,0],v=r?[0,0]:[P.x+C+t[0],P.y+t[1]-w],T=[0,0],E&&(T=v,v=[0,0]),x=(P.metrics.left-S)*P.scale-C+v[0],b=(-P.metrics.top-S)*P.scale+v[1],w=x+m.w*P.scale/_,S=b+m.h*P.scale/_,v=new o(x,b),_=new o(w,b),b=new o(x,S),x=new o(w,S),E&&(w=new o(-C,C-Xu),S=-Math.PI/2,E=yu/2-C,C=P.imageName?E:0,C=new o(5-Xu-E,-C),T=new(Function.prototype.bind.apply(o,[null].concat(T))),v._rotateAround(S,w)._add(C)._add(T),_._rotateAround(S,w)._add(C)._add(T),b._rotateAround(S,w)._add(C)._add(T),x._rotateAround(S,w)._add(C)._add(T)),l&&(k=Math.sin(l),I=Math.cos(l),v._matMult(k=[I,-k,k,I]),_._matMult(k),b._matMult(k),x._matMult(k)),I=new o(0,0),k=new o(0,0),u.push({tl:v,tr:_,bl:b,br:x,tex:m,writingMode:e.writingMode,glyphOffset:y,sectionIndex:P.sectionIndex,isSDF:g,pixelOffsetTL:I,pixelOffsetBR:k,minFontScaleX:0,minFontScaleY:0}))}return u}(n,l,i,a,s,r,e.allowVerticalPlacement);r=null,"source"===(n=e.textSizeData).kind?(r=[cc*i.layout.get("text-size").evaluate(s,{})])[0]>Rc&&E(e.layerIds[0]+': Value for "text-size" is >= '+Lc+'. Reduce your "text-size".'):"composite"===n.kind&&((r=[cc*f.compositeTextSizes[0].evaluate(s,{},m),cc*f.compositeTextSizes[1].evaluate(s,{},m)])[0]>Rc||r[1]>Rc)&&E(e.layerIds[0]+': Value for "text-size" is >= '+Lc+'. Reduce your "text-size".'),e.addSymbols(e.text,g,r,l,a,s,c,t,u.lineStartIndex,u.lineLength,d,m);for(var y=0,v=p;y<v.length;y+=1)h[v[y]]=e.text.placedSymbolArray.length-1;return 4*g.length}function zc(e){for(var t in e)return e[t];return null}var Nc=Vl.VectorTileFeature.types,Bc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fc(e,t,n,r,i,o,a,s,l,u,c,p,h){var d=s?Math.min(Rc,Math.round(s[0])):0;s=s?Math.min(Rc,Math.round(s[1])):0,e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(d<<1)+(l?1:0),s,16*u,16*c,256*p,256*h)}function jc(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Uc(e){for(var t=0,n=e.sections;t<n.length;t+=1)if(function(e){for(var t=0,n=e;t<n.length;t+=1)if(di(n[t].charCodeAt(0)))return 1}(n[t].text))return 1}function Vc(e){this.layoutVertexArray=new go,this.indexArray=new No,this.programConfigurations=e,this.segments=new ka,this.dynamicLayoutVertexArray=new _o,this.opacityVertexArray=new wo,this.placedSymbolArray=new ha}function qc(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new ka,this.collisionVertexArray=new Ro}function Hc(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ns([]),this.placementViewportMatrix=Ns([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=pc(this.zoom,t["text-size"]),this.iconSizeData=pc(this.zoom,t["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key");t=n.get("symbol-z-order"),this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==t&&void 0!==r.constantOr(1),t="viewport-y"===t||"auto"===t&&!this.sortFeaturesByKey,this.sortFeaturesByY=t&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(e){return Ku[e]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=e.sourceID}function Wc(e){this.type=e.property.overrides?e.property.overrides.runtimeType:$e,this.defaultValue=e}Vc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Vc.prototype.upload=function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pu.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,hu.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Bc,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))},Vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ni("SymbolBuffers",Vc),qc.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,du.members,!0)},qc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ni("CollisionBuffers",qc),Hc.prototype.createArrays=function(){this.text=new Vc(new us(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new Vc(new us(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new _a,this.lineVertexArray=new wa,this.symbolInstances=new ga},Hc.prototype.calculateGlyphDependencies=function(e,t,n,r,i){for(var o,a=0;a<e.length;a++)t[e.charCodeAt(a)]=!0,!n&&!r||!i||(o=gu[e.charAt(a)])&&(t[o.charCodeAt(0)]=!0)},Hc.prototype.populate=function(e,t,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof vt&&!a.value.value.isEmpty()||0<a.value.value.toString().length)&&("constant"!==o.value.kind||0<o.value.value.length),u="constant"!==s.value.kind||!!s.value.value||0<Object.keys(s.parameters).length,c=i.get("symbol-sort-key");if(this.features=[],l||u){for(var p=t.iconDependencies,h=t.glyphDependencies,d=t.availableImages,f=new Si(this.zoom),m=0,g=e;m<g.length;m+=1){var y=(w=g[m]).feature,v=w.id,_=w.index,b=w.sourceLayerIndex,x=r._featureFilter.needGeometry,w=ms(y,x);if(r._featureFilter.filter(f,w,n)){x||(w.geometry=fs(y));var S=void 0;l&&(E=r.getValueAndResolveTokens("text-field",w,n,d),Uc(E=vt.factory(E))&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===yi||this.hasRTLText&&Ci.isParsed())&&(S=mu(E,r,w)));var E=void 0;if(u&&(E=(C=r.getValueAndResolveTokens("icon-image",w,n,d))instanceof _t?C:_t.fromString(C)),S||E){var C=this.sortFeaturesByKey?c.evaluate(w,{},n):void 0;if(C={id:v,text:S,icon:E,index:_,sourceLayerIndex:b,geometry:w.geometry,properties:y.properties,type:Nc[y.type],sortKey:C},this.features.push(C),E&&(p[E.name]=!0),S){var T=o.evaluate(w,{},n).join(","),I="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Ku.vertical);for(var k=0,P=S.sections;k<P.length;k+=1){var A,M,O=P[k];O.image?p[O.image.name]=!0:(A=ui(S.toString()),M=h[M=O.fontStack||T]=h[M]||{},this.calculateGlyphDependencies(O.text,M,I,this.allowVerticalPlacement,A))}}}}}"line"===i.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){var o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){var o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){return e+":"+(t=n?t[0][t[0].length-1]:t[0][0]).x+":"+t.y}for(var u=0;u<e.length;u++){var c,p,h,d=e[u],f=d.geometry,m=d.text?d.text.toString():null;m?(c=l(m,f),p=l(m,f,!0),c in n&&p in t&&n[c]!==t[p]?(h=s(c,p,f),d=a(c,p,r[h].geometry),delete t[c],delete n[p],n[l(m,r[d].geometry,!0)]=d,r[h].geometry=null):c in n?a(c,p,f):p in t?s(c,p,f):(o(u),t[c]=i-1,n[p]=i-1)):o(u)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}},Hc.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},Hc.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Hc.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Hc.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Hc.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Hc.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Hc.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),o={},a=e.segment+1;a<t.length;a++)o[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:r},a<t.length-1&&(r+=t[a+1].dist(t[a]));for(var s=e.segment||0;0<=s;s--)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},0<s&&(i+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Hc.prototype.addSymbols=function(e,t,n,r,i,o,a,s,l,u,c,p){for(var h=e.indexArray,d=e.layoutVertexArray,f=e.segments.prepareSegment(4*t.length,d,h,this.canOverlap?o.sortKey:void 0),m=this.glyphOffsetArray.length,g=f.vertexLength,y=this.allowVerticalPlacement&&a===Ku.vertical?Math.PI/2:0,v=o.text&&o.text.sections,_=0;_<t.length;_++){var b=(L=t[_]).tl,x=L.tr,w=L.bl,S=L.br,E=L.tex,C=L.pixelOffsetTL,T=L.pixelOffsetBR,I=L.minFontScaleX,k=L.minFontScaleY,P=L.glyphOffset,A=L.isSDF,M=L.sectionIndex,O=f.vertexLength,L=P[1];Fc(d,s.x,s.y,b.x,L+b.y,E.x,E.y,n,A,C.x,C.y,I,k),Fc(d,s.x,s.y,x.x,L+x.y,E.x+E.w,E.y,n,A,T.x,C.y,I,k),Fc(d,s.x,s.y,w.x,L+w.y,E.x,E.y+E.h,n,A,C.x,T.y,I,k),Fc(d,s.x,s.y,S.x,L+S.y,E.x+E.w,E.y+E.h,n,A,T.x,T.y,I,k),jc(e.dynamicLayoutVertexArray,s,y),h.emplaceBack(O,O+1,O+2),h.emplaceBack(O+1,O+2,O+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(P[0]),_!==t.length-1&&M===t[_+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,o,o.index,{},p,v&&v[M])}e.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,u,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,c)},Hc.prototype._addCollisionDebugVertex=function(e,t,n,r,i,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},Hc.prototype.addCollisionDebugVertices=function(e,t,n,r,i,a,s){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=l.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray,h=s.anchorX;s=s.anchorY,this._addCollisionDebugVertex(c,p,a,h,s,new o(e,t)),this._addCollisionDebugVertex(c,p,a,h,s,new o(n,t)),this._addCollisionDebugVertex(c,p,a,h,s,new o(n,r)),this._addCollisionDebugVertex(c,p,a,h,s,new o(e,r)),l.vertexLength+=4,(i=i.indexArray).emplaceBack(u,u+1),i.emplaceBack(u+1,u+2),i.emplaceBack(u+2,u+3),i.emplaceBack(u+3,u),l.primitiveLength+=4},Hc.prototype.addDebugCollisionBoxes=function(e,t,n,r){for(var i=e;i<t;i++){var o=this.collisionBoxArray.get(i),a=o.x1,s=o.y1,l=o.x2,u=o.y2;this.addCollisionDebugVertices(a,s,l,u,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},Hc.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qc(ko,fu.members,ea),this.iconCollisionBox=new qc(ko,fu.members,ea);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Hc.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,r,i,o,a,s,l){for(var u={},c=t;c<n;c++){var p=e.get(c);u.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},u.textFeatureIndex=p.featureIndex;break}for(var h=r;h<i;h++){var d=e.get(h);u.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},u.verticalTextFeatureIndex=d.featureIndex;break}for(var f=o;f<a;f++){var m=e.get(f);u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.iconFeatureIndex=m.featureIndex;break}for(var g=s;g<l;g++){var y=e.get(g);u.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},u.verticalIconFeatureIndex=y.featureIndex;break}return u},Hc.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},Hc.prototype.hasTextData=function(){return 0<this.text.segments.get().length},Hc.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},Hc.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Hc.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length},Hc.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length},Hc.prototype.addIndicesForPlacedSymbol=function(e,t){for(var n=(t=e.placedSymbolArray.get(t)).vertexStartIndex+4*t.numGlyphs,r=t.vertexStartIndex;r<n;r+=4)e.indexArray.emplaceBack(r,r+1,r+2),e.indexArray.emplaceBack(r+1,r+2,r+3)},Hc.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(t*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort((function(e,t){return r[e]-r[t]||i[t]-i[e]})),o},Hc.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Hc.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var i=r[n];i=this.symbolInstances.get(i),this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(e,n,r){0<=e&&r.indexOf(e)===n&&t.addIndicesForPlacedSymbol(t.text,e)})),0<=i.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),0<=i.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),0<=i.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ni("SymbolBucket",Hc,{omit:["layers","collisionBoxArray","features","compareText"]}),Hc.MAX_GLYPHS=65535,Hc.addDynamicAttributes=jc,Ni=new Ui({"symbol-placement":new Ri(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Ri(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ri(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Di(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ri(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ri(Ve.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ri(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ri(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ri(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Di(Ve.layout_symbol["icon-size"]),"icon-text-fit":new Ri(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ri(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Di(Ve.layout_symbol["icon-image"]),"icon-rotate":new Di(Ve.layout_symbol["icon-rotate"]),"icon-padding":new Ri(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Ri(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Di(Ve.layout_symbol["icon-offset"]),"icon-anchor":new Di(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ri(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ri(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ri(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new Di(Ve.layout_symbol["text-field"]),"text-font":new Di(Ve.layout_symbol["text-font"]),"text-size":new Di(Ve.layout_symbol["text-size"]),"text-max-width":new Di(Ve.layout_symbol["text-max-width"]),"text-line-height":new Ri(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Di(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new Di(Ve.layout_symbol["text-justify"]),"text-radial-offset":new Di(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ri(Ve.layout_symbol["text-variable-anchor"]),"text-anchor":new Di(Ve.layout_symbol["text-anchor"]),"text-max-angle":new Ri(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Ri(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new Di(Ve.layout_symbol["text-rotate"]),"text-padding":new Ri(Ve.layout_symbol["text-padding"]),"text-keep-upright":new Ri(Ve.layout_symbol["text-keep-upright"]),"text-transform":new Di(Ve.layout_symbol["text-transform"]),"text-offset":new Di(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new Ri(Ve.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ri(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new Ri(Ve.layout_symbol["text-optional"])});var Gc,Zc={paint:new Ui({"icon-opacity":new Di(Ve.paint_symbol["icon-opacity"]),"icon-color":new Di(Ve.paint_symbol["icon-color"]),"icon-halo-color":new Di(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Di(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Di(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Ri(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ri(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Di(Ve.paint_symbol["text-opacity"]),"text-color":new Di(Ve.paint_symbol["text-color"],{runtimeType:nt,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Di(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new Di(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Di(Ve.paint_symbol["text-halo-blur"]),"text-translate":new Ri(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new Ri(Ve.paint_symbol["text-translate-anchor"])}),layout:Ni};function Kc(e){Gc.call(this,e,Zc)}Wc.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Wc.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Wc.prototype.outputDefined=function(){return!1},Wc.prototype.serialize=function(){return null},ni("FormatSectionOverride",Wc,{omit:["defaultValue"]}),(Gc=Hi)&&(Kc.__proto__=Gc),((Kc.prototype=Object.create(Gc&&Gc.prototype)).constructor=Kc).prototype.recalculate=function(e,t){if(Gc.prototype.recalculate.call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(t=this.layout.get("text-writing-mode")){for(var n=[],r=0,i=t;r<i.length;r+=1){var o=i[r];n.indexOf(o)<0&&n.push(o)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()},Kc.prototype.getValueAndResolveTokens=function(e,t,n,r){var i;return r=this.layout.get(e).evaluate(t,{},n,r),(e=this._unevaluatedLayout._values[e]).isDataDriven()||lr(e.value)||!r?r:(i=t.properties,r.replace(/{([^{}]+)}/g,(function(e,t){return t in i?String(i[t]):""})))},Kc.prototype.createBucket=function(e){return new Hc(e)},Kc.prototype.queryRadius=function(){return 0},Kc.prototype.queryIntersectsFeature=function(){return!1},Kc.prototype._setPaintOverrides=function(){for(var e=0,t=Zc.paint.overridableProperties;e<t.length;e+=1){var n,r,i,o=t[e];Kc.hasPaintOverride(this.layout,o)&&(i=new Wc(n=this.paint.get(o)),r=new sr(i,n.property.specification),i=null,i="constant"===n.value.kind||"source"===n.value.kind?new cr("source",r):new pr("composite",r,n.value.zoomStops,n.value._interpolationType),this.paint._values[o]=new Oi(n.property,i,n.parameters))}},Kc.prototype._handleOverridablePaintPropertyUpdate=function(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&Kc.hasPaintOverride(this.layout,e)},Kc.hasPaintOverride=function(e,t){function n(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(i.overrides&&i.overrides.hasOverride(r))return o=!0,0}}e=e.get("text-field");var r,i=Zc.paint.properties[t],o=!1;return"constant"===e.value.kind&&e.value.value instanceof vt?n(e.value.value.sections):"source"===e.value.kind&&(r=function(e){o||(e instanceof Et&&wt(e.value)===at?n(e.value.sections):e instanceof kt?n(e.sections):e.eachChild(r))},(e=e.value)._styleExpression&&r(e._styleExpression.expression)),o},Di=Kc;var Xc,Yc={paint:new Ui({"background-color":new Ri(Ve.paint_background["background-color"]),"background-pattern":new Fi(Ve.paint_background["background-pattern"]),"background-opacity":new Ri(Ve.paint_background["background-opacity"])})};function Jc(e){Xc.call(this,e,Yc)}(Xc=Hi)&&(Jc.__proto__=Xc),Ni=(Jc.prototype=Object.create(Xc&&Xc.prototype)).constructor=Jc;var $c,Qc={paint:new Ui({"raster-opacity":new Ri(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ri(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ri(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ri(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Ri(Ve.paint_raster["raster-saturation"]),"raster-contrast":new Ri(Ve.paint_raster["raster-contrast"]),"raster-resampling":new Ri(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Ri(Ve.paint_raster["raster-fade-duration"])})};function ep(e){$c.call(this,e,Qc)}($c=Hi)&&(ep.__proto__=$c),Fi=(ep.prototype=Object.create($c&&$c.prototype)).constructor=ep;var tp,np=((tp=Hi)&&(rp.__proto__=tp),((rp.prototype=Object.create(tp&&tp.prototype)).constructor=rp).prototype.is3D=function(){return"3d"===this.implementation.renderingMode},rp.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},rp.prototype.recalculate=function(){},rp.prototype.updateTransitions=function(){},rp.prototype.hasTransition=function(){},rp.prototype.serialize=function(){},rp.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},rp.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},rp);function rp(e){tp.call(this,e,{}),this.implementation=e}var ip={circle:D,heatmap:Zi,hillshade:ee,fill:Nn,"fill-extrusion":Bn,line:Oa,symbol:Di,background:Ni,raster:Fi};function op(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}var ap=s.HTMLImageElement,sp=s.HTMLCanvasElement,lp=s.HTMLVideoElement,up=s.ImageData,cp=s.ImageBitmap;function pp(e){var t=this;this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})}function hp(e,t,n){return[e*(n=2*Math.PI*6378137/256/Math.pow(2,n))-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}function dp(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}op.prototype.update=function(e,t,n){var r=e.width,i=e.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),a=this.context,s=a.gl;this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),o?(this.size=[r,i],e instanceof ap||e instanceof sp||e instanceof lp||e instanceof up||cp&&e instanceof cp?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,e.data)):(n=(o=n||{x:0,y:0}).x,o=o.y,e instanceof ap||e instanceof sp||e instanceof lp||e instanceof up||cp&&e instanceof cp?s.texSubImage2D(s.TEXTURE_2D,0,n,o,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,n,o,r,i,s.RGBA,s.UNSIGNED_BYTE,e.data)),this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},op.prototype.bind=function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},op.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},op.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},pp.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))},pp.prototype.remove=function(){delete this._channel,this._callback=function(){}},Nn=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},v(["receive","process"],this),this.invoker=new pp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=T()?e:s},Nn.prototype.send=function(e,t,n,r,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=P(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:oi(t,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Nn.prototype.receive=function(e){var t=e.data,n=t.id;n&&(t.targetMapId&&this.mapId!==t.targetMapId||("<cancel>"===t.type?(delete this.tasks[n],e=this.cancelCallbacks[n],delete this.cancelCallbacks[n],e&&e()):T()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)))},Nn.prototype.process=function(){var e,t;this.taskQueue.length&&(e=this.taskQueue.shift(),t=this.tasks[e],delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t))},Nn.prototype.processTask=function(e,t){var n,r,i,o,a,s,l=this;"<response>"===t.type?(a=this.callbacks[e],delete this.callbacks[e],a&&(t.error?a(ai(t.error)):a(null,ai(t.data)))):(n=!1,r=P(this.globalScope)?void 0:[],i=t.hasCallback?function(t,i){n=!0,delete l.cancelCallbacks[e],l.target.postMessage({id:e,type:"<response>",sourceMapId:l.mapId,error:t?oi(t):null,data:oi(i,r)},r)}:function(e){n=!0},s=null,o=ai(t.data),this.parent[t.type]?s=this.parent[t.type](t.sourceMapId,o,i):this.parent.getWorkerSource?(a=t.type.split("."),s=this.parent.getWorkerSource(t.sourceMapId,a[0],o.source)[a[1]](o,i)):i(new Error("Could not find function "+t.type)),!n&&s&&s.cancel&&(this.cancelCallbacks[e]=s.cancel))},Nn.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)},dp.prototype.setNorthEast=function(e){return this._ne=e instanceof mp?new mp(e.lng,e.lat):mp.convert(e),this},dp.prototype.setSouthWest=function(e){return this._sw=e instanceof mp?new mp(e.lng,e.lat):mp.convert(e),this},dp.prototype.extend=function(e){var t,n,r=this._sw,i=this._ne;if(e instanceof mp)n=t=e;else{if(!(e instanceof dp))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(dp.convert(e)):this.extend(mp.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return r||i?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new mp(t.lng,t.lat),this._ne=new mp(n.lng,n.lat)),this},dp.prototype.getCenter=function(){return new mp((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},dp.prototype.getSouthWest=function(){return this._sw},dp.prototype.getNorthEast=function(){return this._ne},dp.prototype.getNorthWest=function(){return new mp(this.getWest(),this.getNorth())},dp.prototype.getSouthEast=function(){return new mp(this.getEast(),this.getSouth())},dp.prototype.getWest=function(){return this._sw.lng},dp.prototype.getSouth=function(){return this._sw.lat},dp.prototype.getEast=function(){return this._ne.lng},dp.prototype.getNorth=function(){return this._ne.lat},dp.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},dp.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},dp.prototype.isEmpty=function(){return!(this._sw&&this._ne)},dp.prototype.contains=function(e){var t=(n=mp.convert(e)).lng,n=(e=n.lat,this._sw.lat<=e&&e<=this._ne.lat);return e=this._sw.lng<=t&&t<=this._ne.lng,this._sw.lng>this._ne.lng&&(e=this._sw.lng>=t&&t>=this._ne.lng),n&&e},dp.convert=function(e){return!e||e instanceof dp?e:new dp(e)};var fp=6371008.8,mp=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};mp.prototype.wrap=function(){return new mp(h(this.lng,-180,180),this.lat)},mp.prototype.toArray=function(){return[this.lng,this.lat]},mp.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},mp.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t;return t=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t),fp*Math.acos(Math.min(t,1))},mp.prototype.toBounds=function(e){var t=360*(e=void 0===e?0:e)/40075017;return e=t/Math.cos(Math.PI/180*this.lat),new dp(new mp(this.lng-e,this.lat-t),new mp(this.lng+e,this.lat+t))},mp.convert=function(e){if(e instanceof mp)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new mp(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new mp(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var gp=2*Math.PI*fp;function yp(e){return gp*Math.cos(e*Math.PI/180)}function vp(e){return(180+e)/360}function _p(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function bp(e,t){return e/yp(t)}function xp(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function wp(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n}function Sp(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Tp(0,e,e,t,n)}function Ep(e,t){this.wrap=e,this.canonical=t,this.key=Tp(e,t.z,t.z,t.x,t.y)}function Cp(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new Sp(n,+r,+i),this.key=Tp(t,e,n,r,i)}function Tp(e,t,n,r,i){var o=1<<n;return(o*o*(e=(e*=2)<0?-1*e-1:e)+o*i+r).toString(36)+n.toString(36)+t.toString(36)}function Ip(e,t){var n={};if(!t)return n;for(var r=0,i=e;r<i.length;r+=1)!function(){var e=i[r],o=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==o.length){e.layers=o,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return o.filter((function(t){return t.id===e}))[0]})));for(var a=0,s=o;a<s.length;a+=1){var l=s[a];n[l.id]=e}}}();return n}function kp(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}function Pp(e,t,n,r,i){this.type="Feature",(this._vectorTileFeature=e)._z=t,e._x=n,e._y=r,this.properties=e.properties,this.id=i}function Ap(e,t,n,r,i){return b(e,(function(e,o){return(o=t instanceof Li?t.get(o):null)&&o.evaluate?o.evaluate(n,r,i):o}))}function Mp(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=e;o<a.length;o+=1){var s=a[o];t=Math.min(t,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:t,minY:n,maxX:r,maxY:i}}function Op(e,t){return t-e}wp.fromLngLat=function(e,t){return void 0===t&&(t=0),new wp(vp((e=mp.convert(e)).lng),_p(e.lat),bp(t,e.lat))},wp.prototype.toLngLat=function(){return new mp(360*this.x-180,xp(this.y))},wp.prototype.toAltitude=function(){return this.z*yp(xp(this.y))},wp.prototype.meterInMercatorCoordinateUnits=function(){return 1/gp*(e=xp(this.y),1/Math.cos(e*Math.PI/180));var e},Sp.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Sp.prototype.url=function(e,t){var n,r,i=(n=this.x,r=this.y,o=this.z,i=hp(256*n,256*(r=Math.pow(2,o)-r-1),o),o=hp(256*(n+1),256*(r+1),o),i[0]+","+i[1]+","+o[0]+","+o[1]),o=function(e,t,n){for(var r,i="",o=e;0<o;o--)i+=(t&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",o).replace("{bbox-epsg-3857}",i)},Sp.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new o((e.x*t-this.x)*ps,(e.y*t-this.y)*ps)},Sp.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},Cp.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Cp.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Cp(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Cp(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Cp.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?Tp(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Tp(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},Cp.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Cp.prototype.children=function(e){if(this.overscaledZ>=e)return[new Cp(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x;return e=2*this.canonical.y,[new Cp(t,this.wrap,t,n,e),new Cp(t,this.wrap,t,1+n,e),new Cp(t,this.wrap,t,n,1+e),new Cp(t,this.wrap,t,1+n,1+e)]},Cp.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Cp.prototype.wrapped=function(){return new Cp(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Cp.prototype.unwrapTo=function(e){return new Cp(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Cp.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Cp.prototype.toUnwrapped=function(){return new Ep(this.wrap,this.canonical)},Cp.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Cp.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new wp(e.x-this.wrap,e.y))},ni("CanonicalTileID",Sp),ni("OverscaledTileID",Cp,{omit:["posMatrix"]}),Bn=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return E('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var r=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(var i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]},Bn.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer);return t=4*this._idx(e,t),("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[t],n[1+t],n[2+t])},Bn.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Bn.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Bn.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},Bn.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},Bn.prototype.getPixels=function(){return new Xs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Bn.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-t*this.dim,l=-n*this.dim,u=o;u<a;u++)for(var c=r;c<i;c++)this.data[this._idx(c,u)]=e.data[this._idx(c+s,u+l)]},ni("DEMData",Bn),kp.prototype.encode=function(e){return this._stringToNumber[e]},kp.prototype.decode=function(e){return this._numberToString[e]},(Oa={geometry:{configurable:!0}}).geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Oa.geometry.set=function(e){this._geometry=e},Pp.prototype.toJSON=function(){var e,t={geometry:this.geometry};for(e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Pp.prototype,Oa),(Di=function(){this.state={},this.stateChanges={},this.deletedStates={}}).prototype.updateState=function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},d(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var o in this.deletedStates[e][r]={},this.state[e][r])n[o]||(this.deletedStates[e][r][o]=null);else for(var a in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][a]&&delete this.deletedStates[e][r][a]},Di.prototype.removeFeatureState=function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}},Di.prototype.getState=function(e,t){var n=String(t),r=this.state[e]||{},i=this.stateChanges[e]||{},o=d({},r[n],i[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var a;if(null===(t=this.deletedStates[e][t]))return{};for(a in t)delete o[a]}return o},Di.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Di.prototype.coalesceChanges=function(e,t){var n,r,i={};for(n in this.stateChanges){this.state[n]=this.state[n]||{};var o,a={};for(o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),d(this.state[n][o],this.stateChanges[n][o]),a[o]=this.state[n][o];i[n]=a}for(r in this.deletedStates){this.state[r]=this.state[r]||{};var s={};if(null===this.deletedStates[r])for(var l in this.state[r])s[l]={},this.state[r][l]={};else for(var u in this.deletedStates[r]){if(null===this.deletedStates[r][u])this.state[r][u]={};else for(var c=0,p=Object.keys(this.deletedStates[r][u]);c<p.length;c+=1){var h=p[c];delete this.state[r][u][h]}s[u]=this.state[r][u]}i[r]=i[r]||{},d(i[r],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var f in e)e[f].setFeatureState(i,t)},Ni=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Xr(ps,16,0),this.grid3D=new Xr(ps,16,0),this.featureIndexArray=new Ta,this.promoteId=t},Ni.prototype.insert=function(e,t,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var h=u[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<ps&&c[1]<ps&&0<=c[2]&&0<=c[3]&&s.insert(a,c[0],c[1],c[2],c[3])}},Ni.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Vl.VectorTile(new bu(this.rawTileData)).layers,this.sourceLayerCoder=new kp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ni.prototype.query=function(e,t,n,r){var i=this;this.loadVTLayers();for(var o=e.params||{},a=ps/e.tileSize/e.scale,s=wr(o.filter),l=e.queryGeometry,u=e.queryPadding*a,c=Mp(l),p=this.grid.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u),h=(c=Mp(e.cameraQueryGeometry),0),d=this.grid3D.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u,(function(t,n,r,i){return Ts(e.cameraQueryGeometry,t-u,n-u,r+u,i+u)}));h<d.length;h+=1){var f=d[h];p.push(f)}p.sort(Op);for(var m,g={},y=0;y<p.length;y++)!function(u){var c;(u=p[u])!==m&&(m=u,u=i.featureIndexArray.get(u),c=null,i.loadMatchingFeature(g,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,s,o.layers,o.availableImages,t,n,r,(function(t,n,r){return c=c||fs(t),n.queryIntersectsFeature(l,t,r,c,i.z,e.transform,a,e.pixelPosMatrix)})))}(y);return g},Ni.prototype.loadMatchingFeature=function(e,t,n,r,i,o,a,s,l,u,c){var p=this.bucketLayerIDs[t];if(!o||function(e,t){for(var n=0;n<e.length;n++)if(0<=t.indexOf(e[n]))return 1}(o,p)){t=this.sourceLayerCoder.decode(n);var h=this.vtLayers[t].feature(r);if(i.needGeometry){if(n=ms(h,!0),!i.filter(new Si(this.tileID.overscaledZ),n,this.tileID.canonical))return}else if(!i.filter(new Si(this.tileID.overscaledZ),h))return;for(var f=this.getId(h,t),m=0;m<p.length;m++){var g,y,v,_=p[m];o&&o.indexOf(_)<0||(g=s[_])&&(y={},void 0!==f&&u&&(y=u.getState(g.sourceLayer||"_geojsonTileLayer",f)),(v=d({},l[_])).paint=Ap(v.paint,g.paint,h,y,a),v.layout=Ap(v.layout,g.layout,h,y,a),(g=!c||c(h,g,y))&&((y=new Pp(h,this.z,this.x,this.y,f)).layer=v,(v=void 0===(v=e[_])?e[_]=[]:v).push({featureIndex:r,feature:y,intersectionZ:g})))}}},Ni.prototype.lookupSymbolFeatures=function(e,t,n,r,i,o,a,s){var l={};this.loadVTLayers();for(var u=wr(i),c=0,p=e;c<p.length;c+=1){var h=p[c];this.loadMatchingFeature(l,n,r,h,u,o,a,s,t)}return l},Ni.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var r=0,i=n[t];r<i.length;r+=1)if(e===i[r])return!0;return!1},Ni.prototype.getId=function(e,t){var n=e.id;return this.promoteId&&(t="string"==typeof this.promoteId?this.promoteId:this.promoteId[t],"boolean"==typeof(n=e.properties[t])&&(n=Number(n))),n},ni("FeatureIndex",Ni,{omit:["rawTileData","sourceLayerCoder"]}),Fi=function(e,t){this.tileID=e,this.uid=f++,this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"},Fi.prototype.registerFadeDuration=function(e){(e+=this.timeAdded)<B.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Fi.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Fi.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=Ip(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets)if((r=this.buckets[r])instanceof Hc){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var i in this.buckets)if((i=this.buckets[i])instanceof Hc&&i.hasRTLText){this.hasRTLText=!0,Ci.isLoading()||Ci.isLoaded()||"deferred"!==yi||wi();break}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(o).queryRadius(a))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new la},Fi.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Fi.prototype.getBucket=function(e){return this.buckets[e.id]},Fi.prototype.upload=function(e){for(var t in this.buckets)(t=this.buckets[t]).uploadPending()&&t.upload(e);var n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new op(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new op(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},Fi.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Fi.prototype.queryRenderedFeatures=function(e,t,n,r,i,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:a,queryPadding:this.queryPadding*l},e,t,n):{}},Fi.prototype.querySourceFeatures=function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=wr(t&&t.filter),s=(t=this.tileID.canonical).z,l=t.x,u=t.y,c={z:s,x:l,y:u},p=0;p<o.length;p++){var h=o.feature(p);if(a.needGeometry){var d=ms(h,!0);if(!a.filter(new Si(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new Si(this.tileID.overscaledZ),h))continue;(d=new Pp(h,s,l,u,d=n.getId(h,i))).tile=c,e.push(d)}}},Fi.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Fi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Fi.prototype.setExpiryData=function(e){var t,n,r=this.expirationTime;e.cacheControl?(t=I(e.cacheControl))["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"]):e.expires&&(this.expirationTime=new Date(e.expires).getTime()),this.expirationTime&&(t=Date.now(),e=!1,this.expirationTime>t?e=!1:!r||this.expirationTime<r||!(n=this.expirationTime-r)?e=!0:this.expirationTime=t+Math.max(n,3e4),e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0)},Fi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Fi.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n,r,i,o,a=this.latestFeatureIndex.loadVTLayers();for(n in this.buckets)t.style.hasLayer(n)&&(o=a[i=(r=this.buckets[n]).layers[0].sourceLayer||"_geojsonTileLayer"],i=e[i],o&&i&&0!==Object.keys(i).length&&(r.update(i,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(o=t&&t.style&&t.style.getLayer(n))&&(this.queryPadding=Math.max(this.queryPadding,o.queryRadius(r)))))}},Fi.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Fi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<B.now()},Fi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Fi.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=B.now()+e},Fi.prototype.setDependencies=function(e,t){for(var n={},r=0,i=t;r<i.length;r+=1)n[i[r]]=!0;this.dependencies[e]=n},Fi.prototype.hasDependency=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=this.dependencies[i];if(o)for(var a=0,s=t;a<s.length;a+=1)if(o[s[a]])return!0}return!1};var Lp=s.performance;Oa=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Lp.mark(this._marks.start)},Oa.prototype.finish=function(){Lp.mark(this._marks.end);var e=Lp.getEntriesByName(this._marks.measure);return 0===e.length&&(Lp.measure(this._marks.measure,this._marks.start,this._marks.end),e=Lp.getEntriesByName(this._marks.measure),Lp.clearMarks(this._marks.start),Lp.clearMarks(this._marks.end),Lp.clearMeasures(this._marks.measure)),e},e.Actor=Nn,e.AlphaImage=Ks,e.CanonicalTileID=Sp,e.CollisionBoxArray=la,e.Color=mt,e.DEMData=Bn,e.DataConstantProperty=Ri,e.DictionaryCoder=kp,e.EXTENT=ps,e.ErrorEvent=Fe,e.EvaluationParameters=Si,e.Event=Be,e.Evented=Ue,e.FeatureIndex=Ni,e.FillBucket=Al,e.FillExtrusionBucket=Gl,e.ImageAtlas=ji,e.ImagePosition=Gu,e.LineBucket=$l,e.LngLat=mp,e.LngLatBounds=dp,e.MercatorCoordinate=wp,e.ONE_EM=yu,e.OverscaledTileID=Cp,e.Point=o,e.Point$1=o,e.Properties=Ui,e.Protobuf=bu,e.RGBAImage=Xs,e.RequestManager=W,e.RequestPerformance=Oa,e.ResourceType=xe,e.SegmentVector=ka,e.SourceFeatureState=Di,e.StructArrayLayout1ui2=le,e.StructArrayLayout2f1f2i16=Mo,e.StructArrayLayout2i4=Ji,e.StructArrayLayout3ui6=No,e.StructArrayLayout4i8=eo,e.SymbolBucket=Hc,e.Texture=op,e.Tile=Fi,e.Transitionable=ki,e.Uniform1f=qa,e.Uniform1i=jn,e.Uniform2f=Fn,e.Uniform3f=Vn,e.Uniform4f=Ka,e.UniformColor=Ja,e.UniformMatrix4f=Un,e.UnwrappedTileID=Ep,e.ValidationError=qe,e.WritingMode=Ku,e.ZoomHistory=si,e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},e.addDynamicAttributes=jc,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),o=null;e.forEach((function(e,a){t(e,(function(e,t){e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))},e.bezier=u,e.bindAll=v,e.browser=B,e.cacheEntryPossiblyAdded=function(e){de<++_e&&(e.getActor().send("enforceCacheSizeLimit",he),_e=0)},e.clamp=p,e.clearTileCache=function(e){var t=s.caches.delete(pe);e&&t.catch(e).then((function(){return e()}))},e.clipLine=_c,e.clone=function(e){var t=new zs(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=w,e.clone$2=function(e){var t=new zs(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=re,e.config=F,e.create=function(){var e=new zs(16);return zs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=function(){var e=new zs(9);return zs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},e.create$2=function(){var e=new zs(4);return zs!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=ur,e.createLayout=Ki,e.createStyleLayer=function(e){return new("custom"===e.type?np:ip[e.type])(e)},e.cross=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0];return t=n[1],n=n[2],e[0]=i*n-o*t,e[1]=o*a-r*n,e[2]=r*t-i*a,e},e.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"!=typeof t||null===t||null===n)return t===n;if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t)if(!e(t[i],n[i]))return!1;return!0},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=c,e.emitValidationErrors=Kr,e.endsWith=_,e.enforceCacheSizeLimit=function(e){fe(),ae&&ae.then((function(t){t.keys().then((function(n){for(var r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=hc,e.evaluateSizeForZoom=dc,e.evaluateVariableOffset=Mc,e.evented=Ei,e.extend=d,e.featureFilter=wr,e.filterObject=x,e.fromRotation=function(e,t){var n=Math.sin(t);return t=Math.cos(t),e[0]=t,e[1]=n,e[2]=0,e[3]=-n,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=oc,e.getAnchorJustification=Oc,e.getArrayBuffer=Pe,e.getImage=Oe,e.getJSON=function(e,t){return ke(d(e,{type:"json"}),t)},e.getRTLTextPluginStatus=xi,e.getReferrer=Ce,e.getVideo=function(e,t){var n=s.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var r,i,o=0;o<e.length;o++){var a=s.document.createElement("source");r=e[o],i=void 0,(i=s.document.createElement("a")).href=r,i.protocol===s.document.location.protocol&&i.host===s.document.location.host||(n.crossOrigin="Anonymous"),a.src=e[o],n.appendChild(a)}return{cancel:function(){}}},e.identity=Ns,e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],h=t[10],d=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,_=n*l-i*a,b=n*u-o*a,x=r*l-i*s,w=r*u-o*s,S=i*u-o*l,E=c*m-p*f,C=c*g-h*f,T=c*y-d*f,I=p*g-h*m,k=p*y-d*m,P=h*y-d*g;return(t=v*P-_*k+b*I+x*T-w*C+S*E)?(e[0]=(s*P-l*k+u*I)*(t=1/t),e[1]=(i*k-r*P-o*I)*t,e[2]=(m*S-g*w+y*x)*t,e[3]=(h*w-p*S-d*x)*t,e[4]=(l*T-a*P-u*C)*t,e[5]=(n*P-i*T+o*C)*t,e[6]=(g*b-f*S-y*_)*t,e[7]=(c*S-h*b+d*_)*t,e[8]=(a*k-s*T+u*E)*t,e[9]=(r*T-n*k-o*E)*t,e[10]=(f*w-m*b+y*v)*t,e[11]=(p*b-c*w-d*v)*t,e[12]=(s*C-a*I-l*E)*t,e[13]=(n*I-r*C+i*E)*t,e[14]=(m*_-f*x-g*v)*t,e[15]=(c*x-p*_+h*v)*t,e):null},e.isChar=li,e.isMapboxURL=G,e.keysDifference=function(e,t){var n,r=[];for(n in e)n in t||r.push(n);return r},e.makeRequest=ke,e.mapObject=b,e.mercatorXfromLng=vp,e.mercatorYfromLat=_p,e.mercatorZfromAltitude=bp,e.mul=Co,e.multiply=Bs,e.mvt=Vl,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=function(e,t){var n=t[0],r=t[1],i=t[2];return 0<(i=n*n+r*r+i*i)&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},e.number=an,e.offscreenCanvasSupported=be,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1,e},e.parseGlyphPBF=function(e){return new bu(e).readFields(Uu,[])},e.pbf=bu,e.performSymbolLayout=function(e,t,n,r,i,o,a){e.createArrays();var s=512*e.overscaling;e.tilePixelRatio=ps/s,e.compareText={},e.iconsNeedLinear=!1;var l,u,c=e.layers[0].layout,p=(s=e.layers[0]._unevaluatedLayout._values,{});"composite"===e.textSizeData.kind&&(u=(l=e.textSizeData).minZoom,l=l.maxZoom,p.compositeTextSizes=[s["text-size"].possiblyEvaluate(new Si(u),a),s["text-size"].possiblyEvaluate(new Si(l),a)]),"composite"===e.iconSizeData.kind&&(l=(u=e.iconSizeData).minZoom,u=u.maxZoom,p.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new Si(l),a),s["icon-size"].possiblyEvaluate(new Si(u),a)]),p.layoutTextSize=s["text-size"].possiblyEvaluate(new Si(e.zoom+1),a),p.layoutIconSize=s["icon-size"].possiblyEvaluate(new Si(e.zoom+1),a),p.textMaxSize=s["text-size"].possiblyEvaluate(new Si(18));for(var h=c.get("text-line-height")*yu,d="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),f=c.get("text-keep-upright"),m=c.get("text-size"),g=function(){var o=v[y],s=c.get("text-font").evaluate(o,{},a).join(","),l=m.evaluate(o,{},a),u=p.layoutTextSize.evaluate(o,{},a),g=p.layoutIconSize.evaluate(o,{},a),_={horizontal:{},vertical:void 0},b=o.text,x=[0,0];if(b){var w=b.toString(),S=c.get("text-letter-spacing").evaluate(o,{},a)*yu,C=ci(w)?S:0,T=c.get("text-anchor").evaluate(o,{},a),I=c.get("text-variable-anchor");I||(B=c.get("text-radial-offset").evaluate(o,{},a),x=B?Mc(T,[B*yu,Ac]):c.get("text-offset").evaluate(o,{},a).map((function(e){return e*yu})));var k=d?"center":c.get("text-justify").evaluate(o,{},a),P=c.get("symbol-placement"),A="point"===P?c.get("text-max-width").evaluate(o,{},a)*yu:0,M=function(){e.allowVerticalPlacement&&ui(w)&&(_.vertical=$u(b,t,n,i,s,A,h,T,"left",C,x,Ku.vertical,!0,P,u,l))};if(!d&&I){for(var O="auto"===k?I.map(Oc):[k],L=!1,R=0;R<O.length;R++){var D,z=O[R];_.horizontal[z]||(L?_.horizontal[z]=_.horizontal[0]:(D=$u(b,t,n,i,s,A,h,"center",z,C,x,Ku.horizontal,!1,P,u,l))&&(L=1===(_.horizontal[z]=D).positionedLines.length))}M()}else{"auto"===k&&(k=Oc(T));var N=$u(b,t,n,i,s,A,h,T,k,C,x,Ku.horizontal,!1,P,u,l);N&&(_.horizontal[k]=N),M(),ui(w)&&d&&f&&(_.vertical=$u(b,t,n,i,s,A,h,T,k,C,x,Ku.vertical,!1,P,u,l))}}var B,F=void 0;S=!1,o.icon&&o.icon.name&&(j=r[o.icon.name])&&(B=i[o.icon.name],I=c.get("icon-offset").evaluate(o,{},a),k=(M=oc(N=c.get("icon-anchor").evaluate(o,{},a))).horizontalAlign,N=M.verticalAlign,M=I[0],I=I[1],k=(M-=B.displaySize[0]*k)+B.displaySize[0],F={image:B,top:N=I-B.displaySize[1]*N,bottom:N+B.displaySize[1],left:M,right:k},S=j.sdf,void 0===e.sdfIcons?e.sdfIcons=j.sdf:e.sdfIcons!==j.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),j.pixelRatio===e.pixelRatio&&0===c.get("icon-rotate").constantOr(1)||(e.iconsNeedLinear=!0));var j=zc(_.horizontal)||_.vertical;e.iconsInText=!!j&&j.iconsInText,(j||F)&&function(e,t,n,r,i,o,a,s,l,u,c){void 0===(T=o.textMaxSize.evaluate(t,{}))&&(T=a);var p,h=e.layers[0].layout,d=h.get("icon-offset").evaluate(t,{},c),f=zc(n.horizontal),m=a/24,g=e.tilePixelRatio*m,y=e.tilePixelRatio*T/24,v=e.tilePixelRatio*s,_=e.tilePixelRatio*h.get("symbol-spacing"),b=h.get("text-padding")*e.tilePixelRatio,x=h.get("icon-padding")*e.tilePixelRatio,w=h.get("text-max-angle")/180*Math.PI,S="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),C="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),T=h.get("symbol-placement"),I=_/2;function k(s,h){h.x<0||h.x>=ps||h.y<0||h.y>=ps||function(e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m,g,y,v,_,b,x,w,S,C){var T,I,k,P,A,M=e.addToLineVertexArray(t,n),O=0,L=0,R=0,D=0,z=-1,N=-1,B={},F=La(""),j=0;for(k in n=0,n=void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(P=s.layout.get("text-offset").evaluate(b,{},S).map((function(e){return e*yu})),j=P[0],P[1]):(j=s.layout.get("text-radial-offset").evaluate(b,{},S)*yu,Ac),e.allowVerticalPlacement&&r.vertical&&(P=s.layout.get("text-rotate").evaluate(b,{},S)+90,A=new Ec(l,t,u,c,p,A=r.vertical,h,d,f,P),a&&(K=new Ec(l,t,u,c,p,a,g,y,f,P))),i&&(W=xc(i,q=s.layout.get("icon-rotate").evaluate(b,{}),w,Z="none"!==s.layout.get("icon-text-fit")),G=a?xc(a,q,w,Z):void 0,I=new Ec(l,t,u,c,p,i,g,y,!1,q),O=4*W.length,Z=null,"source"===(H=e.iconSizeData).kind?(Z=[cc*s.layout.get("icon-size").evaluate(b,{})])[0]>Rc&&E(e.layerIds[0]+': Value for "icon-size" is >= '+Lc+'. Reduce your "icon-size".'):"composite"===H.kind&&((Z=[cc*x.compositeIconSizes[0].evaluate(b,{},S),cc*x.compositeIconSizes[1].evaluate(b,{},S)])[0]>Rc||Z[1]>Rc)&&E(e.layerIds[0]+': Value for "icon-size" is >= '+Lc+'. Reduce your "icon-size".'),e.addSymbols(e.icon,W,Z,_,v,b,!1,t,M.lineStartIndex,M.lineLength,-1,S),z=e.icon.placedSymbolArray.length-1,G&&(L=4*G.length,e.addSymbols(e.icon,G,Z,_,v,b,Ku.vertical,t,M.lineStartIndex,M.lineLength,-1,S),N=e.icon.placedSymbolArray.length-1)),r.horizontal){var U=r.horizontal[k];T||(F=La(U.text),T=new Ec(l,t,u,c,p,U,h,d,f,V=s.layout.get("text-rotate").evaluate(b,{},S)));var V=1===U.positionedLines.length;if(R+=Dc(e,t,U,o,s,f,b,m,M,r.vertical?Ku.horizontal:Ku.horizontalOnly,V?Object.keys(r.horizontal):[k],B,z,x,S),V)break}r.vertical&&(D+=Dc(e,t,r.vertical,o,s,f,b,m,M,Ku.vertical,["vertical"],B,N,x,S)),i=T?T.boxStartIndex:e.collisionBoxArray.length,g=T?T.boxEndIndex:e.collisionBoxArray.length,y=A?A.boxStartIndex:e.collisionBoxArray.length;var q=A?A.boxEndIndex:e.collisionBoxArray.length,H=I?I.boxStartIndex:e.collisionBoxArray.length,W=I?I.boxEndIndex:e.collisionBoxArray.length,G=K?K.boxStartIndex:e.collisionBoxArray.length,Z=K?K.boxEndIndex:e.collisionBoxArray.length;v=function(e,t){return e&&e.circleDiameter?Math.max(e.circleDiameter,t):t},_=v(T,_=-1),_=v(A,_),_=v(I,_);var K=-1<(_=v(K,_))?1:0;K&&(_*=C/yu),e.glyphOffsetArray.length>=Hc.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,0<=B.right?B.right:-1,0<=B.center?B.center:-1,0<=B.left?B.left:-1,B.vertical||-1,z,N,F,i,g,y,q,H,W,G,Z,u,R,D,O,L,K,0,h,j,n,_)}(e,h,s,n,r,i,p,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,g,b,S,l,v,x,C,d,t,o,u,c,a)}if(s=h.get("icon-text-fit"),r&&"none"!==s&&(e.allowVerticalPlacement&&n.vertical&&(p=ac(r,n.vertical,s,h.get("icon-text-fit-padding"),d,m)),f&&(r=ac(r,f,s,h.get("icon-text-fit-padding"),d,m))),"line"===T)for(var P=0,A=_c(t.geometry,0,0,ps,ps);P<A.length;P+=1)for(var M=A[P],O=0,L=vc(M,_,w,n.vertical||f,r,24,y,e.overscaling,ps);O<L.length;O+=1){var R=L[O];f&&function(e,t,n,r){if(t in(e=e.compareText)){for(var i=e[t],o=i.length-1;0<=o;o--)if(r.dist(i[o])<n)return!0}else e[t]=[];return e[t].push(r),!1}(e,f.text,I,R)||k(M,R)}else if("line-center"===T)for(var D=0,z=t.geometry;D<z.length;D+=1){var N,B=z[D];1<B.length&&(N=function(e,t,n,r,i,o){for(var a=gc(n,24,o),s=yc(n,r)*o,l=0,u=mc(e)/2,c=0;c<e.length-1;c++){var p=e[c],h=e[c+1],d=p.dist(h);if(u<l+d){var f=(u-l)/d,m=an(p.x,h.x,f);return f=an(p.y,h.y,f),(p=new lc(m,f,h.angleTo(p),c))._round(),!a||fc(e,p,s,a,t)?p:void 0}l+=d}}(B,w,n.vertical||f,r,0,y))&&k(B,N)}else if("Polygon"===t.type)for(var F=0,j=Tl(t.geometry,0);F<j.length;F+=1){var U=j[F],V=Ic(U,16);k(U[0],new lc(V.x,V.y,0))}else if("LineString"===t.type)for(var q=0,H=t.geometry;q<H.length;q+=1){var W=H[q];k(W,new lc(W[0].x,W[0].y,0))}else if("Point"===t.type)for(var G=0,Z=t.geometry;G<Z.length;G+=1)for(var K=0,X=Z[G];K<X.length;K+=1){var Y=X[K];k([Y],new lc(Y.x,Y.y,0))}}(e,o,_,F,r,p,u,g,x,S,a)},y=0,v=e.features;y<v.length;y+=1)g();o&&e.generateCollisionDebugBuffers()},e.perspective=function(e,t,n,r,i){return t=1/Math.tan(t/2),e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(t=1/(r-i)),e[14]=2*i*r*t):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=Ci,e.polygonIntersectsPolygon=vs,e.postMapLoadEvent=ce,e.postTurnstileEvent=ue,e.potpack=Wu,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=ni,e.registerForPluginStateChange=function(e){return e({pluginStatus:yi,pluginURL:vi}),Ei.on("pluginStateChange",e),e},e.renderColorRamp=$s,e.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return t=Math.sin(n),n=Math.cos(n),e[0]=r*n+o*t,e[1]=i*n+a*t,e[2]=r*-t+o*n,e[3]=i*-t+a*n,e},e.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10];return n=t[11],t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+p*r,e[7]=l*i+n*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=p*i-s*r,e[11]=n*i-l*r,e},e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6];return n=t[7],t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*r,e[1]=a*i+c*r,e[2]=s*i+p*r,e[3]=l*i+n*r,e[4]=u*i-o*r,e[5]=c*i-a*r,e[6]=p*i-s*r,e[7]=n*i-l*r,e},e.scale=function(e,t,n){var r=n[0],i=n[1];return n=n[2],e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},e.setCacheLimits=function(e,t){he=e,de=t},e.setRTLTextPlugin=function(e,t,n){if(void 0===n&&(n=!1),yi===mi.deferred||yi===mi.loading||yi===mi.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");vi=B.resolveURL(e),yi=mi.deferred,gi=t,bi(),n||wi()},e.sphericalToCartesian=function(e){var t=e[0],n=e[1];return e=e[2],n+=90,n*=Math.PI/180,e*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(e),y:t*Math.sin(n)*Math.sin(e),z:t*Math.cos(e)}},e.sqrLen=qo,e.styleSpec=Ve,e.sub=jo,e.symbolSize=Rs,e.transformMat3=function(e,t,n){var r=t[0],i=t[1];return t=t[2],e[0]=r*n[0]+i*n[3]+t*n[6],e[1]=r*n[1]+i*n[4]+t*n[7],e[2]=r*n[2]+i*n[5]+t*n[8],e},e.transformMat4=Fs,e.translate=function(e,t,n){var r,i,o,a,s,l,u,c,p,h,d,f=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*f+t[4]*m+t[8]*g+t[12],e[13]=t[1]*f+t[5]*m+t[9]*g+t[13],e[14]=t[2]*f+t[6]*m+t[10]*g+t[14],e[15]=t[3]*f+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],d=t[10],n=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=h,e[10]=d,e[11]=n,e[12]=r*f+s*m+p*g+t[12],e[13]=i*f+l*m+h*g+t[13],e[14]=o*f+u*m+d*g+t[14],e[15]=a*f+c*m+n*g+t[15]),e},e.triggerPluginCompletionEvent=_i,e.uniqueId=m,e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers."+n+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},e.validateLight=Wr,e.validateStyle=Hr,e.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},e.vectorTile=Vl,e.version=n,e.warnOnce=E,e.webpSupported=j,e.window=s,e.wrap=h})),n(0,(function(e){function t(t){for(var n="",r=0,i=e.refProperties;r<i.length;r+=1)n+="/"+function e(t){var n=typeof t;if("number"==n||"boolean"==n||"string"==n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+e(t[a[l]])+",";return s+"}"}(t[i[r]]);return n}function n(e){this.keyCache={},e&&this.replace(e)}function r(t){var n,r={},i=[];for(n in t){var o,a=t[n],s=r[n]={};for(o in a){var l,u=a[+o];u&&0!==u.bitmap.width&&0!==u.bitmap.height&&(l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2},i.push(l),s[o]={rect:l,metrics:u.metrics})}}var c,p=(h=e.potpack(i)).w,h=h.h,d=new e.AlphaImage({width:p||1,height:h||1});for(c in t){var f,m=t[c];for(f in m){var g,y=m[+f];y&&0!==y.bitmap.width&&0!==y.bitmap.height&&(g=r[c][f].rect,e.AlphaImage.copy(y.bitmap,d,{x:0,y:0},{x:g.x+1,y:g.y+1},y.bitmap))}}this.image=d,this.positions=r}function i(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId}function o(t,n,r){for(var i=new e.EvaluationParameters(n),o=0,a=t;o<a.length;o+=1)a[o].recalculate(i,r)}function a(t,n){var r=e.getArrayBuffer(t.request,(function(t,r,i,o){t?n(t):r&&n(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return function(){r.cancel(),n()}}function s(e,t,n,r){this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=r||a,this.loading={},this.loaded={}}function l(){this.loaded={}}n.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},n.prototype.update=function(n,r){for(var i=this,o=0,a=n;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=e.createStyleLayer(s);l._featureFilter=e.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0,c=r;u<c.length;u+=1){var p=c[u];delete this.keyCache[p],delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var h=0,d=function(e,n){for(var r={},i=0;i<e.length;i++){var o=n&&n[e[i].id]||t(e[i]);n&&(n[e[i].id]=o),(r[o]||(r[o]=[])).push(e[i])}var a,s=[];for(a in r)s.push(r[a]);return s}(e.values(this._layerConfigs),this.keyCache);h<d.length;h+=1){var f,m,g=d[h].map((function(e){return i._layers[e.id]})),y=g[0];"none"!==y.visibility&&(f=y.source||"",((m=(m=this.familiesBySource[f])||(this.familiesBySource[f]={}))[y=y.sourceLayer||"_geojsonTileLayer"]||(m[y]=[])).push(g))}},e.register("GlyphAtlas",r),i.prototype.parse=function(t,n,i,a,s){var l=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var u=new e.DictionaryCoder(Object.keys(t.layers).sort()),c=new e.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var p,h,d,f,m,g={},y={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},v=n.familiesBySource[this.source];for(p in v){var _=t.layers[p];if(_){1===_.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+p+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=u.encode(p),x=[],w=0;w<_.length;w++){var S=_.feature(w),E=c.getId(S,p);x.push({feature:S,id:E,index:w,sourceLayerIndex:b})}for(var C=0,T=v[p];C<T.length;C+=1){var I=T[C],k=I[0];k.minzoom&&this.zoom<Math.floor(k.minzoom)||k.maxzoom&&this.zoom>=k.maxzoom||"none"!==k.visibility&&(o(I,this.zoom,i),(g[k.id]=k.createBucket({index:c.bucketLayerIDs.length,layers:I,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,y,this.tileID.canonical),c.bucketLayerIDs.push(I.map((function(e){return e.id}))))}}}function P(){if(h)return s(h);if(d&&f&&m){var t,n=new r(d),a=new e.ImageAtlas(f,m);for(t in g){var l=g[t];l instanceof e.SymbolBucket?(o(l.layers,this.zoom,i),e.performSymbolLayout(l,d,n.positions,f,a.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof e.LineBucket||l instanceof e.FillBucket||l instanceof e.FillExtrusionBucket)&&(o(l.layers,this.zoom,i),l.addFeatures(y,this.tileID.canonical,a.patternPositions))}this.status="done",s(null,{buckets:e.values(g).filter((function(e){return!e.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:n.image,imageAtlas:a,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?n.positions:null})}}n=e.mapObject(y.glyphDependencies,(function(e){return Object.keys(e).map(Number)})),Object.keys(n).length?a.send("getGlyphs",{uid:this.uid,stacks:n},(function(e,t){h||(h=e,d=t,P.call(l))})):d={},(n=Object.keys(y.iconDependencies)).length?a.send("getImages",{icons:n,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){h||(h=e,f=t,P.call(l))})):f={},(n=Object.keys(y.patternDependencies)).length?a.send("getImages",{icons:n,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){h||(h=e,m=t,P.call(l))})):m={},P.call(this)},s.prototype.loadTile=function(t,n){var r=this,o=t.uid;this.loading||(this.loading={});var a=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),s=this.loading[o]=new i(t);s.abort=this.loadVectorData(t,(function(t,i){if(delete r.loading[o],t||!i)return s.status="done",r.loaded[o]=s,n(t);var l=i.rawData,u={};i.expires&&(u.expires=i.expires),i.cacheControl&&(u.cacheControl=i.cacheControl);var c={};!a||(t=a.finish())&&(c.resourceTiming=JSON.parse(JSON.stringify(t))),s.vectorTile=i.vectorTile,s.parse(i.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(t,r){return t||!r?n(t):void n(null,e.extend({rawTileData:l.slice(0)},r,u,c))})),r.loaded=r.loaded||{},r.loaded[o]=s}))},s.prototype.reloadTile=function(e,t){var n,r=this,i=this.loaded,o=e.uid,a=this;i&&i[o]&&((n=i[o]).showCollisionBoxes=e.showCollisionBoxes,e=function(e,i){var o=n.reloadCallback;o&&(delete n.reloadCallback,n.parse(n.vectorTile,a.layerIndex,r.availableImages,a.actor,o)),t(e,i)},"parsing"===n.status?n.reloadCallback=e:"done"===n.status&&(n.vectorTile?n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,e):e()))},s.prototype.abortTile=function(e,t){var n=this.loading;e=e.uid,n&&n[e]&&n[e].abort&&(n[e].abort(),delete n[e]),t()},s.prototype.removeTile=function(e,t){var n=this.loaded;e=e.uid,n&&n[e]&&delete n[e],t()};var u=e.window.ImageBitmap;l.prototype.loadTile=function(t,n){var r=t.uid,i=t.encoding;t=t.rawImageData,t=u&&t instanceof u?this.getImageData(t):t,i=new e.DEMData(r,t,i),this.loaded=this.loaded||{},n(null,this.loaded[r]=i)},l.prototype.getImageData=function(t){return this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height),t=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2),this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:t.width,height:t.height},t.data)},l.prototype.removeTile=function(e){var t=this.loaded;e=e.uid,t&&t[e]&&delete t[e]};var c=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)p(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)p(t.coordinates[r],n);return t};function p(e,t){if(0!==e.length){h(e[0],t);for(var n=1;n<e.length;n++)h(e[n],!t)}}function h(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}0<=n+r!=!!t&&e.reverse()}function d(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}var f=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];t.push([new e.Point$1(i[0],i[1])])}return t}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,c=s[a];u<c.length;u+=1){var p=c[u];l.push(new e.Point$1(p[0],p[1]))}o.push(l)}return o},d.prototype.toGeoJSON=function(e,t,n){return f.call(this,e,t,n)};var m=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};m.prototype.feature=function(e){return new d(this._features[e])};var g=e.vectorTile.VectorTileFeature,y=v;function v(e,t){this.options=t||{},this.features=e,this.length=e.length}function _(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}function b(e,t){t=t||{};var n,r={};for(n in e)r[n]=new y(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return w({layers:r})}v.prototype.feature=function(e){return new _(this.features[e],this.options.extent)},_.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<r.length;o++)i.push(new e.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},_.prototype.toGeoJSON=g.prototype.toGeoJSON;var x=w;function w(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,S,e.layers[n])}(t,n),n.finish()}function S(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);for(var n={keys:[],values:[],keycache:{},valuecache:{}},r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,E,n);var i=n.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var o=n.values;for(r=0;r<o.length;r++)t.writeMessage(4,P,o[r])}function E(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,C,e),t.writeVarintField(3,n.type),t.writeMessage(4,k,n)}function C(e,t){var n,r=e.feature,i=e.keys,o=e.values,a=e.keycache,s=e.valuecache;for(n in r.properties){var l,u=r.properties[n],c=a[n];null!==u&&(void 0===c&&(i.push(n),c=i.length-1,a[n]=c),t.writeVarint(c),void 0===(l=s[c=(l=typeof u)+":"+(u="string"!=l&&"boolean"!=l&&"number"!=l?JSON.stringify(u):u)])&&(o.push(u),l=o.length-1,s[c]=l),t.writeVarint(l))}}function T(e,t){return(t<<3)+(7&e)}function I(e){return e<<1^e>>31}function k(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===r&&(u=l.length),t.writeVarint(T(1,u));for(var c=3===r?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==r&&t.writeVarint(T(2,c-1));var h=l[p].x-i,d=l[p].y-o;t.writeVarint(I(h)),t.writeVarint(I(d)),i+=h,o+=d}3===r&&t.writeVarint(15)}}function P(e,t){var n=typeof e;"string"==n?t.writeStringField(1,e):"boolean"==n?t.writeBooleanField(7,e):"number"==n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function A(e,t,n,r,i,o){var a;i-r<=n||(function e(t,n,r,i,o,a){for(;i<o;){var s,l,u,c,p;600<o-i&&(s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1),e(t,n,r,c=Math.max(i,Math.floor(r-l*u/s+p)),p=Math.min(o,Math.floor(r+(s-l)*u/s+p)),a));var h=n[2*r+a],d=i,f=o;for(M(t,n,i,r),n[2*o+a]>h&&M(t,n,i,o);d<f;){for(M(t,n,d,f),d++,f--;n[2*d+a]<h;)d++;for(;n[2*f+a]>h;)f--}n[2*i+a]===h?M(t,n,i,f):M(t,n,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}(e,t,a=r+i>>1,r,i,o%2),A(e,t,n,r,a-1,o+1),A(e,t,n,1+a,i,o+1))}function M(e,t,n,r){O(e,n,r),O(t,2*n,2*r),O(t,2*n+1,2*r+1)}function O(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function L(e,t,n,r){return(n=e-n)*n+(r=t-r)*r}function R(e){return e[0]}function D(e){return e[1]}function z(e,t,n,r,i){void 0===t&&(t=R),void 0===n&&(n=D),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r;for(var o=(this.points=e).length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length),l=0;l<e.length;l++)s[2*(a[l]=l)]=t(e[l]),s[2*l+1]=n(e[l]);A(a,s,r,0,a.length-1,0)}function N(e){this.options=W(Object.create(F),e),this.trees=new Array(this.options.maxZoom+1)}g=y,x.fromVectorTileJs=w,x.fromGeojsonVt=b,x.GeoJSONWrapper=g,z.prototype.range=function(e,t,n,r){return function(e,t,n,r,i,o,a){for(var s=[0,e.length-1,0],l=[];s.length;){var u=s.pop(),c=s.pop(),p=s.pop();if(c-p<=a)for(var h=p;h<=c;h++)f=t[2*h],m=t[2*h+1],n<=f&&f<=i&&r<=m&&m<=o&&l.push(e[h]);else{var d=Math.floor((p+c)/2),f=t[2*d],m=t[2*d+1];n<=f&&f<=i&&r<=m&&m<=o&&l.push(e[d]);var g=(u+1)%2;(0===u?n<=f:r<=m)&&(s.push(p),s.push(d-1),s.push(g)),(0===u?f<=i:m<=o)&&(s.push(d+1),s.push(c),s.push(g))}}return l}(this.ids,this.coords,e,t,n,r,this.nodeSize)};var B,F={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!(z.prototype.within=function(e,t,n){return function(e,t,n,r,i,o){for(var a=[0,e.length-1,0],s=[],l=i*i;a.length;){var u=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)L(t[2*h],t[2*h+1],n,r)<=l&&s.push(e[h]);else{var d=Math.floor((p+c)/2),f=t[2*d],m=t[2*d+1];L(f,m,n,r)<=l&&s.push(e[d]);var g=(u+1)%2;(0===u?n-i<=f:r-i<=m)&&(a.push(p),a.push(d-1),a.push(g)),(0===u?f<=n+i:m<=r+i)&&(a.push(d+1),a.push(c),a.push(g))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}),generateId:!1,reduce:null,map:function(e){return e}},j=Math.fround||(B=new Float32Array(1),function(e){return B[0]=+e,B[0]});function U(e){return{type:"Feature",id:e.id,properties:V(e),geometry:{type:"Point",coordinates:[360*(e.x-.5),function(e){return e=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(e))/Math.PI-90}(e.y)]}}}function V(e){var t=e.numPoints,n=1e4<=t?Math.round(t/1e3)+"k":1e3<=t?Math.round(t/100)/10+"k":t;return W(W({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function q(e){return e/360+.5}function H(e){return e=Math.sin(e*Math.PI/180),(e=.5-.25*Math.log((1+e)/(1-e))/Math.PI)<0?0:1<e?1:e}function W(e,t){for(var n in t)e[n]=t[n];return e}function G(e){return e.x}function Z(e){return e.y}function K(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,l=e[t],u=e[t+1],c=e[n],p=e[n+1],h=t+3;h<n;h+=3){var d=function(e,t,n,r,i,o){var a,s=i-n,l=o-r;return 0===s&&0===l||(1<(a=((e-n)*s+(t-r)*l)/(s*s+l*l))?(n=i,r=o):0<a&&(n+=s*a,r+=l*a)),(s=e-n)*s+(l=t-r)*l}(e[h],e[h+1],l,u,c,p);o<d?(i=h,o=d):d!==o||(d=Math.abs(h-a))<s&&(i=h,s=d)}r<o&&(3<i-t&&K(e,t,i,r),e[i+2]=o,3<n-i&&K(e,i,n,r))}function X(e,t,n,r){return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Y(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)Y(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)Y(e,t[r][i])}(r={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),r}function Y(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function J(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)$(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)$(i[u],s);else if("LineString"===o)Q(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)Q(i[u],s=[],a,!1),e.push(X(l,"LineString",s,t.properties));return}ee(i,s,a,!1)}else if("Polygon"===o)ee(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(u=0;u<t.geometry.geometries.length;u++)J(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},n,r);return}for(u=0;u<i.length;u++){var c=[];ee(i[u],c,a,!0),s.push(c)}}e.push(X(l,o,s,t.properties))}}function $(e,t){t.push(te(e[0])),t.push(ne(e[1])),t.push(0)}function Q(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=te(e[s][0]),u=ne(e[s][1]);t.push(l),t.push(u),t.push(0),0<s&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=t.length-3;t[2]=1,K(t,0,c,n),t[2+c]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function ee(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];Q(e[i],o,n,r),t.push(o)}}function te(e){return e/360+.5}function ne(e){return e=Math.sin(e*Math.PI/180),(e=.5-.25*Math.log((1+e)/(1-e))/Math.PI)<0?0:1<e?1:e}function re(e,t,n,r,i,o,a,s){if(r/=t,(n/=t)<=o&&a<r)return e;if(a<n||r<=o)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],p=c.geometry,h=c.type,d=0===i?c.minX:c.minY,f=0===i?c.maxX:c.maxY;if(n<=d&&f<r)l.push(c);else if(!(f<n||r<=d)){var m=[];if("Point"===h||"MultiPoint"===h)!function(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];n<=a&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}(p,m,n,r,i);else if("LineString"===h)ie(p,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)ae(p,m,n,r,i,!1);else if("Polygon"===h)ae(p,m,n,r,i,!0);else if("MultiPolygon"===h)for(var g=0;g<p.length;g++){var y=[];ae(p[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length)if(s.lineMetrics&&"LineString"===h)for(g=0;g<m.length;g++)l.push(X(c.id,h,m[g],c.tags));else"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(X(c.id,h,m,c.tags))}}return l.length?l:null}function ie(e,t,n,r,i,o,a){for(var s,l,u=oe(e),c=0===i?le:ue,p=e.start,h=0;h<e.length-3;h+=3){var d=e[h],f=e[h+1],m=e[h+2],g=e[h+3],y=e[h+4],v=0===i?d:f,_=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-y,2))),v<n?n<_&&(l=c(u,d,f,g,y,n),a&&(u.start=p+s*l)):r<v?_<r&&(l=c(u,d,f,g,y,r),a&&(u.start=p+s*l)):se(u,d,f,m),_<n&&n<=v&&(l=c(u,d,f,g,y,n),b=!0),r<_&&v<=r&&(l=c(u,d,f,g,y,r),b=!0),!o&&b&&(a&&(u.end=p+s*l),t.push(u),u=oe(e)),a&&(p+=s)}var x=e.length-3;d=e[x],f=e[1+x],m=e[2+x],n<=(v=0===i?d:f)&&v<=r&&se(u,d,f,m),x=u.length-3,o&&3<=x&&(u[x]!==u[0]||u[1+x]!==u[1])&&se(u,u[0],u[1],u[2]),u.length&&t.push(u)}function oe(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ae(e,t,n,r,i,o){for(var a=0;a<e.length;a++)ie(e[a],t,n,r,i,o,!1)}function se(e,t,n,r){e.push(t),e.push(n),e.push(r)}function le(e,t,n,r,i,o){return t=(o-t)/(r-t),e.push(o),e.push(n+(i-n)*t),e.push(1),t}function ue(e,t,n,r,i,o){return n=(o-n)/(i-n),e.push(t+(r-t)*n),e.push(o),e.push(1),n}function ce(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=pe(i.geometry,t);else if("MultiLineString"===o||"Polygon"===o)for(var a=[],s=0;s<i.geometry.length;s++)a.push(pe(i.geometry[s],t));else if("MultiPolygon"===o)for(a=[],s=0;s<i.geometry.length;s++){for(var l=[],u=0;u<i.geometry[s].length;u++)l.push(pe(i.geometry[s][u],t));a.push(l)}n.push(X(i.id,o,a,i.tags))}return n}function pe(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function he(e,t){if(e.transformed)return e;for(var n,r=1<<e.z,i=e.x,o=e.y,a=0;a<e.features.length;a++){var s=e.features[a],l=s.geometry,u=s.type;if(s.geometry=[],1===u)for(n=0;n<l.length;n+=2)s.geometry.push(de(l[n],l[n+1],t,r,i,o));else for(n=0;n<l.length;n++){for(var c=[],p=0;p<l[n].length;p+=2)c.push(de(l[n][p],l[n][p+1],t,r,i,o));s.geometry.push(c)}}return e.transformed=!0,e}function de(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function fe(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,function(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)me(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)me(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)me(a,u[s],e,n,!0,0===s)}if(a.length){var c=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var p in c={},t.tags)c[p]=t.tags[p];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}r={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c},null!==t.id&&(r.id=t.id),e.features.push(r)}}(a,e[s],o,i);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,p=e[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function me(e,t,n,r,i,o){var a=r*r;if(0<r&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(0<n===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function ge(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||24<t.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r,i,o,a,s=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)J(n,e.features[r],t,r);else"Feature"===e.type?J(n,e,t):J(n,{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),e=re(a=r=s,1,-1-(o=(i=t).buffer/i.extent),o,0,-1,2,i),t=re(r,1,1-o,2+o,0,-1,2,i),(e||t)&&(a=re(r,1,-o,1+o,0,-1,2,i)||[],e&&(a=ce(e,1).concat(a)),t&&(a=a.concat(ce(t,-1)))),(s=a).length&&this.splitTile(s,0,0,0),n&&(s.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ye(e,t,n){return 32*((1<<e)*n+t)+e}function ve(e,t){var n=e.tileID.canonical;return this._geoJSONIndex&&(e=this._geoJSONIndex.getTile(n.z,n.x,n.y))?void t(null,{vectorTile:n=new m(e.features),rawData:(e=0!==(e=x(n)).byteOffset||e.byteLength!==e.buffer.byteLength?new Uint8Array(e):e).buffer}):t(null,null)}N.prototype.load=function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,o=t.nodeSize;n&&console.time("total time"),t="prepare "+e.length+" points",n&&console.time(t),this.points=e;for(var a,s,l,u=[],c=0;c<e.length;c++)e[c].geometry&&u.push((s=c,l=void 0,a=(l=(a=e[c]).geometry.coordinates)[0],l=l[1],{x:j(q(a)),y:j(H(l)),zoom:1/0,index:s,parentId:-1}));this.trees[i+1]=new z(u,G,Z,o,Float32Array),n&&console.timeEnd(t);for(var p=i;r<=p;p--){var h=+Date.now();u=this._cluster(u,p),this.trees[p]=new z(u,G,Z,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",p,u.length,+Date.now()-h)}return n&&console.timeEnd("total time"),this},N.prototype.getClusters=function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(360<=e[2]-e[0])n=-180,i=180;else if(i<n){var a=this.getClusters([n,r,180,o],t);return e=this.getClusters([-180,r,i,o],t),a.concat(e)}for(var s=this.trees[this._limitZoom(t)],l=[],u=0,c=s.range(q(n),H(o),q(i),H(r));u<c.length;u+=1){var p=c[u];p=s.points[p],l.push(p.numPoints?U(p):this.points[p.index])}return l},N.prototype.getChildren=function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);if(!(t=i.points[t]))throw new Error(r);n=this.options.radius/(this.options.extent*Math.pow(2,n-1));for(var o=[],a=0,s=i.within(t.x,t.y,n);a<s.length;a+=1){var l=s[a];(l=i.points[l]).parentId===e&&o.push(l.numPoints?U(l):this.points[l.index])}if(0===o.length)throw new Error(r);return o},N.prototype.getLeaves=function(e,t,n){var r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r},N.prototype.getTile=function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=(s=this.options).extent,a=s.radius/o,s=(e=(n-a)/i,(n+1+a)/i);return o={features:[]},this._addTileFeatures(r.range((t-a)/i,e,(t+1+a)/i,s),r.points,t,n,i,o),0===t&&this._addTileFeatures(r.range(1-a/i,e,1,s),r.points,i,n,i,o),t===i-1&&this._addTileFeatures(r.range(0,e,a/i,s),r.points,-1,n,i,o),o.features.length?o:null},N.prototype.getClusterExpansionZoom=function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},N.prototype._appendLeaves=function(e,t,n,r,i){for(var o=0,a=this.getChildren(t);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?i+l.point_count<=r?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i},N.prototype._addTileFeatures=function(e,t,n,r,i,o){for(var a=0,s=e;a<s.length;a+=1){var l,u=t[s[a]],c=u.numPoints,p=void 0,h=void 0,d=void 0;d=c?(p=V(u),h=u.x,u.y):(p=(l=this.points[u.index]).properties,h=q(l.geometry.coordinates[0]),H(l.geometry.coordinates[1])),d={type:1,geometry:[[Math.round(this.options.extent*(h*i-n)),Math.round(this.options.extent*(d*i-r))]],tags:p},p=void 0,c?p=u.id:this.options.generateId?p=u.index:this.points[u.index].id&&(p=this.points[u.index].id),void 0!==p&&(d.id=p),o.features.push(d)}},N.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))},N.prototype._cluster=function(e,t){for(var n,r,i,o=[],a=this.options,s=a.radius,l=a.extent,u=a.reduce,c=a.minPoints,p=s/(l*Math.pow(2,t)),h=0;h<e.length;h++){var d=e[h];if(!(d.zoom<=t)){d.zoom=t;for(var f=this.trees[t+1],m=f.within(d.x,d.y,p),g=d.numPoints||1,y=g,v=0,_=m;v<_.length;v+=1){var b=_[v];(b=f.points[b]).zoom>t&&(y+=b.numPoints||1)}if(c<=y){for(var x=d.x*g,w=d.y*g,S=u&&1<g?this._map(d,!0):null,E=(h<<5)+(t+1)+this.points.length,C=0,T=m;C<T.length;C+=1){var I=T[C],k=f.points[I];k.zoom<=t||(k.zoom=t,I=k.numPoints||1,x+=k.x*I,w+=k.y*I,k.parentId=E,u&&u(S=S||this._map(d,!0),this._map(k)))}d.parentId=E,o.push((n=w/y,r=E,i=S,{x:j(x/(g=y)),y:j(n),zoom:1/0,id:r,parentId:-1,numPoints:g,properties:i}))}else if(o.push(d),1<y)for(var P=0,A=m;P<A.length;P+=1){var M=A[P];(M=f.points[M]).zoom<=t||(M.zoom=t,o.push(M))}}}return o},N.prototype._getOriginId=function(e){return e-this.points.length>>5},N.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},ge.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!(N.prototype._map=function(e,t){if(e.numPoints)return t?W({},e.properties):e.properties;var n=this.points[e.index].properties;return e=this.options.map(n),t&&e===n?W({},e):e}),promoteId:null,generateId:!1,debug:0},ge.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c,p,h,d,f,m,g,y,v=1<<t,_=ye(t,n,r),b=this.tiles[_];if(b||(1<u&&console.time("creation"),b=this.tiles[_]=fe(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),u&&(1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,b.numFeatures,b.numPoints,b.numSimplified),console.timeEnd("creation")),this.stats[y="z"+t]=(this.stats[y]||0)+1,this.total++)),b.source=e,i){if(t===l.maxZoom||t===i)continue;var x=1<<i-t;if(n!==Math.floor(o/x)||r!==Math.floor(a/x))continue}else if(t===l.indexMaxZoom||b.numPoints<=l.indexMaxPoints)continue;b.source=null,0!==e.length&&(1<u&&console.time("clipping"),p=.5-(c=.5*l.buffer/l.extent),h=1+c,g=d=f=m=null,y=re(e,v,n-c,n+(_=.5+c),0,b.minX,b.maxX,l),x=re(e,v,n+p,n+h,0,b.minX,b.maxX,l),e=null,y&&(g=re(y,v,r-c,r+_,1,b.minY,b.maxY,l),d=re(y,v,r+p,r+h,1,b.minY,b.maxY,l),y=null),x&&(f=re(x,v,r-c,r+_,1,b.minY,b.maxY,l),m=re(x,v,r+p,r+h,1,b.minY,b.maxY,l),x=null),1<u&&console.timeEnd("clipping"),s.push(g||[],t+1,2*n,2*r),s.push(d||[],t+1,2*n,2*r+1),s.push(f||[],t+1,2*n+1,2*r),s.push(m||[],t+1,2*n+1,2*r+1))}},ge.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||24<e)return null;if(r=ye(e,t=(t%(r=1<<e)+r)%r,n),this.tiles[r])return he(this.tiles[r],i);1<o&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var a,s=e,l=t,u=n;!a&&0<s;)s--,l=Math.floor(l/2),u=Math.floor(u/2),a=this.tiles[ye(s,l,u)];return a&&a.source?(1<o&&console.log("found parent tile z%d-%d-%d",s,l,u),1<o&&console.time("drilling down"),this.splitTile(a.source,s,l,u,e,t,n),1<o&&console.timeEnd("drilling down"),this.tiles[r]?he(this.tiles[r],i):null):null};var _e,be=((_e=s)&&(xe.__proto__=_e),((xe.prototype=Object.create(_e&&_e.prototype)).constructor=xe).prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},xe.prototype._loadData=function(){var t,n,r,i=this;this._pendingCallback&&this._pendingLoadDataParams&&(t=this._pendingCallback,n=this._pendingLoadDataParams,delete this._pendingCallback,delete this._pendingLoadDataParams,r=!!(n&&n.request&&n.request.collectResourceTiming)&&new e.RequestPerformance(n.request),this.loadGeoJSON(n,(function(o,a){if(o||!a)return t(o);if("object"!=typeof a)return t(new Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."));c(a,!0);try{if(n.filter){var s=e.createExpression(n.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(e){return e.key+": "+e.message})).join(", "));a={type:"FeatureCollection",features:a.features.filter((function(e){return s.value.evaluate({zoom:0},e)}))}}i._geoJSONIndex=n.cluster?new N(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u+=1){var p=c[u],h=(d=r[p])[0],d=d[1];d=e.createExpression(d),h=e.createExpression("string"==typeof h?[h,["accumulated"],["get",p]]:h),i[p]=d.value,o[p]=h.value}return n.map=function(e){s.properties=e;for(var t={},n=0,r=l;n<r.length;n+=1){var o=r[n];t[o]=i[o].evaluate(a,s)}return t},n.reduce=function(e,t){s.properties=t;for(var n=0,r=l;n<r.length;n+=1){var i=r[n];a.accumulated=e[i],e[i]=o[i].evaluate(a,s)}},n}(n)).load(a.features):new ge(u=a,l=n.geojsonVtOptions)}catch(o){return t(o)}i.loaded={};var l,u={};!r||(l=r.finish())&&(u.resourceTiming={},u.resourceTiming[n.source]=JSON.parse(JSON.stringify(l))),t(null,u)})))},xe.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},xe.prototype.reloadTile=function(e,t){var n=this.loaded,r=e.uid;return n&&n[r]?_e.prototype.reloadTile.call(this,e,t):this.loadTile(e,t)},xe.prototype.loadGeoJSON=function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(t.data))}catch(g){return n(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},xe.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},xe.prototype.getClusterExpansionZoom=function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}},xe.prototype.getClusterChildren=function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}},xe.prototype.getClusterLeaves=function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}},xe);function xe(e,t,n,r){_e.call(this,e,t,n,ve),r&&(this.loadGeoJSON=r)}return g=function(t){var n=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:s,geojson:be},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}},g.prototype.setReferrer=function(e,t){this.referrer=t},g.prototype.setImages=function(e,t,n){for(var r in this.availableImages[e]=t,this.workerSources[e]){var i,o=this.workerSources[e][r];for(i in o)o[i].availableImages=t}n()},g.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},g.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},g.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},g.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},g.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},g.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},g.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},g.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},g.prototype.removeSource=function(e,t,n){var r;this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]&&(r=this.workerSources[e][t.type][t.source],delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n())},g.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}},g.prototype.syncRTLPluginState=function(t,n,r){try{e.plugin.setState(n);var i,o=e.plugin.getPluginURL();e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=o&&(this.self.importScripts(o),r((i=e.plugin.isParsed())?void 0:new Error("RTL Text Plugin failed to import scripts from "+o),i))}catch(t){r(t.toString())}},g.prototype.getAvailableImages=function(e){return this.availableImages[e]||[]},g.prototype.getLayerIndex=function(e){return this.layerIndexes[e]||(this.layerIndexes[e]=new n)},g.prototype.getWorkerSource=function(e,t,n){var r=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:function(t,n,i){r.actor.send(t,n,i,e)}},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][n]},g.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new l),this.demWorkerSources[e][t]},g.prototype.enforceCacheSizeLimit=function(t,n){e.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new g(self)),g})),n(0,(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!n(e)}function n(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"});n=URL.createObjectURL(n);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");return!!t&&(t=t.getImageData(0,0,1,1))&&t.width===e.width}()?function(e){return void 0===r[e]&&(r[e]=function(e){var n=function(e){var n=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(e);return!!n&&!(!(e=n.createShader(n.VERTEX_SHADER))||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),r[e]}(e&&e.failIfMajorPerformanceCaveat)?void 0:"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support"}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=n);var r={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(t,n,r){return t=e.window.document.createElement(t),void 0!==n&&(t.className=n),r&&r.appendChild(t),t},createNS:function(t,n){return e.window.document.createElementNS(t,n)}},r=e.window.document&&e.window.document.documentElement.style;function i(e){if(!r)return e[0];for(var t=0;t<e.length;t++)if(e[t]in r)return e[t];return e[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var s=i(["transform","WebkitTransform"]),l=!(n.setTransform=function(e,t){e.style[s]=t});try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});e.window.addEventListener("test",u,u),e.window.removeEventListener("test",u,u)}catch(i){l=!1}function c(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",c,!0)}n.addEventListener=function(e,t,n,r){"passive"in(r=void 0===r?{}:r)&&l?e.addEventListener(t,n,r):e.addEventListener(t,n,r.capture)},n.removeEventListener=function(e,t,n,r){"passive"in(r=void 0===r?{}:r)&&l?e.removeEventListener(t,n,r):e.removeEventListener(t,n,r.capture)},n.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",c,!0)}),0)},n.mousePos=function(t,n){var r=t.getBoundingClientRect();return new e.Point(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)},n.touchPos=function(t,n){for(var r=t.getBoundingClientRect(),i=[],o=0;o<n.length;o++)i.push(new e.Point(n[o].clientX-r.left-t.clientLeft,n[o].clientY-r.top-t.clientTop));return i},n.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&0<=e.window.navigator.platform.toUpperCase().indexOf("MAC")?0:t.button},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var p,h=((p=e.Evented)&&(d.__proto__=p),((d.prototype=Object.create(p&&p.prototype)).constructor=d).prototype.isLoaded=function(){return this.loaded},d.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e)){for(var t=0,n=this.requestors;t<n.length;t+=1){var r=(i=n[t]).ids,i=i.callback;this._notify(r,i)}this.requestors=[]}},d.prototype.getImage=function(e){return this.images[e]},d.prototype.addImage=function(e,t){this._validate(e,t)&&(this.images[e]=t)},d.prototype._validate=function(t,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),r=!1),r},d.prototype._validateStretch=function(e,t){if(!e)return!0;for(var n=0,r=0,i=e;r<i.length;r+=1){var o=i[r];if(o[0]<n||o[1]<o[0]||t<o[1])return!1;n=o[1]}return!0},d.prototype._validateContent=function(e,t){return!e||4===e.length&&!(e[0]<0||t.data.width<e[0])&&!(e[1]<0||t.data.height<e[1])&&!(e[2]<0||t.data.width<e[2])&&!(e[3]<0||t.data.height<e[3])&&!(e[2]<e[0])&&!(e[3]<e[1])},d.prototype.updateImage=function(e,t){var n=this.images[e];t.version=n.version+1,this.images[e]=t,this.updatedImages[e]=!0},d.prototype.removeImage=function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()},d.prototype.listImages=function(){return Object.keys(this.images)},d.prototype.getImages=function(e,t){var n=!0;if(!this.isLoaded())for(var r=0,i=e;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},d.prototype._notify=function(t,n){for(var r={},i=0,o=t;i<o.length;i+=1){var a=o[i];this.images[a]||this.fire(new e.Event("styleimagemissing",{id:a}));var s=this.images[a];s?r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},d.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},d.prototype.getPattern=function(t){var n=this.patterns[t],r=this.getImage(t);return r?n&&n.position.version===r.version?n.position:(n?n.position.version=r.version:(n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},r=new e.ImagePosition(n,r),this.patterns[t]={bin:n,position:r}),this._updatePatternAtlas(),this.patterns[t].position):null},d.prototype.bind=function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},d.prototype._updatePatternAtlas=function(){var t,n=[];for(t in this.patterns)n.push(this.patterns[t].bin);var r,i=(o=e.potpack(n)).w,o=o.h,a=this.atlasImage;for(r in a.resize({width:i||1,height:o||1}),this.patterns){var s=(p=this.patterns[r].bin).x+1,l=p.y+1,u=this.images[r].data,c=u.width,p=u.height;e.RGBAImage.copy(u,a,{x:0,y:0},{x:s,y:l},{width:c,height:p}),e.RGBAImage.copy(u,a,{x:0,y:p-1},{x:s,y:l-1},{width:c,height:1}),e.RGBAImage.copy(u,a,{x:0,y:0},{x:s,y:l+p},{width:c,height:1}),e.RGBAImage.copy(u,a,{x:c-1,y:0},{x:s-1,y:l},{width:1,height:p}),e.RGBAImage.copy(u,a,{x:0,y:0},{x:s+c,y:l},{width:1,height:p})}this.dirty=!0},d.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},d.prototype.dispatchRenderCallbacks=function(e){for(var t,n,r=0,i=e;r<i.length;r+=1){var o,a=i[r];this.callbackDispatchedThisFrame[a]||(this.callbackDispatchedThisFrame[a]=!0,n=void 0,(n=(t=o=this.images[a]).userImage)&&n.render&&n.render()&&(t.data.replace(new Uint8Array(n.data.buffer)),1)&&this.updateImage(a,o))}},d);function d(){p.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}var f=y,m=y,g=1e20;function y(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8,n=(o=this.size=this.fontSize+2*this.buffer)+2*this.buffer,this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(n*n),this.gridInner=new Float64Array(n*n),this.f=new Float64Array(n),this.z=new Float64Array(n+1),this.v=new Uint16Array(n),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(o/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function v(e,t,n,r,i,o){for(var a=0;a<t;a++)_(e,a,t,n,r,i,o);for(var s=0;s<n;s++)_(e,s*t,1,t,r,i,o)}function _(e,t,n,r,i,o,a){var s,l,u,c;for(a[o[0]=0]=-g,a[1]=g,s=0;s<r;s++)i[s]=e[t+s*n];for(s=1,u=l=0;s<r;s++){for(;c=o[l],(u=(i[s]-i[c]+s*s-c*c)/(s-c)/2)<=a[l]&&-1<--l;);o[++l]=s,a[l]=u,a[l+1]=g}for(l=s=0;s<r;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*n]=i[c]+(s-c)*(s-c)}}function b(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}y.prototype._draw=function(e,t){var n,r,i,o,a,s,l,u,c=this.ctx.measureText(e),p=c.width,h=2*this.buffer;t&&this.useMetrics?(a=Math.floor(c.actualBoundingBoxAscent),l=this.buffer+Math.ceil(c.actualBoundingBoxAscent),d=this.buffer,s=this.buffer,n=(r=Math.min(this.size,Math.ceil(c.actualBoundingBoxRight-c.actualBoundingBoxLeft)))+h,i=(o=Math.min(this.size-d,Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent)))+h,this.ctx.textBaseline="alphabetic"):(n=r=this.size,i=o=this.size,a=19*this.fontSize/24,d=s=0,l=this.middle,this.ctx.textBaseline="middle"),r&&o&&(this.ctx.clearRect(s,d,r,o),this.ctx.fillText(e,this.buffer,l),u=this.ctx.getImageData(s,d,r,o));var d=new Uint8ClampedArray(n*i);return function(e,t,n,r,i,o,a){o.fill(g,0,t*n),a.fill(0,0,t*n);for(var s=(t-r)/2,l=0;l<i;l++)for(var u=0;u<r;u++){var c,p=(l+s)*t+u+s,h=e.data[4*(l*r+u)+3]/255;1==h?(o[p]=0,a[p]=g):0==h?(o[p]=g,a[p]=0):(c=Math.max(0,.5-h),h=Math.max(0,h-.5),o[p]=c*c,a[p]=h*h)}}(u,n,i,r,o,this.gridOuter,this.gridInner),v(this.gridOuter,n,i,this.f,this.v,this.z),v(this.gridInner,n,i,this.f,this.v,this.z),function(e,t,n,r,i,o,a){for(var s=0;s<t*n;s++){var l=Math.sqrt(r[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}(d,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:d,metrics:{width:r,height:o,sdfWidth:n,sdfHeight:i,top:a,left:0,advance:p}}},y.prototype.draw=function(e){return this._draw(e,!1).data},y.prototype.drawWithMetrics=function(e){return this._draw(e,!0)},f.default=m,b.prototype.setURL=function(e){this.url=e},b.prototype.getGlyphs=function(t,n){var r,i=this,o=[];for(r in t)for(var a=0,s=t[r];a<s.length;a+=1){var l=s[a];o.push({stack:r,id:l})}e.asyncAll(o,(function(e,t){var n=e.stack,r=e.id,o=i.entries[n];if(void 0===(e=(o=o||(i.entries[n]={glyphs:{},requests:{},ranges:{}})).glyphs[r])){if(e=i._tinySDF(o,n,r))return o.glyphs[r]=e,void t(null,{stack:n,id:r,glyph:e});var a,s=Math.floor(r/256);65535<256*s?t(new Error("glyphs > 65535 not supported")):o.ranges[s]?t(null,{stack:n,id:r,glyph:e}):((a=o.requests[s])||(a=o.requests[s]=[],b.loadGlyphRange(n,s,i.url,i.requestManager,(function(e,t){if(t){for(var n in t)i._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=t[+n]);o.ranges[s]=!0}for(var r=0,l=a;r<l.length;r+=1)(0,l[r])(e,t);delete o.requests[s]}))),a.push((function(e,i){e?t(e):i&&t(null,{stack:n,id:r,glyph:i[r]||null})})))}else t(null,{stack:n,id:r,glyph:e})}),(function(e,t){if(e)n(e);else if(t){for(var r={},i=0,o=t;i<o.length;i+=1){var a=(l=o[i]).stack,s=l.id,l=l.glyph;(r[a]||(r[a]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}}))},b.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))},b.prototype._tinySDF=function(t,n,r){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o,a=t.tinySDF;return a||(o="400",/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),a=t.tinySDF=new b.TinySDF(24,3,8,.25,i,o)),{id:r,bitmap:new e.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},b.loadGlyphRange=function(t,n,r,i,o){var a=256*n;n=255+a,n=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",a+"-"+n),e.ResourceType.Glyphs),e.getArrayBuffer(n,(function(t,n){if(t)o(t);else if(n){for(var r={},i=0,a=e.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}}))},b.TinySDF=f,(Br=function(){this.specification=e.styleSpec.light.position}).prototype.possiblyEvaluate=function(t,n){return e.sphericalToCartesian(t.expression.evaluate(n))},Br.prototype.interpolate=function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r)}};var x,w=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new Br,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),S="-transition",E=((x=e.Evented)&&(C.__proto__=x),((C.prototype=Object.create(x&&x.prototype)).constructor=C).prototype.getLight=function(){return this._transitionable.serialize()},C.prototype.setLight=function(t,n){if(!this._validate(e.validateLight,t,n=void 0===n?{}:n))for(var r in t){var i=t[r];e.endsWith(r,S)?this._transitionable.setTransition(r.slice(0,-S.length),i):this._transitionable.setValue(r,i)}},C.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},C.prototype.hasTransition=function(){return this._transitioning.hasTransition()},C.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},C.prototype._validate=function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},C);function C(t){x.call(this),this._transitionable=new e.Transitionable(w),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}function T(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}function I(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var r=this.workerPool.acquire(this.id),i=0;i<r.length;i++){var o=r[i];(o=new I.Actor(o,n,this.id)).name="Worker "+i,this.actors.push(o)}}function k(t,n,r){function i(i,o){if(i)return r(i);o&&(i=e.pick(e.extend(o,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]),o.vector_layers&&(i.vectorLayers=o.vector_layers,i.vectorLayerIds=i.vectorLayers.map((function(e){return e.id}))),i.tiles=n.canonicalizeTileset(i,t.url),r(null,i))}return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),i):e.browser.frame((function(){return i(null,t)}))}function P(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}T.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]},T.prototype.getDashRanges=function(e,t,n){var r=[],i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){a=!a;var u=e[l];i=s*n,s+=u,r.push({left:i,right:s*n,isDash:a,zeroLength:0===u})}return r},T.prototype.addRoundDash=function(e,t,n){for(var r=t/2,i=-n;i<=n;i++)for(var o=this.nextRow+n+i,a=this.width*o,s=0,l=e[s],u=0;u<this.width;u++){1<u/l.right&&(l=e[++s]);var c=Math.abs(u-l.left),p=Math.abs(u-l.right),h=Math.min(c,p),d=void 0;c=i/n*(1+r),d=l.isDash?(p=r-Math.abs(c),Math.sqrt(h*h+p*p)):r-Math.sqrt(h*h+c*c),this.data[a+u]=Math.max(0,Math.min(255,d+128))}},T.prototype.addRegularDash=function(e){for(var t=e.length-1;0<=t;--t){var n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}var i=e[0],o=e[e.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,l=e[s],u=0;u<this.width;u++){1<u/l.right&&(l=e[++s]);var c=Math.abs(u-l.left),p=Math.abs(u-l.right);p=Math.min(c,p),p=l.isDash?p:-p,this.data[a+u]=Math.max(0,Math.min(255,p+128))}},T.prototype.addDash=function(t,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var o,a,s=0,l=0;l<t.length;l++)s+=t[l];return 0!==s&&(o=this.width/s,a=this.getDashRanges(t,this.width,o),n?this.addRoundDash(a,o,r):this.addRegularDash(a)),r={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:s},this.nextRow+=i,this.dirty=!0,r},T.prototype.bind=function(e){e=e.gl,this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))},I.prototype.broadcast=function(t,n,r){e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r=r||function(){})},I.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},I.prototype.remove=function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)},I.Actor=e.Actor,P.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},P.prototype.contains=function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n);return n=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n),t.x>=r&&t.x<o&&t.y>=i&&t.y<n};var A,M=((A=e.Evented)&&(O.__proto__=A),((O.prototype=Object.create(A&&A.prototype)).constructor=O).prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new P(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles,t.map._requestManager._customAccessToken),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},O.prototype.loaded=function(){return this._loaded},O.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},O.prototype.onAdd=function(e){this.map=e,this.load()},O.prototype.setSourceProperty=function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},O.prototype.setTiles=function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this},O.prototype.setUrl=function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this},O.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},O.prototype.serialize=function(){return e.extend({},this._options)},O.prototype.loadTile=function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme));function i(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}(r={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId}).request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",r,i.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",r,i.bind(this)))},O.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)},O.prototype.unloadTile=function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)},O.prototype.hasTransition=function(){return!1},O);function O(t,n,r,i){if(A.call(this),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}var L,R=((L=e.Evented)&&(D.__proto__=L),((D.prototype=Object.create(L&&L.prototype)).constructor=D).prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new P(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},D.prototype.loaded=function(){return this._loaded},D.prototype.onAdd=function(e){this.map=e,this.load()},D.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},D.prototype.serialize=function(){return e.extend({},this._options)},D.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},D.prototype.loadTile=function(t,n){var r=this,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),(function(i,o){var a;delete t.request,t.aborted?(t.state="unloaded",n(null)):i?(t.state="errored",n(i)):o&&(r.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires,i=(a=r.map.painter.context).gl,t.texture=r.map.painter.getTileTexture(o.width),t.texture?t.texture.update(o,{useMipmap:!0}):(t.texture=new e.Texture(a,o,i.RGBA,{useMipmap:!0}),t.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&i.texParameterf(i.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),n(null))}))},D.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},D.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},D.prototype.hasTransition=function(){return!1},D);function D(t,n,r,i){L.call(this),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}var z,N=((z=R)&&(B.__proto__=z),((B.prototype=Object.create(z&&z.prototype)).constructor=B).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},B.prototype.loadTile=function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,i){delete t.request,t.aborted?(t.state="unloaded",n(null)):r?(t.state="errored",n(r)):i&&(this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires,i=e.window.ImageBitmap&&i instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?i:e.browser.getImageData(i,1),i={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:i,encoding:this.encoding},t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",i,function(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",n(null))}.bind(this))))}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},B.prototype._getNeighboringTiles=function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},0<n.y&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l},B.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})},B);function B(t,n,r,i){z.call(this,t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}var F,j=((F=e.Evented)&&(U.__proto__=F),((U.prototype=Object.create(F&&F.prototype)).constructor=U).prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){n?t.fire(new e.ErrorEvent(n)):(n={dataType:"source",sourceDataType:"metadata"},t._collectResourceTiming&&t._resourceTiming&&0<t._resourceTiming.length&&(n.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",n)))}))},U.prototype.onAdd=function(e){this.map=e,this.load()},U.prototype.setData=function(t){var n=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){t?n.fire(new e.ErrorEvent(t)):(t={dataType:"source",sourceDataType:"content"},n._collectResourceTiming&&n._resourceTiming&&0<n._resourceTiming.length&&(t.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new e.Event("data",t)))})),this},U.prototype.getClusterExpansionZoom=function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this},U.prototype.getClusterChildren=function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this},U.prototype.getClusterLeaves=function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this},U.prototype._updateWorkerData=function(t){var n=this;this._loaded=!1;var r=e.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(e.browser.resolveURL(i),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send(this.type+".loadData",r,(function(e,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),t(e))}))},U.prototype.loaded=function(){return this._loaded},U.prototype.loadTile=function(t,n){var r=this,i=t.actor?"reloadTile":"loadTile";t.actor=this.actor;var o={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(i,o,(function(e,o){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(o,r.map.painter,"reloadTile"==i),n(null))}))},U.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0},U.prototype.unloadTile=function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})},U.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},U.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},U.prototype.hasTransition=function(){return!1},U);function U(t,n,r,i){F.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId,i=e.EXTENT/this.tileSize,this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*i,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*i,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(n.clusterRadius||50)*i,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}var V,q=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),H=((V=e.Evented)&&(W.__proto__=V),((W.prototype=Object.create(V&&V.prototype)).constructor=W).prototype.load=function(t,n){var r=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(i,o){r._loaded=!0,i?r.fire(new e.ErrorEvent(i)):o&&(r.image=o,t&&(r.coordinates=t),n&&n(),r._finishLoading())}))},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(e){var t=this;return this.image&&e.url&&(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null}))),this},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(e){this.map=e,this.load()},W.prototype.setCoordinates=function(t){var n=this;return t=(this.coordinates=t).map(e.MercatorCoordinate.fromLngLat),this.tileID=function(t){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=t;a<s.length;a+=1){var l=s[a];n=Math.min(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.x),o=Math.max(o,l.y)}var u=i-n;return t=o-r,u=Math.max(u,t),t=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),u=Math.pow(2,t),new e.CanonicalTileID(t,Math.floor((n+i)/2*u),Math.floor((r+o)/2*u))}(t),this.minzoom=this.maxzoom=this.tileID.z,t=t.map((function(e){return n.tileID.getTilePoint(e)._round()})),this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(t[0].x,t[0].y,0,0),this._boundsArray.emplaceBack(t[1].x,t[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(t[3].x,t[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(t[2].x,t[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t,n=this.map.painter.context,r=n.gl;for(t in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,q.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(n,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[t];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},W.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e).buckets={}:e.state="errored",t(null)},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W);function W(e,t,n,r){V.call(this),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t}var G,Z=((G=H)&&(K.__proto__=G),((K.prototype=Object.create(G&&G.prototype)).constructor=K).prototype.load=function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var o=i[r];this.urls.push(this.map._requestManager.transformRequest(o,e.ResourceType.Source).url)}e.getVideo(this.urls,(function(n,r){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))},K.prototype.pause=function(){this.video&&this.video.pause()},K.prototype.play=function(){this.video&&this.video.play()},K.prototype.seek=function(t){var n;this.video&&(t<(n=this.video.seekable).start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=t)},K.prototype.getVideo=function(){return this.video},K.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},K.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t,n=this.map.painter.context,r=n.gl;for(t in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,q.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(n,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[t];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},K.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},K.prototype.hasTransition=function(){return this.video&&!this.video.paused},K);function K(e,t,n,r){G.call(this,e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}var X,Y=((X=H)&&(J.__proto__=X),((J.prototype=Object.create(X&&X.prototype)).constructor=J).prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},J.prototype.getCanvas=function(){return this.canvas},J.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},J.prototype.onRemove=function(){this.pause()},J.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n,r=this.map.painter.context,i=r.gl;for(n in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,q.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(r,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[n];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},J.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},J.prototype.hasTransition=function(){return this._playing},J.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1},J);function J(t,n,r,i){X.call(this,t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}var $={vector:M,raster:R,"raster-dem":N,geojson:j,video:Z,image:H,canvas:Y};function Q(t,n,r,i,o,a){var s=function(e,t,n){if(e)for(var r=0,i=e;r<i.length;r+=1){var o=t[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in t)if((a=t[a]).source===n&&"fill-extrusion"===a.type)return!0;return!1}(o&&o.layers,n,t.id),l=a.maxPitchScaleFactor();(s=t.tilesIn(i,l,s)).sort(te);for(var u,c,p=[],h=0,d=s;h<d.length;h+=1){var f=d[h];p.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(n,r,t._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,o,a,l,(u=t.transform,c=f.tileID,f=void 0,f=e.identity([]),e.translate(f,f,[1,1,0]),e.scale(f,f,[.5*u.width,.5*u.height,1]),e.multiply(f,f,u.calculatePosMatrix(c.toUnwrapped()))))})}var m,g=function(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var o,a,s=(a=i[r]).queryResults,l=n[a=a.wrappedTileID]=n[a]||{};for(o in s)for(var u=s[o],c=l[o]=l[o]||{},p=t[o]=t[o]||[],h=0,d=u;h<d.length;h+=1){var f=d[h];c[f.featureIndex]||(c[f.featureIndex]=!0,p.push(f))}}return t}(p);for(m in g)g[m].forEach((function(e){var n=e.feature;e=t.getFeatureState(n.layer["source-layer"],n.id),n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=e}));return g}function ee(e,t,n,r,i,o,a){for(var s={},l=o.queryRenderedSymbols(r),u=[],c=0,p=Object.keys(l).map(Number);c<p.length;c+=1){var h=p[c];u.push(a[h])}u.sort(te);for(var d=0,f=u;d<f.length;d+=1)!function(){var n,r=f[d],o=r.featureIndex.lookupSymbolFeatures(l[r.bucketInstanceId],t,r.bucketIndex,r.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(n in o){var a=s[n]=s[n]||[],u=o[n];u.sort((function(e,t){var n=r.featureSortOrder;if(n){var i=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));for(var c=0,p=u;c<p.length;c+=1){var h=p[c];a.push(h)}}}();for(var m in s)!function(t){s[t].forEach((function(r){var i=r.feature;r=e[t],r=n[r.source].getFeatureState(i.layer["source-layer"],i.id),i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}))}(m);return s}function te(e,t){return e=e.tileID,t=t.tileID,e.overscaledZ-t.overscaledZ||e.canonical.y-t.canonical.y||e.wrap-t.wrap||e.canonical.x-t.canonical.x}function ne(e,t){this.max=e,this.onRemove=t,this.reset()}function re(e,t,n){var r=(this.context=e).gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}function ie(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,r=(this.context=e).gl,this.buffer=r.createBuffer(),e.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}ne.prototype.reset=function(){for(var e in this.data)for(var t=0,n=this.data[e];t<n.length;t+=1){var r=n[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},ne.prototype.add=function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:t,timeout:void 0};return void 0!==n&&(o.timeout=setTimeout((function(){r.remove(e,o)}),n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max&&(i=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(i),this},ne.prototype.has=function(e){return e.wrapped().key in this.data},ne.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},ne.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},ne.prototype.getByKey=function(e){return(e=this.data[e])?e[0].value:null},ne.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},ne.prototype.remove=function(e,t){if(!this.has(e))return this;var n=e.wrapped().key;return e=void 0===t?0:this.data[n].indexOf(t),t=this.data[n][e],this.data[n].splice(e,1),t.timeout&&clearTimeout(t.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(t.value),this.order.splice(this.order.indexOf(n),1),this},ne.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this},ne.prototype.filter=function(e){var t,n=[];for(t in this.data)for(var r=0,i=this.data[t];r<i.length;r+=1){var o=i[r];e(o.value)||n.push(o)}for(var a=0,s=n;a<s.length;a+=1){var l=s[a];this.remove(l.value.tileID,l)}},re.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},re.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},re.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var oe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};ie.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ie.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},ie.prototype.enableAttributes=function(e,t){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n];void 0!==(r=t.attributes[r.name])&&e.enableVertexAttribArray(r)}},ie.prototype.setVertexAttribPointers=function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[oe[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},ie.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(e){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var se,le=((se=ae)&&(ue.__proto__=se),((ue.prototype=Object.create(se&&se.prototype)).constructor=ue).prototype.getDefault=function(){return e.Color.transparent},ue.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a&&!this.dirty||(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},ue);function ue(){se.apply(this,arguments)}var ce,pe=((ce=ae)&&(he.__proto__=ce),((he.prototype=Object.create(ce&&ce.prototype)).constructor=he).prototype.getDefault=function(){return 1},he.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},he);function he(){ce.apply(this,arguments)}var de,fe=((de=ae)&&(me.__proto__=de),((me.prototype=Object.create(de&&de.prototype)).constructor=me).prototype.getDefault=function(){return 0},me.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},me);function me(){de.apply(this,arguments)}var ge,ye=((ge=ae)&&(ve.__proto__=ge),((ve.prototype=Object.create(ge&&ge.prototype)).constructor=ve).prototype.getDefault=function(){return[!0,!0,!0,!0]},ve.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&!this.dirty||(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},ve);function ve(){ge.apply(this,arguments)}var _e,be=((_e=ae)&&(xe.__proto__=_e),((xe.prototype=Object.create(_e&&_e.prototype)).constructor=xe).prototype.getDefault=function(){return!0},xe.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.depthMask(e),this.current=e,this.dirty=!1)},xe);function xe(){_e.apply(this,arguments)}var we,Se=((we=ae)&&(Ee.__proto__=we),((Ee.prototype=Object.create(we&&we.prototype)).constructor=Ee).prototype.getDefault=function(){return 255},Ee.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},Ee);function Ee(){we.apply(this,arguments)}var Ce,Te=((Ce=ae)&&(Ie.__proto__=Ce),((Ie.prototype=Object.create(Ce&&Ce.prototype)).constructor=Ie).prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Ie.prototype.set=function(e){var t=this.current;e.func===t.func&&e.ref===t.ref&&e.mask===t.mask&&!this.dirty||(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},Ie);function Ie(){Ce.apply(this,arguments)}var ke,Pe=((ke=ae)&&(Ae.__proto__=ke),((Ae.prototype=Object.create(ke&&ke.prototype)).constructor=Ae).prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},Ae.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&!this.dirty||(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},Ae);function Ae(){ke.apply(this,arguments)}var Me,Oe=((Me=ae)&&(Le.__proto__=Me),((Le.prototype=Object.create(Me&&Me.prototype)).constructor=Le).prototype.getDefault=function(){return!1},Le.prototype.set=function(e){var t;e===this.current&&!this.dirty||(t=this.gl,e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1)},Le);function Le(){Me.apply(this,arguments)}var Re,De=((Re=ae)&&(ze.__proto__=Re),((ze.prototype=Object.create(Re&&Re.prototype)).constructor=ze).prototype.getDefault=function(){return[0,1]},ze.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&!this.dirty||(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},ze);function ze(){Re.apply(this,arguments)}var Ne,Be=((Ne=ae)&&(Fe.__proto__=Ne),((Fe.prototype=Object.create(Ne&&Ne.prototype)).constructor=Fe).prototype.getDefault=function(){return!1},Fe.prototype.set=function(e){var t;e===this.current&&!this.dirty||(t=this.gl,e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1)},Fe);function Fe(){Ne.apply(this,arguments)}var je,Ue=((je=ae)&&(Ve.__proto__=je),((Ve.prototype=Object.create(je&&je.prototype)).constructor=Ve).prototype.getDefault=function(){return this.gl.LESS},Ve.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},Ve);function Ve(){je.apply(this,arguments)}var qe,He=((qe=ae)&&(We.__proto__=qe),((We.prototype=Object.create(qe&&qe.prototype)).constructor=We).prototype.getDefault=function(){return!1},We.prototype.set=function(e){var t;e===this.current&&!this.dirty||(t=this.gl,e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1)},We);function We(){qe.apply(this,arguments)}var Ge,Ze=((Ge=ae)&&(Ke.__proto__=Ge),((Ke.prototype=Object.create(Ge&&Ge.prototype)).constructor=Ke).prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},Ke.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&!this.dirty||(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},Ke);function Ke(){Ge.apply(this,arguments)}var Xe,Ye=((Xe=ae)&&(Je.__proto__=Xe),((Je.prototype=Object.create(Xe&&Xe.prototype)).constructor=Je).prototype.getDefault=function(){return e.Color.transparent},Je.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a&&!this.dirty||(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},Je);function Je(){Xe.apply(this,arguments)}var $e,Qe=(($e=ae)&&(et.__proto__=$e),((et.prototype=Object.create($e&&$e.prototype)).constructor=et).prototype.getDefault=function(){return this.gl.FUNC_ADD},et.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},et);function et(){$e.apply(this,arguments)}var tt,nt=((tt=ae)&&(rt.__proto__=tt),((rt.prototype=Object.create(tt&&tt.prototype)).constructor=rt).prototype.getDefault=function(){return!1},rt.prototype.set=function(e){var t;e===this.current&&!this.dirty||(t=this.gl,e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1)},rt);function rt(){tt.apply(this,arguments)}var it,ot=((it=ae)&&(at.__proto__=it),((at.prototype=Object.create(it&&it.prototype)).constructor=at).prototype.getDefault=function(){return this.gl.BACK},at.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.cullFace(e),this.current=e,this.dirty=!1)},at);function at(){it.apply(this,arguments)}var st,lt=((st=ae)&&(ut.__proto__=st),((ut.prototype=Object.create(st&&st.prototype)).constructor=ut).prototype.getDefault=function(){return this.gl.CCW},ut.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.frontFace(e),this.current=e,this.dirty=!1)},ut);function ut(){st.apply(this,arguments)}var ct,pt=((ct=ae)&&(ht.__proto__=ct),((ht.prototype=Object.create(ct&&ct.prototype)).constructor=ht).prototype.getDefault=function(){return null},ht.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.useProgram(e),this.current=e,this.dirty=!1)},ht);function ht(){ct.apply(this,arguments)}var dt,ft=((dt=ae)&&(mt.__proto__=dt),((mt.prototype=Object.create(dt&&dt.prototype)).constructor=mt).prototype.getDefault=function(){return this.gl.TEXTURE0},mt.prototype.set=function(e){e===this.current&&!this.dirty||(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},mt);function mt(){dt.apply(this,arguments)}var gt,yt=((gt=ae)&&(vt.__proto__=gt),((vt.prototype=Object.create(gt&&gt.prototype)).constructor=vt).prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},vt.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&!this.dirty||(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},vt);function vt(){gt.apply(this,arguments)}var _t,bt=((_t=ae)&&(xt.__proto__=_t),((xt.prototype=Object.create(_t&&_t.prototype)).constructor=xt).prototype.getDefault=function(){return null},xt.prototype.set=function(e){var t;e===this.current&&!this.dirty||((t=this.gl).bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1)},xt);function xt(){_t.apply(this,arguments)}var wt,St=((wt=ae)&&(Et.__proto__=wt),((Et.prototype=Object.create(wt&&wt.prototype)).constructor=Et).prototype.getDefault=function(){return null},Et.prototype.set=function(e){var t;e===this.current&&!this.dirty||((t=this.gl).bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1)},Et);function Et(){wt.apply(this,arguments)}var Ct,Tt=((Ct=ae)&&(It.__proto__=Ct),((It.prototype=Object.create(Ct&&Ct.prototype)).constructor=It).prototype.getDefault=function(){return null},It.prototype.set=function(e){var t;e===this.current&&!this.dirty||((t=this.gl).bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1)},It);function It(){Ct.apply(this,arguments)}var kt,Pt=((kt=ae)&&(At.__proto__=kt),((At.prototype=Object.create(kt&&kt.prototype)).constructor=At).prototype.getDefault=function(){return null},At.prototype.set=function(e){var t;e===this.current&&!this.dirty||((t=this.gl).bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1)},At);function At(){kt.apply(this,arguments)}var Mt,Ot=((Mt=ae)&&(Lt.__proto__=Mt),((Lt.prototype=Object.create(Mt&&Mt.prototype)).constructor=Lt).prototype.getDefault=function(){return null},Lt.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},Lt);function Lt(){Mt.apply(this,arguments)}var Rt,Dt=((Rt=ae)&&(zt.__proto__=Rt),((zt.prototype=Object.create(Rt&&Rt.prototype)).constructor=zt).prototype.getDefault=function(){return null},zt.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},zt);function zt(e){Rt.call(this,e),this.vao=e.extVertexArrayObject}var Nt,Bt=((Nt=ae)&&(Ft.__proto__=Nt),((Ft.prototype=Object.create(Nt&&Nt.prototype)).constructor=Ft).prototype.getDefault=function(){return 4},Ft.prototype.set=function(e){var t;e===this.current&&!this.dirty||((t=this.gl).pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1)},Ft);function Ft(){Nt.apply(this,arguments)}var jt,Ut=((jt=ae)&&(Vt.__proto__=jt),((Vt.prototype=Object.create(jt&&jt.prototype)).constructor=Vt).prototype.getDefault=function(){return!1},Vt.prototype.set=function(e){var t;e===this.current&&!this.dirty||((t=this.gl).pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1)},Vt);function Vt(){jt.apply(this,arguments)}var qt,Ht=((qt=ae)&&(Wt.__proto__=qt),((Wt.prototype=Object.create(qt&&qt.prototype)).constructor=Wt).prototype.getDefault=function(){return!1},Wt.prototype.set=function(e){var t;e===this.current&&!this.dirty||((t=this.gl).pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1)},Wt);function Wt(){qt.apply(this,arguments)}var Gt,Zt=((Gt=ae)&&(Kt.__proto__=Gt),((Kt.prototype=Object.create(Gt&&Gt.prototype)).constructor=Kt).prototype.getDefault=function(){return null},Kt);function Kt(e,t){Gt.call(this,e),this.context=e,this.parent=t}var Xt,Yt=((Xt=Zt)&&(Jt.__proto__=Xt),((Jt.prototype=Object.create(Xt&&Xt.prototype)).constructor=Jt).prototype.setDirty=function(){this.dirty=!0},Jt.prototype.set=function(e){var t;e===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(t=this.gl).framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1)},Jt);function Jt(){Xt.apply(this,arguments)}var $t,Qt=(($t=Zt)&&(en.__proto__=$t),((en.prototype=Object.create($t&&$t.prototype)).constructor=en).prototype.set=function(e){var t;e===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(t=this.gl).framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1)},en);function en(){$t.apply(this,arguments)}function tn(e,t,n,r){this.context=e,this.width=t,this.height=n,n=e.gl,n=this.framebuffer=n.createFramebuffer(),this.colorAttachment=new Yt(e,n),r&&(this.depthAttachment=new Qt(e,n))}var nn=function(e,t,n){this.func=e,this.mask=t,this.range=n};nn.ReadOnly=!(tn.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t),!this.depthAttachment||(t=this.depthAttachment.get())&&e.deleteRenderbuffer(t),e.deleteFramebuffer(this.framebuffer)}),nn.ReadWrite=!0,nn.disabled=new nn(519,nn.ReadOnly,[0,1]);var rn=function(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};rn.disabled=new rn({func:519,mask:0},0,0,7680,7680,7680);var on=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};on.Replace=[1,0],on.disabled=new on(on.Replace,e.Color.transparent,[!1,!1,!1,!1]),on.unblended=new on(on.Replace,e.Color.transparent,[!0,!0,!0,!0]),on.alphaBlended=new on([1,771],e.Color.transparent,[!0,!0,!0,!0]);var an=function(e,t,n){this.enable=e,this.mode=t,this.frontFace=n};function sn(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new le(this),this.clearDepth=new pe(this),this.clearStencil=new fe(this),this.colorMask=new ye(this),this.depthMask=new be(this),this.stencilMask=new Se(this),this.stencilFunc=new Te(this),this.stencilOp=new Pe(this),this.stencilTest=new Oe(this),this.depthRange=new De(this),this.depthTest=new Be(this),this.depthFunc=new Ue(this),this.blend=new He(this),this.blendFunc=new Ze(this),this.blendColor=new Ye(this),this.blendEquation=new Qe(this),this.cullFace=new nt(this),this.cullFaceSide=new ot(this),this.frontFace=new lt(this),this.program=new pt(this),this.activeTexture=new ft(this),this.viewport=new yt(this),this.bindFramebuffer=new bt(this),this.bindRenderbuffer=new St(this),this.bindTexture=new Tt(this),this.bindVertexBuffer=new Pt(this),this.bindElementBuffer=new Ot(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Dt(this),this.pixelStoreUnpack=new Bt(this),this.pixelStoreUnpackPremultiplyAlpha=new Ut(this),this.pixelStoreUnpackFlipY=new Ht(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}an.disabled=new an(!1,1029,2305),an.backCCW=new an(!0,1029,2305),sn.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},sn.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},sn.prototype.createIndexBuffer=function(e,t){return new re(this,e,t)},sn.prototype.createVertexBuffer=function(e,t,n){return new ie(this,e,t,n)},sn.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},sn.prototype.createFramebuffer=function(e,t,n){return new tn(this,e,t,n)},sn.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl;e=0,t&&(e|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(e|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(e)},sn.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},sn.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},sn.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},sn.prototype.setColorMode=function(t){e.deepEqual(t.blendFunction,on.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},sn.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ln,un=((ln=e.Evented)&&(cn.__proto__=ln),((cn.prototype=Object.create(ln&&ln.prototype)).constructor=cn).prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},cn.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},cn.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles)if("loaded"!==(e=this._tiles[e]).state&&"errored"!==e.state)return!1;return!0},cn.prototype.getSource=function(){return this._source},cn.prototype.pause=function(){this._paused=!0},cn.prototype.resume=function(){var e;this._paused&&(e=this._shouldReloadOnResume,this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform))},cn.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},cn.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))},cn.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))},cn.prototype.serialize=function(){return this._source.serialize()},cn.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)(t=this._tiles[t]).upload(e),t.prepare(this.map.style.imageManager)},cn.prototype.getIds=function(){return e.values(this._tiles).map((function(e){return e.tileID})).sort(pn).map((function(e){return e.key}))},cn.prototype.getRenderableIds=function(t){var n,r=this,i=[];for(n in this._tiles)this._isIdRenderable(n,t)&&i.push(this._tiles[n]);return t?i.sort((function(t,n){var i=t.tileID,o=n.tileID;return t=new e.Point(i.canonical.x,i.canonical.y)._rotate(r.transform.angle),n=new e.Point(o.canonical.x,o.canonical.y)._rotate(r.transform.angle),i.overscaledZ-o.overscaledZ||n.y-t.y||n.x-t.x})).map((function(e){return e.tileID.key})):i.map((function(e){return e.tileID})).sort(pn).map((function(e){return e.key}))},cn.prototype.hasRenderableParent=function(e){return!!(e=this.findLoadedParent(e,0))&&this._isIdRenderable(e.tileID.key)},cn.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},cn.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},cn.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},cn.prototype._tileLoaded=function(t,n,r,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new e.ErrorEvent(i,{tile:t})):this.update(this.transform));t.timeAdded=e.browser.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},cn.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];e.neighboringTiles&&e.neighboringTiles[r]&&(i(e,r=this.getTileByID(r)),i(r,e))}function i(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0==r||1<Math.abs(r)||(1<Math.abs(n)&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}},cn.prototype.getTile=function(e){return this.getTileByID(e.key)},cn.prototype.getTileByID=function(e){return this._tiles[e]},cn.prototype._retainLoadedChildren=function(e,t,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>t+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){r[a.key]=a;break}}}},cn.prototype.findLoadedParent=function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;t<=r;r--){var i=e.scaledTo(r);if(i=this._getLoadedTile(i))return i}},cn.prototype._getLoadedTile=function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)},cn.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1;e=Math.ceil(e.height/this._source.tileSize)+1,e=Math.floor(t*e*5),e="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,e):e,this._cache.setMaxSize(e)},cn.prototype.handleWrapJump=function(e){var t=void 0===this._prevLng?e:this._prevLng,n=Math.round((e-t)/360);if(this._prevLng=e,n){var r,i,o,a={};for(r in this._tiles){var s=this._tiles[r];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+n),a[s.tileID.key]=s}for(i in this._tiles=a,this._timers)clearTimeout(this._timers[i]),delete this._timers[i];for(o in this._tiles){var l=this._tiles[o];this._setTileReloadTimer(o,l)}}},cn.prototype.update=function(t){var n,r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(n=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((function(e){return r._source.hasTile(e)})))):n=[];var i,o=t.coveringZoomLevel(this._source),a=Math.max(o-cn.maxOverzooming,this._source.minzoom),s=(t=Math.max(o+cn.maxUnderzooming,this._source.minzoom),this._updateRetainedTiles(n,o));if(hn(this._source.type)){for(var l,u={},c={},p=0,h=Object.keys(s);p<h.length;p+=1){var d=h[p],f=s[d],m=this._tiles[d];!m||m.fadeEndTime&&m.fadeEndTime<=e.browser.now()||((m=this.findLoadedParent(f,a))&&(this._addTile(m.tileID),u[m.tileID.key]=m.tileID),c[d]=f)}for(l in this._retainLoadedChildren(c,o,t,s),u)s[l]||(this._coveredTiles[l]=!0,s[l]=u[l])}for(i in s)this._tiles[i].clearFadeHold();for(var g=0,y=e.keysDifference(this._tiles,s);g<y.length;g+=1){var v=y[g],_=this._tiles[v];_.hasSymbolBuckets&&!_.holdingForFade()?_.setHoldDuration(this.map._fadeDuration):_.hasSymbolBuckets&&!_.symbolFadeFinished()||this._removeTile(v)}this._updateLoadedParentTileCache()}},cn.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},cn.prototype._updateRetainedTiles=function(e,t){for(var n={},r={},i=Math.max(t-cn.maxOverzooming,this._source.minzoom),o=Math.max(t+cn.maxUnderzooming,this._source.minzoom),a={},s=0,l=e;s<l.length;s+=1){var u=l[s],c=this._addTile(u);n[u.key]=u,c.hasData()||t<this._source.maxzoom&&(a[u.key]=u)}this._retainLoadedChildren(a,t,o,n);for(var p=0,h=e;p<h.length;p+=1){var d=h[p],f=this._tiles[d.key];if(!f.hasData()){if(t+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){n[m.key]=m;continue}}else if(n[(m=d.children(this._source.maxzoom))[0].key]&&n[m[1].key]&&n[m[2].key]&&n[m[3].key])continue;for(var y=f.wasRequested(),v=d.overscaledZ-1;i<=v;--v){var _=d.scaledTo(v);if(r[_.key])break;if(r[_.key]=!0,(f=!(f=this.getTile(_))&&y?this._addTile(_):f)&&(n[_.key]=_,y=f.wasRequested(),f.hasData()))break}}}return n},cn.prototype._updateLoadedParentTileCache=function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;0<r.overscaledZ;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=t;o<a.length;o+=1){var s=a[o];this._loadedParentTiles[s]=n}}},cn.prototype._addTile=function(t){var n=this._tiles[t.key];if(n)return n;(n=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n)));var r=Boolean(n);return r||(n=new e.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))),n?(n.uses++,this._tiles[t.key]=n,r||this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},cn.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]),(t=t.getExpiryTimeout())&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),t))},cn.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),0<t.uses||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},cn.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},cn.prototype.tilesIn=function(t,n,r){var i=this,o=[],a=this.transform;if(!a)return o;r=r?a.getCameraQueryGeometry(t):t;for(var s=t.map((function(e){return a.pointCoordinate(e)})),l=r.map((function(e){return a.pointCoordinate(e)})),u=this.getIds(),c=1/0,p=1/0,h=-1/0,d=-1/0,f=0,m=l;f<m.length;f+=1){var g=m[f];c=Math.min(c,g.x),p=Math.min(p,g.y),h=Math.max(h,g.x),d=Math.max(d,g.y)}for(var y=0;y<u.length;y++)!function(t){var r,f,m,g=i._tiles[u[t]];g.holdingForFade()||(r=g.tileID,f=Math.pow(2,a.zoom-g.tileID.overscaledZ),m=n*g.queryPadding*e.EXTENT/g.tileSize/f,(t=[r.getTilePoint(new e.MercatorCoordinate(c,p)),r.getTilePoint(new e.MercatorCoordinate(h,d))])[0].x-m<e.EXTENT&&t[0].y-m<e.EXTENT&&0<=t[1].x+m&&0<=t[1].y+m&&(t=s.map((function(e){return r.getTilePoint(e)})),m=l.map((function(e){return r.getTilePoint(e)})),o.push({tile:g,tileID:r,queryGeometry:t,cameraQueryGeometry:m,scale:f})))}(y);return o},cn.prototype.getVisibleCoordinates=function(e){for(var t=this,n=0,r=e=this.getRenderableIds(e).map((function(e){return t._tiles[e].tileID}));n<r.length;n+=1){var i=r[n];i.posMatrix=this.transform.calculatePosMatrix(i.toUnwrapped())}return e},cn.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(hn(this._source.type))for(var t in this._tiles)if(void 0!==(t=this._tiles[t]).fadeEndTime&&t.fadeEndTime>=e.browser.now())return!0;return!1},cn.prototype.setFeatureState=function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)},cn.prototype.removeFeatureState=function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)},cn.prototype.getFeatureState=function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)},cn.prototype.setDependencies=function(e,t,n){(e=this._tiles[e])&&e.setDependencies(t,n)},cn.prototype.reloadTilesForDependencies=function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))},cn);function cn(t,n,r){var i=this;ln.call(this),this.id=t,this.dispatcher=r,this.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))})),this.on("error",(function(){i._sourceErrored=!0})),this._source=function(t,n,r,i){if((i=new $[n.type](t,n,r,i)).id!==t)throw new Error("Expected Source id to be "+t+" instead of "+i.id);return e.bindAll(["load","abort","unload","serialize","prepare"],i),i}(t,n,r,this),this._tiles={},this._cache=new ne(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}function pn(e,t){var n=Math.abs(2*e.wrap)-(e.wrap<0),r=Math.abs(2*t.wrap)-(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function hn(e){return"raster"===e||"image"===e||"video"===e}function dn(){return new e.window.Worker(_a.workerUrl)}un.maxOverzooming=10,un.maxUnderzooming=3;var fn="mapboxgl_preloaded_worker_pool",mn=function(){this.active={}};mn.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<mn.workerCount;)this.workers.push(new dn);return this.active[e]=!0,this.workers.slice()},mn.prototype.release=function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)},mn.prototype.isPreloaded=function(){return!!this.active[fn]},mn.prototype.numActive=function(){return Object.keys(this.active).length};var gn,yn=Math.floor(e.browser.hardwareConcurrency/2);function vn(){return gn=gn||new mn}function _n(t){t=t.slice();for(var n=Object.create(null),r=0;r<t.length;r++)n[t[r].id]=t[r];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=function(t,n){var r,i={};for(r in t)"ref"!==r&&(i[r]=t[r]);return e.refProperties.forEach((function(e){e in n&&(i[e]=n[e])})),i}(t[i],n[t[i].ref]));return t}function bn(){var t,n={},r=e.styleSpec.$version;for(t in e.styleSpec.$root){var i,o=e.styleSpec.$root[t];!o.required||(i=null)!=(i="version"===t?r:"array"===o.type?[]:{})&&(n[t]=i)}return n}mn.workerCount=Math.max(Math.min(yn,6),1);var xn={setStyle:"setStyle",addLayer:"addLayer",moveLayer:"moveLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function wn(e,t,n){n.push({command:xn.addSource,args:[e,t[e]]})}function Sn(e,t,n){t.push({command:xn.removeSource,args:[e]}),n[e]=!0}function En(t,n,r,i){var o,a,s,l;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Sn(o,r,i));for(o in n)n.hasOwnProperty(o)&&(t.hasOwnProperty(o)?e.deepEqual(t[o],n[o])||("geojson"===t[o].type&&"geojson"===n[o].type&&function(t,n,r){for(var i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return;return 1}(t,n,o)?r.push({command:xn.setGeoJSONSourceData,args:[o,n[o].data]}):(s=n,Sn(a=o,l=r,i),wn(a,s,l))):wn(o,n,r))}function Cn(t,n,r,i,o,a){for(var s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Tn(e){return e.id}function In(e,t){return e[t.id]=t,e}function kn(t,n){if(!t)return[{command:xn.setStyle,args:[n]}];var r=[];try{if(!e.deepEqual(t.version,n.version))return[{command:xn.setStyle,args:[n]}];e.deepEqual(t.center,n.center)||r.push({command:xn.setCenter,args:[n.center]}),e.deepEqual(t.zoom,n.zoom)||r.push({command:xn.setZoom,args:[n.zoom]}),e.deepEqual(t.bearing,n.bearing)||r.push({command:xn.setBearing,args:[n.bearing]}),e.deepEqual(t.pitch,n.pitch)||r.push({command:xn.setPitch,args:[n.pitch]}),e.deepEqual(t.sprite,n.sprite)||r.push({command:xn.setSprite,args:[n.sprite]}),e.deepEqual(t.glyphs,n.glyphs)||r.push({command:xn.setGlyphs,args:[n.glyphs]}),e.deepEqual(t.transition,n.transition)||r.push({command:xn.setTransition,args:[n.transition]}),e.deepEqual(t.light,n.light)||r.push({command:xn.setLight,args:[n.light]});var i={},o=[];En(t.sources,n.sources,o,i);var a=[];t.layers&&t.layers.forEach((function(e){i[e.source]?r.push({command:xn.removeLayer,args:[e.id]}):a.push(e)})),r=r.concat(o),function(t,n,r){n=n||[];for(var i,o,a,s,l,u=(t=t||[]).map(Tn),c=n.map(Tn),p=t.reduce(In,{}),h=n.reduce(In,{}),d=u.slice(),f=Object.create(null),m=0,g=0;m<u.length;m++)i=u[m],h.hasOwnProperty(i)?g++:(r.push({command:xn.removeLayer,args:[i]}),d.splice(d.indexOf(i,g),1));for(g=m=0;m<c.length;m++)i=c[c.length-1-m],d[d.length-1-m]!==i&&(p.hasOwnProperty(i)?(r.push({command:xn.removeLayer,args:[i]}),d.splice(d.lastIndexOf(i,d.length-g),1)):g++,s=d[d.length-m],r.push({command:xn.addLayer,args:[h[i],s]}),d.splice(d.length-m,0,i),f[i]=!0);for(m=0;m<c.length;m++)if(o=p[i=c[m]],a=h[i],!f[i]&&!e.deepEqual(o,a))if(e.deepEqual(o.source,a.source)&&e.deepEqual(o["source-layer"],a["source-layer"])&&e.deepEqual(o.type,a.type)){for(l in Cn(o.layout,a.layout,r,i,null,xn.setLayoutProperty),Cn(o.paint,a.paint,r,i,null,xn.setPaintProperty),e.deepEqual(o.filter,a.filter)||r.push({command:xn.setFilter,args:[i,a.filter]}),e.deepEqual(o.minzoom,a.minzoom)&&e.deepEqual(o.maxzoom,a.maxzoom)||r.push({command:xn.setLayerZoomRange,args:[i,a.minzoom,a.maxzoom]}),o)o.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?Cn(o[l],a[l],r,i,l.slice(6),xn.setPaintProperty):e.deepEqual(o[l],a[l])||r.push({command:xn.setLayerProperty,args:[i,l,a[l]]}));for(l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?Cn(o[l],a[l],r,i,l.slice(6),xn.setPaintProperty):e.deepEqual(o[l],a[l])||r.push({command:xn.setLayerProperty,args:[i,l,a[l]]}))}else r.push({command:xn.removeLayer,args:[i]}),s=d[d.lastIndexOf(i)+1],r.push({command:xn.addLayer,args:[a,s]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:xn.setStyle,args:[n]}]}return r}function Pn(e,t){this.reset(e,t)}function An(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}function Mn(t,n,r,i,o){var a=e.create();return n?(e.scale(a,a,[1/o,1/o,1]),r||e.rotateZ(a,a,i.angle)):e.multiply(a,i.labelPlaneMatrix,t),a}function On(t,n,r,i,o){return n?(t=e.clone(t),e.scale(t,t,[o,o,1]),r||e.rotateZ(t,t,-i.angle),t):i.glCoordMatrix}function Ln(t,n){return Vn(t=[t.x,t.y,0,1],t,n),n=t[3],{point:new e.Point(t[0]/n,t[1]/n),signedDistanceFromCamera:n}}function Rn(e,t){return.5+e/t*.5}function Dn(e,t,n,r,i,o,a,s,l,u,c){var p=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,f=t.getoffsetX(s.glyphStartIndex);return p=t.getoffsetX(p-1),(f=Fn(e*f,n,r,i,o,a,s.segment,h,d,l,u,c))&&(c=Fn(e*p,n,r,i,o,a,s.segment,h,d,l,u,c))?{first:f,last:c}:null}function zn(t,n,r,i){if(t===e.WritingMode.horizontal){var o=Math.abs(r.y-n.y);if(Math.abs(r.x-n.x)*i<o)return{useVertical:!0}}return(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function Nn(t,n,r,i,o,a,s,l,u,c,p,h,d,f){var m=n/24,g=t.lineOffsetX*m,y=t.lineOffsetY*m;if(1<t.numGlyphs){var v=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,b=t.lineStartIndex+t.lineLength;if(!(S=Dn(m,l,g,y,r,p,h,t,u,a,d)))return{notEnoughRoom:!0};if(n=Ln(S.first.point,s).point,s=Ln(S.last.point,s).point,i&&!r&&(s=zn(t.writingMode,n,s,f)))return s;for(var x=[S.first],w=t.glyphStartIndex+1;w<v-1;w++)x.push(Fn(m*l.getoffsetX(w),g,y,r,p,h,t.segment,_,b,u,a,d));x.push(S.last)}else{if(i&&!r){var S=Ln(h,o).point,E=(i=t.lineStartIndex+t.segment+1,0<(i=Ln(E=new e.Point(u.getx(i),u.gety(i)),o)).signedDistanceFromCamera?i.point:Bn(h,E,S,1,o));if(E=zn(t.writingMode,S,E,f))return E}if(!(E=Fn(m*l.getoffsetX(t.glyphStartIndex),g,y,r,p,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,a,d)))return{notEnoughRoom:!0};x=[E]}for(var C=0,T=x;C<T.length;C+=1){var I=T[C];e.addDynamicAttributes(c,I.point,I.angle)}return{}}function Bn(e,t,n,r,i){return i=Ln(e.add(e.sub(t)._unit()),i).point,i=n.sub(i),n.add(i._mult(r/i.mag()))}function Fn(t,n,r,i,o,a,s,l,u,c,p,h){var d=0<(t=i?t-n:t+n)?1:-1;n=0,i&&(d*=-1,n=Math.PI),d<0&&(n+=Math.PI);for(var f=0<d?l+s:l+s+1,m=o,g=o,y=0,v=0,_=Math.abs(t),b=[];y+v<=_;){if((f+=d)<l||u<=f)return null;var x,w;g=m,b.push(m),void 0===(m=h[f])&&(m=0<(w=Ln(x=new e.Point(c.getx(f),c.gety(f)),p)).signedDistanceFromCamera?h[f]=w.point:(w=f-d,Bn(0===y?a:new e.Point(c.getx(w),c.gety(w)),x,g,_-y+1,p))),y+=v,v=g.dist(m)}return o=(_-y)/v,(o=(t=m.sub(g)).mult(o)._add(g))._add(t._unit()._perp()._mult(r*d)),n+=Math.atan2(m.y-g.y,m.x-g.x),b.push(o),{point:o,angle:n,path:b}}Pn.prototype.reset=function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Pn.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,r=this._distances[n],i=t*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,a=this._distances[o];return t=0<(t=r-a)?(i-a)/t:0,this.points[o].mult(1-t).add(this.points[n].mult(t))},An.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},An.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},An.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},An.prototype._insertBoxCell=function(e,t,n,r,i,o){this.boxCells[i].push(o)},An.prototype._insertCircleCell=function(e,t,n,r,i,o){this.circleCells[i].push(o)},An.prototype._query=function(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?0<a.length:a},An.prototype._queryCircle=function(e,t,n,r,i){var o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];var u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?0<u.length:u},An.prototype.query=function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)},An.prototype.hitTest=function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)},An.prototype.hitTestCircle=function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)},An.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=a.seenUids,u=this.boxCells[i];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var d=h[p];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(e<=c[2+f]&&t<=c[3+f]&&n>=c[0+f]&&r>=c[1+f]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:c[f],y1:c[1+f],x2:c[2+f],y2:c[3+f]})}}}if(null!==(i=this.circleCells[i]))for(var m=this.circles,g=0,y=i;g<y.length;g+=1){var v=y[g];if(!l.circle[v]){l.circle[v]=!0;var _=3*v;if(this._circleAndRectCollide(m[_],m[1+_],m[2+_],e,t,n,r)&&(!s||s(this.circleKeys[v]))){if(a.hitTest)return o.push(!0),!0;var b=m[_],x=m[1+_];_=m[2+_],o.push({key:this.circleKeys[v],x1:b-_,y1:x-_,x2:b+_,y2:x+_})}}}},An.prototype._queryCellCircle=function(e,t,n,r,i,o,a,s){var l=a.circle,u=a.seenUids;if(null!==(a=this.boxCells[i]))for(var c=this.bboxes,p=0,h=a;p<h.length;p+=1){var d=h[p];if(!u.box[d]){u.box[d]=!0;var f=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,c[0+f],c[1+f],c[2+f],c[3+f])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}if(null!==(i=this.circleCells[i]))for(var m=this.circles,g=0,y=i;g<y.length;g+=1){var v=y[g];if(!u.circle[v]){u.circle[v]=!0;var _=3*v;if(this._circlesCollide(m[_],m[1+_],m[2+_],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[v])))return o.push(!0),!0}}},An.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),p=this._convertToYCellCoord(r),h=l;h<=c;h++)for(var d=u;d<=p;d++){var f=this.xCellCount*d+h;if(i.call(this,e,t,n,r,f,o,a,s))return}},An.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},An.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},An.prototype._circlesCollide=function(e,t,n,r,i,o){return(e=r-e)*e+(t=i-t)*t<(o=n+o)*o},An.prototype._circleAndRectCollide=function(e,t,n,r,i,o,a){return!((o=(o-r)/2)+n<(r=Math.abs(e-(r+o))))&&!((a=(a-i)/2)+n<(i=Math.abs(t-(i+a))))&&(r<=o||i<=a||(o=r-o)*o+(a=i-a)*a<=n*n)};var jn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Un(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(jn,3*r)}}function Vn(e,t,n){var r=t[0];return t=t[1],e[0]=n[0]*r+n[4]*t+n[12],e[1]=n[1]*r+n[5]*t+n[13],e[3]=n[3]*r+n[7]*t+n[15],e}function qn(e,t,n){void 0===t&&(t=new An(e.width+200,e.height+200,25)),void 0===n&&(n=new An(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200}function Hn(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}function Wn(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}function Gn(e,t,n,r,i){this.text=new Wn(e?e.text:null,t,n,i),this.icon=new Wn(e?e.icon:null,t,r,i)}function Zn(e,t,n){this.text=e,this.icon=t,this.skipFade=n}function Kn(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}function Xn(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}function Yn(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}function Jn(t,n,r,i,o){var a=e.getAnchorAlignment(t);return n=-(a.horizontalAlign-.5)*n,r=-(a.verticalAlign-.5)*r,i=e.evaluateVariableOffset(t,i),new e.Point(n+i[0]*o,r+i[1]*o)}function $n(t,n,r,i,o,a){var s=t.x1,l=t.x2,u=t.y1,c=t.y2,p=t.anchorPointX;return t=t.anchorPointY,r=new e.Point(n,r),i&&r._rotate(o?a:-a),{x1:s+r.x,y1:u+r.y,x2:l+r.x,y2:c+r.y,anchorPointX:p,anchorPointY:t}}function Qn(e,t,n,r){this.transform=e.clone(),this.collisionIndex=new qn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Yn(n),this.collisionCircleArrays={},(this.prevPlacement=r)&&(r.prevPlacement=void 0),this.placedOrientations={}}function er(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}qn.prototype.placeCollisionBox=function(e,t,n,r,i){var o=n*(s=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY)).perspectiveRatio,a=e.x1*o+s.point.x,s=(r=e.y1*o+s.point.y,n=e.x2*o+s.point.x,e.y2*o+s.point.y);return!this.isInsideGrid(a,r,n,s)||!t&&this.grid.hitTest(a,r,n,s,i)?{box:[],offscreen:!1}:{box:[a,r,n,s],offscreen:this.isOffscreen(a,r,n,s)}},qn.prototype.placeCollisionCircles=function(t,n,r,i,o,a,s,l,u,c,p,h,d){var f=[],m=new e.Point(n.anchorX,n.anchorY),g=(a=Ln(m,a),a=Rn(this.transform.cameraToCenterDistance,a.signedDistanceFromCamera),c=(c?o/a:o*a)/e.ONE_EM,o=Ln(m,s).point,!1),y=!1,v=!0;if(s=Dn(c,i,n.lineOffsetX*c,n.lineOffsetY*c,!1,o,m,n,r,s,{})){for(var _=.5*h*a+d,b=(h=new e.Point(-100,-100),a=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),new Pn),x=s.first,w=s.last,S=[],E=x.path.length-1;1<=E;E--)S.push(x.path[E]);for(var C=1;C<w.path.length;C++)S.push(w.path[C]);var T=2.5*_;if(d=[],0<(S=l?(s=S.map((function(e){return Ln(e,l)}))).some((function(e){return e.signedDistanceFromCamera<=0}))?[]:s.map((function(e){return e.point})):S).length){for(var I=S[0].clone(),k=S[0].clone(),P=1;P<S.length;P++)I.x=Math.min(I.x,S[P].x),I.y=Math.min(I.y,S[P].y),k.x=Math.max(k.x,S[P].x),k.y=Math.max(k.y,S[P].y);d=I.x>=h.x&&k.x<=a.x&&I.y>=h.y&&k.y<=a.y?[S]:k.x<h.x||I.x>a.x||k.y<h.y||I.y>a.y?[]:e.clipLine([S],h.x,h.y,a.x,a.y)}for(var A=0,M=d;A<M.length;A+=1){var O=M[A];b.reset(O,.25*_);for(var L=0,R=(L=b.length<=.5*_?1:Math.ceil(b.paddedLength/T)+1,0);R<L;R++){var D=R/Math.max(L-1,1),z=(j=b.lerp(D)).x+100,N=j.y+100;f.push(z,N,_,0);var B=z-_,F=N-_,j=(D=z+_,N+_);if(v=v&&this.isOffscreen(B,F,D,j),y=y||this.isInsideGrid(B,F,D,j),!t&&this.grid.hitTestCircle(z,N,_,p)&&(g=!0,!u))return{circles:[],offscreen:!1,collisionDetected:g}}}}return{circles:!u&&g||!y?[]:f,offscreen:v,collisionDetected:g}},qn.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,l=t;s<l.length;s+=1){var u=l[s];u=new e.Point(u.x+100,u.y+100),r=Math.min(r,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y),n.push(u)}for(var c={},p={},h=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));h<d.length;h+=1){var f=d[h],m=f.key;void 0===c[m.bucketInstanceId]&&(c[m.bucketInstanceId]={}),c[m.bucketInstanceId][m.featureIndex]||(f=[new e.Point(f.x1,f.y1),new e.Point(f.x2,f.y1),new e.Point(f.x2,f.y2),new e.Point(f.x1,f.y2)],e.polygonIntersectsPolygon(n,f)&&(c[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex)))}return p},qn.prototype.insertCollisionBox=function(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])},qn.prototype.insertCollisionCircles=function(e,t,n,r,i){for(var o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])},qn.prototype.projectAndGetPerspectiveRatio=function(t,n,r){return Vn(r=[n,r,0,1],r,t),{point:new e.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},qn.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},qn.prototype.isInsideGrid=function(e,t,n,r){return 0<=n&&e<this.gridRightBoundary&&0<=r&&t<this.gridBottomBoundary},qn.prototype.getViewportMatrix=function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t},Wn.prototype.isHidden=function(){return 0===this.opacity&&!this.placed},Gn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()},Yn.prototype.get=function(e){return this.crossSourceCollisions?{ID:0,predicate:null}:(this.collisionGroups[e]||(t=++this.maxGroupID,this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}),this.collisionGroups[e]);var t},Qn.prototype.getBucketParts=function(t,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,p=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),f=Hn(r,1,this.transform.zoom),m=Mn(p,h,d,this.transform,f);n=null,h&&(f=On(p,h,d,this.transform,f),n=e.multiply([],this.transform.labelPlaneMatrix,f)),this.retainedQueryData[o.bucketInstanceId]=new Xn(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var g={bucket:o,layout:l,posMatrix:p,textLabelPlaneMatrix:m,labelToScreenMatrix:n,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(var y=0,v=o.sortKeyRanges;y<v.length;y+=1){var _=(x=v[y]).sortKey,b=x.symbolInstanceStart,x=x.symbolInstanceEnd;t.push({sortKey:_,symbolInstanceStart:b,symbolInstanceEnd:x,parameters:g})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:g})}},Qn.prototype.attemptAnchorPlacement=function(e,t,n,r,i,o,a,s,l,u,c,p,h,d,f){var m,g=[p.textOffset0,p.textOffset1],y=Jn(e,n,r,g,i);if(t=this.collisionIndex.placeCollisionBox($n(t,y.x,y.y,o,a,this.transform.angle),c,s,l,u.predicate),!f||0!==this.collisionIndex.placeCollisionBox($n(f,y.x,y.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)return 0<t.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(m=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:g,width:n,height:r,anchor:e,textBoxScale:i,prevAnchor:m},this.markUsedJustification(h,e,p,d),h.allowVerticalPlacement&&(this.markUsedOrientation(h,d,p),this.placedOrientations[p.crossTileID]=d),{shift:y,placedGlyphBoxes:t}):void 0},Qn.prototype.placeLayerBucketPart=function(t,n,r){var i=this,o=(w=t.parameters).bucket,a=w.layout,s=w.posMatrix,l=w.textLabelPlaneMatrix,u=w.labelToScreenMatrix,c=w.textPixelRatio,p=w.holdingForFade,h=w.collisionBoxArray,d=w.partiallyEvaluatedTextSize,f=w.collisionGroup,m=a.get("text-optional"),g=a.get("icon-optional"),y=a.get("text-allow-overlap"),v=a.get("icon-allow-overlap"),_="map"===a.get("text-rotation-alignment"),b="map"===a.get("text-pitch-alignment"),x="none"!==a.get("icon-text-fit"),w="viewport-y"===a.get("symbol-z-order"),S=y&&(v||!o.hasIconData()||g),E=v&&(y||!o.hasTextData()||m);function C(t,h){if(!n[t.crossTileID])if(p)i.placements[t.crossTileID]=new Zn(!1,!1,!1);else{var w=!1,C=!1,T=!0,I=null,k={box:null,offscreen:null},P={box:null,offscreen:null},A=null,M=null,O=0,L=0,R=0;h.textFeatureIndex?O=h.textFeatureIndex:t.useRuntimeCollisionCircles&&(O=t.featureIndex),h.verticalTextFeatureIndex&&(L=h.verticalTextFeatureIndex);var D,z,N,B,F,j,U,V,q=h.textBox;q&&(V=function(n){var r=e.WritingMode.horizontal;return!o.allowVerticalPlacement||n||!i.prevPlacement||(n=i.prevPlacement.placedOrientations[t.crossTileID])&&(i.placedOrientations[t.crossTileID]=n,i.markUsedOrientation(o,r=n,t)),r},U=function(n,r){if(o.allowVerticalPlacement&&0<t.numVerticalGlyphVertices&&h.verticalTextBox)for(var i=0,a=o.writingModes;i<a.length&&(a[i]===e.WritingMode.vertical?(k=r(),P=k):k=n(),!(k&&k.box&&k.box.length));i+=1);else k=n()},a.get("text-variable-anchor")?(D=a.get("text-variable-anchor"),i.prevPlacement&&i.prevPlacement.variableOffsets[t.crossTileID]&&(z=i.prevPlacement.variableOffsets[t.crossTileID],0<D.indexOf(z.anchor)&&(D=D.filter((function(e){return e!==z.anchor}))).unshift(z.anchor)),N=function(e,n,r){for(var a=e.x2-e.x1,l=e.y2-e.y1,u=t.textBoxScale,p=x&&!v?n:null,h={box:[],offscreen:!1},d=y?2*D.length:D.length,m=0;m<d;++m){var g=D[m%D.length],S=(S=m>=D.length,i.attemptAnchorPlacement(g,e,a,l,u,_,b,c,s,f,S,t,o,r,p));if(S&&(h=S.placedGlyphBoxes)&&h.box&&h.box.length){w=!0,I=S.shift;break}}return h},U((function(){return N(q,h.iconBox,e.WritingMode.horizontal)}),(function(){var n=h.verticalTextBox,r=k&&k.box&&k.box.length;return o.allowVerticalPlacement&&!r&&0<t.numVerticalGlyphVertices&&n?N(n,h.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),k&&(w=k.box,T=k.offscreen),j=V(k&&k.box),w||!i.prevPlacement||(B=i.prevPlacement.variableOffsets[t.crossTileID])&&(i.variableOffsets[t.crossTileID]=B,i.markUsedJustification(o,B.anchor,t,j))):(F=function(e,n){return(e=i.collisionIndex.placeCollisionBox(e,y,c,s,f.predicate))&&e.box&&e.box.length&&(i.markUsedOrientation(o,n,t),i.placedOrientations[t.crossTileID]=n),e},U((function(){return F(q,e.WritingMode.horizontal)}),(function(){var n=h.verticalTextBox;return o.allowVerticalPlacement&&0<t.numVerticalGlyphVertices&&n?F(n,e.WritingMode.vertical):{box:null,offscreen:null}})),V(k&&k.box&&k.box.length))),w=(B=k)&&B.box&&0<B.box.length,T=B&&B.offscreen,t.useRuntimeCollisionCircles&&(j=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),U=e.evaluateSizeForFeature(o.textSizeData,d,j),H=a.get("text-padding"),V=t.collisionCircleDiameter,A=i.collisionIndex.placeCollisionCircles(y,j,o.lineVertexArray,o.glyphOffsetArray,U,s,l,u,r,b,f.predicate,V,H),w=y||0<A.circles.length&&!A.collisionDetected,T=T&&A.offscreen),h.iconFeatureIndex&&(R=h.iconFeatureIndex),h.iconBox&&(W=function(e){return e=x&&I?$n(e,I.x,I.y,_,b,i.transform.angle):e,i.collisionIndex.placeCollisionBox(e,v,c,s,f.predicate)},C=P&&P.box&&P.box.length&&h.verticalIconBox?0<(M=W(h.verticalIconBox)).box.length:0<(M=W(h.iconBox)).box.length,T=T&&M.offscreen);var H=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,W=g||0===t.numIconVertices;if(H||W?W?H||(C=C&&w):w=C&&w:C=w=C&&w,w&&B&&B.box&&(P&&P.box&&L?i.collisionIndex.insertCollisionBox(B.box,a.get("text-ignore-placement"),o.bucketInstanceId,L,f.ID):i.collisionIndex.insertCollisionBox(B.box,a.get("text-ignore-placement"),o.bucketInstanceId,O,f.ID)),C&&M&&i.collisionIndex.insertCollisionBox(M.box,a.get("icon-ignore-placement"),o.bucketInstanceId,R,f.ID),A&&(w&&i.collisionIndex.insertCollisionCircles(A.circles,a.get("text-ignore-placement"),o.bucketInstanceId,O,f.ID),r)){O=o.bucketInstanceId;var G=i.collisionCircleArrays[O];void 0===G&&(G=i.collisionCircleArrays[O]=new Kn);for(var Z=0;Z<A.circles.length;Z+=4)G.circles.push(A.circles[Z+0]),G.circles.push(A.circles[Z+1]),G.circles.push(A.circles[Z+2]),G.circles.push(A.collisionDetected?1:0)}i.placements[t.crossTileID]=new Zn(w||S,C||E,T||o.justReloaded),n[t.crossTileID]=!0}}if(!o.collisionArrays&&h&&o.deserializeCollisionBoxes(h),w)for(var T=o.getSortedSymbolIndexes(this.transform.angle),I=T.length-1;0<=I;--I){var k=T[I];C(o.symbolInstances.get(k),o.collisionArrays[k])}else for(var P=t.symbolInstanceStart;P<t.symbolInstanceEnd;P++)C(o.symbolInstances.get(P),o.collisionArrays[P]);r&&o.bucketInstanceId in this.collisionCircleArrays&&(w=this.collisionCircleArrays[o.bucketInstanceId],e.invert(w.invProjMatrix,s),w.viewportMatrix=this.collisionIndex.getViewportMatrix()),o.justReloaded=!1},Qn.prototype.markUsedJustification=function(t,n,r,i){for(var o={left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex},a=i===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:o[e.getAnchorJustification(n)],s=0,l=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];s<l.length;s+=1){var u=l[s];0<=u&&(t.text.placedSymbolArray.get(u).crossTileID=0<=a&&u!==a?0:r.crossTileID)}},Qn.prototype.markUsedOrientation=function(t,n,r){for(var i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=(n=n===e.WritingMode.vertical?n:0,0),a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];o<a.length;o+=1)t.text.placedSymbolArray.get(a[o]).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=n)},Qn.prototype.commit=function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r,i,o,a,s=t?t.symbolFadeChange(e):1,l=t?t.opacities:{},u=t?t.variableOffsets:{},c=t?t.placedOrientations:{};for(r in this.placements){var p=this.placements[r],h=l[r];n=h?(this.opacities[r]=new Gn(h,s,p.text,p.icon),n||p.text!==h.text.placed||p.icon!==h.icon.placed):(this.opacities[r]=new Gn(null,s,p.text,p.icon,p.skipFade),n||p.text||p.icon)}for(i in l){var d,f=l[i];this.opacities[i]||(d=new Gn(f,s,!1,!1)).isHidden()||(this.opacities[i]=d,n=n||f.text.placed||f.icon.placed)}for(o in u)this.variableOffsets[o]||!this.opacities[o]||this.opacities[o].isHidden()||(this.variableOffsets[o]=u[o]);for(a in c)this.placedOrientations[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.placedOrientations[a]=c[a]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},Qn.prototype.updateLayerOpacities=function(e,t){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.getBucket(e);a&&o.latestFeatureIndex&&e.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},Qn.prototype.updateBucketOpacities=function(t,n,r){var i=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var o=t.layers[0].layout,a=new Gn(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),u=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),p="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),d=new Gn(null,0,s&&(l||!t.hasIconData()||o.get("icon-optional")),l&&(s||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var f=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},m=0;m<t.symbolInstances.length;m++)!function(r){var o=t.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,l=o.numVerticalGlyphVertices,m=o.crossTileID,g=n[m],y=i.opacities[m];g?y=a:y||(i.opacities[m]=y=d),n[m]=!0;var v,_,b=0<o.numIconVertices,x=i.placedOrientations[o.crossTileID],w=x===e.WritingMode.vertical,S=x===e.WritingMode.horizontal||x===e.WritingMode.horizontalOnly;(0<s||0<l)&&(g=lr(y.text),f(t.text,s,w?cr:g),f(t.text,l,S?cr:g),v=y.text.isHidden(),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(e){0<=e&&(t.text.placedSymbolArray.get(e).hidden=v||w?1:0)})),0<=o.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=v||S?1:0),(g=i.variableOffsets[o.crossTileID])&&i.markUsedJustification(t,g.anchor,o,x),(x=i.placedOrientations[o.crossTileID])&&(i.markUsedJustification(t,"left",o,x),i.markUsedOrientation(t,x,o))),b&&(_=lr(y.icon),b=!(h&&o.verticalPlacedIconSymbolIndex&&w),0<=o.placedIconSymbolIndex&&(f(t.icon,o.numIconVertices,b?_:cr),t.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=y.icon.isHidden()),0<=o.verticalPlacedIconSymbolIndex&&(f(t.icon,o.numVerticalIconVertices,b?cr:_),t.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())),!t.hasIconCollisionBoxData()&&!t.hasTextCollisionBoxData()||(_=t.collisionArrays[r])&&(o=new e.Point(0,0),(_.textBox||_.verticalTextBox)&&(r=!0,u&&((m=i.variableOffsets[m])?(o=Jn(m.anchor,m.width,m.height,m.textOffset,m.textBoxScale),c&&o._rotate(p?i.transform.angle:-i.transform.angle)):r=!1),_.textBox&&er(t.textCollisionBox.collisionVertexArray,y.text.placed,!r||w,o.x,o.y),_.verticalTextBox&&er(t.textCollisionBox.collisionVertexArray,y.text.placed,!r||S,o.x,o.y)),S=Boolean(!S&&_.verticalIconBox),_.iconBox&&er(t.iconCollisionBox.collisionVertexArray,y.icon.placed,S,h?o.x:0,h?o.y:0),_.verticalIconBox&&er(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!S,h?o.x:0,h?o.y:0))}(m);t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays&&(r=this.collisionCircleArrays[t.bucketInstanceId],t.placementInvProjMatrix=r.invProjMatrix,t.placementViewportMatrix=r.viewportMatrix,t.collisionCircleArray=r.circles,delete this.collisionCircleArrays[t.bucketInstanceId])},Qn.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Qn.prototype.zoomAdjustment=function(e){return Math.max(0,(this.transform.zoom-e)/1.5)},Qn.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},Qn.prototype.stillRecent=function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e},Qn.prototype.setStale=function(){this.stale=!0};var tr=Math.pow(2,25),nr=Math.pow(2,24),rr=Math.pow(2,17),ir=Math.pow(2,16),or=Math.pow(2,9),ar=Math.pow(2,8),sr=Math.pow(2,1);function lr(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0;return(e=Math.floor(127*e.opacity))*tr+t*nr+e*rr+t*ir+e*or+t*ar+e*sr+t}function ur(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}var cr=0;function pr(e,t,n,r,i,o,a){this.placement=new Qn(e,i,o,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}function hr(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<t.length;r++){var i=t.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}}ur.prototype.continuePlacement=function(e,t,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<e.length;){var a=e[this._currentTileIndex];if(t.getBucketParts(o,r,a,this._sortAcrossTiles),this._currentTileIndex++,i())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<o.length;){var s=o[this._currentPartIndex];if(t.placeLayerBucketPart(s,this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0}return!1},pr.prototype.isDone=function(){return this._done},pr.prototype.continuePlacement=function(t,n,r){for(var i=this,o=e.browser.now(),a=function(){var t=e.browser.now()-o;return!i._forceFullPlacement&&2<t};0<=this._currentPlacementIndex;){var s=n[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new ur(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},pr.prototype.commit=function(e){return this.placement.commit(e),this.placement};var dr=512/e.EXTENT/2;function fr(){this.maxCrossTileID=0}function mr(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}function gr(){this.layerIndexes={},this.crossTileIDs=new fr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}function yr(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))}hr.prototype.getScaledCoordinates=function(t,n){var r=n.canonical.z-this.tileID.canonical.z;return r=dr/Math.pow(2,r),{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*r)}},hr.prototype.findMatches=function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var o=e.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,t),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}},fr.prototype.generate=function(){return++this.maxCrossTileID},mr.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r,i=this.indexes[n],o={};for(r in i){var a=i[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),o[a.tileID.key]=a}this.indexes[n]=o}this.lng=e},mr.prototype.addBucket=function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i,o=this.usedCrossTileIDs[e.overscaledZ];for(i in this.indexes){var a=this.indexes[i];if(Number(i)>e.overscaledZ)for(var s in a)(s=a[s]).tileID.isChildOf(e)&&s.findMatches(t.symbolInstances,e,o);else{var l=a[e.scaledTo(Number(i)).key];l&&l.findMatches(t.symbolInstances,e,o)}}for(var u=0;u<t.symbolInstances.length;u++){var c=t.symbolInstances.get(u);c.crossTileID||(c.crossTileID=n.generate(),o[c.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new hr(e,t.symbolInstances,t.bucketInstanceId),!0},mr.prototype.removeBucketCrossTileIDs=function(e,t){for(var n in t.indexedSymbolInstances)for(var r=0,i=t.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[e][o.crossTileID]}},mr.prototype.removeStaleBuckets=function(e){var t,n=!1;for(t in this.indexes){var r,i=this.indexes[t];for(r in i)e[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(t,i[r]),delete i[r],n=!0)}return n},gr.prototype.addLayer=function(e,t,n){var r=this.layerIndexes[e.id],i=!1,o={};(r=void 0===r?this.layerIndexes[e.id]=new mr:r).handleWrapJump(n);for(var a=0,s=t;a<s.length;a+=1){var l=s[a],u=l.getBucket(e);u&&e.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),o[u.bucketInstanceId]=!0)}return!!r.removeStaleBuckets(o)||i},gr.prototype.pruneUnusedLayers=function(e){var t,n={};for(t in e.forEach((function(e){n[e]=!0})),this.layerIndexes)n[t]||delete this.layerIndexes[t]};var vr,_r=e.pick(xn,["moveLayer","addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),br=e.pick(xn,["setCenter","setZoom","setBearing","setPitch"]),xr=bn(),wr=((vr=e.Evented)&&(Sr.__proto__=vr),((Sr.prototype=Object.create(vr&&vr.prototype)).constructor=Sr).prototype.loadURL=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),n.validate="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t),t=this.map._requestManager.normalizeStyleURL(t,n.accessToken),t=this.map._requestManager.transformRequest(t,e.ResourceType.Style),this._request=e.getJSON(t,(function(t,i){r._request=null,t?r.fire(new e.ErrorEvent(t)):i&&r._load(i,n)}))},Sr.prototype.loadJSON=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame((function(){r._request=null,n.validate=!1!==n.validate,r._load(t,n)}))},Sr.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(xr,{validate:!1})},Sr.prototype._load=function(t,n){var r=this;if(!n.validate||!yr(this,e.validateStyle(t))){var i,o=[];for(i in n.stylePatch&&(o=this._buildStylePatch(t,n),this.sourceCaches={}),this._loaded=!0,(this.stylesheet=t).sources)this.addSource(i,t.sources[i],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs),n=_n(this.stylesheet.layers),this._order=n.map((function(e){return e.id})),this._layers={},this._serializedLayers={};for(var a=0,s=n;a<s.length;a+=1){var l=s[a];(l=e.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l,this._serializedLayers[l.id]=l.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new E(this.stylesheet.light),o.filter((function(e){return e.command!==xn.moveLayer})).forEach((function(e){r[e.command].apply(r,e.args)})),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},Sr.prototype._loadSprite=function(t){var n,r,i,o,a,s,l,u,c=this;function p(){if(s)i(s);else if(o&&a){var t,n=e.browser.getImageData(a),r={};for(t in o){var l=(y=o[t]).width,u=y.height,c=y.x,p=y.y,h=y.sdf,d=y.pixelRatio,f=y.stretchX,m=y.stretchY,g=y.content,y=new e.RGBAImage({width:l,height:u});e.RGBAImage.copy(n,y,{x:c,y:p},{x:0,y:0},{width:l,height:u}),r[t]={data:y,pixelRatio:d,sdf:h,stretchX:f,stretchY:m,content:g}}i(null,r)}}this._spriteRequest=(n=t,r=this.map._requestManager,i=function(t,n){if(c._spriteRequest=null,t)c.fire(new e.ErrorEvent(t));else if(n)for(var r in n)c.imageManager.addImage(r,n[r]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new e.Event("data",{dataType:"style"}))},t=1<e.browser.devicePixelRatio?"@2x":"",l=e.getJSON(r.transformRequest(r.normalizeSpriteURL(n,t,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null,s||(s=e,o=t,p())})),u=e.getImage(r.transformRequest(r.normalizeSpriteURL(n,t,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null,s||(s=e,a=t,p())})),{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}})},Sr.prototype._validateLayer=function(t){var n,r=this.sourceCaches[t.source];r&&(!(n=t.sourceLayer)||("geojson"===(r=r.getSource()).type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+t.id+'"'))))},Sr.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},Sr.prototype._serializeLayers=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var i=r[n];"custom"!==(i=this._layers[i]).type&&t.push(i.serialize())}return t},Sr.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},Sr.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Sr.prototype.update=function(t){if(this._loaded){var n=this._changed;if(this._changed){var r,i,o=Object.keys(this._updatedLayers),a=Object.keys(this._removedLayers);for(r in(o.length||a.length)&&this._updateWorkerLayers(o,a),this._updatedSources){var s=this._updatedSources[r];"reload"===s?this._reloadSource(r):"clear"===s&&this._clearSource(r)}for(i in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[i].updateTransitions(t),this._serializedLayers[i]=this._layers[i].serialize();this.light.updateTransitions(t),this._resetUpdates()}var l,u={};for(l in this.sourceCaches){var c=this.sourceCaches[l];u[l]=c.used,c.used=!1}for(var p,h=0,d=this._order;h<d.length;h+=1){var f=d[h];(f=this._layers[f]).recalculate(t,this._availableImages),!f.isHidden(t.zoom)&&f.source&&(this.sourceCaches[f.source].used=!0)}for(p in u){var m=this.sourceCaches[p];u[p]!==m.used&&m.fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(t),this.z=t.zoom,n&&this.fire(new e.Event("data",{dataType:"style"}))}},Sr.prototype._updateTilesForChangedImages=function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}},Sr.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},Sr.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Sr.prototype.setState=function(t,n){var r=this;if(void 0===n&&(n={}),this._checkLoaded(),yr(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=_n(t.layers);var i=[],o={},a={};if(i=(i=n.stylePatch?this._buildStylePatch(t,n):i).filter((function(e){return e.command===xn.addLayer&&r._serializedLayers.hasOwnProperty(e.args[0].id)?!(o[e.args[0].id]=!0):e.command===xn.moveLayer&&r._serializedLayers.hasOwnProperty(e.args[0])?o[e.args[0]]=!0:e.command!==xn.addSource||!r.sourceCaches.hasOwnProperty(e.args[0])||!(a[e.args[0]]=!0)})),0===(n=(n=kn(this.serialize(),t).filter((function(e){return!(e.command in br)}))).concat(i)).length)return!1;if(i=n.filter((function(e){return!(e.command in _r)})),0<i.length)throw new Error("Unimplemented: "+i.map((function(e){return e.command})).join(", ")+".");return n.forEach((function(e){"setTransition"!==e.command&&(e.command===xn.removeLayer&&o.hasOwnProperty(e.args[0])||(e.command===xn.addSource||e.command===xn.removeSource)&&a.hasOwnProperty(e.args[0])||r[e.command].apply(r,e.args))})),this.stylesheet=t,!0},Sr.prototype.addImage=function(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this._afterImageUpdated(t)},Sr.prototype.updateImage=function(e,t){this.imageManager.updateImage(e,t)},Sr.prototype.getImage=function(e){return this.imageManager.getImage(e)},Sr.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)},Sr.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))},Sr.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Sr.prototype.addSource=function(t,n,r){var i,o=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");0<=["vector","raster","geojson","video","image"].indexOf(n.type)&&this._validate(e.validateStyle.source,"sources."+t,n,null,r)||(this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0),(i=this.sourceCaches[t]=new un(t,n,this.dispatcher)).style=this,i.setEventedParent(this,(function(){return{isSourceLoaded:o.loaded(),source:i.serialize(),sourceId:t}})),i.onAdd(this.map),this._changed=!0)},Sr.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},Sr.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},Sr.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},Sr.prototype.addLayer=function(t,n,r){void 0===r&&(r={}),this._checkLoaded();var i,o=t.id;if(this.getLayer(o))this.fire(new e.ErrorEvent(new Error('Layer with id "'+o+'" already exists on this map')));else{if("custom"===t.type){if(yr(this,e.validateCustomStyleLayer(t)))return;i=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(o,t.source),t=e.clone$1(t),t=e.extend(t,{source:o})),this._validate(e.validateStyle.layer,"layers."+o,t,{arrayIndex:-1},r))return;i=e.createStyleLayer(t),this._validateLayer(i),i.setEventedParent(this,{layer:{id:o}}),this._serializedLayers[i.id]=i.serialize()}t=n?this._order.indexOf(n):this._order.length,n&&-1===t?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(t,0,o),this._layerOrderChanged=!0,this._layers[o]=i,this._removedLayers[o]&&i.source&&"custom"!==i.type&&(t=this._removedLayers[o],delete this._removedLayers[o],t.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())),this._updateLayer(i),i.onAdd&&i.onAdd(this.map))}},Sr.prototype.moveLayer=function(t,n){var r;this._checkLoaded(),this._changed=!0,this._layers[t]?t!==n&&(r=this._order.indexOf(t),this._order.splice(r,1),r=n?this._order.indexOf(n):this._order.length,n&&-1===r?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(r,0,t),this._layerOrderChanged=!0)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},Sr.prototype.removeLayer=function(t){this._checkLoaded();var n,r=this._layers[t];r?(r.setEventedParent(null),n=this._order.indexOf(t),this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=r,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],r.onRemove&&r.onRemove(this.map)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},Sr.prototype.getLayer=function(e){return this._layers[e]},Sr.prototype.hasLayer=function(e){return e in this._layers},Sr.prototype.setLayerZoomRange=function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},Sr.prototype.setFilter=function(t,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(t);if(i){if(!e.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(e.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=e.clone$1(n),this._updateLayer(i)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},Sr.prototype.getFilter=function(t){return e.clone$1(this.getLayer(t).filter)},Sr.prototype.setLayoutProperty=function(t,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(t);o?e.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._serializedLayers[t]=o.serialize(),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},Sr.prototype.getLayoutProperty=function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},Sr.prototype.setPaintProperty=function(t,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(t);o?e.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},Sr.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},Sr.prototype.setFeatureState=function(t,n){this._checkLoaded();var r,i=t.source,o=t.sourceLayer,a=this.sourceCaches[i];void 0!==a?"geojson"===(r=a.getSource().type)&&o?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==r||o?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),a.setFeatureState(o,t.id,n)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new e.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},Sr.prototype.removeFeatureState=function(t,n){this._checkLoaded();var r,i,o=t.source,a=this.sourceCaches[o];void 0!==a?(i="vector"===(r=a.getSource().type)?t.sourceLayer:void 0,"vector"!==r||i?n&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):a.removeFeatureState(i,t.id,n):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new e.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},Sr.prototype.getFeatureState=function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},Sr.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Sr.prototype.serialize=function(){return this._loaded?e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return void 0!==e})):xr},Sr.prototype._buildStylePatch=function(t,n){var r=this,i=[],o=[],a=[],s=t.layers.reduce((function(e,t){return e[t.id]=t,e}),{});return n.stylePatch&&n.stylePatch(this.serialize(),t,function(n,l){var u;r.hasLayer(n)?(u=r._serializedLayers[n],t.sources.hasOwnProperty(u.source)||o.includes(u.source)||(i.push({command:"addSource",args:[u.source,r.sourceCaches[u.source].serialize(),{validate:!1}]}),o.push(u.source)),s.hasOwnProperty(n)&&i.push({command:"removeLayer",args:[n]}),l=s.hasOwnProperty(l)||a.find((function(e){return e.id===l}))?l:void 0,i.push({command:"moveLayer",args:[u.id,l,{validate:!0}]}),i.push({command:"addLayer",args:[u,l,{validate:!0}]}),a.push(n)):e.warnOnce("Cannot preserve layer "+n+" that is not in the previous style.")}.bind(this),function(t,n,r){s.hasOwnProperty(t)||a.includes(t)?i.push({command:"setPaintProperty",args:[t,n,r,{validate:!0}]}):e.warnOnce("Cannot update paint property on layer "+t+" that is not in the next style.")}.bind(this),function(t,n,r){s.hasOwnProperty(t)||a.includes(t)?i.push({command:"setLayoutProperty",args:[t,n,r,{validate:!0}]}):e.warnOnce("Cannot update layout property on layer "+t+" that is not in the next style.")}.bind(this),function(t,n,r){s.hasOwnProperty(t)||a.includes(t)?i.push({command:"setFilter",args:[t,n,r,{validate:!0}]}):e.warnOnce("Cannot update filter on layer "+t+" that is not in the next style.")}.bind(this)),i},Sr.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},Sr.prototype._flattenAndSortRenderedFeatures=function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],o=this._order.length-1;0<=o;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,l=e;s<l.length;s+=1){var u=l[s][a];if(u)for(var c=0,p=u;c<p.length;c+=1){var h=p[c];i.push(h)}}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var d=[],f=this._order.length-1;0<=f;f--){var m=this._order[f];if(n(m))for(var g=i.length-1;0<=g;g--){var y=i[g].feature;if(r[y.layer.id]<f)break;d.push(y),i.pop()}else for(var v=0,_=e;v<_.length;v+=1){var b=_[v][m];if(b)for(var x=0,w=b;x<w.length;x+=1){var S=w[x];d.push(S.feature)}}}return d},Sr.prototype.queryRenderedFeatures=function(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],l=this._layers[s];if(!l)return this.fire(new e.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[l.source]=!0}}var u,c=[];for(u in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[u]||c.push(Q(this.sourceCaches[u],this._layers,this._serializedLayers,t,n,r));return this.placement&&c.push(ee(this._layers,this._serializedLayers,this.sourceCaches,t,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},Sr.prototype.querySourceFeatures=function(t,n){return n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n),(t=this.sourceCaches[t])?function(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,t))}return r}(t,n):[]},Sr.prototype.addSourceType=function(e,t,n){return Sr.getSourceType(e)?n(new Error('A source type called "'+e+'" already exists.')):(Sr.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},Sr.prototype.getLight=function(){return this.light.getLight()},Sr.prototype.setLight=function(t,n){void 0===n&&(n={}),this._checkLoaded();var r,i,o=this.light.getLight(),a=!1;for(r in t)if(!e.deepEqual(t[r],o[r])){a=!0;break}a&&(i={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(t,n),this.light.updateTransitions(i))},Sr.prototype._validate=function(t,n,r,i,o){return(!(o=void 0===o?{}:o)||!1!==o.validate)&&yr(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.styleSpec},i)))},Sr.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Sr.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},Sr.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},Sr.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},Sr.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},Sr.prototype._updatePlacement=function(t,n,r,i,o){void 0===o&&(o=!1);for(var a=!1,s=!1,l={},u=0,c=this._order;u<c.length;u+=1){var p,h=c[u];"symbol"===(h=this._layers[h]).type&&(l[h.source]||(p=this.sourceCaches[h.source],l[h.source]=p.getRenderableIds(!0).map((function(e){return p.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))),h=this.crossTileSymbolIndex.addLayer(h,l[h.source],t.center.lng),a=a||h)}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new pr(t,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var d=0,f=this._order;d<f.length;d+=1){var m=f[d];"symbol"===(m=this._layers[m]).type&&this.placement.updateLayerOpacities(m,l[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},Sr.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},Sr.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages(),(n=this.sourceCaches[t.source])&&n.setDependencies(t.tileID.key,t.type,t.icons)},Sr.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},Sr.prototype.getResource=function(t,n,r){return e.makeRequest(n,r)},Sr);function Sr(t,n){var r=this;void 0===n&&(n={}),vr.call(this),this.map=t,this.dispatcher=new I(vn(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new b(t._requestManager,n.localIdeographFontFamily),this.lineAtlas=new T(256,512),this.crossTileSymbolIndex=new gr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var i=this;this._rtlTextPluginCallback=Sr.registerForPluginStateChange((function(t){t={pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},i.dispatcher.broadcast("syncRTLPluginState",t,(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var r in i.sourceCaches)i.sourceCaches[r].reload()}))})),this.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType&&(e=r.sourceCaches[e.sourceId])){var t=e.getSource();if(t&&t.vectorLayerIds)for(var n in r._layers)(n=r._layers[n]).source===t.id&&r._validateLayer(n)}}))}wr.getSourceType=function(e){return $[e]},wr.setSourceType=function(e,t){$[e]=t},wr.registerForPluginStateChange=e.registerForPluginStateChange;var Er=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Cr=Fr("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Tr=Fr("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ir=Fr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),kr=Fr("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Pr=Fr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ar=Fr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Mr=Fr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Or=Fr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Lr=Fr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Rr=Fr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Dr=Fr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),zr=Fr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Nr=Fr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Br=(u=Fr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),m=Fr("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),f=Fr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Fr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"));function Fr(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute ([\w]+) ([\w]+)/g),i=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=(i=o?o.concat(i):i,{});return{fragmentSource:e=e.replace(n,(function(e,t,n,r,i){return a[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})),vertexSource:t=t.replace(n,(function(e,t,n,r,i){var o="float"===r?"vec2":"vec4",s=i.match(/color/)?"color":o;return a[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"==s?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"==s?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})),staticAttributes:r,staticUniforms:i}}function jr(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}M=Fr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),R=Fr("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),N=Fr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),j=Fr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Z=Fr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Y=Fr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ae=Fr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Zt=Fr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),yn=Fr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");var Ur=Object.freeze({__proto__:null,prelude:Cr,background:Tr,backgroundPattern:Ir,circle:kr,clippingMask:Pr,heatmap:Ar,heatmapTexture:Mr,collisionBox:Or,collisionCircle:Lr,debug:Rr,fill:Dr,fillOutline:zr,fillOutlinePattern:Nr,fillPattern:u,fillExtrusion:m,fillExtrusionPattern:f,hillshadePrepare:Br,hillshade:M,line:R,lineGradient:N,linePattern:j,lineSDF:Z,raster:Y,symbolIcon:ae,symbolSDF:Zt,symbolTextAndIcon:yn});function Vr(e){for(var t,n=[],r=0;r<e.length;r++)null!==e[r]&&(t=e[r].split(" "),n.push(t.pop()));return n}function qr(e,t,n,r,i,o){var a=e.gl;this.program=a.createProgram();for(var s=Vr(n.staticAttributes),l=r?r.getBinderAttributes():[],u=s.concat(l),c=(s=n.staticUniforms?Vr(n.staticUniforms):[],l=r?r.getBinderUniforms():[],[]),p=0,h=s.concat(l);p<h.length;p+=1){var d=h[p];c.indexOf(d)<0&&c.push(d)}if(l=r?r.defines():[],o&&l.push("#define OVERDRAW_INSPECTOR;"),o=l.concat(Cr.fragmentSource,n.fragmentSource).join("\n"),l=l.concat(Cr.vertexSource,n.vertexSource).join("\n"),n=a.createShader(a.FRAGMENT_SHADER),a.isContextLost())this.failedToCreate=!0;else if(a.shaderSource(n,o),a.compileShader(n),a.attachShader(this.program,n),o=a.createShader(a.VERTEX_SHADER),a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(o,l),a.compileShader(o),a.attachShader(this.program,o),this.attributes={};var f={};this.numAttributes=u.length;for(var m=0;m<this.numAttributes;m++)u[m]&&(a.bindAttribLocation(this.program,m,u[m]),this.attributes[u[m]]=m);a.linkProgram(this.program),a.deleteShader(o),a.deleteShader(n);for(var g=0;g<c.length;g++){var y,v=c[g];!v||f[v]||(y=a.getUniformLocation(this.program,v))&&(f[v]=y)}this.fixedUniforms=i(e,f),this.binderUniforms=r?r.getUniforms(e,f):[]}}function Hr(e,t,n){var r=1/Hn(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ);return i=(t=n.tileSize*Math.pow(2,t.transform.tileZoom)/i)*(n.tileID.canonical.x+n.tileID.wrap*i),t*=n.tileID.canonical.y,{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[i>>16,t>>16],u_pixel_coord_lower:[65535&i,65535&t]}}function Wr(e){return{u_matrix:e}}jr.prototype.bind=function(e,t,n,r,i,o,a,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);var c=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||c?this.freshBind(t,n,r,i,o,a,s):(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},jr.prototype.freshBind=function(e,t,n,r,i,o,a){var s=e.numAttributes,l=this.context,u=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),c=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else for(var c=l.currentNumAttributes||0,p=s;p<c;p++)u.disableVertexAttribArray(p);t.enableAttributes(u,e);for(var h=0,d=n;h<d.length;h+=1)d[h].enableAttributes(u,e);o&&o.enableAttributes(u,e),a&&a.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);for(var f=0,m=n;f<m.length;f+=1){var g=m[f];g.bind(),g.setVertexAttribPointers(u,e,i)}o&&(o.bind(),o.setVertexAttribPointers(u,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,e,i)),l.currentNumAttributes=s},jr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},qr.prototype.draw=function(e,t,n,r,i,o,a,s,l,u,c,p,h,d,f,m){var g=e.gl;if(!this.failedToCreate){for(var y in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);d&&d.setUniforms(e,this.binderUniforms,p,{zoom:h});for(var v=((h={})[g.LINES]=2,h[g.TRIANGLES]=3,h[g.LINE_STRIP]=1,h[t]),_=0,b=c.get();_<b.length;_+=1){var x=b[_],w=x.vaos||(x.vaos={});(w[s]||(w[s]=new jr)).bind(e,this,l,d?d.getPaintVertexBuffers():[],u,x.vertexOffset,f,m),g.drawElements(t,x.primitiveLength*v,g.UNSIGNED_SHORT,x.primitiveOffset*v*2)}}};var Gr=function(t,n,r,i){var o=n.style.light,a=[(s=o.properties.get("position")).x,s.y,s.z],s=e.create$1();return"viewport"===o.properties.get("anchor")&&e.fromRotation(s,-n.transform.angle),e.transformMat3(a,a,s),s=o.properties.get("color"),{u_matrix:t,u_lightpos:a,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+r,u_opacity:i}},Zr=function(t,n,r,i,o,a,s){return e.extend(Gr(t,n,r,i),Hr(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Kr=function(e){return{u_matrix:e}},Xr=function(t,n,r,i){return e.extend(Kr(t),Hr(r,n,i))},Yr=function(e,t){return{u_matrix:e,u_world:t}},Jr=function(t,n,r,i,o){return e.extend(Xr(t,n,r,i),{u_world:o})},$r=function(e,t,n){var r=Hn(n,1,t.zoom),i=Math.pow(2,t.zoom-n.tileID.overscaledZ);return n=n.tileID.overscaleFactor(),{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*i),t.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:n}},Qr=function(e,t,n){return{u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},ei=function(e,t,n){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n=void 0===n?1:n}},ti=function(t,n,r,i){var o=e.create();return e.ortho(o,0,t.width,t.height,0,0,1),{u_matrix:o,u_world:[(t=t.context.gl).drawingBufferWidth,t.drawingBufferHeight],u_image:r,u_color_ramp:i,u_opacity:n.paint.get("heatmap-opacity")}},ni=function(t,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);var l=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(n.tileID.toUnwrapped(),l),u_image:0,u_latrange:(l=n.tileID,n=Math.pow(2,l.canonical.z),l=l.canonical.y,[new e.MercatorCoordinate(0,l/n).toLngLat().lat,new e.MercatorCoordinate(0,(l+1)/n).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}},ri=function(t,n){var r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.getUnpackVector()}},ii=function(t,n,r){var i=t.transform;return{u_matrix:ai(t,n,r),u_ratio:1/Hn(n,1,i.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}};function oi(e,t){return 1/Hn(e,1,t.tileZoom)}function ai(e,t,n){return e.translatePosMatrix(t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function si(e,t,n,r,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:0<(r=i.paint.get("raster-saturation"))?1-1/(1.001-r):-r,u_contrast_factor:0<(r=i.paint.get("raster-contrast"))?1/(1-r):1+r,u_spin_weights:function(e){e*=Math.PI/180;var t=Math.sin(e);return[(2*(e=Math.cos(e))+1)/3,(-Math.sqrt(3)*t-e+1)/3,(Math.sqrt(3)*t-e+1)/3]}(i.paint.get("raster-hue-rotate"))}}function li(t,n,r,i,o,a){return e.extend((s=i,l=a,c=o,p=(u=r).imageManager.getPattern(s.from.toString()),i=u.imageManager.getPattern(s.to.toString()),o=(a=u.imageManager.getPixelSize()).width,r=a.height,s=Math.pow(2,c.tileID.overscaledZ),s=(a=c.tileSize*Math.pow(2,u.transform.tileZoom)/s)*(c.tileID.canonical.x+c.tileID.wrap*s),a*=c.tileID.canonical.y,{u_image:0,u_pattern_tl_a:p.tl,u_pattern_br_a:p.br,u_pattern_tl_b:i.tl,u_pattern_br_b:i.br,u_texsize:[o,r],u_mix:l.t,u_pattern_size_a:p.displaySize,u_pattern_size_b:i.displaySize,u_scale_a:l.fromScale,u_scale_b:l.toScale,u_tile_units_to_pixels:1/Hn(c,1,u.transform.tileZoom),u_pixel_coord_upper:[s>>16,a>>16],u_pixel_coord_lower:[65535&s,65535&a]}),{u_matrix:t,u_opacity:n});var s,l,u,c,p}var ui,ci=function(e,t,n,r,i,o,a,s,l,u){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},pi=function(t,n,r,i,o,a,s,l,u,c,p){var h=o.transform;return e.extend(ci(t,n,r,i,o,a,s,l,u,c),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+p})},hi=function(t,n,r,i,o,a,s,l,u,c){return e.extend(pi(t,n,r,i,o,a,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},di={fillExtrusion:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fillExtrusionPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fill:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},fillPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},fillOutline:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}},fillOutlinePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},circle:function(t,n){return{u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,n.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},collisionBox:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,n.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,n.u_overscale_factor)}},collisionCircle:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}},debug:function(t,n){return{u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}},clippingMask:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmap:function(t,n){return{u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmapTexture:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}},hillshade:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}},hillshadePrepare:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}},line:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels)}},lineGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image),u_image_height:new e.Uniform1f(t,n.u_image_height)}},linePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},lineSDF:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}},raster:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}},symbolIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}},symbolSDF:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},symbolTextAndIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},background:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}},backgroundPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}}};function fi(t,n,r,i,o,a,s){for(var l=t.context,u=l.gl,c=t.useProgram("collisionBox"),p=[],h=0,d=0,f=0;f<i.length;f++){var m,g,y,v,_=i[f],b=n.getTile(_),x=b.getBucket(r);x&&(m=_.posMatrix,0===o[0]&&0===o[1]||(m=t.translatePosMatrix(_.posMatrix,b,o,a)),g=s?x.textCollisionBox:x.iconCollisionBox,0<(y=x.collisionCircleArray).length&&(v=e.create(),_=m,e.mul(v,x.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(v,v,x.placementViewportMatrix),p.push({circleArray:y,circleOffset:d,transform:_,invTransform:v}),d=h+=y.length/4),g&&c.draw(l,u.LINES,nn.disabled,rn.disabled,t.colorModeForRenderPass(),an.disabled,$r(m,t.transform,b),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,t.transform.zoom,null,null,g.collisionVertexBuffer))}if(s&&p.length){var w=t.useProgram("collisionCircle"),S=new e.StructArrayLayout2f1f2i16;S.resize(4*h),S._trim();for(var E=0,C=0,T=p;C<T.length;C+=1)for(var I=T[C],k=0;k<I.circleArray.length/4;k++){var P=4*k,A=I.circleArray[0+P],M=I.circleArray[1+P],O=I.circleArray[2+P];P=I.circleArray[3+P],S.emplace(E++,A,M,O,P,0),S.emplace(E++,A,M,O,P,1),S.emplace(E++,A,M,O,P,2),S.emplace(E++,A,M,O,P,3)}(!ui||ui.length<2*h)&&(ui=function(t){var n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[0+o]=4*i+0,r.uint16[1+o]=4*i+1,r.uint16[2+o]=4*i+2,r.uint16[3+o]=4*i+2,r.uint16[4+o]=4*i+3,r.uint16[5+o]=4*i+0}return r}(h));for(var L=l.createIndexBuffer(ui,!0),R=l.createVertexBuffer(S,e.collisionCircleLayout.members,!0),D=0,z=p;D<z.length;D+=1){var N=z[D],B=Qr(N.transform,N.invTransform,t.transform);w.draw(l,u.TRIANGLES,nn.disabled,rn.disabled,t.colorModeForRenderPass(),an.disabled,B,r.id,R,L,e.SegmentVector.simpleSegment(0,2*N.circleOffset,N.circleArray.length,N.circleArray.length/2),null,t.transform.zoom,null,null,null)}R.destroy(),L.destroy()}}var mi=e.identity(new Float32Array(16));function gi(t,n,r,i,o,a,s,l,u,c,p,h){for(var d=t.context,f=d.gl,m=t.transform,g="map"===l,y="map"===u,v=g&&"point"!==r.layout.get("symbol-placement"),_=g&&!y&&!v,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=!1,w=t.depthModeForSublayer(0,nn.ReadOnly),S=r.layout.get("text-variable-anchor"),E=[],C=0,T=i;C<T.length;C+=1){var I=T[C],k=(q=n.getTile(I)).getBucket(r);if(k){var P=o?k.text:k.icon;if(P&&P.segments.get().length){var A=P.programConfigurations.get(r.id),M=o||k.sdfIcons,O=o?k.textSizeData:k.iconSizeData,L=y||0!==m.pitch,R=t.useProgram((j=M,F=o,k.iconsInText&&F?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"),A),D=e.evaluateSizeForZoom(O,m.zoom),z=void 0,N=[0,0],B=void 0,F=void 0,j=null;A=void 0,o?(B=q.glyphAtlasTexture,F=f.LINEAR,z=q.glyphAtlasTexture.size,k.iconsInText&&(N=q.imageAtlasTexture.size,j=q.imageAtlasTexture,U="composite"===O.kind||"camera"===O.kind,A=L||t.options.rotating||t.options.zooming||U?f.LINEAR:f.NEAREST)):(V=1!==r.layout.get("icon-size").constantOr(0)||k.iconsNeedLinear,B=q.imageAtlasTexture,F=M||t.options.rotating||t.options.zooming||V||L?f.LINEAR:f.NEAREST,z=q.imageAtlasTexture.size);var U=Hn(q,1,t.transform.zoom),V=Mn(I.posMatrix,y,g,t.transform,U);L=On(I.posMatrix,y,g,t.transform,U),U=S&&k.hasTextData(),U="none"!==r.layout.get("icon-text-fit")&&U&&k.hasIconData(),v&&function(t,n,r,i,o,a,s,l){var u=i?t.textSizeData:t.iconSizeData,c=e.evaluateSizeForZoom(u,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],h=(i?t.text:t.icon).dynamicLayoutVertexArray;h.clear();for(var d=t.lineVertexArray,f=(i?t.text:t.icon).placedSymbolArray,m=r.transform.width/r.transform.height,g=!1,y=0;y<f.length;y++){var v,_,b,x,w,S=f.get(y);S.hidden||S.writingMode===e.WritingMode.vertical&&!g?Un(S.numGlyphs,h):(g=!1,b=[S.anchorX,S.anchorY,0,1],e.transformMat4(b,b,n),_=p,x=void 0,x=(v=b)[0]/v[3],v=v[1]/v[3],x>=-_[0]&&x<=_[0]&&v>=-_[1]&&v<=_[1]?(w=Rn(r.transform.cameraToCenterDistance,b[3]),x=e.evaluateSizeForFeature(u,c,S),v=s?x/w:x*w,b=Ln(_=new e.Point(S.anchorX,S.anchorY),o).point,g=(w=Nn(S,v,!(x={}),l,n,o,a,t.glyphOffsetArray,d,h,b,_,x,m)).useVertical,(w.notEnoughRoom||g||w.needsFlipping&&Nn(S,v,!0,l,n,o,a,t.glyphOffsetArray,d,h,b,_,x,m).notEnoughRoom)&&Un(S.numGlyphs,h)):Un(S.numGlyphs,h))}(i?t.text:t.icon).dynamicLayoutVertexBuffer.updateData(h)}(k,I.posMatrix,t,o,V,L,y,c),I=t.translatePosMatrix(I.posMatrix,q,a,s),V=v||o&&S||U?mi:V,L=t.translatePosMatrix(L,q,a,s,!0);var q=M&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),H={program:R,buffers:P,uniformValues:M?k.iconsInText?hi(O.kind,D,_,y,t,I,V,L,z,N):pi(O.kind,D,_,y,t,I,V,L,o,z,!0):ci(O.kind,D,_,y,t,I,V,L,o,z),atlasTexture:B,atlasTextureIcon:j,atlasInterpolation:F,atlasInterpolationIcon:A,isSDF:M,hasHalo:q};if(b&&k.canOverlap){x=!0;for(var W=0,G=P.segments.get();W<G.length;W+=1){var Z=G[W];E.push({segments:new e.SegmentVector([Z]),sortKey:Z.sortKey,state:H})}}else E.push({segments:P.segments,sortKey:0,state:H})}}}x&&E.sort((function(e,t){return e.sortKey-t.sortKey}));for(var K=0,X=E;K<X.length;K+=1){var Y,J=X[K],$=J.state;d.activeTexture.set(f.TEXTURE0),$.atlasTexture.bind($.atlasInterpolation,f.CLAMP_TO_EDGE),$.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),$.atlasTextureIcon&&$.atlasTextureIcon.bind($.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),$.isSDF&&(Y=$.uniformValues,$.hasHalo&&(Y.u_is_halo=1,yi($.buffers,J.segments,r,t,$.program,w,p,h,Y)),Y.u_is_halo=0),yi($.buffers,J.segments,r,t,$.program,w,p,h,$.uniformValues)}}function yi(e,t,n,r,i,o,a,s,l){var u=r.context,c=u.gl;i.draw(u,c.TRIANGLES,o,a,s,an.disabled,l,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function vi(e,t,n,r,i,o,a){for(var s,l=e.context.gl,u=n.paint.get("fill-pattern"),c=u&&u.constantOr(1),p=n.getCrossfadeParameters(),h=a?(s=c&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l.LINES):(s=c?"fillPattern":"fill",l.TRIANGLES),d=0,f=r;d<f.length;d+=1){var m,g,y,v,_,b,x,w,S=f[d],E=t.getTile(S);c&&!E.patternsLoaded()||(m=E.getBucket(n))&&(g=m.programConfigurations.get(n.id),y=e.useProgram(s,g),c&&(e.context.activeTexture.set(l.TEXTURE0),E.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePaintBuffers(p)),(v=u.constantOr(null))&&E.imageAtlas&&(w=(x=E.imageAtlas).patternPositions[v.to.toString()],x=x.patternPositions[v.from.toString()],w&&x&&g.setConstantPatternPositions(w,x)),w=e.translatePosMatrix(S.posMatrix,E,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor")),w=a?(_=m.indexBuffer2,b=m.segments2,x=[l.drawingBufferWidth,l.drawingBufferHeight],"fillOutlinePattern"===s&&c?Jr(w,e,p,E,x):Yr(w,x)):(_=m.indexBuffer,b=m.segments,c?Xr(w,e,p,E):Kr(w)),y.draw(e.context,h,i,e.stencilModeForClipping(S),o,an.disabled,w,n.id,m.layoutVertexBuffer,_,b,n.paint,e.transform.zoom,g))}}function _i(e,t,n,r,i,o,a){for(var s=e.context,l=s.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=n.getCrossfadeParameters(),h=n.paint.get("fill-extrusion-opacity"),d=0,f=r;d<f.length;d+=1){var m,g,y,v,_,b=f[d],x=t.getTile(b),w=x.getBucket(n);w&&(m=w.programConfigurations.get(n.id),g=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",m),c&&(e.context.activeTexture.set(l.TEXTURE0),x.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),m.updatePaintBuffers(p)),(y=u.constantOr(null))&&x.imageAtlas&&(v=(_=x.imageAtlas).patternPositions[y.to.toString()],_=_.patternPositions[y.from.toString()],v&&_&&m.setConstantPatternPositions(v,_)),v=e.translatePosMatrix(b.posMatrix,x,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),_=n.paint.get("fill-extrusion-vertical-gradient"),_=c?Zr(v,e,_,h,b,p,x):Gr(v,e,_,h),g.draw(s,s.gl.TRIANGLES,i,o,a,an.backCCW,_,n.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,n.paint,e.transform.zoom,m))}}var bi=new e.Color(1,0,0,1),xi=new e.Color(0,1,0,1),wi=new e.Color(0,0,1,1),Si=new e.Color(1,0,1,1),Ei=new e.Color(0,1,1,1);function Ci(e){var t=e.transform.padding;Ti(e,e.transform.height-(t.top||0),3,bi),Ti(e,t.bottom||0,3,xi),Ii(e,t.left||0,3,wi),Ii(e,e.transform.width-(t.right||0),3,Si);var n,r=e.transform.centerPoint;ki(n=e,(t=r.x)-1,(e=e.transform.height-r.y)-10,2,20,r=Ei),ki(n,t-10,e-1,20,2,r)}function Ti(e,t,n,r){ki(e,0,t+n/2,e.transform.width,n,r)}function Ii(e,t,n,r){ki(e,t-n/2,0,n,e.transform.height,r)}function ki(t,n,r,i,o,a){var s=t.context;(t=s.gl).enable(t.SCISSOR_TEST),t.scissor(n*e.browser.devicePixelRatio,r*e.browser.devicePixelRatio,i*e.browser.devicePixelRatio,o*e.browser.devicePixelRatio),s.clear({color:a}),t.disable(t.SCISSOR_TEST)}function Pi(e,t){this.context=new sn(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=un.maxUnderzooming+un.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gr,this.gpuTimers={}}var Ai={symbol:function(t,n,r,i,o){var a,s;"translucent"===t.renderPass&&(a=rn.disabled,s=t.colorModeForRenderPass(),r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){for(var l=n.transform,u="map"===o,c="map"===a,p=0,h=t;p<h.length;p+=1){var d,f,m,g=h[p],y=i.getTile(g),v=y.getBucket(r);v&&v.text&&v.text.segments.get().length&&(f=v.textSizeData,d=e.evaluateSizeForZoom(f,l.zoom),m=Hn(y,1,n.transform.zoom),f=Mn(g.posMatrix,c,u,n.transform,m),m="none"!==r.layout.get("icon-text-fit")&&v.hasIconData(),d&&(y=Math.pow(2,l.zoom-y.tileID.overscaledZ),function(t,n,r,i,o,a,s,l,u,c,p){var h=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,m={};d.clear();for(var g=0;g<h.length;g++){var y=h.get(g),v=t.allowVerticalPlacement&&!y.placedOrientation;if(S=y.hidden||!y.crossTileID||v?null:i[y.crossTileID]){var _=new e.Point(y.anchorX,y.anchorY),b=Ln(_,r?l:s),x=Rn(a.cameraToCenterDistance,b.signedDistanceFromCamera),w=o.evaluateSizeForFeature(t.textSizeData,c,y)*x/e.ONE_EM;r&&(w*=t.tilePixelRatio/u);for(var S,E=S.width,C=S.height,T=(w=function(t,n,r,i,o,a){var s;return n=-((s=e.getAnchorAlignment(t)).horizontalAlign-.5)*n,r=-((s=s.verticalAlign)-.5)*r,i=e.evaluateVariableOffset(t,i),new e.Point((n/o+i[0])*a,(r/o+i[1])*a)}(v=S.anchor,E,C,x=S.textOffset,S=S.textBoxScale,w),r?Ln(_.add(w),s).point:b.point.add(n?w.rotate(-a.angle):w)),I=t.allowVerticalPlacement&&y.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,k=0;k<y.numGlyphs;k++)e.addDynamicAttributes(d,T,I);p&&0<=y.associatedIconIndex&&(m[y.associatedIconIndex]={shiftedAnchor:T,angle:I})}else Un(y.numGlyphs,d)}if(p){f.clear();for(var P=t.icon.placedSymbolArray,A=0;A<P.length;A++){var M=P.get(A);if(M.hidden)Un(M.numGlyphs,f);else{var O=m[A];if(O)for(var L=0;L<M.numGlyphs;L++)e.addDynamicAttributes(f,O.shiftedAnchor,O.angle);else Un(M.numGlyphs,f)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(d)}(v,u,c,s,e.symbolSize,l,f,g.posMatrix,y,d,m)))}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&gi(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&gi(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(fi(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),fi(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1)))},circle:function(t,n,r,i){if("translucent"===t.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var u,c,p,h,d=t.context,f=d.gl,m=t.depthModeForSublayer(0,nn.ReadOnly),g=rn.disabled,y=t.colorModeForRenderPass(),v=[],_=0;_<i.length;_++){var b=i[_],x=n.getTile(b),w=x.getBucket(r);if(w){var S=w.programConfigurations.get(r.id),E={programConfiguration:S,program:t.useProgram("circle",S),layoutVertexBuffer:w.layoutVertexBuffer,indexBuffer:w.indexBuffer,uniformValues:(u=b,c=x,p=r,b=S=h=void 0,b=(x=t).transform,S="map"===p.paint.get("circle-pitch-alignment")?(h=!0,[S=Hn(c,1,b.zoom),S]):(h=!1,b.pixelsToGLUnits),{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+("map"===p.paint.get("circle-pitch-scale")),u_matrix:x.translatePosMatrix(u.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+h,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:S})};if(l)for(var C=0,T=w.segments.get();C<T.length;C+=1){var I=T[C];v.push({segments:new e.SegmentVector([I]),sortKey:I.sortKey,state:E})}else v.push({segments:w.segments,sortKey:0,state:E})}}l&&v.sort((function(e,t){return e.sortKey-t.sortKey}));for(var k=0,P=v;k<P.length;k+=1){var A=(R=(D=P[k]).state).programConfiguration,M=R.program,O=R.layoutVertexBuffer,L=R.indexBuffer,R=R.uniformValues,D=D.segments;M.draw(d,f.TRIANGLES,m,g,y,an.disabled,R,r.id,O,L,D,r.paint,t.transform.zoom,A)}}}},heatmap:function(t,n,r,i){var o,a,s,l,u;if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var c=t.context,p=c.gl,h=rn.disabled,d=new on([p.ONE,p.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i,o=n.heatmapFbo;o?(r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),e.bindFramebuffer.set(o.framebuffer)):(i=r.createTexture(),r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),o=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){var i=e.gl;e=e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e,null),r.colorAttachment.set(n)}(e,t,i,o))}(c,t,r),c.clear({color:e.Color.transparent});for(var f=0;f<i.length;f++){var m,g,y,v,_,b=i[f];n.hasRenderableParent(b)||(g=(m=n.getTile(b)).getBucket(r))&&(y=g.programConfigurations.get(r.id),v=t.useProgram("heatmap",y),_=t.transform.zoom,v.draw(c,p.TRIANGLES,nn.disabled,h,d,an.disabled,(v=b.posMatrix,b=m,m=_,_=r.paint.get("heatmap-intensity"),{u_matrix:v,u_extrude_scale:Hn(b,1,m),u_intensity:_}),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,y))}c.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),a=r,l=(s=(o=t).context).gl,(u=a.heatmapFbo)&&(s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get()),s.activeTexture.set(l.TEXTURE1),(a.colorRampTexture||(a.colorRampTexture=new e.Texture(s,a.colorRamp,l.RGBA))).bind(l.LINEAR,l.CLAMP_TO_EDGE),o.useProgram("heatmapTexture").draw(s,l.TRIANGLES,nn.disabled,rn.disabled,o.colorModeForRenderPass(),an.disabled,ti(o,a,0,1),a.id,o.viewportBuffer,o.quadTriangleIndexBuffer,o.viewportSegments,a.paint,o.transform.zoom)))},line:function(t,n,r,i){if("translucent"===t.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s,l,u,c,p,h,d=t.depthModeForSublayer(0,nn.ReadOnly),f=t.colorModeForRenderPass(),m=r.paint.get("line-dasharray"),g=r.paint.get("line-pattern"),y=g.constantOr(1),v=r.paint.get("line-gradient"),_=r.getCrossfadeParameters(),b=y?"linePattern":m?"lineSDF":v?"lineGradient":"line",x=t.context,w=x.gl,S=!0,E=0,C=i;E<C.length;E+=1){var T,I,k,P,A,M,O,L,R,D,z,N=C[E],B=n.getTile(N);y&&!B.patternsLoaded()||(T=B.getBucket(r))&&(I=T.programConfigurations.get(r.id),A=t.context.program.get(),k=t.useProgram(b,I),D=S||k.program!==A,(P=g.constantOr(null))&&B.imageAtlas&&(A=(M=B.imageAtlas).patternPositions[P.to.toString()],M=M.patternPositions[P.from.toString()],A&&M&&I.setConstantPatternPositions(A,M)),O=y?(u=r,c=_,h=p=void 0,h=oi(l=B,p=(s=t).transform),{u_matrix:ai(s,l,u),u_texsize:l.imageAtlasTexture.size,u_ratio:1/Hn(l,1,p.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[h,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}):m?(M=B,s=r,u=m,R=_,c=L=O=c=h=l=L=void 0,L=(p=t).transform,l=p.lineAtlas,h=oi(M,L),c="round"===s.layout.get("line-cap"),O=l.getDash(u.from,c),L=l.getDash(u.to,c),u=O.width*R.fromScale,c=L.width*R.toScale,e.extend(ii(p,M,s),{u_patternscale_a:[h/u,-O.height/2],u_patternscale_b:[h/c,-L.height/2],u_sdfgamma:l.width/(256*Math.min(u,c)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:L.y,u_mix:R.t})):v?(z=T.lineClipsArray.length,e.extend(ii(t,B,r),{u_image:0,u_image_height:z})):ii(t,B,r),y?(x.activeTexture.set(w.TEXTURE0),B.imageAtlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),I.updatePaintBuffers(_)):m&&(D||t.lineAtlas.dirty)?(x.activeTexture.set(w.TEXTURE0),t.lineAtlas.bind(x)):v&&(R=(L=T.gradients[r.id]).texture,r.gradientVersion!==L.version&&(z=256,r.stepInterpolant&&(B=n.getSource().maxzoom,D=N.canonical.z===B?Math.ceil(1<<t.transform.maxZoom-N.canonical.z):1,B=T.maxLineLength/e.EXTENT,z=e.clamp(e.nextPowerOfTwo(1024*B*D),256,x.maxTextureSize)),L.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:z,image:L.gradient||void 0,clips:T.lineClipsArray}),L.texture?L.texture.update(L.gradient):L.texture=new e.Texture(x,L.gradient,w.RGBA),L.version=r.gradientVersion,R=L.texture),x.activeTexture.set(w.TEXTURE0),R.bind(r.stepInterpolant?w.NEAREST:w.LINEAR,w.CLAMP_TO_EDGE)),k.draw(x,w.TRIANGLES,d,t.stencilModeForClipping(N),f,an.disabled,O,r.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,r.paint,t.transform.zoom,I,T.layoutVertexBuffer2),S=!1)}}},fill:function(t,n,r,i){var o,a,s,l=r.paint.get("fill-color"),u=r.paint.get("fill-opacity");0!==u.constantOr(1)&&(o=t.colorModeForRenderPass(),a=r.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!a.constantOr(1)&&1===l.constantOr(e.Color.transparent).a&&1===u.constantOr(0)?"opaque":"translucent",t.renderPass===u&&(s=t.depthModeForSublayer(1,"opaque"===t.renderPass?nn.ReadWrite:nn.ReadOnly),vi(t,n,r,i,s,o,!1)),"translucent"===t.renderPass&&r.paint.get("fill-antialias")&&(s=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,nn.ReadOnly),vi(t,n,r,i,s,o,!0)))},"fill-extrusion":function(e,t,n,r){var i,o=n.paint.get("fill-extrusion-opacity");0!==o&&"translucent"===e.renderPass&&(i=new nn(e.context.gl.LEQUAL,nn.ReadWrite,e.depthRangeFor3D),1!==o||n.paint.get("fill-extrusion-pattern").constantOr(1)?(_i(e,t,n,r,i,rn.disabled,on.disabled),_i(e,t,n,r,i,e.stencilModeFor3D(),e.colorModeForRenderPass())):(o=e.colorModeForRenderPass(),_i(e,t,n,r,i,rn.disabled,o)))},hillshade:function(t,n,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var o,a,s,l,u,c,p,h,d=t.context,f=t.depthModeForSublayer(0,nn.ReadOnly),m=t.colorModeForRenderPass(),g=(i="translucent"===t.renderPass?t.stencilConfigForOverlap(i):[{},i])[0],y=0,v=i[1];y<v.length;y+=1){var _=v[y],b=n.getTile(_);b.needsHillshadePrepare&&"offscreen"===t.renderPass?function(t,n,r,i,o,a){var s,l,u,c,p=t.context,h=p.gl,d=n.dem;d&&d.data&&(s=d.dim,l=d.stride,c=d.getPixels(),p.activeTexture.set(h.TEXTURE1),p.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(l),n.demTexture?((u=n.demTexture).update(c,{premultiply:!1}),u.bind(h.NEAREST,h.CLAMP_TO_EDGE)):(n.demTexture=new e.Texture(p,c,h.RGBA,{premultiply:!1}),n.demTexture.bind(h.NEAREST,h.CLAMP_TO_EDGE)),p.activeTexture.set(h.TEXTURE0),(u=n.fbo)||((c=new e.Texture(p,{width:s,height:s,data:null},h.RGBA)).bind(h.LINEAR,h.CLAMP_TO_EDGE),(u=n.fbo=p.createFramebuffer(s,s,!0)).colorAttachment.set(c.texture)),p.bindFramebuffer.set(u.framebuffer),p.viewport.set([0,0,s,s]),t.useProgram("hillshadePrepare").draw(p,h.TRIANGLES,i,o,a,an.disabled,ri(n.tileID,d),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1)}(t,b,r,f,rn.disabled,m):"translucent"===t.renderPass&&(o=t,a=b,s=r,l=f,u=g[_.overscaledZ],c=m,_=b=h=p=void 0,b=(h=o.context).gl,(_=a.fbo)&&(p=o.useProgram("hillshade"),h.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,_.colorAttachment.get()),a=ni(o,a,s),p.draw(h,b.TRIANGLES,l,u,c,an.disabled,a,s.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)))}d.viewport.set([0,0,t.width,t.height])}},raster:function(t,n,r,i){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")&&i.length)for(var o=t.context,a=o.gl,s=n.getSource(),l=t.useProgram("raster"),u=t.colorModeForRenderPass(),c=(i=s instanceof H?[{},i]:t.stencilConfigForOverlap(i))[0],p=(i=i[1])[i.length-1].overscaledZ,h=!t.options.moving,d=0,f=i;d<f.length;d+=1){var m=f[d],g=t.depthModeForSublayer(m.overscaledZ-p,1===r.paint.get("raster-opacity")?nn.ReadWrite:nn.ReadOnly,a.LESS),y=n.getTile(m),v=t.transform.calculatePosMatrix(m.toUnwrapped(),h);y.registerFadeDuration(r.paint.get("raster-fade-duration"));var _=n.findLoadedParent(m,0),b=function(t,n,r,i,o){if(0<(s=i.paint.get("raster-fade-duration"))){var a=e.browser.now(),s=(i=(a-t.timeAdded)/s,n?(a-n.timeAdded)/s:-1);return r=r.getSource(),r=o.coveringZoomLevel({tileSize:r.tileSize,roundZoom:r.roundZoom}),s=(r=!n||Math.abs(n.tileID.overscaledZ-r)>Math.abs(t.tileID.overscaledZ-r))&&t.refreshedUponExpiration?1:e.clamp(r?i:1-s,0,1),t.refreshedUponExpiration&&1<=i&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-s}:{opacity:s,mix:0}}return{opacity:1,mix:0}}(y,_,n,r,t.transform),x=void 0,w=void 0,S="nearest"===r.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;o.activeTexture.set(a.TEXTURE0),y.texture.bind(S,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.activeTexture.set(a.TEXTURE1),_?(_.texture.bind(S,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,_.tileID.overscaledZ-y.tileID.overscaledZ),w=[y.tileID.canonical.x*x%1,y.tileID.canonical.y*x%1]):y.texture.bind(S,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),b=si(v,w||[0,0],x||1,b,r),s instanceof H?l.draw(o,a.TRIANGLES,g,rn.disabled,u,an.disabled,b,r.id,s.boundsBuffer,t.quadTriangleIndexBuffer,s.boundsSegments):l.draw(o,a.TRIANGLES,g,c[m.overscaledZ],u,an.disabled,b,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(e,t,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=e.context,a=o.gl,s=(f=e.transform).tileSize,l=n.paint.get("background-pattern");if(!e.isPatternMissing(l)){var u=!l&&1===r.a&&1===i&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===u){var c=rn.disabled,p=e.depthModeForSublayer(0,"opaque"==u?nn.ReadWrite:nn.ReadOnly),h=e.colorModeForRenderPass(),d=e.useProgram(l?"backgroundPattern":"background"),f=f.coveringTiles({tileSize:s});l&&(o.activeTexture.set(a.TEXTURE0),e.imageManager.bind(e.context));for(var m=n.getCrossfadeParameters(),g=0,y=f;g<y.length;g+=1){var v=y[g],_=e.transform.calculatePosMatrix(v.toUnwrapped());_=l?li(_,i,e,l,{tileID:v,tileSize:s},m):{u_matrix:_,u_opacity:i,u_color:r},d.draw(o,a.TRIANGLES,p,c,h,an.disabled,_,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(t,n,r){for(var i=0;i<r.length;i++)!function(t,n,r){var i=t.context,o=i.gl,a=r.posMatrix,s=t.useProgram("debug"),l=nn.disabled,u=rn.disabled,c=t.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,l,u,c,an.disabled,ei(a,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments),c=(p=n.getTileByID(r.key).latestRawTileData)&&p.byteLength||0;var p=Math.floor(c/1024);c=n.getTile(r).tileSize,n=512/Math.min(c,512)*(r.overscaledZ/t.transform.zoom)*.5,c=r.canonical.toString(),r.overscaledZ!==r.canonical.z&&(c+=" => "+r.overscaledZ),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,c+" "+p+"kb"),s.draw(i,o.TRIANGLES,l,u,on.alphaBlended,an.disabled,ei(a,e.Color.transparent,n),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}(t,n,r[i])},custom:function(e,t,n){var r,i=e.context;n=n.implementation,"offscreen"===e.renderPass?(r=n.prerender)&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),r.call(n,i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState()):"translucent"===e.renderPass&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),i.setStencilMode(rn.disabled),r="3d"===n.renderingMode?new nn(e.context.gl.LEQUAL,nn.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,nn.ReadOnly),i.setDepthMode(r),n.render(i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState(),i.bindFramebuffer.set(null))}};function Mi(e,t){this.points=e,this.planes=t}function Oi(t,n){this.min=t,this.max=n,this.center=e.scale$2([],e.add([],this.min,this.max),.5)}function Li(e,t,n,r){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}function Ri(t,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Li,this._posMatrixCache={},this._alignedPosMatrixCache={}}function Di(t){function n(){a=null,o&&(r(),a=setTimeout(n,i),o=!1)}var r,i,o,a;this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(r=this._updateHashUnthrottled.bind(this),o=!(i=300),a=null,function(){return o=!0,a||n(),a})}function zi(e){this._map=e,this.clear()}Pi.prototype.resize=function(t,n){if(this.width=t*e.browser.devicePixelRatio,this.height=n*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1){var o=i[r];this.style._layers[o].resize()}},Pi.prototype.setup=function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,Er.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2),(n=new e.StructArrayLayout2i4).emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(n,Er.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5),(n=new e.StructArrayLayout4i8).emplaceBack(0,0,0,0),n.emplaceBack(e.EXTENT,0,e.EXTENT,0),n.emplaceBack(0,e.EXTENT,0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(n,q.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2),(n=new e.StructArrayLayout2i4).emplaceBack(0,0),n.emplaceBack(1,0),n.emplaceBack(0,1),n.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(n,Er.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2),(n=new e.StructArrayLayout1ui2).emplaceBack(0),n.emplaceBack(1),n.emplaceBack(3),n.emplaceBack(2),n.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(n),(n=new e.StructArrayLayout3ui6).emplaceBack(0,1,2),n.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(n),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA),t=this.context.gl,this.stencilClearMode=new rn({func:t.ALWAYS,mask:0},0,255,t.ZERO,t.ZERO,t.ZERO)},Pi.prototype.clearStencil=function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,nn.disabled,this.stencilClearMode,on.disabled,an.disabled,Wr(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Pi.prototype._renderTileClippingMasks=function(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var n=this.context,r=n.gl;256<this.nextStencilID+t.length&&this.clearStencil(),n.setColorMode(on.disabled),n.setDepthMode(nn.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,nn.disabled,new rn({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),on.disabled,an.disabled,Wr(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Pi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new rn({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)},Pi.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new rn({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},Pi.prototype.stencilConfigForOverlap=function(e){var t=this.context.gl,n=e.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(1<i){this.currentStencilSource=void 0,256<this.nextStencilID+i&&this.clearStencil();for(var o={},a=0;a<i;a++)o[a+r]=new rn({func:t.GEQUAL,mask:255},a+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=i,[o,n]}return[((e={})[r]=rn.disabled,e),n]},Pi.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new on([t.CONSTANT_COLOR,t.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?on.unblended:on.alphaBlended},Pi.prototype.depthModeForSublayer=function(e,t,n){return this.opaquePassEnabledForLayer()?(e=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,new nn(n||this.context.gl.LEQUAL,t,[e,e])):nn.disabled},Pi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Pi.prototype.render=function(t,n){var r=this;this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var i,o=this.style._order,a=this.style.sourceCaches;for(i in a){var s=a[i];s.used&&s.prepare(this.context)}var l,u={},c={},p={};for(l in a){var h=a[l];u[l]=h.getVisibleCoordinates(),c[l]=u[l].slice().reverse(),p[l]=h.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var d=0;d<o.length;d++){var f=o[d];if(this.style._layers[f].is3D()){this.opaquePassCutoff=d;break}}this.renderPass="offscreen";for(var m,g,y=0,v=o;y<v.length;y+=1){var _=v[y],b=this.style._layers[_];b.hasOffscreenPass()&&!b.isHidden(this.transform.zoom)&&(_=c[b.source],"custom"!==b.type&&!_.length||this.renderLayer(this,a[b.source],b,_))}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=o.length-1;0<=this.currentLayer;this.currentLayer--){var x=this.style._layers[o[this.currentLayer]],w=a[x.source],S=u[x.source];this._renderTileClippingMasks(x,S),this.renderLayer(this,w,x,S)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){var E=this.style._layers[o[this.currentLayer]],C=a[E.source],T=("symbol"===E.type?p:c)[E.source];this._renderTileClippingMasks(E,u[E.source]),this.renderLayer(this,C,E,T)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach((function(e){e.source&&!e.isHidden(r.transform.zoom)&&(e.source!==(g&&g.id)&&(g=r.style.sourceCaches[e.source]),(!m||m.getSource().maxzoom<g.getSource().maxzoom)&&(m=g))})),m&&Ai.debug(this,m,m.getVisibleCoordinates())),this.options.showPadding&&Ci(this),this.context.setDefault()},Pi.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||"background"!==n.type&&"custom"!==n.type&&!r.length||(this.id=n.id,this.gpuTimingStart(n),Ai[n.type](e,t,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},Pi.prototype.gpuTimingStart=function(e){var t,n;this.options.gpuTiming&&(t=this.context.extTimerQuery,(n=(n=this.gpuTimers[e.id])||(this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()})).calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query))},Pi.prototype.gpuTimingEnd=function(){var e;this.options.gpuTiming&&(e=this.context.extTimerQuery).endQueryEXT(e.TIME_ELAPSED_EXT)},Pi.prototype.collectGpuTimers=function(){var e=this.gpuTimers;return this.gpuTimers={},e},Pi.prototype.queryGpuTimers=function(e){var t,n={};for(t in e){var r=e[t],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),n[t]=o}return n},Pi.prototype.translatePosMatrix=function(t,n,r,i,o){if(!r[0]&&!r[1])return t;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;return a&&(i=Math.sin(a),a=Math.cos(a),r=[r[0]*a-r[1]*i,r[0]*i+r[1]*a]),n=[o?r[0]:Hn(n,r[0],this.transform.zoom),o?r[1]:Hn(n,r[1],this.transform.zoom),0],r=new Float32Array(16),e.translate(r,t,n),r},Pi.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},Pi.prototype.getTileTexture=function(e){return(e=this._tileTextures[e])&&0<e.length?e.pop():null},Pi.prototype.isPatternMissing=function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString());return e=this.imageManager.getPattern(e.to.toString()),!t||!e},Pi.prototype.useProgram=function(e,t){this.cache=this.cache||{};var n=""+e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new qr(this.context,0,Ur[e],t,di[e],this._showOverdrawInspector)),this.cache[n]},Pi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Pi.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)},Pi.prototype.initDebugOverlayCanvas=function(){var t;null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,t=this.context.gl,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,t.RGBA))},Pi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()},Mi.fromInvProjectionMatrix=function(t,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return e.transformMat4([],n,t)})).map((function(t){return e.scale$1([],t,1/t[3]/n*i)}));return r=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var n=e.sub([],o[t[0]],o[t[1]]),r=e.sub([],o[t[2]],o[t[1]]);return r=e.normalize([],e.cross([],n,r)),t=-e.dot(r,o[t[1]]),r.concat(t)})),new Mi(o,r)},Oi.prototype.quadrant=function(t){for(var n=[t%2==0,t<2],r=e.clone$2(this.min),i=e.clone$2(this.max),o=0;o<n.length;o++)r[o]=(n[o]?this.min:this.center)[o],i[o]=(n[o]?this.center:this.max)[o];return i[2]=this.max[2],new Oi(r,i)},Oi.prototype.distanceX=function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]},Oi.prototype.distanceY=function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]},Oi.prototype.intersects=function(t){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<t.planes.length;i++){for(var o=t.planes[i],a=0,s=0;s<n.length;s++)a+=0<=e.dot$1(o,n[s]);if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(var l=0;l<3;l++){for(var u=Number.MAX_VALUE,c=-Number.MAX_VALUE,p=0;p<t.points.length;p++){var h=t.points[p][l]-this.min[l];u=Math.min(u,h),c=Math.max(c,h)}if(c<0||u>this.max[l]-this.min[l])return 0}return 1},Li.prototype.interpolate=function(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this},Li.prototype.getCenter=function(t,n){return t=e.clamp((this.left+t-this.right)/2,0,t),n=e.clamp((this.top+n-this.bottom)/2,0,n),new e.Point(t,n)},Li.prototype.equals=function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right},Li.prototype.clone=function(){return new Li(this.top,this.bottom,this.left,this.right)},Li.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}},j={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}},Ri.prototype.clone=function(){var e;return(e=new Ri(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies)).tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e},j.minZoom.get=function(){return this._minZoom},j.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},j.maxZoom.get=function(){return this._maxZoom},j.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},j.minPitch.get=function(){return this._minPitch},j.minPitch.set=function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))},j.maxPitch.get=function(){return this._maxPitch},j.maxPitch.set=function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))},j.renderWorldCopies.get=function(){return this._renderWorldCopies},j.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},j.worldSize.get=function(){return this.tileSize*this.scale},j.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},j.size.get=function(){return new e.Point(this.width,this.height)},j.bearing.get=function(){return-this.angle/Math.PI*180},j.bearing.set=function(t){t=-e.wrap(t,-180,180)*Math.PI/180,this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},j.pitch.get=function(){return this._pitch/Math.PI*180},j.pitch.set=function(t){t=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI,this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},j.fov.get=function(){return this._fov/Math.PI*180},j.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},j.zoom.get=function(){return this._zoom},j.zoom.set=function(e){e=Math.min(Math.max(e,this.minZoom),this.maxZoom),this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},j.center.get=function(){return this._center},j.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},j.padding.get=function(){return this._edgeInsets.toJSON()},j.padding.set=function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())},j.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ri.prototype.isPaddingEqual=function(e){return this._edgeInsets.equals(e)},Ri.prototype.interpolatePadding=function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()},Ri.prototype.coveringZoomLevel=function(e){return e=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize)),Math.max(0,e)},Ri.prototype.getVisibleUnwrappedCoordinates=function(t){var n=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),u=s-1;u<=l+1;u++)0!==u&&n.push(new e.UnwrappedTileID(u,t));return n},Ri.prototype.coveringTiles=function(t){var n=this.coveringZoomLevel(t),r=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var i=e.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=Mi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),l=t.minzoom||0;function u(e){return{aabb:new Oi([e*o,0,0],[(e+1)*o,o,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}}this.pitch<=60&&this._edgeInsets.top<.1&&(l=n);var c=[],p=[],h=n,d=t.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var f=1;f<=3;f++)c.push(u(-f)),c.push(u(f));for(c.push(u(0));0<c.length;){var m=c.pop(),g=m.x,y=m.y,v=m.fullyVisible;if(!v){if(0===(b=m.aabb.intersects(s)))continue;v=2===b}var _=m.aabb.distanceX(a),b=m.aabb.distanceY(a);if(_=Math.max(Math.abs(_),Math.abs(b)),b=3+(1<<h-m.zoom)-2,m.zoom===h||b<_&&m.zoom>=l)p.push({tileID:new e.OverscaledTileID(m.zoom===h?d:m.zoom,m.wrap,m.zoom,g,y),distanceSq:e.sqrLen([a[0]-.5-g,a[1]-.5-y])});else for(var x=0;x<4;x++){var w=(g<<1)+x%2,S=(y<<1)+(x>>1);c.push({aabb:m.aabb.quadrant(x),zoom:m.zoom+1,x:w,y:S,wrap:m.wrap,fullyVisible:v})}}return p.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))},Ri.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},j.unmodified.get=function(){return this._unmodified},Ri.prototype.zoomScale=function(e){return Math.pow(2,e)},Ri.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},Ri.prototype.project=function(t){var n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)},Ri.prototype.unproject=function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},j.point.get=function(){return this.project(this.center)},Ri.prototype.setLocationAtPoint=function(t,n){var r=this.pointCoordinate(n);n=this.pointCoordinate(this.centerPoint),t=this.locationCoordinate(t),n=new e.MercatorCoordinate(t.x-(r.x-n.x),t.y-(r.y-n.y)),this.center=this.coordinateLocation(n),this._renderWorldCopies&&(this.center=this.center.wrap())},Ri.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},Ri.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},Ri.prototype.locationCoordinate=function(t){return e.MercatorCoordinate.fromLngLat(t)},Ri.prototype.coordinateLocation=function(e){return e.toLngLat()},Ri.prototype.pointCoordinate=function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,l=(l=n[2]/i)==(t=r[2]/o)?0:(0-l)/(t-l);return new e.MercatorCoordinate(e.number(n[0]/i,r[0]/o,l)/this.worldSize,e.number(a,s,l)/this.worldSize)},Ri.prototype.coordinatePoint=function(t){return t=[t.x*this.worldSize,t.y*this.worldSize,0,1],e.transformMat4(t,t,this.pixelMatrix),new e.Point(t[0]/t[3],t[1]/t[3])},Ri.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Ri.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ri.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ri.prototype.calculatePosMatrix=function(t,n){var r=t.key,i=(n=void 0!==n&&n)?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=t.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*t.wrap;return t=e.identity(new Float64Array(16)),e.translate(t,t,[s*a,o.y*a,0]),e.scale(t,t,[a/e.EXTENT,a/e.EXTENT,1]),e.multiply(t,n?this.alignedProjMatrix:this.projMatrix,t),i[r]=new Float32Array(t),i[r]},Ri.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ri.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,n,r,i,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;this.latRange&&(h=this.latRange,o=e.mercatorYfromLat(h[1])*this.worldSize,r=(a=e.mercatorYfromLat(h[0])*this.worldSize)-o<u.y?u.y/(a-o):0),this.lngRange&&(d=this.lngRange,s=e.mercatorXfromLng(d[0])*this.worldSize,i=(l=e.mercatorXfromLng(d[1])*this.worldSize)-s<u.x?u.x/(l-s):0);var p,h=this.point,d=Math.max(i||0,r||0);if(d)return this.center=this.unproject(new e.Point(i?(l+s)/2:h.x,r?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);this.latRange&&((d=h.y)-(p=u.y/2)<o&&(n=o+p),a<d+p&&(n=a-p)),this.lngRange&&((p=h.x)-(u=u.x/2)<s&&(t=s+u),l<p+u&&(t=l-u)),void 0===t&&void 0===n||(this.center=this.unproject(new e.Point(void 0!==t?t:h.x,void 0!==n?n:h.y))),this._unmodified=c,this._constraining=!1}},Ri.prototype._calcMatrices=function(){if(this.height){var t=this._fov/2,n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(t)*this.height;var r=Math.PI/2+this._pitch,i=this._fov*(.5+n.y/this.height),o=Math.sin(i)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-r-i,.01,Math.PI-.01)),a=(s=this.point).x,s=(t=s.y,r=1.01*(Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance),i=this.height/50,new Float64Array(16));if(e.perspective(s,this._fov,this.width/this.height,i,r),s[8]=2*-n.x/this.width,s[9]=2*n.y/this.height,e.scale(s,s,[1,-1,1]),e.translate(s,s,[0,0,-this.cameraToCenterDistance]),e.rotateX(s,s,this._pitch),e.rotateZ(s,s,this.angle),e.translate(s,s,[-a,-t,0]),this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize]),e.scale(s,s,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=s,this.invProjMatrix=e.invert([],this.projMatrix),o=this.width%2/2,i=this.height%2/2,r=Math.cos(this.angle),n=Math.sin(this.angle),a=a-Math.round(a)+r*o+n*i,n=t-Math.round(t)+r*i+n*o,o=new Float64Array(s),e.translate(o,o,[.5<a?a-1:a,.5<n?n-1:n,0]),this.alignedProjMatrix=o,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(s=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ri.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=[(t=this.pointCoordinate(new e.Point(0,0))).x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(t,t,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ri.prototype.getCameraPoint=function(){var t=this._pitch;return t=Math.tan(t)*(this.cameraToCenterDistance||1),this.centerPoint.add(new e.Point(0,t))},Ri.prototype.getCameraQueryGeometry=function(t){var n=this.getCameraPoint();if(1===t.length)return[t[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,l=t;s<l.length;s+=1){var u=l[s];r=Math.min(r,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}return[new e.Point(r,i),new e.Point(o,i),new e.Point(o,a),new e.Point(r,a),new e.Point(r,i)]},Object.defineProperties(Ri.prototype,j),Di.prototype.addTo=function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Di.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Di.prototype.getHashString=function(t){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=(i=Math.round(n.lat*o)/o,n=this._map.getBearing(),o=this._map.getPitch(),"");if(s+=t?"/"+a+"/"+i+"/"+r:r+"/"+i+"/"+a,(n||o)&&(s+="/"+Math.round(10*n)/10),o&&(s+="/"+Math.round(o)),this._hashName){var l=this._hashName,u=!1;return o=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===l?(u=!0,t+"="+s):e})).filter((function(e){return e})),u||o.push(l+"="+s),"#"+o.join("&")}return"#"+s},Di.prototype._getCurrentHash=function(){var t,n=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")},Di.prototype._onHashChange=function(){var e=this._getCurrentHash();if(3<=e.length&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},Di.prototype._updateHashUnthrottled=function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());try{e.window.history.replaceState(e.window.history.state,null,t)}catch(t){}},Z={linearity:.3,easing:e.bezier(0,0,.3,1)};var Ni=e.extend({deceleration:2500,maxSpeed:1400},Z),Bi=e.extend({deceleration:20,maxSpeed:1400},Z),Fi=e.extend({deceleration:1e3,maxSpeed:360},Z),ji=e.extend({deceleration:1e3,maxSpeed:90},Z);function Ui(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Vi(t,n,r){var i=r.maxSpeed,o=r.linearity,a=r.deceleration;return i=e.clamp(t*o/(n/1e3),-i,i),o=Math.abs(i)/(a*o),{easing:r.easing,duration:1e3*o,amount:i*(o/2)}}function qi(e,t){this._map=e,this._clickTolerance=t.clickTolerance}zi.prototype.clear=function(){this._inertiaBuffer=[]},zi.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})},zi.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,n=e.browser.now();0<t.length&&160<n-t[0].time;)t.shift()},zi.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},r=0,i=this._inertiaBuffer;r<i.length;r+=1){var o=i[r].settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}var a,s,l=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,u={};return n.pan.mag()&&(t=Vi(n.pan.mag(),l,e.extend({},Ni,t||{})),u.offset=n.pan.mult(t.amount/n.pan.mag()),u.center=this._map.transform.center,Ui(u,t)),n.zoom&&(a=Vi(n.zoom,l,Bi),u.zoom=this._map.transform.zoom+a.amount,Ui(u,a)),n.bearing&&(a=Vi(n.bearing,l,Fi),u.bearing=this._map.transform.bearing+e.clamp(a.amount,-179,179),Ui(u,a)),n.pitch&&(s=Vi(n.pitch,l,ji),u.pitch=this._map.transform.pitch+s.amount,Ui(u,s)),(u.zoom||u.bearing)&&(s=void 0===n.pinchAround?n.around:n.pinchAround,u.around=s?this._map.unproject(s):this._map.getCenter()),this.clear(),e.extend(u,{noMoveStart:!0})}};var Hi=function(t){function r(r,i,o,a){void 0===a&&(a={});var s=n.mousePos(i.getCanvasContainer(),o),l=i.unproject(s);t.call(this,r,e.extend({point:s,lngLat:l,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}t&&(r.__proto__=t);var i={defaultPrevented:{configurable:!0}};return((r.prototype=Object.create(t&&t.prototype)).constructor=r).prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(e.Event),Wi=function(t){function r(r,i,o){var a="touchend"===r?o.changedTouches:o.touches,s=n.touchPos(i.getCanvasContainer(),a),l=s.map((function(e){return i.unproject(e)})),u=s.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.Point(0,0));a=i.unproject(u),t.call(this,r,{points:s,point:u,lngLats:l,lngLat:a,originalEvent:o}),this._defaultPrevented=!1}t&&(r.__proto__=t);var i={defaultPrevented:{configurable:!0}};return((r.prototype=Object.create(t&&t.prototype)).constructor=r).prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(e.Event),Gi=function(e){function t(t,n,r){e.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}e&&(t.__proto__=e);var n={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,n),t}(e.Event);function Zi(e){this._map=e}function Ki(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}function Xi(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}function Yi(e){this.reset(),this.numTouches=e.numTouches}function Ji(e){this.singleTap=new Yi(e),this.numTaps=e.numTaps,this.reset()}function $i(){this._zoomIn=new Ji({numTouches:1,numTaps:2}),this._zoomOut=new Ji({numTouches:2,numTaps:1}),this.reset()}qi.prototype.reset=function(){delete this._mousedownPos},qi.prototype.wheel=function(e){return this._firePreventable(new Gi(e.type,this._map,e))},qi.prototype.mousedown=function(e,t){return this._mousedownPos=t,this._firePreventable(new Hi(e.type,this._map,e))},qi.prototype.mouseup=function(e){this._map.fire(new Hi(e.type,this._map,e))},qi.prototype.click=function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Hi(e.type,this._map,e))},qi.prototype.dblclick=function(e){return this._firePreventable(new Hi(e.type,this._map,e))},qi.prototype.mouseover=function(e){this._map.fire(new Hi(e.type,this._map,e))},qi.prototype.mouseout=function(e){this._map.fire(new Hi(e.type,this._map,e))},qi.prototype.touchstart=function(e){return this._firePreventable(new Wi(e.type,this._map,e))},qi.prototype.touchmove=function(e){this._map.fire(new Wi(e.type,this._map,e))},qi.prototype.touchend=function(e){this._map.fire(new Wi(e.type,this._map,e))},qi.prototype.touchcancel=function(e){this._map.fire(new Wi(e.type,this._map,e))},qi.prototype._firePreventable=function(e){if(this._map.fire(e),e.defaultPrevented)return{}},qi.prototype.isEnabled=function(){return!0},qi.prototype.isActive=function(){return!1},qi.prototype.enable=function(){},qi.prototype.disable=function(){},Zi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Zi.prototype.mousemove=function(e){this._map.fire(new Hi(e.type,this._map,e))},Zi.prototype.mousedown=function(){this._delayContextMenu=!0},Zi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Hi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Zi.prototype.contextmenu=function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Hi(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()},Zi.prototype.isEnabled=function(){return!0},Zi.prototype.isActive=function(){return!1},Zi.prototype.enable=function(){},Zi.prototype.disable=function(){},Ki.prototype.isEnabled=function(){return!!this._enabled},Ki.prototype.isActive=function(){return!!this._active},Ki.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ki.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ki.prototype.mousedown=function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(n.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)},Ki.prototype.mousemoveWindow=function(e,t){var r,i,o;this._active&&(this._lastPos.equals(o=t)||!this._box&&o.dist(this._startPos)<this._clickTolerance||(r=this._startPos,this._lastPos=o,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e)),i=Math.min(r.x,o.x),t=Math.max(r.x,o.x),e=Math.min(r.y,o.y),o=Math.max(r.y,o.y),n.setTransform(this._box,"translate("+i+"px,"+e+"px)"),this._box.style.width=t-i+"px",this._box.style.height=o-e+"px"))},Ki.prototype.mouseupWindow=function(t,r){var i=this;if(this._active&&0===t.button){var o=this._startPos,a=r;if(this.reset(),n.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(o,a,i._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},Ki.prototype.keydown=function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))},Ki.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Ki.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))},Yi.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Yi.prototype.touchstart=function(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){for(var n=new e.Point(0,0),r=0,i=t;r<i.length;r+=1){var o=i[r];n._add(o)}return n.div(t.length)}(n),this.touches=Xi(r,n)))},Yi.prototype.touchmove=function(e,t,n){if(!this.aborted&&this.centroid){var r,i=Xi(n,t);for(r in this.touches){var o=this.touches[r],a=i[r];(!a||30<a.dist(o))&&(this.aborted=!0)}}},Yi.prototype.touchend=function(e,t,n){if((!this.centroid||500<e.timeStamp-this.startTime)&&(this.aborted=!0),0===n.length&&(n=!this.aborted&&this.centroid,this.reset(),n))return n},Ji.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ji.prototype.touchstart=function(e,t,n){this.singleTap.touchstart(e,t,n)},Ji.prototype.touchmove=function(e,t,n){this.singleTap.touchmove(e,t,n)},Ji.prototype.touchend=function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r&&(t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30,t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps))return this.reset(),r},$i.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},$i.prototype.touchstart=function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)},$i.prototype.touchmove=function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)},$i.prototype.touchend=function(e,t,n){var r=this,i=this._zoomIn.touchend(e,t,n),o=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):o?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(o)},{originalEvent:e})}}):void 0},$i.prototype.touchcancel=function(){this.reset()},$i.prototype.enable=function(){this._enabled=!0},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};var Qi={0:1,2:2};Y=function(e){this.reset(),this._clickTolerance=e.clickTolerance||1},Y.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Y.prototype._correctButton=function(e,t){return!1},Y.prototype._move=function(e,t){return{}},Y.prototype.mousedown=function(e,t){var r;this._lastPoint||(r=n.mouseButton(e),this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r))},Y.prototype.mousemoveWindow=function(e,t){var n,r=this._lastPoint;if(r)if(e.preventDefault(),n=e,e=this._eventButton,e=Qi[e],void 0!==n.buttons&&(n.buttons&e)===e){if(this._moved||!(t.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(r,t)}else this.reset()},Y.prototype.mouseupWindow=function(e){this._lastPoint&&n.mouseButton(e)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Y.prototype.enable=function(){this._enabled=!0},Y.prototype.disable=function(){this._enabled=!1,this.reset()},Y.prototype.isEnabled=function(){return this._enabled},Y.prototype.isActive=function(){return this._active};var eo,to=((eo=Y)&&(no.__proto__=eo),((no.prototype=Object.create(eo&&eo.prototype)).constructor=no).prototype.mousedown=function(e,t){eo.prototype.mousedown.call(this,e,t),this._lastPoint&&(this._active=!0)},no.prototype._correctButton=function(e,t){return 0===t&&!e.ctrlKey},no.prototype._move=function(e,t){return{around:t,panDelta:t.sub(e)}},no);function no(){eo.apply(this,arguments)}var ro,io=((ro=Y)&&(oo.__proto__=ro),((oo.prototype=Object.create(ro&&ro.prototype)).constructor=oo).prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},oo.prototype._move=function(e,t){if(e=.8*(t.x-e.x))return this._active=!0,{bearingDelta:e}},oo.prototype.contextmenu=function(e){e.preventDefault()},oo);function oo(){ro.apply(this,arguments)}var ao,so=((ao=Y)&&(lo.__proto__=ao),((lo.prototype=Object.create(ao&&ao.prototype)).constructor=lo).prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},lo.prototype._move=function(e,t){if(e=-.5*(t.y-e.y))return this._active=!0,{pitchDelta:e}},lo.prototype.contextmenu=function(e){e.preventDefault()},lo);function lo(){ao.apply(this,arguments)}function uo(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()}function co(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function po(e,t){return Math.log(e/t)/Math.LN2}uo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},uo.prototype.touchstart=function(e,t,n){return this._calculateTransform(e,t,n)},uo.prototype.touchmove=function(e,t,n){if(this._active&&!(n.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,n)},uo.prototype.touchend=function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()},uo.prototype.touchcancel=function(){this.reset()},uo.prototype._calculateTransform=function(t,n,r){0<r.length&&(this._active=!0);var i,o=Xi(r,n),a=new e.Point(0,0),s=new e.Point(0,0),l=0;for(i in o){var u=o[i],c=this._touches[i];c&&(a._add(u),s._add(u.sub(c)),l++,o[i]=u)}if(this._touches=o,!(l<this._minTouches)&&s.mag()&&(n=s.div(l),this._sum._add(n),!(this._sum.mag()<this._clickTolerance)))return{around:a.div(l),panDelta:n}},uo.prototype.enable=function(){this._enabled=!0},uo.prototype.disable=function(){this._enabled=!1,this.reset()},uo.prototype.isEnabled=function(){return this._enabled},uo.prototype.isActive=function(){return this._active},(ae=function(){this.reset()}).prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ae.prototype._start=function(e){},ae.prototype._move=function(e,t,n){return{}},ae.prototype.touchstart=function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))},ae.prototype.touchmove=function(e,t,n){if(this._firstTwoTouches){e.preventDefault();var r=(i=this._firstTwoTouches)[0],i=i[1];if(r=co(n,t,r),t=co(n,t,i),r&&t)return i=this._aroundCenter?null:r.add(t).div(2),this._move([r,t],i,e)}},ae.prototype.touchend=function(e,t,r){var i,o;this._firstTwoTouches&&(i=(o=this._firstTwoTouches)[0],o=o[1],i=co(r,t,i),o=co(r,t,o),i&&o||(this._active&&n.suppressClick(),this.reset()))},ae.prototype.touchcancel=function(){this.reset()},ae.prototype.enable=function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around},ae.prototype.disable=function(){this._enabled=!1,this.reset()},ae.prototype.isEnabled=function(){return this._enabled},ae.prototype.isActive=function(){return this._active};var ho,fo=((ho=ae)&&(mo.__proto__=ho),((mo.prototype=Object.create(ho&&ho.prototype)).constructor=mo).prototype.reset=function(){ho.prototype.reset.call(this),delete this._distance,delete this._startDistance},mo.prototype._start=function(e){this._startDistance=this._distance=e[0].dist(e[1])},mo.prototype._move=function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(po(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:po(this._distance,n),pinchAround:t}},mo);function mo(){ho.apply(this,arguments)}function go(e,t){return 180*e.angleWith(t)/Math.PI}var yo,vo=((yo=ae)&&(_o.__proto__=yo),((_o.prototype=Object.create(yo&&yo.prototype)).constructor=_o).prototype.reset=function(){yo.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},_o.prototype._start=function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])},_o.prototype._move=function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:go(this._vector,n),pinchAround:t}},_o.prototype._isBelowThreshold=function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360;return e=go(e,this._startVector),Math.abs(e)<t},_o);function _o(){yo.apply(this,arguments)}function bo(e){return Math.abs(e.y)>Math.abs(e.x)}var xo,wo=((xo=ae)&&(So.__proto__=xo),((So.prototype=Object.create(xo&&xo.prototype)).constructor=So).prototype.reset=function(){xo.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},So.prototype._start=function(e){bo((this._lastPoints=e)[0].sub(e[1]))&&(this._valid=!1)},So.prototype._move=function(e,t,n){var r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}},So.prototype.gestureBeginsVertically=function(e,t,n){if(void 0!==this._valid)return this._valid;var r=2<=e.mag(),i=2<=t.mag();return r||i?r&&i?(n=0<e.y==0<t.y,bo(e)&&bo(t)&&n):(void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0):void 0},So);function So(){xo.apply(this,arguments)}function Eo(){var e=Co;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}var Co={panStep:100,bearingStep:15,pitchStep:10};function To(e){return e*(2-e)}function Io(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)}Eo.prototype.reset=function(){this._active=!1},Eo.prototype.keydown=function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(i=r=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:To,zoom:n?Math.round(l)+n*(e.shiftKey?2:1):l,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+i*t._pitchStep,offset:[-o*t._panStep,-a*t._panStep],center:s.getCenter()},{originalEvent:e})}}}},Eo.prototype.enable=function(){this._enabled=!0},Eo.prototype.disable=function(){this._enabled=!1,this.reset()},Eo.prototype.isEnabled=function(){return this._enabled},Eo.prototype.isActive=function(){return this._active},Eo.prototype.disableRotation=function(){this._rotationDisabled=!0},Eo.prototype.enableRotation=function(){this._rotationDisabled=!1};var ko=4.000244140625;function Po(e,t){this._clickZoom=e,this._tapZoom=t}function Ao(){this.reset()}function Mo(){this._tap=new Ji({numTouches:1,numTaps:1}),this.reset()}function Oo(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}function Lo(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}function Ro(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}function Do(e){return e.zoom||e.drag||e.pitch||e.rotate}Io.prototype.setZoomRate=function(e){this._defaultZoomRate=e},Io.prototype.setWheelZoomRate=function(e){this._wheelZoomRate=e},Io.prototype.isEnabled=function(){return!!this._enabled},Io.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Io.prototype.isZooming=function(){return!!this._zooming},Io.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},Io.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Io.prototype.wheel=function(t){var n,r,i;this.isEnabled()&&(n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,i=(r=e.browser.now())-(this._lastWheelEventTime||0),this._lastWheelEventTime=r,0!==n&&n%ko==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":400<i?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault())},Io.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},Io.prototype._start=function(t){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),t=n.mousePos(this._el,t),this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(t)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))},Io.prototype.renderFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;0!==this._delta&&(o="wheel"===this._type&&Math.abs(this._delta)>ko?this._wheelZoomRate:this._defaultZoomRate,s=2/(1+Math.exp(-Math.abs(this._delta*o))),this._delta<0&&0!==s&&(s=1/s),a="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale,this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(a*s))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0);var r,i="number"==typeof this._targetZoom?this._targetZoom:n.zoom,o=this._startZoom,a=this._easing,s=!1;return"wheel"===this._type&&o&&a?(r=a(a=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1)),r=e.number(o,i,r),a<1?this._frameId||(this._frameId=!0):s=!0):(r=i,s=!0),this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:r-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Io.prototype._smoothOutEasing=function(t){var n,r,i=e.ease;return this._prevEase&&(r=this._prevEase,n=(e.browser.now()-r.start)/r.duration,r=r.easing(.01+n)-r.easing(n),n=.27/Math.sqrt(r*r+1e-4)*.01,r=Math.sqrt(.0729-n*n),i=e.bezier(n,r,.25,1)),this._prevEase={start:e.browser.now(),duration:t,easing:i},i},Io.prototype.reset=function(){this._active=!1},Po.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Po.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Po.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Po.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()},Ao.prototype.reset=function(){this._active=!1},Ao.prototype.dblclick=function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}},Ao.prototype.enable=function(){this._enabled=!0},Ao.prototype.disable=function(){this._enabled=!1,this.reset()},Ao.prototype.isEnabled=function(){return this._enabled},Ao.prototype.isActive=function(){return this._active},Mo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Mo.prototype.touchstart=function(e,t,n){this._swipePoint||(this._tapTime&&500<e.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<n.length&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))},Mo.prototype.touchmove=function(e,t,n){if(this._tapTime){if(this._swipePoint&&n[0].identifier===this._swipeTouch){var r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)},Mo.prototype.touchend=function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)},Mo.prototype.touchcancel=function(){this.reset()},Mo.prototype.enable=function(){this._enabled=!0},Mo.prototype.disable=function(){this._enabled=!1,this.reset()},Mo.prototype.isEnabled=function(){return this._enabled},Mo.prototype.isActive=function(){return this._active},Oo.prototype.enable=function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Oo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Oo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Oo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()},Lo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Lo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Lo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Lo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()},Ro.prototype.enable=function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ro.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ro.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ro.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ro.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ro.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var zo,No,Bo=((zo=e.Event)&&(Fo.__proto__=zo),(Fo.prototype=Object.create(zo&&zo.prototype)).constructor=Fo);function Fo(){zo.apply(this,arguments)}function jo(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}function Uo(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zi(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this),r=this._el,this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];for(var i=0,o=this._listeners;i<o.length;i+=1){var a=(l=o[i])[0],s=l[1],l=l[2];n.addEventListener(a,s,a===e.window.document?this.handleWindowEvent:this.handleEvent,l)}}function Vo(t,n){No.call(this),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}function qo(t){this.options=t=void 0===t?{}:t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}function Ho(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)}function Wo(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}Uo.prototype.destroy=function(){for(var t=0,r=this._listeners;t<r.length;t+=1){var i=(a=r[t])[0],o=a[1],a=a[2];n.removeEventListener(i,o,i===e.window.document?this.handleWindowEvent:this.handleEvent,a)}},Uo.prototype._addDefaultHandlers=function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new qi(t,e));var r=t.boxZoom=new Ki(t,e);this._add("boxZoom",r);var i=new $i,o=new Ao;t.doubleClickZoom=new Po(o,i),this._add("tapZoom",i),this._add("clickZoom",o),r=new Mo,this._add("tapDragZoom",r),i=t.touchPitch=new wo,this._add("touchPitch",i),o=new io(e),i=new so(e),t.dragRotate=new Lo(e,o,i),this._add("mouseRotate",o,["mousePitch"]),this._add("mousePitch",i,["mouseRotate"]),o=new to(e),i=new uo(e),t.dragPan=new Oo(n,o,i),this._add("mousePan",o),this._add("touchPan",i,["touchZoom","touchRotate"]),o=new vo,i=new fo,t.touchZoomRotate=new Ro(n,i,o,r),this._add("touchRotate",o,["touchPan","touchZoom"]),this._add("touchZoom",i,["touchPan","touchRotate"]),i=t.scrollZoom=new Io(t,this),this._add("scrollZoom",i,["mousePan"]),i=t.keyboard=new Eo,this._add("keyboard",i),this._add("blockableMapEvent",new Zi(t));for(var a=0,s=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];a<s.length;a+=1){var l=s[a];e.interactive&&e[l]&&t[l].enable(e[l])}},Uo.prototype._add=function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t},Uo.prototype.stop=function(e){if(!this._updatingCamera){for(var t=0,n=this._handlers;t<n.length;t+=1)n[t].handler.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}},Uo.prototype.isActive=function(){for(var e=0,t=this._handlers;e<t.length;e+=1)if(t[e].handler.isActive())return!0;return!1},Uo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Uo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Uo.prototype.isMoving=function(){return Boolean(Do(this._eventsInProgress))||this.isZooming()},Uo.prototype._blockedByActive=function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1},Uo.prototype.handleWindowEvent=function(e){this.handleEvent(e,e.type+"Window")},Uo.prototype._getMapTouches=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.target;this._el.contains(o)&&t.push(i)}return t},Uo.prototype.handleEvent=function(e,t){if("blur"!==e.type){this._updatingCamera=!0;for(var r="renderFrame"===e.type?void 0:e,i={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?n.touchPos(this._el,s):n.mousePos(this._el,e),u=0,c=this._handlers;u<c.length;u+=1){var p=c[u],h=p.handlerName,d=p.handler,f=p.allowed;d.isEnabled()&&(p=void 0,this._blockedByActive(a,f,h)?d.reset():d[t||e.type]&&(p=d[t||e.type](e,l,s),this.mergeHandlerResult(i,o,p,h,r),p&&p.needsRenderFrame&&this._triggerRenderFrame()),(p||d.isActive())&&(a[h]=d))}var m,g={};for(m in this._previousActiveHandlers)a[m]||(g[m]=r);this._previousActiveHandlers=a,(Object.keys(g).length||jo(i))&&(this._changes.push([i,o,g]),this._triggerRenderFrame()),(Object.keys(a).length||jo(i))&&this._map._stop(!0),this._updatingCamera=!1;var y=i.cameraAnimation;y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],y(this._map))}else this.stop(!0)},Uo.prototype.mergeHandlerResult=function(t,n,r,i,o){r&&(e.extend(t,r),o={handlerName:i,originalEvent:r.originalEvent||o},void 0!==r.zoomDelta&&(n.zoom=o),void 0!==r.panDelta&&(n.drag=o),void 0!==r.pitchDelta&&(n.pitch=o),void 0!==r.bearingDelta&&(n.rotate=o))},Uo.prototype._applyChanges=function(){for(var t={},n={},r={},i=0,o=this._changes;i<o.length;i+=1){var a=(l=o[i])[0],s=l[1],l=l[2];a.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(a.panDelta)),a.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(t.around=a.around),void 0!==a.pinchAround&&(t.pinchAround=a.pinchAround),a.noInertia&&(t.noInertia=a.noInertia),e.extend(n,s),e.extend(r,l)}this._updateMapTransform(t,n,r),this._changes=[]},Uo.prototype._updateMapTransform=function(e,t,n){var r=this._map,i=r.transform;if(!jo(e))return this._fireEvents(t,n,!0);var o=e.panDelta,a=e.zoomDelta,s=e.bearingDelta,l=e.pitchDelta,u=e.around,c=e.pinchAround;void 0!==c&&(u=c),r._stop(!0),u=u||r.transform.centerPoint,o=i.pointLocation(o?u.sub(o):u),s&&(i.bearing+=s),l&&(i.pitch+=l),a&&(i.zoom+=a),i.setLocationAtPoint(o,u),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)},Uo.prototype._fireEvents=function(t,n,r){var i,o,a,s=this,l=Do(this._eventsInProgress),u=Do(t),c={};for(i in t){var p=t[i].originalEvent;this._eventsInProgress[i]||(c[i+"start"]=p),this._eventsInProgress[i]=t[i]}for(o in!l&&u&&this._fireEvent("movestart",u.originalEvent),c)this._fireEvent(o,c[o]);for(a in u&&this._fireEvent("move",u.originalEvent),t){var h=t[a].originalEvent;this._fireEvent(a,h)}var d,f,m,g={};for(f in this._eventsInProgress){var y=(v=this._eventsInProgress[f]).handlerName,v=v.originalEvent;this._handlersById[y].isActive()||(delete this._eventsInProgress[f],d=n[y]||v,g[f+"end"]=d)}for(m in g)this._fireEvent(m,g[m]);var _=Do(this._eventsInProgress);r&&(l||u)&&!_&&(this._updatingCamera=!0,u=function(e){return 0!==e&&-s._bearingSnap<e&&e<s._bearingSnap},(_=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions))?(u(_.bearing||this._map.getBearing())&&(_.bearing=0),this._map.easeTo(_,{originalEvent:d})):(this._map.fire(new e.Event("moveend",{originalEvent:d})),u(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1)},Uo.prototype._fireEvent=function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},Uo.prototype._requestFrame=function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new Bo("renderFrame",{timeStamp:t})),e._applyChanges()}))},Uo.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())},(No=e.Evented)&&(Vo.__proto__=No),((Vo.prototype=Object.create(No&&No.prototype)).constructor=Vo).prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},Vo.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},Vo.prototype.panBy=function(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)},Vo.prototype.panTo=function(t,n,r){return this.easeTo(e.extend({center:t},n),r)},Vo.prototype.getZoom=function(){return this.transform.zoom},Vo.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},Vo.prototype.zoomTo=function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)},Vo.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},Vo.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},Vo.prototype.getBearing=function(){return this.transform.bearing},Vo.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},Vo.prototype.getPadding=function(){return this.transform.padding},Vo.prototype.setPadding=function(e,t){return this.jumpTo({padding:e},t),this},Vo.prototype.rotateTo=function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)},Vo.prototype.resetNorth=function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this},Vo.prototype.resetNorthPitch=function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this},Vo.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},Vo.prototype.getPitch=function(){return this.transform.pitch},Vo.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},Vo.prototype.cameraForBounds=function(t,n){t=e.LngLatBounds.convert(t);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,n)},Vo.prototype._cameraForBoxAndBearing=function(t,n,r,i){var o={top:0,bottom:0,right:0,left:0};"number"==typeof(i=e.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding&&(u=i.padding,i.padding={top:u,bottom:u,right:u,left:u}),i.padding=e.extend(o,i.padding);var a=this.transform,s=a.padding,l=a.project(e.LngLat.convert(t)),u=a.project(e.LngLat.convert(n));if(o=l.rotate(-r*Math.PI/180),t=u.rotate(-r*Math.PI/180),n=new e.Point(Math.max(o.x,t.x),Math.max(o.y,t.y)),t=new e.Point(Math.min(o.x,t.x),Math.min(o.y,t.y)),n=n.sub(t),t=(a.width-(s.left+s.right+i.padding.left+i.padding.right))/n.x,!((s=(a.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/n.y)<0||t<0))return n=Math.min(a.scaleZoom(a.scale*Math.min(t,s)),i.maxZoom),t="number"==typeof i.offset.x?new e.Point(i.offset.x,i.offset.y):e.Point.convert(i.offset),s=(i.padding.left-i.padding.right)/2,i=(i.padding.top-i.padding.bottom)/2,i=new e.Point(s,i).rotate(r*Math.PI/180),i=t.add(i).mult(a.scale/a.zoomScale(n)),{center:a.unproject(l.add(u).div(2).sub(i)),zoom:n,bearing:r};e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Vo.prototype.fitBounds=function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)},Vo.prototype.fitScreenCoordinates=function(t,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(n)),r,i),i,o)},Vo.prototype._fitInternal=function(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},Vo.prototype.jumpTo=function(t,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))},Vo.prototype.easeTo=function(t,n){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l=this.getPadding(),u="zoom"in t?+t.zoom:o,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,p="pitch"in t?+t.pitch:s,h=("padding"in t?t:i).padding,d=e.Point.convert(t.offset),f=i.centerPoint.add(d),m=i.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);var y,v,_=i.project(m),b=i.project(g).sub(_),x=i.zoomScale(u-o);return t.around&&(y=e.LngLat.convert(t.around),v=i.locationPoint(y)),g={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching},this._zooming=this._zooming||u!==o,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||p!==s,this._padding=!i.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,g),this._ease((function(t){var m,g;r._zooming&&(i.zoom=e.number(o,u,t)),r._rotating&&(i.bearing=e.number(a,c,t)),r._pitching&&(i.pitch=e.number(s,p,t)),r._padding&&(i.interpolatePadding(l,h,t),f=i.centerPoint.add(d)),y?i.setLocationAtPoint(y,v):(g=i.zoomScale(i.zoom-o),m=o<u?Math.min(2,x):Math.max(.5,x),m=Math.pow(m,1-t),g=i.unproject(_.add(b.mult(t*m)).mult(g)),i.setLocationAtPoint(i.renderWorldCopies?g.wrap():g,f)),r._fireMoveEvents(n)}),(function(e){r._afterEase(n,e)}),t),this},Vo.prototype._prepareEase=function(t,n,r){void 0===r&&(r={}),this._moving=!0,n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))},Vo.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},Vo.prototype._afterEase=function(t,n){var r,i;this._easeId&&n&&this._easeId===n||(delete this._easeId,r=this._zooming,i=this._rotating,n=this._pitching,this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),n&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t)))},Vo.prototype.flyTo=function(t,n){var r=this;if(!t.essential&&e.browser.prefersReducedMotion){var i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,o.minZoom,o.maxZoom):a,p="bearing"in t?this._normalizeBearing(t.bearing,s):s,h="pitch"in t?+t.pitch:l,d=("padding"in t?t:o).padding,f=o.zoomScale(c-a),m=e.Point.convert(t.offset),g=o.centerPoint.add(m),y=(i=o.pointLocation(g),e.LngLat.convert(t.center||i));this._normalizeCenter(y);var v=o.project(i),_=o.project(y).sub(v),b=t.curve,x=Math.max(o.width,o.height),w=x/f,S=_.mag();"minZoom"in t&&(k=e.clamp(Math.min(t.minZoom,a,c),o.minZoom,o.maxZoom),k=x/o.zoomScale(k-a),b=Math.sqrt(k/S*2));var E=b*b;function C(e){return e=(w*w-x*x+(e?-1:1)*E*E*S*S)/(2*(e?w:x)*E*S),Math.log(Math.sqrt(e*e+1)-e)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function I(e){return(Math.exp(e)+Math.exp(-e))/2}var k,P=C(0),A=function(e){return I(P)/I(P+b*e)},M=function(e){return x*((I(P)*(T(e=P+b*e)/I(e))-T(P))/E)/S},O=(C(1)-P)/b;if(Math.abs(S)<1e-6||!isFinite(O)){if(Math.abs(x-w)<1e-6)return this.easeTo(t,n);var L=w<x?-1:1;O=Math.abs(Math.log(w/x))/b,M=function(){return 0},A=function(e){return Math.exp(L*b*e)}}return"duration"in t?t.duration=+t.duration:(k="screenSpeed"in t?+t.screenSpeed/b:+t.speed,t.duration=1e3*O/k),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==p,this._pitching=h!==l,this._padding=!o.isPaddingEqual(d),this._prepareEase(n,!1),this._ease((function(t){var i=t*O,f=1/A(i);o.zoom=1===t?c:a+o.scaleZoom(f),r._rotating&&(o.bearing=e.number(s,p,t)),r._pitching&&(o.pitch=e.number(l,h,t)),r._padding&&(o.interpolatePadding(u,d,t),g=o.centerPoint.add(m)),f=1===t?y:o.unproject(v.add(_.mult(M(i))).mult(f)),o.setLocationAtPoint(o.renderWorldCopies?f.wrap():f,g),r._fireMoveEvents(n)}),(function(){return r._afterEase(n)}),t),this},Vo.prototype.isEasing=function(){return!!this._easeFrameId},Vo.prototype.stop=function(){return this._stop()},Vo.prototype._stop=function(e,t){var n;return this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd&&(n=this._onEaseEnd,delete this._onEaseEnd,n.call(this,t)),e||(e=this.handlers)&&e.stop(!1),this},Vo.prototype._ease=function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Vo.prototype._renderFrameCallback=function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Vo.prototype._normalizeBearing=function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t},Vo.prototype._normalizeCenter=function(e){var t=this.transform;t.renderWorldCopies&&!t.lngRange&&(t=e.lng-t.center.lng,e.lng+=180<t?-360:t<-180?360:0)},Zt=Vo,qo.prototype.getDefaultPosition=function(){return"bottom-right"},qo.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=n.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},qo.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},qo.prototype._setElementTitle=function(e,t){t=this._map._getUIString("AttributionControl."+t),e.title=t,e.setAttribute("aria-label",t)},qo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},qo.prototype._updateEditLink=function(){var t,n=(n=this._editLink)||(this._editLink=this._container.querySelector(".mapbox-improve-map")),r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];n&&(t=r.reduce((function(e,t,n){return t.value&&(e+=t.key+"="+t.value+(n<r.length-1?"&":"")),e}),"?"),n.href=e.config.FEEDBACK_URL+"/"+t+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback"))},qo.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},qo.prototype._updateAttributions=function(){if(this._map.style){var e=[];this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet&&(i=this._map.style.stylesheet,this.styleOwner=i.owner,this.styleId=i.id);var t,n=this._map.style.sourceCaches;for(t in n){var r=n[t];!r.used||(r=r.getSource()).attribution&&e.indexOf(r.attribution)<0&&e.push(r.attribution)}e.sort((function(e,t){return e.length-t.length}));var i=(e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(0<=e[r].indexOf(t))return!1;return!0}))).join(" | ");i!==this._attribHTML&&(this._attribHTML=i,e.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},qo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")},Ho.prototype.onAdd=function(e){return this._map=e,this._container=n.create("div","mapboxgl-ctrl"),(e=n.create("a","mapboxgl-ctrl-logo")).target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ho.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ho.prototype.getDefaultPosition=function(){return"bottom-left"},Ho.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ho.prototype._logoRequired=function(){if(this._map.style){var e,t=this._map.style.sourceCaches;for(e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Ho.prototype._updateCompact=function(){var e=this._container.children;e.length&&(e=e[0],this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact"))},Wo.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},Wo.prototype.remove=function(e){for(var t=this._currentlyRunning,n=0,r=t?this._queue.concat(t):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===e)return void(i.cancelled=!0)}},Wo.prototype.run=function(e){void 0===e&&(e=0);var t=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,r=t;n<r.length;n+=1){var i=r[n];if(!i.cancelled&&(i.callback(e),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1};var Go={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Zo=e.window.HTMLImageElement,Ko=e.window.HTMLElement,Xo=e.window.ImageBitmap,Yo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!(Wo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}),attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Jo(e){e.parentNode&&e.parentNode.removeChild(e)}yn=function(r){function i(t){var n=this;if(null!=(t=e.extend({},Yo,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&60<t.maxPitch)throw new Error("maxPitch must be less than or equal to 60");var i=new Ri(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);if(r.call(this,i,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new Wo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Go,t.locale),this._clickTolerance=t.clickTolerance,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof Ko))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return n._update(!1)})),this.on("moveend",(function(){return n._update(!1)})),this.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Uo(this,t),i="string"==typeof t.hash&&t.hash||void 0,this._hash=t.hash&&new Di(i).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new qo({customAttribution:t.customAttribution})),this.addControl(new Ho,t.logoPosition),this.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),this.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event(t.dataType+"data",t))})),this.on("dataloading",(function(t){n.fire(new e.Event(t.dataType+"dataloading",t))}))}r&&(i.__proto__=r);var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return((i.prototype=Object.create(r&&r.prototype)).constructor=i).prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);return this._controls.push(t),t=this._controlPositions[n],-1!==n.indexOf("bottom")?t.insertBefore(r,t.firstChild):t.appendChild(r),this},i.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return-1<n&&this._controls.splice(n,1),t.onRemove(this),this},i.prototype.hasControl=function(e){return-1<this._controls.indexOf(e)},i.prototype.resize=function(t){var n=(r=this._containerDimensions())[0],r=r[1];return this._resizeCanvas(n,r),this.transform.resize(n,r),this.painter.resize(n,r),(r=!this._moving)&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),r&&this.fire(new e.Event("moveend",t)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()},i.prototype.setMinZoom=function(e){if(-2<=(e=null==e?-2:e)&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.setMinPitch=function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(0<=e&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},i.prototype.getMinPitch=function(){return this.transform.minPitch},i.prototype.setMaxPitch=function(e){if(60<(e=null==e?60:e))throw new Error("maxPitch must be less than or equal to 60");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")},i.prototype.getMaxPitch=function(){return this.transform.maxPitch},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},i.prototype.project=function(t){return this.transform.locationPoint(e.LngLat.convert(t))},i.prototype.unproject=function(t){return this.transform.pointLocation(e.Point.convert(t))},i.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},i.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},i.prototype._createDelegatedListener=function(e,t,n){var r,i=this;if("mouseenter"===e||"mouseover"===e){var o=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[];a.length?o||(o=!0,n.call(i,new Hi(e,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===e||"mouseout"===e){var a=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){(i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?a=!0:a&&(a=!1,n.call(i,new Hi(e,i,r.originalEvent)))},mouseout:function(t){a&&(a=!1,n.call(i,new Hi(e,i,t.originalEvent)))}}}}return{layer:t,listener:n,delegates:((r={})[e]=function(e){var r=i.getLayer(t)?i.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(i,e),delete e.features)},r)}},i.prototype.on=function(e,t,n){if(void 0===n)return r.prototype.on.call(this,e,t);var i,o=this._createDelegatedListener(e,t,n);for(i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(o),o.delegates)this.on(i,o.delegates[i]);return this},i.prototype.once=function(e,t,n){if(void 0===n)return r.prototype.once.call(this,e,t);var i,o=this._createDelegatedListener(e,t,n);for(i in o.delegates)this.once(i,o.delegates[i]);return this},i.prototype.off=function(e,t,n){var i=this;return void 0===n?r.prototype.off.call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(r){for(var o=r[e],a=0;a<o.length;a++){var s=o[a];if(s.layer===t&&s.listener===n){for(var l in s.delegates)i.off(l,s.delegates[l]);return o.splice(a,1)}}}(this._delegatedListeners),this)},i.prototype.queryRenderedFeatures=function(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),n=n||{},r=(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof t[0]?[e.Point.convert(t)]:(r=e.Point.convert(t[0]),t=e.Point.convert(t[1]),[r,new e.Point(t.x,r.y),t,new e.Point(r.x,t.y),r]),this.style.queryRenderedFeatures(r,n,this.transform)):[];var r},i.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},i.prototype.setStyle=function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(t,n))},i.prototype._getUIString=function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '"+e+"'");return t},i.prototype._updateStyle=function(e,t){if((t=void 0===t?{}:t).stylePatch)e=e||bn();else{if(this.style&&(this.style.setEventedParent(null),this.style._remove()),!e)return delete this.style,this;this.style=new wr(this,t),this.style.setEventedParent(this,{style:this.style})}return this.style||(this.style=new wr(this,t),this.style.setEventedParent(this,{style:this.style})),"string"==typeof e?this.style.loadURL(e,t):this.style.loadJSON(e,t),this},i.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new wr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},i.prototype._diffStyle=function(t,n){var r,i=this;void 0===n&&(n={}),"string"==typeof t?(r=this._requestManager.normalizeStyleURL(t),r=this._requestManager.transformRequest(r,e.ResourceType.Style),e.getJSON(r,(function(t,r){t?i.fire(new e.ErrorEvent(t)):r&&i._updateDiff(r,n)}))):"object"==typeof t&&this._updateDiff(t,n)},i.prototype._updateDiff=function(t,n){void 0===n&&(n={});try{this.style.setState(t,n)&&this._update(!0)}catch(i){e.warnOnce("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(t,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)},i.prototype.isSourceLoaded=function(t){var n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},i.prototype.areTilesLoaded=function(){var e,t=this.style&&this.style.sourceCaches;for(e in t){var n,r=t[e]._tiles;for(n in r){var i=r[n];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)},i.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},i.prototype.getSource=function(e){return this.style.getSource(e)},i.prototype.addImage=function(t,n,r){var i=(r=void 0===r?{}:r).pixelRatio;void 0===i&&(i=1);var o=r.sdf;void 0===o&&(o=!1);var a=r.stretchX,s=r.stretchY;if(r=r.content,this._lazyInitEmptyStyle(),n instanceof Zo||Xo&&n instanceof Xo){var l=(c=e.browser.getImageData(n)).width,u=c.height,c=c.data;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:u},c),pixelRatio:i,stretchX:a,stretchY:s,content:r,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));l=n.width,u=n.height,c=n.data,n=n,this.style.addImage(t,{data:new e.RGBAImage({width:l,height:u},new Uint8Array(c)),pixelRatio:i,stretchX:a,stretchY:s,content:r,sdf:o,version:0,userImage:n}),n.onAdd&&n.onAdd(this,t)}},i.prototype.updateImage=function(t,n){var r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=(a=n instanceof Zo||Xo&&n instanceof Xo?e.browser.getImageData(n):n).width,o=a.height,a=a.data;return void 0===i||void 0===o?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):i!==r.data.width||o!==r.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(a,!(n instanceof Zo||Xo&&n instanceof Xo)),void this.style.updateImage(t,r))},i.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(e){this.style.removeImage(e)},i.prototype.loadImage=function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)},i.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},i.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},i.prototype.getLayer=function(e){return this.style.getLayer(e)},i.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)},i.prototype.setFilter=function(e,t,n){return this.style.setFilter(e,t,n=void 0===n?{}:n),this._update(!0)},i.prototype.getFilter=function(e){return this.style.getFilter(e)},i.prototype.setPaintProperty=function(e,t,n,r){return this.style.setPaintProperty(e,t,n,r=void 0===r?{}:r),this._update(!0)},i.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},i.prototype.setLayoutProperty=function(e,t,n,r){return this.style.setLayoutProperty(e,t,n,r=void 0===r?{}:r),this._update(!0)},i.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},i.prototype.setLight=function(e,t){return void 0===t&&(t={}),this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},i.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},i.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=n.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),t=this._containerDimensions(),this._resizeCanvas(t[0],t[1]);var r=this._controlContainer=n.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){i[e]=n.create("div","mapboxgl-ctrl-"+e,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},i.prototype._resizeCanvas=function(t,n){var r=e.browser.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*n,this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1});(n=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n))?(this.painter=new Pi(n,this.transform),e.webpSupported.testSupport(n)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},i.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},i.prototype._onMapScroll=function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(e){return this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint()),this},i.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},i.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},i.prototype._render=function(t){var n,r=this,i=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),i=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var a,s,l,u=!1;return this.style&&this._styleDirty&&(this._styleDirty=!1,a=this.transform.zoom,t=e.browser.now(),this.style.zoomHistory.update(a,t),1===(t=(a=new e.EvaluationParameters(a,{now:t,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()})).crossFadingFactor())&&t===this._crossFadingFactor||(u=!0,this._crossFadingFactor=t),this.style.update(a)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")&&(s=e.browser.now()-i,o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),r.fire(new e.Event("gpu-timing-frame",{cpuTime:s,gpuTime:t}))}),50)),this.listens("gpu-timing-layer")&&(l=this.painter.collectGpuTimers(),setTimeout((function(){var t=r.painter.queryGpuTimers(l);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)),(i=this._sourcesDirty||this._styleDirty||this._placementDirty)||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||i||(this._fullyLoaded=!0),this}},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,n=this._controls;t<n.length;t+=1)n[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Jo(this._canvasContainer),Jo(this._controlContainer),Jo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},i.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=e.browser.frame((function(e){t._frame=null,t._render(e)})))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(e){this._trackResize&&this.resize({originalEvent:e})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(e){this._showPadding!==e&&(this._showPadding=e,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&((this._showCollisionBoxes=e)?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(e){this._vertices=e,this._update()},i.prototype._setCacheLimits=function(t,n){e.setCacheLimits(t,n)},o.version.get=function(){return e.version},Object.defineProperties(i.prototype,o),i}(Zt);var $o={showCompass:!0,showZoom:!0,visualizePitch:!1};j=function(t){var r=this;this.options=e.extend({},$o,t),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return r._map.zoomIn({},{originalEvent:e})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return r._map.zoomOut({},{originalEvent:e})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:e}):r._map.resetNorth({},{originalEvent:e})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))},j.prototype._updateZoomButtons=function(){var e=(t=this._map.getZoom())===this._map.getMaxZoom(),t=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=t,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",t.toString())},j.prototype._rotateCompassArrow=function(){var e=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=e},j.prototype.onAdd=function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qo(this._map,this._compass,this.options.visualizePitch)),this._container},j.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},j.prototype._createButton=function(e,t){return(e=n.create("button",e,this._container)).type="button",e.addEventListener("click",t),e},j.prototype._setButtonTitle=function(e,t){t=this._map._getUIString("NavigationControl."+t),e.title=t,e.setAttribute("aria-label",t)};var Qo=function(t,r,i){void 0===i&&(i=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new io({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,i&&(this.mousePitch=new so({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(r,"mousedown",this.mousedown),n.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(r,"touchmove",this.touchmove),n.addEventListener(r,"touchend",this.touchend),n.addEventListener(r,"touchcancel",this.reset)};function ea(t,n,r){var i,o,a;for(t=new e.LngLat(t.lng,t.lat),n&&(i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=r.locationPoint(t).distSqr(n),r.locationPoint(i).distSqr(n)<a?t=i:r.locationPoint(o).distSqr(n)<a&&(t=o));180<Math.abs(t.lng-r.center.lng);){var s=r.locationPoint(t);if(0<=s.x&&0<=s.y&&s.x<=r.width&&s.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}Qo.prototype.down=function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),n.disableDrag()},Qo.prototype.move=function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t);r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),!this.mousePitch||(t=this.mousePitch.mousemoveWindow(e,t))&&t.pitchDelta&&n.setPitch(n.getPitch()+t.pitchDelta)},Qo.prototype.off=function(){var e=this.element;n.removeEventListener(e,"mousedown",this.mousedown),n.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(e,"touchmove",this.touchmove),n.removeEventListener(e,"touchend",this.touchend),n.removeEventListener(e,"touchcancel",this.reset),this.offTemp()},Qo.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},Qo.prototype.mousedown=function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),n.mousePos(this.element,t)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},Qo.prototype.mousemove=function(e){this.move(e,n.mousePos(this.element,e))},Qo.prototype.mouseup=function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()},Qo.prototype.touchstart=function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))},Qo.prototype.touchmove=function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))},Qo.prototype.touchend=function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Qo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ta={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function na(e,t,n){var r,i=e.classList;for(r in ta)i.remove("mapboxgl-"+n+"-anchor-"+r);i.add("mapboxgl-"+n+"-anchor-"+t)}var ra,ia=((ra=e.Evented)&&(oa.__proto__=ra),((oa.prototype=Object.create(ra&&ra.prototype)).constructor=oa).prototype.addTo=function(e){return this.remove(),(this._map=e).getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},oa.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},oa.prototype.getLngLat=function(){return this._lngLat},oa.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},oa.prototype.getElement=function(){return this._element},oa.prototype.setPopup=function(e){var t;return this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e&&("offset"in e.options||(t=Math.sqrt(Math.pow(13.5,2)/2),e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset),this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)),this},oa.prototype._onKeyPress=function(e){var t=e.code;e=e.charCode||e.keyCode,"Space"!==t&&"Enter"!==t&&32!==e&&13!==e||this.togglePopup()},oa.prototype._onMapClick=function(e){var t=e.originalEvent.target;e=this._element,this._popup&&(t===e||e.contains(t))&&this.togglePopup()},oa.prototype.getPopup=function(){return this._popup},oa.prototype.togglePopup=function(){var e=this._popup;return e&&(e.isOpen()?e.remove():e.addTo(this._map)),this},oa.prototype._update=function(e){var t,r;this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=ea(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t="","viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(t="rotateZ("+(this._rotation-this._map.getBearing())+"deg)"),r="","viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),e&&"moveend"!==e.type||(this._pos=this._pos.round()),n.setTransform(this._element,ta[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+t))},oa.prototype.getOffset=function(){return this._offset},oa.prototype.setOffset=function(t){return this._offset=e.Point.convert(t),this._update(),this},oa.prototype._onMove=function(t){var n;this._isDragging||(n=this._clickTolerance||this._map._clickTolerance,this._isDragging=t.point.dist(this._pointerdownPos)>=n),this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))},oa.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},oa.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},oa.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},oa.prototype.isDraggable=function(){return this._draggable},oa.prototype.setRotation=function(e){return this._rotation=e||0,this._update(),this},oa.prototype.getRotation=function(){return this._rotation},oa.prototype.setRotationAlignment=function(e){return this._rotationAlignment=e||"auto",this._update(),this},oa.prototype.getRotationAlignment=function(){return this._rotationAlignment},oa.prototype.setPitchAlignment=function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this},oa.prototype.getPitchAlignment=function(){return this._pitchAlignment},oa);function oa(t,r){if(ra.call(this),(t instanceof e.window.HTMLElement||r)&&(t=e.extend({element:t},r)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var i=n.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var o=n.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var l=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<u.length;l+=1){var c=u[l],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",c.rx),p.setAttributeNS(null,"ry",c.ry),s.appendChild(p)}var h=n.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);var d=n.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(d);var f=n.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(m),(r=n.createNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"transform","translate(6.0, 7.0)"),r.setAttributeNS(null,"fill","#FFFFFF"),(o=n.createNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"transform","translate(8.0, 8.0)"),(d=n.createNS("http://www.w3.org/2000/svg","circle")).setAttributeNS(null,"fill","#000000"),d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"cx","5.5"),d.setAttributeNS(null,"cy","5.5"),d.setAttributeNS(null,"r","5.4999962"),(m=n.createNS("http://www.w3.org/2000/svg","circle")).setAttributeNS(null,"fill","#FFFFFF"),m.setAttributeNS(null,"cx","5.5"),m.setAttributeNS(null,"cy","5.5"),m.setAttributeNS(null,"r","5.4999962"),o.appendChild(d),o.appendChild(m),a.appendChild(s),a.appendChild(h),a.appendChild(f),a.appendChild(r),a.appendChild(o),i.appendChild(a),i.setAttributeNS(null,"height",41*this._scale+"px"),i.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(i),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(e){e.preventDefault()})),this._element.addEventListener("mousedown",(function(e){e.preventDefault()})),na(this._element,this._anchor,"marker"),this._popup=null}var aa,sa,la={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ua=0,ca=!1;function pa(t){sa.call(this),this.options=e.extend({},la,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}(sa=e.Evented)&&(pa.__proto__=sa),((pa.prototype=Object.create(sa&&sa.prototype)).constructor=pa).prototype.onAdd=function(t){var r;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==aa?r(aa):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){aa="denied"!==e.state,r(aa)})):(aa=!!e.window.navigator.geolocation,r(aa)),this._container},pa.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ua=0,ca=!1},pa.prototype._isOutOfMapMaxBounds=function(e){var t=this._map.getMaxBounds();return e=e.coords,t&&(e.longitude<t.getWest()||e.longitude>t.getEast()||e.latitude<t.getSouth()||e.latitude>t.getNorth())},pa.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},pa.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}},pa.prototype._updateCamera=function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy;t=this._map.getBearing(),t=e.extend({bearing:t},this.options.fitBoundsOptions),this._map.fitBounds(n.toBounds(r),t,{geolocateSource:!0})},pa.prototype._updateMarker=function(t){var n;t?(n=new e.LngLat(t.coords.longitude,t.coords.latitude),this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()):(this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove())},pa.prototype._updateCircleRadius=function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]);e=this._map.unproject([1,e]),e=t.distanceTo(e),e=Math.ceil(2*this._accuracy/e),this._circleElement.style.width=e+"px",this._circleElement.style.height=e+"px"},pa.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},pa.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&ca)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}},pa.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},pa.prototype._setupUI=function(t){var r,i=this;this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),!(this._geolocateButton.type="button")===t?(e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),r=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)):(r=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ia(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ia({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){var n=t.originalEvent&&"resize"===t.originalEvent.type;t.geolocateSource||"ACTIVE_LOCK"!==i._watchState||n||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),i.fire(new e.Event("trackuserlocationend")))}))},pa.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ua--,ca=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}var t;"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ca=1<++ua?(t={maximumAge:6e5,timeout:0},!0):(t=this.options.positionOptions,!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t))}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},pa.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Z=pa;var ha={maxWidth:100,unit:"metric"};function da(e,t,n){var r=n&&n.maxWidth||100,i=e._container.clientHeight/2,o=e.unproject([0,i]);i=e.unproject([r,i]),o=o.distanceTo(i),n&&"imperial"===n.unit?5280<(i=3.2808*o)?fa(t,r,i/5280,e._getUIString("ScaleControl.Miles")):fa(t,r,i,e._getUIString("ScaleControl.Feet")):n&&"nautical"===n.unit?fa(t,r,o/1852,e._getUIString("ScaleControl.NauticalMiles")):1e3<=o?fa(t,r,o/1e3,e._getUIString("ScaleControl.Kilometers")):fa(t,r,o,e._getUIString("ScaleControl.Meters"))}function fa(e,t,n,r){var i,o=(o=n,o=10<=(o/=i=Math.pow(10,(""+Math.floor(o)).length-1))?10:5<=o?5:3<=o?3:2<=o?2:1<=o?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(o),i*o);e.style.width=t*(o/n)+"px",e.innerHTML=o+"&nbsp;"+r}Y=function(t){this.options=e.extend({},ha,t),e.bindAll(["_onMove","setUnit"],this)},Y.prototype.getDefaultPosition=function(){return"bottom-left"},Y.prototype._onMove=function(){da(this._map,this._container,this.options)},Y.prototype.onAdd=function(e){return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Y.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Y.prototype.setUnit=function(e){this.options.unit=e,da(this._map,this._container,this.options)},ae=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")},ae.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ae.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ae.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},ae.prototype._setupUI=function(){var t=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ae.prototype._updateTitle=function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e},ae.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ae.prototype._isFullscreen=function(){return this._fullscreen},ae.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ae.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ma,ga={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ya=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function va(t){ma.call(this),this.options=e.extend(Object.create(ga),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}(ma=e.Evented)&&(va.__proto__=ma),((va.prototype=Object.create(ma&&ma.prototype)).constructor=va).prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},va.prototype.isOpen=function(){return!!this._map},va.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},va.prototype.getLngLat=function(){return this._lngLat},va.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},va.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},va.prototype.getElement=function(){return this._container},va.prototype.setText=function(t){return this.setDOMContent(e.window.document.createTextNode(t))},va.prototype.setHTML=function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},va.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},va.prototype.setMaxWidth=function(e){return this.options.maxWidth=e,this._update(),this},va.prototype.setDOMContent=function(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this},va.prototype.addClassName=function(e){this._container&&this._container.classList.add(e)},va.prototype.removeClassName=function(e){this._container&&this._container.classList.remove(e)},va.prototype.setOffset=function(e){return this.options.offset=e,this._update(),this},va.prototype.toggleClassName=function(e){if(this._container)return this._container.classList.toggle(e)},va.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},va.prototype._onMouseUp=function(e){this._update(e.point)},va.prototype._onMouseMove=function(e){this._update(e.point)},va.prototype._onDrag=function(e){this._update(e.point)},va.prototype._update=function(t){var r,i,o,a=this,s=this._lngLat||this._trackPointer;this._map&&s&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return a._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ea(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t||(r=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),i=this.options.anchor,o=function t(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new e.Point(0,0),top:new e.Point(0,n),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-n),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(n,0),right:new e.Point(-n,0)}}return n instanceof e.Point||Array.isArray(n)?{center:r=e.Point.convert(n),top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}:{center:e.Point.convert(n.center||[0,0]),top:e.Point.convert(n.top||[0,0]),"top-left":e.Point.convert(n["top-left"]||[0,0]),"top-right":e.Point.convert(n["top-right"]||[0,0]),bottom:e.Point.convert(n.bottom||[0,0]),"bottom-left":e.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(n["bottom-right"]||[0,0]),left:e.Point.convert(n.left||[0,0]),right:e.Point.convert(n.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset),i||(s=this._container.offsetWidth,t=this._container.offsetHeight,t=r.y+o.bottom.y<t?["top"]:r.y>this._map.transform.height-t?["bottom"]:[],r.x<s/2?t.push("left"):r.x>this._map.transform.width-s/2&&t.push("right"),i=0===t.length?"bottom":t.join("-")),o=r.add(o[i]).round(),n.setTransform(this._container,ta[i]+" translate("+o.x+"px,"+o.y+"px)"),na(this._container,i,"popup")))},va.prototype._focusFirstElement=function(){var e;this.options.focusAfterOpen&&this._container&&(e=this._container.querySelector(ya))&&e.focus()},va.prototype._onClose=function(){this.remove()},Zt=va;var _a={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:yn,NavigationControl:j,GeolocateControl:Z,AttributionControl:qo,ScaleControl:Y,FullscreenControl:ae,Popup:Zt,Marker:ia,Style:wr,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){vn().acquire(fn)},clearPrewarmedResources:function(){var e=gn;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(fn),gn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return mn.workerCount},set workerCount(e){mn.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:""};return _a})),o)})),a=(o.Map,o.setRTLTextPlugin),s=(o.supported,o.Marker),l="atlas.microsoft.com",u="atlas.microsoft.com",c="styling",p="2021-02-01",h="e96cb745-c6f5-409c-a775-c4313e468c1d",d="https://login.microsoftonline.com/",f="api-version",m="Authorization",g="Bearer ",y="{{azMapsDomain}}",v="{azMapsDomain}",_="{{azMapsView}}",b="view",x="{{azMapsLanguage}}",w="{{azMapsStylingPath}}",S="{{azMapsStylePath}}",E="styling",C="styles",T="2.0",I="Map-Agent",k="x-ms-client-id",P="Ms-Am-Request-Origin",A="MapControl",M="https://atlas.microsoft.com/",O="Session-Id",L=function(e,t){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function R(e,t){function n(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function z(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function N(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function B(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function j(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F(arguments[t]));return e}var U=(V.prototype.merge=function(){for(var e,t,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var o=B(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(s)for(var l in s)s.hasOwnProperty(l)&&this.hasOwnProperty(l)&&(void 0!==s[l]&&null!=s[l]?this[l]instanceof V?this[l].merge(s[l]):this[l]=s[l]:(n=n||new(Object.getPrototypeOf(this).constructor),this[l]=n[l]))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return this},V);function V(){}var q,H=(R(W,q=U),W);function W(){var e=null!==q&&q.apply(this,arguments)||this;return e.domain=void 0,e.headers={},e.path="",e.protocol="https",e.queryParams={},e.subdomain="",e}var G=(Z.prototype.get=function(){return fetch(this.toString(),{method:"GET",mode:"cors",headers:new Headers(this.options.headers)}).then((function(e){if(e.ok)return e.json();throw new Error("HTTP "+e.status+": "+e.statusText)}))},Z.prototype.toString=function(){var e=Object.entries(this.options.queryParams).map((function(e){return(e=F(e,2))[0]+"="+e[1]})).join("&"),t=[],n=this.options.path||"";return Z.protoRegEx.test(n)?t.push(n):(this.options.domain&&(Z.protoRegEx.test(this.options.domain)||(t.push(this.options.protocol+"://"),t.push(this.options.subdomain?this.options.subdomain+".":"")),t.push(this.options.domain)),t.push(this.options.path?"/"+n:"")),t.push(e?"?"+e:""),t.join("")},Z.protoRegEx=new RegExp(/^(((file|http|https):\/\/)|blob:)/i),Z);function Z(e){this.options=(new H).merge(e)}var K="2.1.5",X=(Y.getFullVersion=function(){return K},Y.getEndpointVersion=function(){var e=K.indexOf(".");return-1===(e=K.indexOf(".",e+1))?K:K.substring(0,e)},Y);function Y(){}function J(e){var t=document.createElement("span");return t.innerText=e,t.classList.add("tooltiptext"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&t.classList.add("dark"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){(e=e.matches)&&!t.classList.contains("dark")?t.classList.add("dark"):!e&&t.classList.contains("dark")&&t.classList.remove("dark")})),t}function $(e,t,n){function r(r){var i=t.getBoundingClientRect(),o=e.getBoundingClientRect(),a=i.x+o.width>window.innerWidth?window.innerWidth-o.width:i.x;o=i.y+i.height+o.height+4>window.innerHeight?i.y-o.height-4:i.y+i.height+4,n&&t.parentElement&&(i=t.parentElement?t.parentElement.getBoundingClientRect():null,e.style.position="absolute",a-=i.x,o-=i.y),e.style.transform="translate("+a+"px, "+o+"px)"}void 0===n&&(n=!1),t.addEventListener("mouseover",r),t.addEventListener("focusin",r)}(Ne=t.ControlPosition||(t.ControlPosition={})).TopLeft="top-left",Ne.TopRight="top-right",Ne.BottomLeft="bottom-left",Ne.BottomRight="bottom-right",Ne.NonFixed="non-fixed";var Q,ee=(R(te,Q=U),te);function te(){var e=null!==Q&&Q.apply(this,arguments)||this;return e.position=t.ControlPosition.NonFixed,e}var ne=(re.prototype.getLuminosity=function(){for(var e=[this.r,this.g,this.b],t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((.055+r)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},re.prototype.getRBGA=function(e){var t=document.createElement("canvas").getContext("2d");return t.globalAlpha=1,t.fillStyle=e,t.fillRect(0,0,1,1),[(t=t.getImageData(0,0,1,1).data)[0],t[1],t[2],t[3]]},re);function re(e){var t;e&&(t=void 0,3<=(t="string"==typeof e?this.getRBGA(e):e).length&&(this.r=t[0],this.g=t[1],this.b=t[2],3<t.length&&(this.a=t[3])))}(Fe=t.ControlStyle||(t.ControlStyle={})).light="light",Fe.dark="dark",Fe.auto="auto";var ie=Map,oe=(ae.prototype._addEventListener=function(e,t,n){this.listeners.has(e)||this.listeners.set(e,new ie),this.listeners.get(e).set(t,n)},ae.prototype._removeEventListener=function(e,t){this.listeners.has(e)&&this.listeners.get(e).delete(t)},ae.prototype._invokeEvent=function(e,t){var n=this;this.listeners.has(e)&&this.listeners.get(e).forEach((function(r,i){r&&n._removeEventListener(e,i);try{i(t)}catch(r){console.error(r)}}))},ae);function ae(){this.listeners=new ie}var se,le=Object.freeze({__proto__:null,EventEmitter:oe}),ue=(R(ce,se=oe),ce.prototype.onRemove=function(){this._container&&(this._container.remove(),delete this._container),this._map&&(this._map.events.remove("styledata",this._onStyleChange),delete this._map),this._observer&&(this._observer.disconnect(),delete this._observer),delete this._theme},ce.prototype.buildContainer=function(e,n,r,i){var o=this;return this._map=e,this._container=document.createElement(i||"div"),this._container.classList.add("azure-maps-control-container"),"string"==typeof r&&this._container.setAttribute("aria-label",r),n.toLowerCase()===t.ControlStyle.auto?this._map.styles.initialize().then((function(){o._map&&(o._onStyleChange(),o._map.events.add("styledata",o._onStyleChange))})):this._container.classList.add(n),this._container},ce.prototype._setTheme=function(e){this._theme!==e&&(this._container.classList.remove(this._theme),this._container.classList.add(e),this._theme=e)},ce.activateClickDelay=100,ce);function ce(){var e=null!==se&&se.apply(this,arguments)||this;return e._onStyleChange=function(){var t;e._map.getStyle().style.toLowerCase().startsWith("blank")?e._observer||(e._onBackgroundChange(),e._observer=new MutationObserver(e._onBackgroundChange),e._observer.observe(e._map.getMapContainer(),{attributes:!0,attributeFilter:["style"]})):(e._observer&&(e._observer.disconnect(),delete e._observer),t=e._map.styles.getTheme(e._map.getStyle()),e._setTheme(t))},e._onBackgroundChange=function(){var n=new ne(e._map.getMapContainer().style.backgroundColor).getLuminosity();n=isNaN(n)||.5<n?t.ControlStyle.light:t.ControlStyle.dark,e._setTheme(n)},e}var pe,he=(R(de,pe=U),de);function de(){var e=null!==pe&&pe.apply(this,arguments)||this;return e.rotationDegreesDelta=15,e.style=t.ControlStyle.light,e}var fe,me=(R(ge,fe=ue),ge.prototype.onAdd=function(e,t){var n=this,r=this.buildContainer(e,this.options.style,"Rotation Control"),i=this.constructRotationButton(e),o=this.constructRotationGrid(e,t);return e=J("Reset to Default Rotation"),r.addEventListener("mouseover",(function(e){n.lastActiveTime=n.lastActiveTime||e.timeStamp,n.hasMouse=!0,r.classList.add("in-use"),o.classList.remove("hidden-accessible-element")})),r.addEventListener("focusin",(function(e){n.lastActiveTime=n.lastActiveTime||e.timeStamp,n.hasFocus=!0,r.classList.add("in-use"),o.classList.remove("hidden-accessible-element")})),r.addEventListener("mouseleave",(function(){n.hasMouse=!1,n.hasFocus||(delete n.lastActiveTime,r.classList.remove("in-use"),o.classList.add("hidden-accessible-element"))})),r.addEventListener("focusout",(function(e){e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(n.hasFocus=!1,n.hasMouse||(delete n.lastActiveTime,r.classList.remove("in-use"),o.classList.add("hidden-accessible-element")))})),t&&ge.InvertOrderPositions.includes(t.position)?(r.appendChild(o),r.appendChild(i),r.appendChild(e),$(e,i)):(r.appendChild(i),r.appendChild(e),$(e,i),r.appendChild(o)),r},ge.prototype.constructRotationGrid=function(e,t){var n=document.createElement("div");n.classList.add("sub-container"),n.classList.add("hidden-accessible-element");var r=this.constructRightRotationButton(e),i=this.constructLeftRotationButton(e),o=J("Rotate Left");return e=J("Rotate Right"),t&&ge.InvertOrderPositions.includes(t.position)?(n.appendChild(r),n.appendChild(e),$(e,r),n.appendChild(i),n.appendChild(o),$(o,i)):(n.appendChild(i),n.appendChild(o),$(o,i),n.appendChild(r),n.appendChild(e),$(e,r)),n},ge.prototype.constructRotationButton=function(e){var t=this,n=document.createElement("button");n.classList.add("azure-maps-control-button"),n.classList.add("rotation"),n.setAttribute("aria-label","Reset to Default Rotation"),n.setAttribute("alt","Reset to Default Rotation"),n.setAttribute("type","button");var r=document.createElement("div");return n.appendChild(r),n.addEventListener("click",(function(n){n.timeStamp-t.lastActiveTime>ue.activateClickDelay&&e.setCamera({bearing:ge.DefaultRotation},!0)})),e.events.add("rotate",(function(e){r.style.transform="rotate("+-e.map.getCamera().bearing+"deg)"})),n},ge.prototype.constructRightRotationButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("azure-maps-control-button"),n.classList.add("rotation-right"),n.setAttribute("aria-label","Rotate Right"),n.setAttribute("alt","Rotate Right"),n.setAttribute("type","button"),n.addEventListener("click",(function(){e.setCamera({bearing:e.getCamera().bearing-t.options.rotationDegreesDelta,duration:ge.RotationDuration,type:"ease"},!0)})),n},ge.prototype.constructLeftRotationButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("azure-maps-control-button"),n.classList.add("rotation-left"),n.setAttribute("aria-label","Rotate Left"),n.setAttribute("alt","Rotate Left"),n.setAttribute("type","button"),n.addEventListener("click",(function(){e.setCamera({bearing:e.getCamera().bearing+t.options.rotationDegreesDelta,duration:ge.RotationDuration,type:"ease"},!0)})),n},ge.DefaultRotation=0,ge.RotationDuration=100,ge.InvertOrderPositions=[t.ControlPosition.BottomRight,t.ControlPosition.TopRight],ge);function ge(e){var t=fe.call(this)||this;return t.hasMouse=!1,t.hasFocus=!1,t.options=(new he).merge(e),t}var ye,ve=(R(_e,ye=U),_e);function _e(){var e=null!==ye&&ye.apply(this,arguments)||this;return e.pitchDegreesDelta=10,e.style=t.ControlStyle.light,e}var be,xe=(R(we,be=ue),we.prototype.onAdd=function(e,t){var n=this,r=this.buildContainer(e,this.options.style,"Pitch Control"),i=this.constructPitchButton(e),o=this.constructPitchGrid(e,t),a=J("Reset to Default Pitch");return r.addEventListener("mouseover",(function(e){n.lastActiveTime=n.lastActiveTime||e.timeStamp,n.hasMouse=!0,r.classList.add("in-use"),o.classList.remove("hidden-accessible-element")})),r.addEventListener("focusin",(function(e){n.lastActiveTime=n.lastActiveTime||e.timeStamp,n.hasFocus=!0,r.classList.add("in-use"),o.classList.remove("hidden-accessible-element")})),r.addEventListener("mouseleave",(function(){n.hasMouse=!1,n.hasFocus||(delete n.lastActiveTime,r.classList.remove("in-use"),o.classList.add("hidden-accessible-element"))})),r.addEventListener("focusout",(function(e){e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(n.hasFocus=!1,n.hasMouse||(delete n.lastActiveTime,r.classList.remove("in-use"),o.classList.add("hidden-accessible-element")))})),t&&we.INVERT_ORDER_POSITIONS.includes(t.position)?(r.appendChild(o),r.appendChild(i),r.appendChild(a),$(a,r)):(r.appendChild(i),r.appendChild(a),$(a,r),r.appendChild(o)),this.map=e,this.container=r,e.events.add("pitch",this.pitchChanged),r},we.prototype.onRemove=function(){this.container&&(this.container.remove(),this.container=null,this.pitchIncrementButton=null,this.pitchDecrementButton=null),this.map&&(this.map.events.remove("pitch",this.pitchChanged),this.map=null)},we.prototype.constructPitchGrid=function(e,t){var n=document.createElement("div");n.classList.add("sub-container"),n.classList.add("hidden-accessible-element"),this.pitchIncrementButton=this.constructPitchIncrementButton(e),this.pitchDecrementButton=this.constructPitchDecrementButton(e);var r=J("Increase Pitch");return e=J("Decrease Pitch"),t&&we.INVERT_ORDER_POSITIONS.includes(t.position)?(n.appendChild(this.pitchDecrementButton),n.appendChild(e),$(e,this.pitchDecrementButton),n.appendChild(this.pitchIncrementButton),n.appendChild(r),$(r,this.pitchIncrementButton)):(n.appendChild(this.pitchIncrementButton),n.appendChild(r),$(r,this.pitchIncrementButton),n.appendChild(this.pitchDecrementButton),n.appendChild(e),$(e,this.pitchDecrementButton)),n},we.prototype.constructPitchButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("azure-maps-control-button"),n.classList.add("pitch"),n.setAttribute("aria-label","Reset to Default Pitch"),n.setAttribute("alt","Reset to Default Pitch"),n.setAttribute("type","button"),n.addEventListener("click",(function(){event.timeStamp-t.lastActiveTime>ue.activateClickDelay&&e.setCamera({pitch:we.DEFAULT_PITCH},!0)})),n},we.prototype.constructPitchDecrementButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("azure-maps-control-button"),n.classList.add("pitch-down"),n.setAttribute("aria-label","Decrease Pitch"),n.setAttribute("alt","Decrease Pitch"),n.setAttribute("type","button"),n.addEventListener("click",(function(){e.setCamera({pitch:e.getCamera().pitch-t.options.pitchDegreesDelta,duration:we.PITCH_DURATION_MS,type:"ease"},!0)})),n},we.prototype.constructPitchIncrementButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("azure-maps-control-button"),n.classList.add("pitch-up"),n.setAttribute("aria-label","Increase Pitch"),n.setAttribute("alt","Increase Pitch"),n.setAttribute("type","button"),n.addEventListener("click",(function(){e.setCamera({pitch:e.getCamera().pitch+t.options.pitchDegreesDelta,duration:we.PITCH_DURATION_MS,type:"ease"},!0)})),n},we.PITCH_DURATION_MS=100,we.DEFAULT_PITCH=0,we.INVERT_ORDER_POSITIONS=[t.ControlPosition.BottomRight,t.ControlPosition.TopRight],we);function we(e){var t=be.call(this)||this;return t.container=null,t.map=null,t.pitchIncrementButton=null,t.pitchDecrementButton=null,t.hasMouse=!1,t.hasFocus=!1,t.pitchChanged=function(e){return t.updatePitchButtonsState()},t.updatePitchButtonsState=function(){var e=t.map.getCamera().pitch<=0,n=60<=t.map.getCamera().pitch;t.pitchIncrementButton&&t.pitchIncrementButton.disabled!=n&&(t.pitchIncrementButton.disabled=n),t.pitchDecrementButton&&t.pitchDecrementButton.disabled!=e&&(t.pitchDecrementButton.disabled=e)},t.options=(new ve).merge(e),t}var Se=function(e,t){return e===t||e!=e&&t!=t},Ee=function(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1},Ce=Array.prototype.splice,Te=function(e){var t=this.__data__;return!((e=Ee(t,e))<0)&&(e==t.length-1?t.pop():Ce.call(t,e,1),--this.size,!0)},Ie=function(e){var t=this.__data__;return(e=Ee(t,e))<0?void 0:t[e][1]},ke=function(e){return-1<Ee(this.__data__,e)},Pe=function(e,t){var n=this.__data__,r=Ee(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Ae(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ae.prototype.clear=function(){this.__data__=[],this.size=0},Ae.prototype.delete=Te,Ae.prototype.get=Ie,Ae.prototype.has=ke,Ae.prototype.set=Pe;var Me=Ae,Oe=function(){this.__data__=new Me,this.size=0},Le=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Re=function(e){return this.__data__.get(e)},De=function(e){return this.__data__.has(e)},ze="object"==typeof r&&r&&r.Object===Object&&r,Ne="object"==typeof self&&self&&self.Object===Object&&self,Be=ze||Ne||Function("return this")(),Fe=Be.Symbol,je=(Te=Object.prototype).hasOwnProperty,Ue=Te.toString,Ve=Fe?Fe.toStringTag:void 0,qe=function(e){var t=je.call(e,Ve),n=e[Ve];try{var r=!(e[Ve]=void 0)}catch(e){}var i=Ue.call(e);return r&&(t?e[Ve]=n:delete e[Ve]),i},He=Object.prototype.toString,We=function(e){return He.call(e)},Ge=Fe?Fe.toStringTag:void 0,Ze=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(Ge&&Ge in Object(e)?qe:We)(e)},Ke=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Xe=function(e){return!!Ke(e)&&("[object Function]"==(e=Ze(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)},Ye=(Ie=Be["__core-js_shared__"],(ke=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+ke:""),Je=function(e){return!!Ye&&Ye in e},$e=Function.prototype.toString,Qe=function(e){if(null!=e){try{return $e.call(e)}catch(e){}try{return e+""}catch(e){}}return""},et=/^\[object .+?Constructor\]$/,tt=(Pe=Function.prototype,r=Object.prototype,Ne=Pe.toString,Te=r.hasOwnProperty,RegExp("^"+Ne.call(Te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$")),nt=function(e){return!(!Ke(e)||Je(e))&&(Xe(e)?tt:et).test(Qe(e))},rt=function(e,t){return null==e?void 0:e[t]},it=function(e,t){return t=rt(e,t),nt(t)?t:void 0},ot=it(Be,"Map"),at=it(Object,"create"),st=(Ie=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Object.prototype.hasOwnProperty),lt=(ke=function(e){var t=this.__data__;if(at){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return st.call(t,e)?t[e]:void 0},Object.prototype.hasOwnProperty);function ut(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pe=function(e){var t=this.__data__;return at?void 0!==t[e]:lt.call(t,e)},r=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=at&&void 0===t?"__lodash_hash_undefined__":t,this},ut.prototype.clear=function(){this.__data__=at?at(null):{},this.size=0},ut.prototype.delete=Ie,ut.prototype.get=ke,ut.prototype.has=Pe,ut.prototype.set=r;var ct=ut;Ne=function(){this.size=0,this.__data__={hash:new ct,map:new(ot||Me),string:new ct}};var pt=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},ht=function(e,t){return e=e.__data__,pt(t)?e["string"==typeof t?"string":"hash"]:e.map};function dt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Te=function(e){return e=ht(this,e).delete(e),this.size-=e?1:0,e},Ie=function(e){return ht(this,e).get(e)},ke=function(e){return ht(this,e).has(e)},Pe=function(e,t){var n=ht(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},dt.prototype.clear=Ne,dt.prototype.delete=Te,dt.prototype.get=Ie,dt.prototype.has=ke,dt.prototype.set=Pe;var ft=dt;function mt(e){e=this.__data__=new Me(e),this.size=e.size}r=function(e,t){var n=this.__data__;if(n instanceof Me){var r=n.__data__;if(!ot||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ft(r)}return n.set(e,t),this.size=n.size,this},mt.prototype.clear=Oe,mt.prototype.delete=Le,mt.prototype.get=Re,mt.prototype.has=De,mt.prototype.set=r;var gt=mt,yt=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},vt=function(){try{var e=it(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_t=function(e,t,n){"__proto__"==t&&vt?vt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},bt=Object.prototype.hasOwnProperty,xt=function(e,t,n){var r=e[t];bt.call(e,t)&&Se(r,n)&&(void 0!==n||t in e)||_t(e,t,n)},wt=function(e,t,n,r){var i=!n;n=n||{};for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),(i?_t:xt)(n,s,l)}return n},St=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Et=function(e){return null!=e&&"object"==typeof e},Ct=(Ne=function(e){return Et(e)&&"[object Arguments]"==Ze(e)},(Te=Object.prototype).hasOwnProperty),Tt=Te.propertyIsEnumerable,It=Ne(function(){return arguments}())?Ne:function(e){return Et(e)&&Ct.call(e,"callee")&&!Tt.call(e,"callee")},kt=Array.isArray;function Pt(){return!1}var At=i((function(e,t){var n=(n=(t=(n=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e)&&t.exports===n?Be.Buffer:void 0)?n.isBuffer:void 0;e.exports=n||Pt})),Mt=/^(?:0|[1-9]\d*)$/,Ot=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Mt.test(e))&&-1<e&&e%1==0&&e<t},Lt=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},Rt={};Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Arguments]"]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object Boolean]"]=Rt["[object DataView]"]=Rt["[object Date]"]=Rt["[object Error]"]=Rt["[object Function]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt["[object Object]"]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object WeakMap]"]=!1,Ie=function(e){return Et(e)&&Lt(e.length)&&!!Rt[Ze(e)]},ke=function(e){return function(t){return e(t)}},Pe=i((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e,r=n&&n.exports===t&&ze.process;t=function(){try{var e=n&&n.require&&n.require("util").types;return e||r&&r.binding&&r.binding("util")}catch(e){}}(),e.exports=t}));var Dt=(Oe=Pe&&Pe.isTypedArray)?ke(Oe):Ie,zt=Object.prototype.hasOwnProperty,Nt=function(e,t){var n,r=kt(e),i=!r&&It(e),o=!r&&!i&&At(e),a=!r&&!i&&!o&&Dt(e),s=r||i||o||a,l=s?St(e.length,String):[],u=l.length;for(n in e)!t&&!zt.call(e,n)||s&&("length"==n||o&&("offset"==n||"parent"==n)||a&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||Ot(n,u))||l.push(n);return l},Bt=Object.prototype,Ft=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Bt)},jt=(Le=function(e,t){return function(n){return e(t(n))}},Le(Object.keys,Object)),Ut=Object.prototype.hasOwnProperty,Vt=function(e){if(!Ft(e))return jt(e);var t,n=[];for(t in Object(e))Ut.call(e,t)&&"constructor"!=t&&n.push(t);return n},qt=function(e){return null!=e&&Lt(e.length)&&!Xe(e)},Ht=function(e){return(qt(e)?Nt:Vt)(e)},Wt=function(e,t){return e&&wt(t,Ht(t),e)},Gt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Zt=Object.prototype.hasOwnProperty,Kt=function(e){if(!Ke(e))return Gt(e);var t,n=Ft(e),r=[];for(t in e)("constructor"!=t||!n&&Zt.call(e,t))&&r.push(t);return r},Xt=function(e){return qt(e)?Nt(e,!0):Kt(e)},Yt=function(e,t){return e&&wt(t,Xt(t),e)},Jt=i((function(e,t){var n,r=(n=(t=(n=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e)&&t.exports===n?Be.Buffer:void 0)?n.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=r?r(t):new e.constructor(t),e.copy(t),t)}})),$t=function(e,t){var n=-1,r=e.length;for(t=t||Array(r);++n<r;)t[n]=e[n];return t},Qt=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},en=(Re=function(){return[]},Object.prototype.propertyIsEnumerable),tn=Object.getOwnPropertySymbols,nn=tn?function(e){return null==e?[]:(e=Object(e),Qt(tn(e),(function(t){return en.call(e,t)})))}:Re,rn=function(e,t){return wt(e,nn(e),t)},on=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},an=Le(Object.getPrototypeOf,Object),sn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)on(t,nn(e)),e=an(e);return t}:Re,ln=function(e,t){return wt(e,sn(e),t)},un=function(e,t,n){return t=t(e),kt(e)?t:on(t,n(e))},cn=function(e){return un(e,Ht,nn)};function pn(e){return un(e,Xt,sn)}De=it(Be,"DataView"),r=it(Be,"Promise"),Te=it(Be,"Set"),Ne=it(Be,"WeakMap");var hn="[object Map]",dn="[object Promise]",fn="[object Set]",mn="[object WeakMap]",gn="[object DataView]",yn=Qe(De),vn=Qe(ot),_n=Qe(r),bn=Qe(Te),xn=Qe(Ne),wn=(Oe=Ze,Oe=De&&Oe(new De(new ArrayBuffer(1)))!=gn||ot&&Oe(new ot)!=hn||r&&Oe(r.resolve())!=dn||Te&&Oe(new Te)!=fn||Ne&&Oe(new Ne)!=mn?function(e){var t=Ze(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?Qe(e):"")switch(e){case yn:return gn;case vn:return hn;case _n:return dn;case bn:return fn;case xn:return mn}return t}:Oe),Sn=Object.prototype.hasOwnProperty,En=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Sn.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Cn=Be.Uint8Array,Tn=function(e){var t=new e.constructor(e.byteLength);return new Cn(t).set(new Cn(e)),t},In=function(e,t){return t=t?Tn(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength)},kn=/\w*$/,Pn=function(e){var t=new e.constructor(e.source,kn.exec(e));return t.lastIndex=e.lastIndex,t},An=(Ie=Fe?Fe.prototype:void 0)?Ie.valueOf:void 0,Mn=function(e){return An?Object(An.call(e)):{}},On=function(e,t){return t=t?Tn(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)},Ln=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Tn(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return In(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return On(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Pn(e);case"[object Set]":return new r;case"[object Symbol]":return Mn(e)}},Rn=Object.create;function Dn(){}var zn=function(e){return Ke(e)?Rn?Rn(e):(Dn.prototype=e,e=new Dn,Dn.prototype=void 0,e):{}},Nn=function(e){return"function"!=typeof e.constructor||Ft(e)?{}:zn(an(e))},Bn=(Le=function(e){return Et(e)&&"[object Map]"==wn(e)},(Re=Pe&&Pe.isMap)?ke(Re):Le),Fn=(De=function(e){return Et(e)&&"[object Set]"==wn(e)},(r=Pe&&Pe.isSet)?ke(r):De),jn="[object Arguments]",Un="[object Function]",Vn="[object Object]",qn={};qn[jn]=qn["[object Array]"]=qn["[object ArrayBuffer]"]=qn["[object DataView]"]=qn["[object Boolean]"]=qn["[object Date]"]=qn["[object Float32Array]"]=qn["[object Float64Array]"]=qn["[object Int8Array]"]=qn["[object Int16Array]"]=qn["[object Int32Array]"]=qn["[object Map]"]=qn["[object Number]"]=qn[Vn]=qn["[object RegExp]"]=qn["[object Set]"]=qn["[object String]"]=qn["[object Symbol]"]=qn["[object Uint8Array]"]=qn["[object Uint8ClampedArray]"]=qn["[object Uint16Array]"]=qn["[object Uint32Array]"]=!0,qn["[object Error]"]=qn[Un]=qn["[object WeakMap]"]=!1;var Hn,Wn,Gn=function e(t,n,r,i,o,a){var s,l=1&n,u=2&n,c=4&n;if(void 0!==(s=r?o?r(t,i,o,a):r(t):s))return s;if(!Ke(t))return t;var p=kt(t);if(p){if(s=En(t),!l)return $t(t,s)}else{var h=wn(t);if(i=h==Un||"[object GeneratorFunction]"==h,At(t))return Jt(t,l);if(h==Vn||h==jn||i&&!o){if(s=u||i?{}:Nn(t),!l)return u?ln(t,Yt(s,t)):rn(t,Wt(s,t))}else{if(!qn[h])return o?t:{};s=Ln(t,h,l)}}if(l=(a=a||new gt).get(t))return l;a.set(t,s),Fn(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):Bn(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))})),u=c?u?pn:cn:u?keysIn:Ht;var d=p?void 0:u(t);return yt(d||t,(function(i,o){d&&(i=t[o=i]),xt(s,o,e(i,n,r,o,t,a))})),s},Zn=function(e){return Gn(e,5)},Kn=(R(Xn,Hn=U),Xn);function Xn(){var e=null!==Hn&&Hn.apply(this,arguments)||this;return e.layout="icons",e.mapStyles=["road","grayscale_light","grayscale_dark","night","road_shaded_relief"],e.style=t.ControlStyle.light,e.autoSelectionMode=!0,e}function Yn(e){var t=Wn.call(this)||this;return t.hasMouse=!1,t.hasFocus=!1,t.styleButtons=new ie,t.styleIcons=new ie,t.onStyleChange=function(){var e;t.options.autoSelectionMode&&(e=t.map.getStyle().style,t.setSelectedStyle(e))},t.options=(new Kn).merge(Zn(e)),t}R(Yn,Wn=ue),Yn.prototype.onAdd=function(e,t){var n=this;this.map=e;var r=this.buildContainer(e,this.options.style,"Map Style Control"),i=this.buildStyleOpsGrid(r),o=this.buildCurrStyleBtn(r,i);return e=J("Select Style"),r.addEventListener("mouseover",(function(){n.hasMouse=!0,r.classList.add(Yn.Css.inUse),i.classList.remove("hidden-accessible-element")})),r.addEventListener("focusin",(function(){n.hasFocus=!0,r.classList.add(Yn.Css.inUse),i.classList.remove("hidden-accessible-element")})),r.addEventListener("mouseleave",(function(){n.hasMouse=!1,n.hasFocus||(r.classList.remove(Yn.Css.inUse),i.classList.add("hidden-accessible-element"))})),r.addEventListener("focusout",(function(e){e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(n.hasFocus=!1,n.hasMouse||(r.classList.remove(Yn.Css.inUse),i.classList.add("hidden-accessible-element")))})),t&&Yn.InvertOrderPositions.includes(t.position)?(r.appendChild(i),r.appendChild(o),r.appendChild(e),$(e,o)):(r.appendChild(o),r.appendChild(e),$(e,o),r.appendChild(i)),r},Yn.prototype.onRemove=function(){Wn.prototype.onRemove.call(this),this.styleButtons.clear(),this.map.events.remove("styledata",this.onStyleChange)},Yn.prototype.setSelectedStyle=function(e){var t,n;this.styleIcons.has(e)&&(t=this.currStyleImage,n=this.styleIcons.get(e),t.src!==n&&(t.src=n),e=this.mapToFriendlyStyleName(e),t.alt!==e&&(t.alt=e))},Yn.prototype.disableStyle=function(e){(e=this.styleButtons[e])&&e.setAttribute("disabled","true")},Yn.prototype.enableStyle=function(e){(e=this.styleButtons[e])&&e.removeAttribute("disabled")},Yn.prototype.buildSelectStyleBtn=function(e,t){var n=this,r=document.createElement("button"),i=this.mapToFriendlyStyleName(e);r.setAttribute("alt",i),r.setAttribute("type","button");var o=new Image;return o.src=t,o.alt=i,r.appendChild(o),"icons"===this.options.layout?r.classList.add(Yn.Css.button):r.appendChild(document.createTextNode(i)),r.addEventListener("click",(function(){var t=n.styleButtons[e];t&&!t.hasAttribute("disabled")&&(n._invokeEvent("styleselected",e),n.options.autoSelectionMode&&n.map.setStyle({style:e}),Object.entries(n.styleButtons).forEach((function(t){var n=F(t,2);return t=n[0],n[1].setAttribute("aria-current",t===e?"true":"false")})))})),(i=document.createElement("div")).classList.add("selected-icon"),r.appendChild(i),r},Yn.prototype.buildCurrStyleBtn=function(e,t){var n=document.createElement("button");n.classList.add(Yn.Css.button),n.classList.add(Yn.Css.currentStyle),n.setAttribute("aria-label","Select Style"),n.setAttribute("alt","Select Style"),n.setAttribute("type","button"),this.currStyleImage=new Image,n.appendChild(this.currStyleImage);var r=document.createElement("div");return r.classList.add("icon"),n.appendChild(r),n},Yn.prototype.buildStyleOpsGrid=function(e){var t=this,n=document.createElement("div");return n.classList.add(Yn.Css.styleOptions),n.classList.add(this.options.layout),n.setAttribute("aria-label","Style Options"),n.classList.add("hidden-accessible-element"),this.map.styles.initialize().then((function(){var e,r,i,o=t.map.styles.getDef(),a=t.map.getStyle().style;try{for(var s=B(o.styles),l=s.next();!l.done;l=s.next()){var c=l.value,p=c.thumbnail;(-1<p.indexOf(w)||-1<p.indexOf(S))&&(p=new G({domain:u,path:c.thumbnail.replace(w,E).replace(S,C),queryParams:((i={})[f]=T,i)}).toString()),t.styleIcons.set(c.name,p),c.name===a&&(t.currStyleImage.src=p,t.currStyleImage.alt=t.mapToFriendlyStyleName(c.name))}}catch(r){e={error:r}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}"all"===t.options.mapStyles?t.styleIcons.forEach((function(e,r){e=t.buildSelectStyleBtn(r,e),n.appendChild(e),t.styleButtons[r]=e,r=J(t.mapToFriendlyStyleName(r)),n.appendChild(r),$(r,e)})):t.options.mapStyles.filter((function(e){return t.styleIcons.has(e)})).forEach((function(e){var r=t.styleIcons.get(e);r=t.buildSelectStyleBtn(e,r),n.appendChild(r),t.styleButtons[e]=r,e=J(t.mapToFriendlyStyleName(e)),n.appendChild(e),$(e,r)})),Object.entries(t.styleButtons).forEach((function(e){var t=F(e,2);return e=t[0],t[1].setAttribute("aria-current",e===a?"true":"false")})),t.map.events.add("styledata",t.onStyleChange)})),n},Yn.prototype.mapToFriendlyStyleName=function(e){return Yn.StyleNamesMap[e]||Yn.StyleNamesMap[e+"_indoor"]||e},Yn.InvertOrderPositions=[t.ControlPosition.TopRight,t.ControlPosition.BottomRight],Yn.Css={button:"azure-maps-control-button",currentStyle:"curr-style",inUse:"in-use",styleOptions:"style-options"},Yn.StyleNamesMap={road:"Road",satellite:"Satellite",satellite_road_labels:"Hybrid",grayscale_dark:"Grayscale (Dark)",grayscale_light:"Grayscale (Light)",night:"Night",road_shaded_relief:"Terra",blank:"Blank",blank_accessible:"Blank (Accessible)",high_contrast_dark:"High contrast (Dark)",high_contrast_light:"High contrast (Light)"},Te=Yn;var Jn,$n=(R(Qn,Jn=U),Qn);function Qn(){var e=null!==Jn&&Jn.apply(this,arguments)||this;return e.flow="none",e.incidents=!1,e}var er,tr=(R(nr,er=$n),nr);function nr(){var e=null!==er&&er.apply(this,arguments)||this;return e.isActive=!1,e.style=t.ControlStyle.light,e}var rr,ir,or=(R(ar,rr=ue),Object.defineProperty(ar.prototype,"isActive",{get:function(){if(!this.map)return!1;var e=this.map.getTraffic();return"none"!==e.flow||e.incidents},set:function(e){this.map&&this.map.setTraffic({flow:e?this.options.flow:"none",incidents:!!e&&this.options.incidents})},enumerable:!1,configurable:!0}),ar.prototype.onAdd=function(e){(this.map=e).getTraffic(),void 0!==this.initIsActive&&(this.isActive=this.initIsActive),this.container=this.buildContainer(e,this.style,"Traffic Control"),this.container.style.flexDirection="column";var t=this.constructTrafficButton(e);return this.container.appendChild(t),e=J("Toggle Traffic Display"),this.container.appendChild(e),$(e,t),this.container},ar.prototype.onRemove=function(){this.map=null},ar.prototype.getOptions=function(){return(new tr).merge({isActive:this.isActive,flow:this.options.flow,incidents:this.options.incidents,style:this.style})},ar.prototype.updateButtonState=function(){this.isActive?this.container.classList.add("in-use"):this.container.classList.remove("in-use"),this.trafficButton&&this.trafficButton.setAttribute("aria-pressed",this.isActive?"true":"false")},ar.prototype.constructTrafficButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("azure-maps-control-button"),n.classList.add("traffic"),n.setAttribute("aria-label","Toggle Traffic Display"),n.setAttribute("alt","Toggle Traffic Display"),n.setAttribute("type","button"),this.trafficButton=n,this.updateButtonState(),n.addEventListener("click",(function(){t.isActive=!t.isActive})),n},ar);function ar(e){var n=rr.call(this)||this;return n.hasMouse=!1,n.hasFocus=!1,n.options=(new $n).merge({flow:"relative",incidents:!0}),n.style=t.ControlStyle.light,n.container=null,n.trafficButton=null,n.map=null,e&&(n.initIsActive=e.isActive||!1,n.options.flow=e.flow||"relative",n.options.incidents=e.incidents||!0,n.style=e.style||t.ControlStyle.light),n}function sr(){var e=ir.call(this)||this;return e.table=["Fast",["green","yellow","red","dark-red"],"Slow"],e}function lr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ft;++t<n;)this.add(e[t])}R(sr,ir=ue),sr.prototype.onAdd=function(e){var n=this.buildContainer(e,t.ControlStyle.auto,"Traffic Legend");return e=this.buildTrafficLegendDiv(e),n.appendChild(e),n},sr.prototype.buildTrafficLegendDiv=function(e){var t,n,r,i,o=document.createElement("div");o.classList.add("traffic-legend","hidden"),o.setAttribute("alt","Traffic Legend");var a=document.createElement("table"),s=document.createElement("tr"),l=document.createElement("td");l.setAttribute("alt","Traffic"),l.appendChild(document.createTextNode("Traffic"));var u=J("Traffic");l.classList.add("traffic-legend-title"),l.colSpan=6,s.appendChild(l),s.appendChild(u),$(u,l),a.appendChild(s);var c=document.createElement("tr");try{for(var p=B(this.table),h=p.next();!h.done;h=p.next()){var d=h.value,f=document.createElement("td");if("Fast"===d||"Slow"===d)f.setAttribute("alt",d),f.appendChild(document.createTextNode(d)),f.classList.add("traffic-legend-text");else{f.classList.add("traffic-legend-colors"),f.setAttribute("aria-label","Traffic Legend"),f.setAttribute("role","img");try{for(var m=(r=void 0,B(d)),g=m.next();!g.done;g=m.next()){var y=g.value,v=document.createElement("div");v.classList.add(y),f.appendChild(v)}}catch(n){r={error:n}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}}c.appendChild(f);var _=J(d instanceof Array?"Traffic Legend":d);c.appendChild(_),$(_,f)}}catch(n){t={error:n}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}return a.appendChild(c),o.appendChild(a),e.events.add("styledata",(function(t){"style"===t.dataType&&((t=e.getTraffic()).flow&&"none"!==t.flow?o.classList.remove("hidden"):o.classList.add("hidden"))})),o},Ne=sr,Oe=function(e){return this.__data__.has(e)},lr.prototype.add=lr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},lr.prototype.has=Oe;var ur=lr,cr=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},pr=function(e,t){return e.has(t)},hr=function(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&s<l))return!1;if((l=o.get(e))&&o.get(t))return l==t;var u=-1,c=!0,p=2&n?new ur:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var h,d=e[u],f=t[u];if(void 0!==(h=r?a?r(f,d,u,t,e,o):r(d,f,u,e,t,o):h)){if(h)continue;c=!1;break}if(p){if(!cr(t,(function(e,t){if(!pr(p,t)&&(d===e||i(d,e,n,r,o)))return p.push(t)}))){c=!1;break}}else if(d!==f&&!i(d,f,n,r,o)){c=!1;break}}return o.delete(e),o.delete(t),c};function dr(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function fr(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var mr,gr=(Ie=Fe?Fe.prototype:void 0)?Ie.valueOf:void 0,yr=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Cn(e),new Cn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Se(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=dr;case"[object Set]":if(s=s||fr,e.size!=t.size&&!(1&r))return!1;var l=a.get(e);return l?l==t:(r|=2,a.set(e,t),s=hr(s(e),s(t),r,i,o,a),a.delete(e),s);case"[object Symbol]":if(gr)return gr.call(e)==gr.call(t)}return!1},vr=Object.prototype.hasOwnProperty,_r=function(e,t,n,r,i,o){var a=1&n,s=cn(e),l=s.length;if(l!=cn(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:vr.call(t,c)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var h=!0;o.set(e,t),o.set(t,e);for(var d,f=a;++u<l;){var m,g=e[c=s[u]],y=t[c];if(!(void 0===(m=r?a?r(y,g,c,t,e,o):r(g,y,c,e,t,o):m)?g===y||i(g,y,n,r,o):m)){h=!1;break}f=f||"constructor"==c}return!h||f||(d=e.constructor)!=(p=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof p&&p instanceof p)&&(h=!1),o.delete(e),o.delete(t),h},br="[object Arguments]",xr="[object Array]",wr="[object Object]",Sr=Object.prototype.hasOwnProperty,Er=function(e,t,n,r,i,o){var a=kt(e),s=kt(t),l=a?xr:wn(e),u=s?xr:wn(t),c=(l=l==br?wr:l)==wr;if(s=(u=u==br?wr:u)==wr,(u=l==u)&&At(e)){if(!At(t))return!1;c=!(a=!0)}return u&&!c?(o=o||new gt,a||Dt(e)?hr(e,t,n,r,i,o):yr(e,t,l,n,r,i,o)):1&n||(c=c&&Sr.call(e,"__wrapped__"),s=s&&Sr.call(t,"__wrapped__"),!c&&!s)?!!u&&(o=o||new gt,_r(e,t,n,r,i,o)):i(c?e.value():e,s?t.value():t,n,r,o=o||new gt)},Cr=function e(t,n,r,i,o){return t===n||(null==t||null==n||!Et(t)&&!Et(n)?t!=t&&n!=n:Er(t,n,r,i,e,o))},Tr=function(e,t){return Cr(e,t)},Ir=(mr=Object.freeze({__proto__:null,default:{}}))&&mr.default||mr,kr=i((function(e){!function(){for(var t,n,r=0,i=[],o=0;o<256;o++)i[o]=(o+256).toString(16).substr(1);function a(){var e;return(e=16,(!t||s.BUFFER_SIZE<r+e)&&(r=0,t=s.randomBytes(s.BUFFER_SIZE)),e=t.slice(r,r+=e))[6]=15&e[6]|64,e[8]=63&e[8]|128,e}function s(){var e=a();return i[e[0]]+i[e[1]]+i[e[2]]+i[e[3]]+"-"+i[e[4]]+i[e[5]]+"-"+i[e[6]]+i[e[7]]+"-"+i[e[8]]+i[e[9]]+"-"+i[e[10]]+i[e[11]]+i[e[12]]+i[e[13]]+i[e[14]]+i[e[15]]}s.BUFFER_SIZE=4096,s.bin=a,s.clearBuffer=function(){t=null,r=0},s.test=function(e){return"string"==typeof e&&/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},"undefined"!=typeof crypto?n=crypto:"undefined"!=typeof window&&void 0!==window.msCrypto&&(n=window.msCrypto),n=n||Ir,(e.exports=s).randomBytes=function(){if(n){if(n.randomBytes)return n.randomBytes;if(n.getRandomValues)return"function"!=typeof Uint8Array.prototype.slice?function(e){return e=new Uint8Array(e),n.getRandomValues(e),Array.from(e)}:function(e){return e=new Uint8Array(e),n.getRandomValues(e),e}}return function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t}}()}()})),Pr=(Ar.TYPE="Feature",Ar);function Ar(e,t,n,r){this.type="Feature",this.type=Ar.TYPE,this.properties=t||{},this.id=n,this.geometry=e,this.bbox=r}var Mr,Or=(R(Lr,Mr=Array),Lr.fromData=function(e){var t=NaN,n=NaN,r=new Set(["y"]),i=new Set(["x"]);return Object.keys(e).forEach((function(o){var a=o.toLowerCase();isNaN(t)&&r.has(a)&&"number"==typeof e[o]?t=e[o]:isNaN(n)&&i.has(a)&&"number"==typeof e[o]&&(n=e[o])})),isNaN(t)||isNaN(n)?null:new Lr(t,n)},Lr.getX=function(e){return 0<e.length?e[0]:NaN},Lr.getY=function(e){return 1<e.length?e[1]:NaN},Lr.getDestination=function(e,t,n){return new Lr(Lr.getX(e)+n*Math.cos((t+270)*Math.PI/180),Lr.getY(e)+n*Math.sin((t+270)*Math.PI/180))},Lr.getDistance=function(e,t){var n=Lr.getX(e)-Lr.getX(t);return t=Lr.getY(e)-Lr.getY(t),Math.sqrt(n*n+t*t)},Lr.getHeading=function(e,t){var n=Lr.getX(t)-Lr.getX(e);return t=Lr.getY(e)-Lr.getY(t),180*(2.5*Math.PI-Math.atan2(t,n))/Math.PI%360},Lr);function Lr(e,t){return Mr.call(this,e,t)||this}var Rr=(Dr.TYPE="Point",Dr);function Dr(e){this.type="Point",this.type=Dr.TYPE,this.coordinates=e}var zr,Nr=i((function(e,t){function n(e,t){return e*e+t*t}function r(e,t){for(var r,i,o,a=e[0],s=[a],l=1,u=e.length;l<u;l++)o=a,n((i=r=e[l])[0]-o[0],i[1]-o[1])>t&&(s.push(r),a=r);return a!==r&&s.push(r),s}function i(e,t,r,o,a){for(var s,l,u,c,p,h,d,f=o,m=t+1;m<r;m++){var g=(l=e[m],u=e[t],c=e[r],d=h=g=p=void 0,p=u[0],g=u[1],h=c[0]-p,d=c[1]-g,0==h&&0==d||(1<(u=((l[0]-p)*h+(l[1]-g)*d)/n(h,d))?(p=c[0],g=c[1]):0<u&&(p+=h*u,g+=d*u)),n(l[0]-p,l[1]-g));f<g&&(s=m,f=g)}o<f&&(1<s-t&&i(e,t,s,o,a),a.push(e[s]),1<r-s&&i(e,s,r,o,a))}t.__esModule=!0,t.SimplifyAP=function(e,t,n){if(e.length<=2)return e;var o,a=(t=void 0===t?1:t)*t;return t=(o=e=(n=void 0!==n&&n)?e:r(e,a)).length-1,i(o,0,t,a,n=[o[0]]),n.push(o[t]),n}}));(zr=Nr)&&zr.__esModule&&Object.prototype.hasOwnProperty.call(zr,"default")&&zr.default;var Br,Fr,jr,Ur,Vr,qr=Nr.SimplifyAP,Hr=6378137,Wr=Math.PI/180,Gr=180/Math.PI,Zr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],Kr=85.0511;function Xr(e){return e*Wr}function Yr(e){return e*Gr}function Jr(e,t,n){return Math.min(Math.max(e,t),n)}function $r(e,t){var n=Xr(t[1]-e[1]),r=Xr(t[0]-e[0]);return r=Math.pow(Math.sin(n/2),2)+Math.cos(Xr(e[1]))*Math.cos(Xr(t[1]))*Math.pow(Math.sin(r/2),2),r=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),Math.round(Hr*r*100)/100}function Qr(e){if(e)switch(e.toLowerCase()){case"feet":case"foot":case"ft":return Fr.feet;case"kilometers":case"kilometer":case"kilometres":case"kilometre":case"km":case"kms":return Fr.kilometers;case"miles":case"mile":case"mi":return Fr.miles;case"nauticalmiles":case"nauticalmile":case"nms":case"nm":return Fr.nauticalMiles;case"yards":case"yard":case"yds":case"yrd":case"yrds":return Fr.yards;default:return Fr.meters}return Fr.meters}function ei(e){if(e)switch(e.toLowerCase()){case"milespersecondsquared":case"milepersecondsquared":case"mi/s^2":case"mi/s2":return Vr.milesPerSecondSquared;case"kilometerspersecondsquared":case"kilometrespersecondsquared":case"kilometerpersecondsquared":case"kilometrepersecondsquared":case"km/s^2":case"km/s2":return Vr.kilometersPerSecondSquared;case"knotspersecond":case"knotpersecond":case"knts/s":case"kn/s":case"kt/s":return Vr.knotsPerSecond;case"standardgravity":case"g":return Vr.standardGravity;case"feetpersecondsquared":case"footpersecondsquared":case"ft/s^2":case"ft/s2":return Vr.feetPerSecondSquared;case"yardspersecondsquared":case"yardpersecondsquared":case"yds/s^2":case"yds/s2":case"yd/s^2":case"yd/s2":return Vr.yardsPerSecondSquared;case"milesperhoursecond":case"mileperhoursecond":case"milesperhourseconds":case"mileperhourseconds":case"mi/h/s":return Vr.milesPerHourSecond;case"kilometersperhoursecond":case"kilometrespersoursecond":case"kilometerperhoursecond":case"kilometrepersoursecond":case"kilometersperhourssecond":case"kilometrespersourssecond":case"kilometerperhourssecond":case"kilometrepersourssecond":case"kmhs":case"km/h/s":return Vr.kilometersPerHourSecond;default:return Vr.metersPerSecondSquared}return Vr.metersPerSecondSquared}function ti(e){if(e)switch(e){case"acres":case"ac":return Br.acres;case"hectares":case"ha":return Br.hectares;case"squareFeet":case"ft^2":case"ft2":return Br.squareFeet;case"squareYards":case"squareYard":case"yds^2":case"yds2":case"yd^2":case"yd2":return Br.squareYards;case"squareKilometers":case"squareKilometres":case"squareKilometer":case"squareKilometre":case"km^2":case"km2":return Br.squareKilometers;case"squareMiles":case"squareMile":case"mi^2":case"mi2":return Br.squareMiles;default:return Br.squareMeters}return Br.squareMeters}function ni(e){if(e)switch(e.toLowerCase()){case"feetpersecond":case"footsecond":case"ftps":case"ft/s":return Ur.feetPerSecond;case"milesperhour":case"mileperhour":case"mph":case"mi/hr":case"mi/h":return Ur.milesPerHour;case"knots":case"knot":case"knts":case"knt":case"kn":case"kt":return Ur.knots;case"mach":case"m":return Ur.mach;case"kilometersperhour":case"kilometresperhour":case"kmperhour":case"kmph":case"km/hr":case"km/h":return Ur.kilometersPerHour;default:return Ur.metersPerSecond}return Ur.metersPerSecond}function ri(e){if(e)switch(e.toLowerCase()){case"milliseconds":case"ms":return jr.ms;case"minutes":case"minute":case"mins":case"min":return jr.minutes;case"hours":case"hour":case"hr":case"h":return jr.hours;case"days":case"day":case"d":return jr.days;default:return jr.seconds}return jr.seconds}function ii(e){var t=0;if(e&&0<e.length){t=Math.abs(oi(e[0]));for(var n=1,r=e.length;n<r;n++)t-=Math.abs(oi(e[n]))}return t}function oi(e){var t=0;if(3<=e.length){for(var n=void 0,r=void 0,i=0,o=e.length;i<o;i++)t+=(Xr(e[i===o-2?(n=o-2,r=o-1,0):i===o-1?(n=o-1,r=0,1):(r=(n=i)+1,i+2)][0])-Xr(e[n][0]))*Math.sin(Xr(e[r][1]));t=t*Hr*Hr/2}return t}function ai(e,t,n){return(e[0]-n[0])*(t[1]-n[1])-(e[1]-n[1])*(t[0]-n[0])}function si(e,t,n){if(2<=n.length){for(var r,i,o=1/0,a=null,s=Si(n,22),l=0,u=s.length-1;l<u;l++)i=function(e,t,n){if(t[0]===n[0]&&t[1]===n[1])return t;var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-t[0];return(i=(o*r+(e=n[1]-t[1])*i)/(o*o+e*e))<0?t:1<i?n:[t[0]+o*i,t[1]+e*i]}(t,s[l],s[l+1]),(r=Or.getDistance(t,i))<o&&(o=r,a=i);if(a){var c=wi([a],22)[0];return new Pr(new Rr(c),{distance:pi(e,c)})}}else if(1===n.length)return new Pr(new Rr(n[0]),{distance:pi(e,n[0])});return null}function li(e,t){var n;return!isNaN(e)&&"number"==typeof t&&0<=t&&(n=void 0,n=t<Zr.length?Zr[t]:Math.pow(10,t),e=Math.round(e*n)/n),e}function ui(e,t,n,r){switch(Qr(t)){case Fr.meters:e/=1e3;break;case Fr.feet:e/=3280.8399;break;case Fr.miles:e/=.62137119;break;case Fr.yards:e/=1093.6133;break;case Fr.nauticalMiles:e/=.5399568;case Fr.kilometers:}switch(Qr(n)){case Fr.meters:e*=1e3;break;case Fr.feet:e*=3280.8399;break;case Fr.miles:e*=.62137119;break;case Fr.yards:e*=1093.6133;break;case Fr.nauticalMiles:e*=.5399568;case Fr.kilometers:}return"number"==typeof r&&0<=r&&(r=Math.pow(10,r),e=Math.round(e*r)/r),e}function ci(e,t,n,r){r=r||"meters",e=Li(e);var i=hi(r);return r=Xr(e[1]),e=Xr(e[0]),t*=Wr,n/=i,i=Math.asin(Math.sin(r)*Math.cos(n)+Math.cos(r)*Math.sin(n)*Math.cos(t)),r=e+Math.atan2(Math.sin(t)*Math.sin(n)*Math.cos(r),Math.cos(n)-Math.sin(r)*Math.sin(i)),i=Jr(_i(i*Gr),-85,85),[bi(r*Gr),i]}function pi(e,t,n){return t=$r(e=Li(e),t=Li(t)),"meters"===n?t:ui(t,"meters",n||"meters")}function hi(e){return e=Qr(e),ui(Hr,Fr.meters,e)}function di(e,t,n){for(var r=[],i=Xr(e[1]),o=Xr(e[0]),a=Xr(t[1]),s=Xr(t[0]),l=2*Math.asin(Math.sqrt(Math.pow(Math.sin((i-a)/2),2)+Math.cos(i)*Math.cos(a)*Math.pow(Math.sin((o-s)/2),2))),u=0;u<=n;u++){var c=u/n,p=Math.sin((1-c)*l)/Math.sin(l),h=Math.sin(c*l)/Math.sin(l),d=p*Math.cos(i)*Math.cos(o)+h*Math.cos(a)*Math.cos(s);c=p*Math.cos(i)*Math.sin(o)+h*Math.cos(a)*Math.sin(s),h=p*Math.sin(i)+h*Math.sin(a),h=Math.atan2(h,Math.sqrt(Math.pow(d,2)+Math.pow(c,2))),d=Math.atan2(c,d),h=Jr(h*Gr,-85,85),d*=Gr,r.push([d,h])}return r}function fi(e,t){if(e=Li(e),t=Li(t),e&&2<=e.length&&t&&2<=t.length){var n=Xr(e[1]),r=Xr(t[1]);return t=Xr(t[0]-e[0]),e=Math.sin(t)*Math.cos(r),t=Math.cos(n)*Math.sin(r)-Math.sin(n)*Math.cos(r)*Math.cos(t),(Yr(Math.atan2(e,t))+360)%360}return NaN}function mi(e,t){var n,r=0;Array.isArray(e)?n=e:e.type&&"LineString"===e.type&&(n=e.coordinates);for(var i=0,o=n.length-1;i<o;i++)r+=$r(n[i],n[i+1]);return ui(r,"meters",t||"meters")}function gi(e,t,n){n=n||"meters";var r,i,o=0;if(Array.isArray(e)?i=e:e.type&&"LineString"===e.type&&(i=e.coordinates),2<=i.length){for(var a=i.length,s=1;s<a;s++){if(t<=o+(r=pi(i[s-1],i[s],n))){var l=fi(i[s-1],i[s]);return ci(i[s-1],l,t-o,n)}o+=r}return o<=t?i[a-1]:i[0]}return null}function yi(e,t,n,r,i){r=r||"meters",i=i||0,e=Li(e);for(var o=[],a=360/n,s=0;s<=n;s++)o.push(ci(e,(s*a+i)%360,t,r));return o}function vi(e,t,n){n=void 0===n?.5:n;var r=pi(e=Li(e),t=Li(t),"kilometers");return ci(e,fi(e,t),r*n,"kilometers")}function _i(e){return 90<e?180<(e=(e+90)%360)?90-(e-180):e-90:e<-90?(e=(e-90)%360)<-180?-90-(e+180):e+90:e}function bi(e){return 180<e?(e+180)%360-180:e<-180?(e-180)%360+180:e}function xi(e,t,n){if(0===n)return Object.assign({},e);t=Li(t);for(var r,i,o=[],a=0,s=e.length;a<s;a++)r=pi(t,e[a]),i=fi(t,e[a]),o.push(ci(t,i+n,r));return o}function wi(e,t){for(var n,r,i=512*Math.pow(2,t),o=[],a=0,s=e.length;a<s;a++)n=e[a][0]/i-.5,r=.5-e[a][1]/i,o.push([360*n,90-360*Math.atan(Math.exp(2*-r*Math.PI))/Math.PI]);return o}function Si(e,t){for(var n,r,i=512*Math.pow(2,t),o=[],a=0,s=e.length;a<s;a++)r=Math.sin(e[a][1]*Math.PI/180),n=(e[a][0]+180)/360,r=.5-Math.log((1+r)/(1-r))/(4*Math.PI),o.push([Math.round(n*i),Math.round(r*i)]);return o}function Ei(e,t,n,r){switch(ei(t)){case Vr.kilometersPerHourSecond:e/=3.6;break;case Vr.milesPerHourSecond:e/=2.236936292054;break;case Vr.knotsPerSecond:e/=1.943844492441;break;case Vr.standardGravity:e/=.1019716212978;break;case Vr.kilometersPerSecondSquared:e/=.001;break;case Vr.milesPerSecondSquared:e/=.000621371192;break;case Vr.feetPerSecondSquared:e/=3.280839895012;break;case Vr.yardsPerSecondSquared:e/=1.093613298338;case Vr.metersPerSecondSquared:}switch(ei(n)){case Vr.kilometersPerHourSecond:e*=3.6;break;case Vr.milesPerHourSecond:e*=2.236936292054;break;case Vr.knotsPerSecond:e*=1.943844492441;break;case Vr.standardGravity:e*=.1019716212978;break;case Vr.kilometersPerSecondSquared:e*=.001;break;case Vr.milesPerSecondSquared:e*=.000621371192;break;case Vr.feetPerSecondSquared:e*=3.280839895012;break;case Vr.yardsPerSecondSquared:e*=1.093613298338;case Vr.metersPerSecondSquared:}return li(e,r)}function Ci(e,t,n,r){switch(ti(t)){case Br.acres:e*=4046.8564224;break;case Br.hectares:e*=1e4;break;case Br.squareFeet:e*=.09290304;break;case Br.squareKilometers:e*=1e6;break;case Br.squareMiles:e*=259e4;break;case Br.squareYards:e*=.83612736;case Br.squareMeters:}switch(ti(n)){case Br.acres:e/=4046.8564224;break;case Br.hectares:e/=1e4;break;case Br.squareFeet:e/=.09290304;break;case Br.squareKilometers:e/=1e6;break;case Br.squareMiles:e/=259e4;break;case Br.squareYards:e/=.83612736;case Br.squareMeters:}return li(e,r)}function Ti(e,t,n,r){switch(ni(t)){case Ur.feetPerSecond:e*=1.09728;break;case Ur.milesPerHour:e*=1.6093;break;case Ur.knots:e*=1.852;break;case Ur.metersPerSecond:e*=3.6;break;case Ur.mach:e*=1234.8;case Ur.kilometersPerHour:}switch(ni(n)){case Ur.feetPerSecond:e/=1.09728;break;case Ur.milesPerHour:e/=1.6093;break;case Ur.knots:e/=1.852;break;case Ur.metersPerSecond:e/=3.6;break;case Ur.mach:e/=1234.8;case Ur.kilometersPerHour:}return li(e,r)}function Ii(e,t,n,r){switch(ri(t)){case jr.ms:e/=1e3;break;case jr.hours:e*=3600;break;case jr.minutes:e*=60;break;case jr.days:e*=86400;case jr.seconds:}switch(ri(n)){case jr.ms:e*=1e3;break;case jr.hours:e/=3600;break;case jr.minutes:e/=60;break;case jr.days:e/=86400;case jr.seconds:}return li(e,r)}function ki(e,t,n,r,i,o,a,s){return i=ui(t,i,Fr.meters),o=Ii(n,o,jr.seconds),Ei(2*(i-Ti(e,r,Ur.metersPerSecond)*o)/(o*o),Vr.metersPerSecondSquared,a,s)}function Pi(e,t,n,r,i,o,a){return e=Ti(e,r,Ur.metersPerSecond),Ei((Ti(t,r,Ur.metersPerSecond)-e)/Ii(n,i,jr.seconds),Vr.metersPerSecondSquared,o,a)}function Ai(e,t,n,r){return e=Mi(e),t=Mi(t),null!=e&&null!=t?Ii(t.getTime()-e.getTime(),jr.ms,n,r):NaN}function Mi(e){if("[object Date]"===Object.prototype.toString.call(e))return e;if("string"==typeof e){var t=Date.parse(e);if(!isNaN(t))return new Date(t);if(0<=e.indexOf("Date("))return t=0,t=0<(e=e.replace("/Date(","").replace(")/","")).indexOf("+")?parseInt(e.substr(0,e.indexOf("+")),10):0<e.indexOf("-")?parseInt(e.substr(0,e.indexOf("-")),10):parseInt(e,10),new Date(t)}else if("number"==typeof e)return new Date(e);return null}function Oi(e){var t=[],n=null,r=null;if(Array.isArray(e)&&0<e.length)if(Array.isArray(e[0])&&"number"==typeof e[0][0])t=e;else for(var i=e.length,o=0;o<i;o++)t=t.concat(Oi(e[o]));else if(e.type)switch(e.type){case"Point":t=[e.coordinates];break;case"LineString":t=e.coordinates;break;case"Polygon":n=e.coordinates;break;case"MultiPoint":t=e.coordinates;break;case"MultiLineString":n=e.coordinates;break;case"MultiPolygon":r=e.coordinates;break;case"Feature":var a=e;t=Hi._isCircle(a)?Hi._getCirclePositions(a):Oi(a.geometry);break;case"FeatureCollection":t=Oi(e.features);break;case"GeometryCollection":t=Oi(e.geometries)}else if(e instanceof Hi)return Oi(e.toJson());if(n)for(i=n.length,o=0;o<i;o++)t=t.concat(n[o]);else if(r){var s=r.length;for(o=0;o<s;o++)for(var l=r[o].length,u=0;u<l;u++)t=t.concat(r[o][u])}return t}function Li(e){if(Array.isArray(e)&&"number"==typeof e[0])return e;if(e.type){if("Point"===e.type)return e.coordinates;if("Feature"===e.type&&"Point"===e.geometry.type)return e.geometry.coordinates}else if(e instanceof Hi&&"Point"===e.getType())return e.getCoordinates();return null}function Ri(e,t,n){n=n||"meters";var r,i,o=0;if(Array.isArray(e)?i=e:e.type&&"LineString"===e.type&&(i=e.coordinates),2<=i.length){for(var a=i.length,s=1;s<a;s++){if(t<=o+(r=pi(i[s-1],i[s],n))){var l=fi(i[s-1],i[s]),u=ci(i[s-1],l,t-o,n);return new Pr(new Rr(u),{heading:l})}o+=r}return o<=t?new Pr(new Rr(i[a-1]),{heading:fi(i[a-2],i[a-1])}):new Pr(new Rr(i[0]),{heading:fi(i[0],i[1])})}return null}function Di(e,t,n,r){var i,o=Li(e),a=Si([o],22)[0],s=null,l=1/0;switch((t=t instanceof Hi?t.toJson():t).type){case"Feature":return Di(e,t.geometry,n);case"Point":f=[[t.coordinates]];break;case"MultiPoint":for(var u,c=t.coordinates,p=0,h=c.length;p<h;p++)(u=pi(o,c[p]))<l&&(l=u,s=new Pr(new Rr(c[p]),{distance:u}));break;case"LineString":f=[t.coordinates];break;case"Polygon":case"MultiLineString":f=t.coordinates;break;case"MultiPolygon":var d=t.coordinates;if(0<d.length){var f=d[0];for(p=1,h=d.length;p<h;p++)f=f.concat(d[p])}}if(f)for(p=0,h=f.length;p<h;p++)(i=si(o,a,f[p]))&&i.properties.distance<l&&(l=i.properties.distance,s=i);return s&&(s.properties.distance=ui(s.properties.distance,"meters",n,r)),s}(Re=Br=Br||{}).squareMeters="squareMeters",Re.acres="acres",Re.hectares="hectares",Re.squareFeet="squareFeet",Re.squareKilometers="squareKilometers",Re.squareMiles="squareMiles",Re.squareYards="squareYards",(Le=Fr=Fr||{}).meters="meters",Le.kilometers="kilometers",Le.feet="feet",Le.miles="miles",Le.nauticalMiles="nauticalMiles",Le.yards="yards",(Pe=jr=jr||{}).seconds="seconds",Pe.hours="hours",Pe.ms="ms",Pe.minutes="minutes",Pe.days="days",(ke=Ur=Ur||{}).metersPerSecond="metersPerSecond",ke.kilometersPerHour="kilometersPerHour",ke.feetPerSecond="feetPerSecond",ke.milesPerHour="milesPerHour",ke.knots="knots",ke.mach="mach",(r=Vr=Vr||{}).milesPerSecondSquared="milesPerSecondSquared",r.kilometersPerSecondSquared="kilometersPerSecondSquared",r.knotsPerSecond="knotsPerSecond",r.standardGravity="standardGravity",r.feetPerSecondSquared="feetPerSecondSquared",r.yardsPerSecondSquared="yardsPerSecondSquared",r.milesPerHourSecond="milesPerHourSecond",r.kilometersPerHourSecond="kilometersPerHourSecond",r.metersPerSecondSquared="metersPerSecondSquared";var zi,Ni=(R(Bi,zi=Array),Bi.fromPosition=function(e){return 2===e.length?new Bi(e[0],e[1]):2<e.length?new Bi(e[0],e[1],e[2]):null},Bi.areEqual=function(e,t,n){if(void 0===n&&(n=6),e&&2<=e.length&&t&&2<=t.length){var r=Math.pow(10,n),i=_i(e[1]);return n=_i(t[1]),e=bi(e[0]),t=bi(t[0]),0==Math.round((i-n)*r)/r&&(0==(r=Math.round((e-t)*r)/r)||360==r)}return!1},Bi.fromLatLng=function(e,t,n){var r,i,o,a,s,l,u=[];return"number"==typeof e?(u.push(e),"number"==typeof t&&u.push(t),"number"==typeof n&&u.push(n)):Array.isArray(e)?2<=e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&(3<=e.length&&"number"==typeof e[2]?u.push(e[0],e[1],e[2]):u.push(e[0],e[1])):"object"==typeof e&&(r=["lat","latitude","y"],i=["lng","longitude","lon","x"],o=["elv","elevation","alt","altitude","z"],l=s=a=NaN,Object.keys(e).forEach((function(t,n,u){var c=t.toLowerCase();isNaN(a)&&0<=r.indexOf(c)&&"number"==typeof e[t]?a=e[t]:isNaN(s)&&0<=i.indexOf(c)&&"number"==typeof e[t]?s=e[t]:isNaN(l)&&0<=o.indexOf(c)&&"number"==typeof e[t]&&(l=e[t])})),isNaN(a)||isNaN(s)||(u.push(s,a),isNaN(l)||u.push(l))),2<=u.length?u:null},Bi.fromLatLngs=function(e){var t=[];if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=Bi.fromLatLng(e[n]);i&&t.push(i)}return t},Bi._getDimensions=function(e){for(var t=0;Array.isArray(e);)e=e[0],t++;return"number"==typeof e&&t--,t},Bi);function Bi(e,t,n){return n?zi.call(this,e,t,n)||this:zi.call(this,e,t)||this}var Fi=(ji.TYPE="Polygon",ji);function ji(e,t){this.type="Polygon",this.type=ji.TYPE,1===Ni._getDimensions(e)?this.coordinates=[e]:this.coordinates=e,this.bbox=t}var Ui=(Vi.prototype.toTarget=function(e,t){return this.transformArray(e,this.M,t)},Vi.prototype.toSource=function(e,t){return this.transformArray(e,this.inverseM,t)},Vi.prototype.transformArray=function(e,t,n){var r,i;if(e&&Array.isArray(e)&&Array.isArray(e[0])){var o=[];try{for(var a=B(e),s=a.next();!s.done;s=a.next()){var l=s.value;o.push(this.transform(l,t,n))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}return null},Vi.prototype.transform=function(e,t,n){var r=e[0]*t[0][3]+e[1]*t[1][3]+t[2][3];return t=e[0]*t[0][4]+e[1]*t[1][4]+t[2][4],"number"==typeof n&&0<=n?[li(r,n),li(t,n)]:[li(r,6),li(t,6)]},Vi._calculateAffineTransform=function(e,t){if(e.length!==t.length||e.length<1)throw new Error("Error: source and target arrays must have the same length.");var n=Math.min(e[0].length,t[0].length),r=n+1;if(e.length<n)throw new Error("Erorr: At least "+n+" reference points required.");for(var i=[],o=[],a=0;a<r;a++){o[a]=[];for(var s=0;s<r;s++){s<n&&(i[s]=0);for(var l=o[a][s]=0;l<e.length;l++)s<n&&(i[s]+=a<n?e[l][a]*t[l][s]:t[l][s]),o[a][s]+=n<=a&&n<=s?1:n<=a?e[l][s]:n<=s?e[l][a]:e[l][a]*e[l][s]}o[a]=o[a].concat(i)}if(!this._gaussJordanElimination(o))throw new Error("Error: Singular matrix. Points are likely coplanar.");return o},Vi._gaussJordanElimination=function(e){for(var t,n=e.length,r=2*n-1,i=0;i<n;i++){for(var o=i,a=i+1;a<n;a++)Math.abs(e[a][i])>Math.abs(e[o][i])&&(o=a);if(t=e[o],e[o]=e[i],e[i]=t,Math.abs(e[i][i])<=1e-10)return!1;for(var s=i+1;s<n;s++)for(var l=e[s][i]/e[i][i],u=i;u<r;u++)e[s][u]-=e[i][u]*l}for(i=n-1;-1<i;i--){for(l=e[i][i],a=0;a<i;a++)for(var c=r-1;i-1<c;c--)e[a][c]-=e[i][c]*e[a][i]/l;e[i][i]/=l;for(var p=n;p<r;p++)e[i][p]/=l}return!0},Vi);function Vi(e,t){this.M=Vi._calculateAffineTransform(e,t),this.inverseM=Vi._calculateAffineTransform(t,e)}De=Object.freeze({__proto__:null,AffineTransform:Ui,WEBMERCATOR_MAXLAT:Kr,_precision:li,get AreaUnits(){return Br},get DistanceUnits(){return Fr},get TimeUnits(){return jr},get SpeedUnits(){return Ur},get AccelerationUnits(){return Vr},boundingBoxToPolygon:function(e){var t=bi(Zi.getWest(e)),n=bi(Zi.getEast(e)),r=_i(Zi.getNorth(e)),i=_i(Zi.getSouth(e));return r=[[t,r],[t,i],[(e=Zi.getCenter(e))[0],i],[n,i],[n,r],[e[0],r],[t,r]],new Fi([r])},convertDistance:ui,getCardinalSpline:function(e,t,n,r){if(!e||e.length<=2)return o;"number"!=typeof t&&(t=.5),("number"!=typeof n||n<=0)&&(n=15);var i=e.length,o=e.slice(0);r?(Ni.areEqual(o[0],o[i-1])&&(o.pop(),i--),o.unshift(e[i-1]),o.push(e[0]),o.push(e[1]),i++):(o.unshift(e[0]),o.push(e[i-1]));var a,s,l,u=[];u.push([1,0,0,0]);for(var c=1;c<n-1;c++)u.push([2*(l=(a=c/n)*(s=a*a))-3*s+1,-2*l+3*s,l-2*s+a,l-s]);u.push([0,1,0,0]);var p,h,d,f,m,g,y=[];for(c=1;c<i;c++)for(p=t*(o[c+1][0]-o[c-1][0]),h=t*(o[c+1][1]-o[c-1][1]),d=t*(o[c+2][0]-o[c][0]),f=t*(o[c+2][1]-o[c][1]),a=0;a<n;a++)g=(m=u[a])[0]*o[c][0]+m[1]*o[c+1][0]+m[2]*p+m[3]*d,m=Jr(m[0]*o[c][1]+m[1]*o[c+1][1]+m[2]*h+m[3]*f,-85,85),y.push([g,m]);return y},getDestination:ci,getDistanceTo:pi,getEarthRadius:hi,getGeodesicPath:function(e,t){var n;(!t||t<=0)&&(t=15),Array.isArray(e)?n=e:e.type&&"LineString"===e.type&&(n=e.coordinates);for(var r=n.length-1,i=[],o=0;o<r;o++)i=i.concat(di(n[o],n[o+1],t));return i.reduce((function(e,t){var n=0<e.length?e[e.length-1]:null;return n&&180<Math.abs(t[0]-n[0])?(n=n[0]<0?t[0]-360:t[0]+360,e.push([n,t[1]])):e.push(t),e}),[])},getGeodesicPaths:function(e,t){var n;(!t||t<=0)&&(t=15),Array.isArray(e)?n=e:e.type&&"LineString"===e.type&&(n=e.coordinates);for(var r=n.length-1,i=[],o=[],a=0;a<r;a++)for(var s,l,u,c,p,h=di(n[a],n[a+1],t),d=0;d<h.length;d++)i.push(h[d]),d+1>=h.length||(s=(u=F(h[d],2))[0],l=u[1],p=(c=F(h[d+1],2))[0],u=c[1],180<Math.abs(p-s)&&(c=0<s?180:-180,p=Math.abs((0<s?p+360:p-360)-s),p=l+(u-l)*(Math.abs(c-s)/p),i.push([c,p]),o.push(i),i=[[-c,p]]));return o.push(i),o},getHeading:fi,getLengthOfPath:mi,getPositionAlongPath:gi,getRegularPolygonPath:yi,interpolate:vi,normalizeLatitude:_i,normalizeLongitude:bi,rotatePositions:xi,getPixelHeading:function(e,t){e=(n=F(Si([e=Li(e),t=Li(t)],21),2))[0];var n=(t=n[1])[0]-e[0];return t=e[1]-t[1],(2.5*Math.PI-Math.atan2(t,n))*Gr%360},mercatorPixelsToPositions:wi,mercatorPositionsToPixels:Si,convertAcceleration:Ei,convertArea:Ci,convertSpeed:Ti,convertTimespan:Ii,getAcceleration:ki,getAccelerationFromSpeeds:Pi,getAccelerationFromFeatures:function(e,t,n,r,i,o,a){if("string"==typeof n&&"Feature"===e.type&&"Point"===e.geometry.type&&"Feature"===t.type&&"Point"===t.geometry.type){var s=Ai(e.properties[n],t.properties[n],jr.seconds);if(!isNaN(s)){var l=0;return r&&"string"==typeof r&&(n=e.properties[r],r=t.properties[r],"number"==typeof n&&(l=n,"number"==typeof r))?Pi(n,r,s,i,jr.seconds,o,a):ki(l,pi(e.geometry.coordinates,t.geometry.coordinates,Fr.meters),s,i,Fr.meters,jr.seconds,o,a)}}return NaN},getArea:function e(t,n,r){if(t){var i=0;switch((t=t instanceof Hi?t.toJson():t).type){case"Feature":var o=t;if(t.geometry)return e(o.geometry,n,r);break;case"Polygon":(o=t).coordinates&&(i=ii(o.coordinates));break;case"MultiPolygon":var a=t;if(a.coordinates)for(var s=0,l=a.coordinates.length;s<l;s++)i+=ii(a.coordinates[s])}return Ci(i,Br.squareMeters,n,r)}return 0},getSpeed:function(e,t,n,r,i,o){return e=Li(e),t=Li(t),e&&t?(r=Ii(n,r,jr.seconds),Ti(pi(e,t,Fr.meters)/r,Ur.metersPerSecond,i,o)):0},getSpeedFromFeatures:function(e,t,n,r,i){return"string"!=typeof n||"Feature"!==e.type||"Point"!==e.geometry.type||"Feature"!==t.type||"Point"!==t.geometry.type||(n=this.getTimespan(e.properties[n],t.properties[n],jr.seconds),isNaN(n))?NaN:(t=this.getDistanceTo(e.geometry.coordinates,t.geometry.coordinates,Fr.meters),this.convertSpeed(t/n,Ur.metersPerSecond,r,i))},getTimespan:Ai,getTravelDistance:function(e,t,n,r,i,o,a,s){return t=this.convertTimespan(t,i,jr.seconds),n=(n=this.convertSpeed(n,o,Ur.metersPerSecond))*t,"number"==typeof r&&(n+=.5*this.convertAcceleration(r,a,Vr.metersPerSecondSquared)*t*t),this.convertDistance(n,Fr.meters,e,s)},parseTimestamp:Mi,getConvexHull:function(e){var t,n,r=Oi(e).map((function(e){return[bi(e[0]),_i(e[1])]}));r.sort((function(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}));var i=[];try{for(var o=B(r),a=o.next();!a.done;a=o.next()){for(var s=a.value;2<=i.length&&ai(i[i.length-2],i[i.length-1],s)<=0;)i.pop();i.push(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var l=[],u=r.length-1;0<=u;u--){for(;2<=l.length&&ai(l[l.length-2],l[l.length-1],r[u])<=0;)l.pop();l.push(r[u])}return new Fi([i.concat(l)])},getPositions:Oi,getPosition:Li,getPositionsAlongPath:function(e,t){if(t<2)return[];for(var n=[],r=mi(e,Fr.meters)/(t-1),i=0;i<t;i++){var o=gi(e,r*i,Fr.meters);null!=o&&n.push(o)}return n},getPointWithHeadingAlongPath:Ri,getPointsWithHeadingsAlongPath:function(e,t){if(t<=0)return[];for(var n=[],r=mi(e,Fr.meters)/(t-1),i=0;i<t;i++){var o=Ri(e,r*i,Fr.meters);null!=o&&n.push(o)}return n},getClosestPointOnGeometry:Di,simplify:function(e,t){return qr(e,t,!0)}});var qi,Hi=(R(Wi,qi=oe),Wi.prototype.addProperty=function(e,t){Tr(this.data.properties[e],t)||(this.data.properties[e]=Zn(t),"subType"!==e&&"radius"!==e||this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},Wi.prototype.getBounds=function(){var e,t,n,r,i,o=this.getCoordinates(),a=this.getType();if("Point"===a)i=this.circlePolygon?(s=this.circlePolygon.geometry.coordinates,Zi.fromPositions(s[0])):new Zi(s=o,s);else if("MultiPoint"===a||"LineString"===a){var s=o;i=Zi.fromPositions(s)}else if("Polygon"===a)s=o,i=Zi.fromPositions(s[0]);else if("MultiLineString"===a){s=o;try{for(var l=B(s),u=l.next();!u.done;u=l.next()){var c=u.value;i=Zi.merge(i,Zi.fromPositions(c))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}}else if("MultiPolygon"===a){s=o;try{for(var p=B(s),h=p.next();!h.done;h=p.next()){var d=h.value;i=Zi.merge(i,Zi.fromPositions(d[0]))}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}}return i},Wi.prototype.getCoordinates=function(){return Zn(this.data.geometry.coordinates)},Wi.prototype.getCircleCoordinates=function(){return this.circlePolygon?Zn(this.circlePolygon.geometry.coordinates[0]):null},Wi.prototype.getId=function(){return this.data.id},Wi.prototype.getProperties=function(){return Zn(this.data.properties)},Wi.prototype.getType=function(){return this.data.geometry.type},Wi.prototype.isCircle=function(){return Wi._isCircle(this.data)},Wi.prototype.isRectangle=function(){return Wi._isRectangle(this.data)},Wi.prototype.setCoordinates=function(e){e="Polygon"===this.getType()&&1===Ni._getDimensions(e)?[e]:e,Tr(this.data.geometry.coordinates,e)||(this.data.geometry.coordinates=Zn(e),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},Wi.prototype.setProperties=function(e){e[Wi._shapeIdPropName]=this.data.id,Tr(this.data.properties,e)||(this.data.properties=Zn(e),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},Wi.prototype.toJson=function(){return JSON.parse(JSON.stringify(this.data))},Wi.prototype._toJson=function(){return this.circlePolygon||this.data},Wi.prototype._setDataSource=function(e){void 0===e||null==e?delete this.dataSource:this.dataSource=e},Wi.prototype._handleCircle=function(){var e;this.isCircle()?(e=Wi._getCirclePositions(this.data),this.circlePolygon=new Pr(new Fi([e]),this.data.properties,this.data.id),this.data.properties.subType="Circle"):delete this.circlePolygon},Wi._isCircle=function(e){return e&&e.geometry&&"Point"===e.geometry.type&&e.geometry.coordinates&&e.properties&&"string"==typeof e.properties.subType&&"circle"===e.properties.subType.toLowerCase()&&"number"==typeof e.properties.radius},Wi._isRectangle=function(e){if("Polygon"===e.geometry.type&&e.geometry.coordinates&&"string"==typeof e.properties.subType&&"rectangle"===e.properties.subType.toLowerCase()&&1===(e=e.geometry.coordinates).length){if(5===(e=e[0]).length)return e[0][0]===e[4][0]&&e[0][1]===e[4][1];if(4===e.length)return!0}return!1},Wi._getCirclePositions=function(e){return yi(e.geometry.coordinates,e.properties.radius,72,"meters")},Wi._shapeIdPropName="_azureMapsShapeId",Wi);function Wi(e,t,n){var r,i,o=qi.call(this)||this;return"Feature"===e.type?(i=Zn((r=e).geometry),n=r.properties?Zn(r.properties):{},t=null==r.id||""===r.id?kr():r.id):(i=Zn(e),t=null==t||""===t?kr():t,n=n?Zn(n):{}),n[Wi._shapeIdPropName]=t,o.data=new Pr(i,n,t),o._handleCircle(),o}var Gi,Zi=(R(Ki,Gi=Array),Ki.fromBoundingBox=function(e){var t=Ki.getWest(e),n=Ki.getSouth(e),r=Ki.getEast(e);return e=Ki.getNorth(e),new Ki([t,n,r,e])},Ki.fromDimensions=function(e,t,n){var r=e[0],i=e[1];return e=Math.min(Math.max(i+n/2,-85.5),85.5),i=Math.min(Math.max(i-n/2,-85.5),85.5),n=bi(r+t/2),new Ki([bi(r-t/2),i,n,e])},Ki.fromEdges=function(e,t,n,r){return new Ki([e,t,n,r])},Ki.containsPosition=function(e,t){var n=Ki.getCenter(e),r=Math.abs(n[1]-t[1]);return 180<(n=Math.abs(n[0]-t[0]))&&(n=360-n),t=Ki.getHeight(e),e=Ki.getWidth(e),r<=t/2+1e-8&&n<=e/2+1e-8},Ki.containsBoundingBox=function(e,t){var n=e&&4===e.length,r=t&&4===t.length;return!(!n||!r)&&Ki.getWest(e)<Ki.getWest(t)&&Ki.getWest(t)<Ki.getEast(e)&&Ki.getWest(e)<Ki.getEast(t)&&Ki.getEast(t)<Ki.getEast(e)&&Ki.getSouth(e)<Ki.getSouth(t)&&Ki.getSouth(t)<Ki.getNorth(e)&&Ki.getSouth(e)<Ki.getNorth(t)&&Ki.getNorth(t)<Ki.getNorth(e)},Ki.crossesAntimeridian=function(e){return bi(Ki.getEast(e))-bi(Ki.getWest(e))<0||Ki.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe(e)||Ki.isBoundingBoxWithLessThanSixElementsLargerThanGlobe(e)},Ki.getCenter=function(e){var t=bi(Ki.getEast(e)),n=bi(Ki.getWest(e));return t<n&&(t+=360),n=bi((n+t)/2),t=_i(Ki.getSouth(e)),e=_i(Ki.getNorth(e)),[n,_i((t+e)/2)]},Ki.getHeight=function(e){return e=_i(Ki.getNorth(e))-_i(Ki.getSouth(e)),isNaN(e)?0:e},Ki.getWidth=function(e){return e=bi(Ki.getEast(e))-bi(Ki.getWest(e)),isNaN(e)?0:e<0?e+360:e},Ki.getSouthWest=function(e){var t=this.getSouth(e);return e=this.getWest(e),isNaN(t)||isNaN(e)?null:[e,t]},Ki.getNorthEast=function(e){var t=this.getNorth(e);return e=this.getEast(e),isNaN(t)||isNaN(e)?null:[e,t]},Ki.getNorthWest=function(e){var t=this.getNorth(e);return e=this.getWest(e),isNaN(t)||isNaN(e)?null:[e,t]},Ki.getSouthEast=function(e){var t=this.getSouth(e);return e=this.getEast(e),isNaN(t)||isNaN(e)?null:[e,t]},Ki.getSouth=function(e){return e&&4<=e.length?Number(e[1]):NaN},Ki.getWest=function(e){return e&&4<=e.length?Number(e[0]):NaN},Ki.getNorth=function(e){if(e){if(4===e.length)return Number(e[3]);if(6===e.length)return Number(e[4])}return NaN},Ki.getEast=function(e){if(e){if(4===e.length)return Number(e[2]);if(6===e.length)return Number(e[3])}return NaN},Ki.intersect=function(e,t){var n=Ki.getCenter(e),r=Ki.getCenter(t),i=Math.abs(n[1]-r[1]),o=Math.abs(n[0]-r[0]);return 180<o&&(o=360-o),n=Ki.getHeight(e),r=Ki.getWidth(e),e=Ki.getHeight(t),t=Ki.getWidth(t),i<=n/2+e/2&&o<=r/2+t/2},Ki.merge=function(e,t){var n=e&&4===e.length,r=t&&4===t.length;if(n&&!r)return e;if(r&&!n)return t;if(!n&&!r)return null;n=Math.max(_i(Ki.getNorth(e)),_i(Ki.getNorth(t))),r=Math.min(_i(Ki.getSouth(e)),_i(Ki.getSouth(t)));var i=[e,t],o=[],a=0;for(a=0;a<i.length;a++){var s=i[a],l=bi(Ki.getWest(s)),u=bi(Ki.getEast(s));Ki.crossesAntimeridian(s)?(o.push([l,180]),o.push([-180,u])):o.push([l,u])}o.sort((function(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}));var c=[],p=o[0];for(a=1;a<o.length;){var h=o[a];p[1]>=h[0]?p[1]=Math.max(p[1],h[1]):(c.push(p),p=h),a++}c.push(p);var d=c.length,f=c[0][0]+360-c[d-1][1],m=[c[d-1][1],c[0][0]];for(a=1;a<d;a++){var g=c[a][0]-c[a-1][1];f<g&&(f=g,m=[c[a-1][1],c[a][0]])}return new Ki([m[1],r],[m[0],n])},Ki.fromPositions=function(e){for(var t,n,r=NaN,i=NaN,o=NaN,a=NaN,s=e.length,l=new Array(s),u=0;s--;)(n=e[s])&&2<=n.length&&(t=_i(n[1]),r=isNaN(r)?t:Math.max(r,t),i=isNaN(i)?t:Math.min(i,t),l[u++]=bi(n[0]));if(u){l.length=u,l.sort((function(e,t){return e-t}));var c=l[0]+360-l[u-1],p=0;for(s=1;s<u;s++){var h=l[s]-l[s-1];c<h&&(c=h,p=s)}o=l[p],a=l[(p||u)-1]}return isNaN(o)||isNaN(i)||isNaN(a)||isNaN(r)?null:new Ki([o,i,a,r])},Ki.fromLatLngs=function(e){return Ki.fromPositions(Ni.fromLatLngs(e))},Ki.fromData=function(e){var t,n,r=null;if(Array.isArray(e)&&0<e.length){try{for(var i=B(e),o=i.next();!o.done;o=i.next()){var a,s=o.value;null!=(a=Ki.fromData(s))&&(r=null===r?a:Ki.merge(r,a))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}if(e instanceof Hi)return e.getBounds();if(e&&e.type){var l=e;if(l.bbox&&4===l.bbox.length)return l.bbox;switch(l.type){case"FeatureCollection":return Ki.fromData(l.features);case"Feature":return Hi._isCircle(l)?Ki.fromPositions(Hi._getCirclePositions(l)):Ki.fromData(l.geometry);case"GeometryCollection":return Ki.fromData(l.geometries);case"Point":var u=l.coordinates;if(u&&2<=u.length)return[u[0],u[1],u[0],u[1]];break;case"LineString":case"MultiPoint":return Ki.fromPositions(l.coordinates);case"Polygon":case"MultiLineString":var c=l.coordinates;if(c&&0<c.length){for(var p=0,h=c.length;p<h;p++)null!=(a=Ki.fromPositions(c[p]))&&(r=null===r?a:Ki.merge(r,a));if(null!=r)return r}break;case"MultiPolygon":var d=l.coordinates;if(d&&0<d.length){for(p=0,h=d.length;p<h;p++)for(var f=0,m=d[p].length;f<m;f++)null!=(a=Ki.fromPositions(d[p][f]))&&(r=null===r?a:Ki.merge(r,a));return r}}}return null},Ki.splitOnAntimeridian=function(e){var t,n,r,i,o,a,s=[];return Ki.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe(e)?[[-180,e[1],e[2],180,e[4],e[5]]]:Ki.isBoundingBoxWithLessThanSixElementsLargerThanGlobe(e)?[[-180,e[1],180,e[3]]]:(Ki.crossesAntimeridian(e)?(a=t=void 0,n=bi(Ki.getWest(e)),r=bi(Ki.getEast(e)),i=_i(Ki.getNorth(e)),o=_i(Ki.getSouth(e)),a=6<=e.length?(t=[n,o,e[2],180,i,e[5]],[-180,o,e[2],r,i,e[5]]):(t=[n,o,180,i],[-180,o,r,i]),s.push(t,a)):s.push(e),s)},Ki.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe=function(e){return 6<=e.length&&360<e[3]-e[0]},Ki.isBoundingBoxWithLessThanSixElementsLargerThanGlobe=function(e){return e.length<6&&360<e[2]-e[0]},Ki);function Ki(e,t){var n,r=this;return e&&t?r=(n=e)[2]&&t[2]?Gi.call(this,n[0],n[1],n[2]||0,t[0],t[1],t[2]||0)||this:Gi.call(this,n[0],n[1],t[0],t[1])||this:!e||(e=e)&&(4===e.length?r=Gi.call(this,e[0],e[1],e[2],e[3])||this:6<=e.length&&(r=Gi.call(this,e[0],e[1],e[2],e[3],e[4],e[5])||this)),r}var Xi=(Yi.TYPE="FeatureCollection",Yi);function Yi(e,t){this.type="FeatureCollection",this.type=Yi.TYPE,this.features=e,this.bbox=t}function Ji(e){this.type="GeometryCollection",this.type=Ji.TYPE,this.geometries=e}function $i(e,t){this.type="LineString",this.type=$i.TYPE,this.coordinates=e,this.bbox=t}function Qi(e,t){this.type="MultiLineString",this.type=Qi.TYPE,this.coordinates=e,this.bbox=t}function eo(e,t){this.type="MultiPoint",this.type=eo.TYPE,this.coordinates=e,this.bbox=t}function to(e,t){this.type="MultiPolygon",this.type=to.TYPE,this.coordinates=e,this.bbox=t}Ji.TYPE="GeometryCollection",Oe=Ji,$i.TYPE="LineString",Fe=$i,Qi.TYPE="MultiLineString",Ie=Qi,eo.TYPE="MultiPoint",Re=eo,to.TYPE="MultiPolygon",Le=to,Pe=Object.freeze({__proto__:null,Feature:Pr,FeatureCollection:Xi,LineString:Fe,Point:Rr,Polygon:Fi,Position:Ni,BoundingBox:Zi,MultiLineString:Ie,MultiPoint:Re,MultiPolygon:Le,GeometryCollection:Oe});var no,ro,io=(R(oo,no=U),oo);function oo(){var e=null!==no&&no.apply(this,arguments)||this;return e.zoomDelta=1,e.style=t.ControlStyle.light,e}function ao(e){var t=ro.call(this)||this;return t.container=null,t.zoomInButton=null,t.zoomOutButton=null,t.zoomChanged=function(e){return t.updateZoomButtonsState()},t.minZoomChanged=function(e){return t.updateZoomButtonsState()},t.maxZoomChanged=function(e){return t.updateZoomButtonsState()},t.options=(new io).merge(e),t}R(ao,ro=ue),ao.prototype.onAdd=function(e){this.container=this.buildContainer(e,this.options.style,"Zoom Control"),this.container.style.flexDirection="column",this.zoomInButton=this.constructZoomInButton(e),this.zoomOutButton=this.constructZoomOutButton(e);var t=J("Zoom In"),n=J("Zoom Out");return this.container.appendChild(this.zoomInButton),this.container.appendChild(t),this.container.appendChild(this.zoomOutButton),this.container.appendChild(n),$(t,this.zoomInButton),$(n,this.zoomOutButton),e.events.add("zoom",this.zoomChanged),e.events.add("minzoomchanged",this.minZoomChanged),e.events.add("maxzoomchanged",this.maxZoomChanged),this.map=e,this.container},ao.prototype.onRemove=function(){this.map&&(this.map.events.remove("zoom",this.zoomChanged),this.map.events.remove("minzoomchanged",this.minZoomChanged),this.map.events.remove("maxzoomchanged",this.maxZoomChanged),this.map=null),this.container&&(this.container.remove(),this.container=null,this.zoomInButton=null,this.zoomOutButton=null)},ao.prototype.updateZoomButtonsState=function(){var e=this.map.getCamera().zoom>=this.map._getMap().getMaxZoom(),t=Zi.getSouth(this.map.getCamera().bounds)<=-Kr&&Zi.getNorth(this.map.getCamera().bounds)>=Kr;t=this.map.getCamera().zoom<=this.map._getMap().getMinZoom()||t,this.zoomInButton&&this.zoomInButton.disabled!=e&&(this.zoomInButton.disabled=e),this.zoomOutButton&&this.zoomOutButton.disabled!=t&&(this.zoomOutButton.disabled=t)},ao.prototype.constructZoomInButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("azure-maps-control-button"),n.classList.add("zoom-in"),n.setAttribute("aria-label","Zoom In"),n.setAttribute("alt","Zoom In"),n.setAttribute("type","button"),n.addEventListener("click",(function(){e.setCamera({zoom:e.getCamera().zoom+t.options.zoomDelta,duration:ao.ZOOM_DURATION_MS,type:"ease"},!0)})),n},ao.prototype.constructZoomOutButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("azure-maps-control-button"),n.classList.add("zoom-out"),n.setAttribute("aria-label","Zoom Out"),n.setAttribute("alt","Zoom Out"),n.setAttribute("type","button"),n.addEventListener("click",(function(){e.setCamera({zoom:e.getCamera().zoom-t.options.zoomDelta,duration:ao.ZOOM_DURATION_MS,type:"ease"},!0)})),n},ao.ZOOM_DURATION_MS=200,ke=ao,r=Object.freeze({__proto__:null,ControlBase:ue,PitchControl:xe,CompassControl:me,ZoomControl:ke,StyleControl:Te,TrafficControl:or,TrafficLegendControl:Ne});var so,lo=function(e,t){return Gn(e,5,t="function"==typeof t?t:void 0)},uo=(R(co,so=U),co);function co(){var e=null!==so&&so.apply(this,arguments)||this;return e.buffer=128,e.maxZoom=18,e.cluster=!1,e.clusterRadius=50,e.clusterMaxZoom=void 0,e.clusterProperties=void 0,e.lineMetrics=!1,e.tolerance=.375,e}var po,ho=(R(fo,po=oe),fo.prototype.getId=function(){return this.id},fo.prototype._setMap=function(e){var t;null==e||void 0===e?(t=this.map,delete this.map,this._invokeEvent("sourceremoved",this),t&&t.events.invoke("sourceremoved",this)):(this.map=e,this._invokeEvent("sourceadded",this),this.map.events.invoke("sourceadded",this))},fo);function fo(e){var t=po.call(this)||this;return t.id=e||kr(),t}var mo,go=(R(yo,mo=ho),yo.prototype.add=function(e,t){this._addNoUpdate(e,t),this._updateSource()},yo.prototype.clear=function(){this._clearNoUpdate(),this._updateSource()},yo.prototype.dispose=function(){this.options=null,this.shapes=null,this.shapesMap=null,this.map=null},yo.prototype.getClusterExpansionZoom=function(e){var t=this;return new Promise((function(n,r){var i;t.map?(i=t.map._getMap().getSource(t.getId()))&&"geojson"===i.type&&i.getClusterExpansionZoom(e,(function(e,t){e?r(e):"number"==typeof t&&n(t)})):r("The DataSource hasn't been added to a map.")}))},yo.prototype.getClusterChildren=function(e){var t=this;return new Promise((function(n,r){var i;t.map?(i=t.map._getMap().getSource(t.getId()))&&"geojson"===i.type&&i.getClusterChildren(e,(function(e,i){e?r(e):i&&n(t.map.sources._mapFeaturesToShapes(i,!1,t))})):r("The DataSource hasn't been added to a map.")}))},yo.prototype.getClusterLeaves=function(e,t,n){var r=this;return new Promise((function(i,o){var a;r.map?(a=r.map._getMap().getSource(r.getId()))&&"geojson"===a.type&&a.getClusterLeaves(e,t,n,(function(e,t){e?o(e):t&&i(r.map.sources._mapFeaturesToShapes(t,!1,r))})):o("The DataSource hasn't been added to a map.")}))},yo.prototype.getOptions=function(){return Zn(this.options)},yo.prototype.getShapes=function(){return Array.from(this.shapes)},yo.prototype.importDataFromUrl=function(e){var t=this;return fetch(e,{method:"GET",mode:"cors"}).then((function(e){if(e.ok)return e.json();throw new Error("HTTP "+e.status+": "+e.statusText)})).then((function(e){t.add(e)}))},yo.prototype.getShapeById=function(e){return this.shapes[this.shapesMap.get(e)]||null},yo.prototype.remove=function(e){var t,n;e=Array.isArray(e)?e:[e];try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o=i.value;"number"==typeof o?this._removeByIndex(o):this._removeById(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}this._updateSource()},yo.prototype.removeById=function(e){var t,n;e=Array.isArray(e)?e:[e];try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o=i.value;this._removeById(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}this._updateSource()},yo.prototype.setOptions=function(e){e=(new uo).merge(this.options,Zn(e)),Tr(this.options,e)||(this._invokeEvent("datasourceupdated",this),this.options=e,this.map&&this.map._rebuildStyle())},yo.prototype.setShapes=function(e){this._clearNoUpdate(),this.add(e)},yo.prototype.toJson=function(){return new Xi(this.shapes.map((function(e){return e.toJson()})))},yo.prototype._toJson=function(){return new Xi(this.shapes.map((function(e){return e._toJson()})))},yo.prototype._buildSource=function(){var e={type:"geojson",data:this._toJson(),maxzoom:this.options.maxZoom,cluster:this.options.cluster,clusterRadius:this.options.clusterRadius,tolerance:this.options.tolerance,lineMetrics:this.options.lineMetrics,clusterProperties:this.options.clusterProperties,buffer:this.options.buffer};return"number"==typeof this.options.clusterMaxZoom&&(e.clusterMaxZoom=this.options.clusterMaxZoom),e},yo.prototype._addNoUpdate=function(e,t){var n;e instanceof Hi?(this._addToSources(e,t),n=[e]):Array.isArray(e)?(n=e.map((function(e){return e instanceof Hi?e:new Hi(e)})),this._addToSources(n,t)):"FeatureCollection"===e.type?(n=e.features.map((function(e){return new Hi(e)})),this._addToSources(n,t)):"GeometryCollection"===e.type?(n=e.geometries.map((function(e){return new Hi(e)})),this._addToSources(n,t)):(e=new Hi(e),this._addToSources(e,t),n=[e]),this._invokeEvent("dataadded",n)},yo.prototype._clearNoUpdate=function(){var e=this.shapes;this.shapes=[],this.shapesMap=new ie,e&&0<e.length&&this._invokeEvent("dataremoved",e)},yo.prototype._updateSource=function(){var e=this;void 0!==this.requestId||(this.requestId=requestAnimationFrame((function(){e._updateMboxSource(),e.requestId=void 0})))},yo.prototype._addToSources=function(e,t){var n,r,i,o;if(e=Array.isArray(e)?e:[e],"number"!=typeof t)try{for(var a=B(e),s=a.next();!s.done;s=a.next()){var l=s.value;this.shapes.push(l),this.shapesMap.set(l.getId(),this.shapes.length-1)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}else for(var u=e.length-1;0<=u;u--)this.shapes.splice(t,0,e[u]),this._updateShapesMap(t);try{for(var c=B(e),p=c.next();!p.done;p=c.next())(l=p.value)._setDataSource(this)}catch(e){i={error:e}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},yo.prototype._removeById=function(e){var t=e instanceof Hi?e.getId():"string"==typeof e||"number"==typeof e?e:e.id;(e=this.shapes[this.shapesMap.get(t)])&&(e._setDataSource(null),this.shapes.splice(this.shapesMap.get(t),1),this._updateShapesMap(this.shapesMap.get(t)),this.shapesMap.delete(t),this._invokeEvent("dataremoved",[e]))},yo.prototype._removeByIndex=function(e){var t;if(e>=this.shapes.length)throw new Error("The specified remove index '"+e+"' is greater than the maximum possible index '"+(this.shapes.length-1)+"'");t=this.shapes[e],this.shapesMap.delete(t.getId()),t._setDataSource(null),this.shapes.splice(e,1),this._updateShapesMap(e),this._invokeEvent("dataremoved",[t])},yo.prototype._updateShapesMap=function(e){for(var t=e;t<this.shapes.length;t++)this.shapesMap.set(this.shapes[t].getId(),t)},yo.prototype._updateMboxSource=function(){var e;this.map&&this.map._getMap()&&(e=this.map._getMap().getSource(this.getId()))&&"geojson"===e.type&&e.setData(this._toJson())},yo);function yo(e,t){return(e=mo.call(this,e)||this).requestId=void 0,e.options=(new uo).merge(Zn(t)),e.shapes=[],e.shapesMap=new ie,e}var vo,_o=(R(bo,vo=U),bo);function bo(){var e=null!==vo&&vo.apply(this,arguments)||this;return e.bounds=void 0,e.minZoom=0,e.maxZoom=22,e.isTMS=!1,e.tiles=void 0,e.url=void 0,e}var xo,wo=(R(So,xo=ho),So.prototype.getOptions=function(){return Zn(this.options)},So.prototype.getShape=function(e,t){return this.map._getMap().querySourceFeatures(this.getId(),{sourceLayer:e,filter:t})},So.prototype._buildSource=function(){var e={type:"vector"};return this.options.bounds&&(e.bounds=this.options.bounds),this.options.tiles?(e.tiles=this.options.tiles,e.minzoom=this.options.minZoom,e.maxzoom=this.options.maxZoom):this.options.url&&(e.url=this.options.url),this.options.isTMS&&(e.scheme="tms"),e},So);function So(e,t){return(e=xo.call(this,e)||this).options=(new _o).merge(Zn(t)),e}Fe=Object.freeze({__proto__:null,Source:ho,DataSource:go,VectorTileSource:wo});var Eo,Co,To=(R(Io,Eo=oe),Io.prototype.getId=function(){return this.id},Io.prototype.getMap=function(){return this.map||null},Io.prototype.onAdd=function(e){this.map=e,this._invokeEvent("layeradded",this),this.map.events.invoke("layeradded",this)},Io.prototype.onRemove=function(){var e=this.map;delete this.map,this._invokeEvent("layerremoved",this),e&&e.events.invoke("layerremoved",this)},Io._isMBoxEvent=function(e){return!this.LayerEvents.hasOwnProperty(e)},Io.prototype._updateBaseProperties=function(e,t){this._updateFilter(e.filter,t.filter),this._updateZoomRange(e.minZoom,t.minZoom,e.maxZoom,t.maxZoom),this._updateLayoutProperty("visibility",e.visible,t.visible,e.visible?"visible":"none")},Io.prototype._updateFilter=function(e,t){Tr(e,t)||this.map._getMap().setFilter(this.id,e)},Io.prototype._updatePaintProperty=function(e,t,n,r){Tr(t,n)||this.map._getMap().setPaintProperty(this.id,e,r||t)},Io.prototype._updateLayoutProperty=function(e,t,n,r){Tr(t,n)||this.map._getMap().setLayoutProperty(this.id,e,r||t)},Io.prototype._updateZoomRange=function(e,t,n,r){e===t&&r===n||this.map._getMap().setLayerZoomRange(this.id,e,n)},Io.LayerEvents={layeradded:void 0,layerremoved:void 0},Io);function Io(e){var t=Eo.call(this)||this;return t.id=e||kr(),t}function ko(){var e=null!==Co&&Co.apply(this,arguments)||this;return e.filter=void 0,e.minZoom=0,e.maxZoom=24,e.visible=!0,e}R(ko,Co=U),ko._cloneCustomizer=function(e){if(e instanceof ho)return e};var Po,Ao=(R(Mo,Po=Ie=ko),Mo);function Mo(){var e=null!==Po&&Po.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.color="#1A73AA",e.blur=0,e.opacity=1,e.strokeColor="#FFFFFF",e.strokeOpacity=1,e.strokeWidth=2,e.pitchAlignment="viewport",e.radius=8,e}var Oo,Lo=(R(Ro,Oo=To),Ro.prototype.getOptions=function(){return lo(this.options,Ao._cloneCustomizer)},Ro.prototype.getSource=function(){return this.options.source},Ro.prototype.setOptions=function(e){if(e=(new Ao).merge(this.options,lo(e,Ao._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("circle-blur",e.blur,this.options.blur),this._updatePaintProperty("circle-color",e.color,this.options.color),this._updatePaintProperty("circle-opacity",e.opacity,this.options.opacity),this._updatePaintProperty("circle-radius",e.radius,this.options.radius),this._updatePaintProperty("circle-stroke-color",e.strokeColor,this.options.strokeColor),this._updatePaintProperty("circle-stroke-opacity",e.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("circle-stroke-width",e.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("circle-pitch-alignment",e.pitchAlignment,this.options.pitchAlignment)}this.options=e},Ro.prototype._buildLayers=function(){var e={id:this.id,type:"circle",source:this.options.source instanceof ho?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"circle-color":this.options.color,"circle-blur":this.options.blur,"circle-opacity":this.options.opacity,"circle-stroke-color":this.options.strokeColor,"circle-stroke-opacity":this.options.strokeOpacity,"circle-stroke-width":this.options.strokeWidth,"circle-pitch-alignment":this.options.pitchAlignment,"circle-radius":this.options.radius},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(e.filter=this.options.filter),this.options.sourceLayer&&(e["source-layer"]=this.options.sourceLayer),[e]},Ro.prototype._getLayerIds=function(){return[this.id]},Ro.prototype._getSourceIds=function(){var e=new Set;return this.options.source instanceof ho?e.add(this.options.source.getId()):e.add(this.options.source),e},Ro);function Ro(e,t,n){return(t=Oo.call(this,t)||this).options=(new Ao).merge(lo(n,Ao._cloneCustomizer)),t.options.source=e||t.options.source,t}var Do,zo,No,Bo=(R(Fo,Do=Ie),Fo._cloneCustomizer=function(e){if(e instanceof ho)return e},Fo);function Fo(){var e=null!==Do&&Do.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.color=["interpolate",["linear"],["heatmap-density"],0,"rgba(0,0, 255,0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],e.intensity=1,e.opacity=1,e.radius=30,e.weight=1,e}function jo(e,t,n){return(t=zo.call(this,t)||this).options=(new Bo).merge(lo(n,Bo._cloneCustomizer)),t.options.source=e||t.options.source,t}function Uo(){var e=null!==No&&No.apply(this,arguments)||this;return e.contrast=0,e.fadeDuration=300,e.hueRotation=0,e.maxBrightness=1,e.minBrightness=0,e.opacity=1,e.saturation=0,e}R(jo,zo=To),jo.prototype.getOptions=function(){return lo(this.options,Bo._cloneCustomizer)},jo.prototype.getSource=function(){return this.options.source},jo.prototype.setOptions=function(e){if(e=(new Bo).merge(this.options,lo(e,Bo._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("heatmap-color",e.color,this.options.color),this._updatePaintProperty("heatmap-intensity",e.intensity,this.options.intensity),this._updatePaintProperty("heatmap-opacity",e.opacity,this.options.opacity),this._updatePaintProperty("heatmap-radius",e.radius,this.options.radius),this._updatePaintProperty("heatmap-weight",e.weight,this.options.weight)}this.options=e},jo.prototype._buildLayers=function(){var e={id:this.id,type:"heatmap",source:this.options.source instanceof ho?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"heatmap-color":this.options.color,"heatmap-intensity":this.options.intensity,"heatmap-opacity":this.options.opacity,"heatmap-radius":this.options.radius,"heatmap-weight":this.options.weight},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(e.filter=this.options.filter),this.options.sourceLayer&&(e["source-layer"]=this.options.sourceLayer),[e]},jo.prototype._getLayerIds=function(){return[this.id]},jo.prototype._getSourceIds=function(){var e=new Set;return this.options.source instanceof ho?e.add(this.options.source.getId()):e.add(this.options.source),e},Re=jo,R(Uo,No=Ie);var Vo,qo=(R(Ho,Vo=Le=Uo),Ho._cloneCustomizer=function(e){if(e instanceof ho)return e},Ho);function Ho(){var e=null!==Vo&&Vo.apply(this,arguments)||this;return e.url=void 0,e.coordinates=void 0,e}var Wo,Go,Zo=(R(Ko,Wo=To),Ko.prototype._getSourceIds=function(){var e=new Set;return e.add(this._getSourceId()),e},Ko);function Ko(){return null!==Wo&&Wo.apply(this,arguments)||this}function Xo(e,t){return(t=Go.call(this,t)||this).isLoading=!1,t.options=(new qo).merge(lo(e,qo._cloneCustomizer)),t.img=new Image,t.reloadImage(),t}R(Xo,Go=Zo),Xo.prototype.getOptions=function(){return lo(this.options,qo._cloneCustomizer)},Xo.prototype.setOptions=function(e){var t=(new qo).merge(this.options,lo(e,qo._cloneCustomizer)),n="string"==typeof e.url&&e.url!==this.getOptions().url,r=void 0!==e.coordinates&&e.coordinates!==this.getOptions().coordinates;this.map&&(this._updateBaseProperties(t,this.options),this._updatePaintProperty("raster-contrast",t.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",t.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",t.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",t.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",t.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",t.saturation,this.options.saturation),(e=this.map._getMap().getSource(this._getSourceId()))&&e.updateImage(t)),this.options=t,n?this.reloadImage():r&&this.updateTransform()},Xo.prototype.getPositions=function(e){return this.transform.then((function(t){return t.toTarget(e)}))},Xo.prototype.getPixels=function(e){return this.transform.then((function(t){return t.toSource(e)}))},Xo.getCoordinatesFromRefPoints=function(e,t,n,r){return new Ui(n,r).toTarget([[0,0],[e,0],[e,t],[0,t]])},Xo.getCoordinatesFromEdges=function(e,t,n,r,i){return"number"!=typeof i&&(i=0),n=[Math.min(r,n),t,Math.max(r,n),e],e=Zi.getCenter(n),xi([Zi.getNorthWest(n),Zi.getNorthEast(n),Zi.getSouthEast(n),Zi.getSouthWest(n)],e,i)},Xo.prototype._buildLayers=function(){var e={id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-opacity":this.options.opacity,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-min":this.options.minBrightness,"raster-brightness-max":this.options.maxBrightness,"raster-saturation":this.options.saturation,"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(e.filter=this.options.filter),[e]},Xo.prototype._getLayerIds=function(){return[this.id]},Xo.prototype._buildSource=function(){return{type:"image",url:this.options.url,coordinates:this.options.coordinates}},Xo.prototype._getSourceId=function(){return this.getId()+"-ImageSource"},Xo.prototype.reloadImage=function(){var e=this;this.options.url&&(this.transform=new Promise((function(t,n){e.img.onload=function(){var n=[[0,0],[e.img.width,0],[e.img.width,e.img.height],[0,e.img.height]];t(new Ui(n,e.options.coordinates)),e.isLoading=!1},e.img.onerror=e.img.onabort=function(){n("Failed to load image")},e.isLoading=!0,e.img.src=e.options.url})))},Xo.prototype.updateTransform=function(){var e;this.isLoading||(e=[[0,0],[this.img.width,0],[this.img.width,this.img.height],[0,this.img.height]],this.transform=Promise.resolve(new Ui(e,this.options.coordinates)))},Oe=Xo;var Yo,Jo=(R($o,Yo=Ie),$o);function $o(){var e=null!==Yo&&Yo.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.lineCap="round",e.lineJoin="round",e.blur=0,e.strokeColor="#1E90FF",e.strokeDashArray=void 0,e.strokeGradient=void 0,e.offset=0,e.strokeOpacity=1,e.translate=new Or(0,0),e.translateAnchor="map",e.strokeWidth=2,e}var Qo,ea=(R(ta,Qo=To),ta.prototype.getOptions=function(){return lo(this.options,Jo._cloneCustomizer)},ta.prototype.getSource=function(){return this.options.source},ta.prototype.setOptions=function(e){if(e=(new Jo).merge(this.options,lo(e,Jo._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("line-blur",e.blur,this.options.blur),this._updateLayoutProperty("line-cap",e.lineCap,this.options.lineCap),this._updateLayoutProperty("line-join",e.lineJoin,this.options.lineJoin),this._updatePaintProperty("line-offset",e.offset,this.options.offset),this._updatePaintProperty("line-color",e.strokeColor,this.options.strokeColor),this._updatePaintProperty("line-dasharray",e.strokeDashArray,this.options.strokeDashArray),this._updatePaintProperty("line-gradient",e.strokeGradient,this.options.strokeGradient),this._updatePaintProperty("line-opacity",e.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("line-width",e.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("line-translate",e.translate,this.options.translate),this._updatePaintProperty("line-translate-anchor",e.translateAnchor,this.options.translateAnchor)}this.options=e},ta.prototype._buildLayers=function(){return[D(D(D(D({id:this.id,type:"line"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ho?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none","line-cap":this.options.lineCap,"line-join":this.options.lineJoin},paint:D(D(D({"line-blur":this.options.blur,"line-color":this.options.strokeColor},this.options.strokeDashArray&&{"line-dasharray":this.options.strokeDashArray}),this.options.strokeGradient&&{"line-gradient":this.options.strokeGradient}),{"line-offset":this.options.offset,"line-opacity":this.options.strokeOpacity,"line-translate":this.options.translate,"line-translate-anchor":this.options.translateAnchor,"line-width":this.options.strokeWidth})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},ta.prototype._getLayerIds=function(){return[this.id]},ta.prototype._getSourceIds=function(){var e=new Set;return this.options.source instanceof ho?e.add(this.options.source.getId()):e.add(this.options.source),e},ta);function ta(e,t,n){return(t=Qo.call(this,t)||this).options=(new Jo).merge(lo(n,Jo._cloneCustomizer)),t.options.source=e||t.options.source,t}var na,ra,ia=(R(oa,na=Ie),oa);function oa(){var e=null!==na&&na.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.base=0,e.fillColor="#1E90FF",e.height=0,e.fillOpacity=1,e.fillPattern=void 0,e.translate=new Or(0,0),e.translateAnchor="map",e.verticalGradient=!0,e}function aa(e,t,n){return(t=ra.call(this,t)||this).options=(new ia).merge(lo(n,ia._cloneCustomizer)),t.options.source=e||t.options.source,t}R(aa,ra=To),aa.prototype.getOptions=function(){return lo(this.options,ia._cloneCustomizer)},aa.prototype.getSource=function(){return this.options.source},aa.prototype.setOptions=function(e){if(e=(new ia).merge(this.options,lo(e,ia._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("fill-extrusion-base",e.base,this.options.base),this._updatePaintProperty("fill-extrusion-color",e.fillColor,this.options.fillColor),this._updatePaintProperty("fill-extrusion-height",e.height,this.options.height),this._updatePaintProperty("fill-extrusion-opacity",e.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-extrusion-pattern",e.fillPattern,this.options.fillPattern),this._updatePaintProperty("fill-extrusion-translate",e.translate,this.options.translate),this._updatePaintProperty("fill-extrusion-translate-anchor",e.translateAnchor,this.options.translateAnchor),this._updatePaintProperty("fill-extrusion-vertical-gradient",e.verticalGradient,this.options.verticalGradient)}this.options=e},aa.prototype._buildLayers=function(){return[D(D(D(D({id:this.id,type:"fill-extrusion"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ho?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:D(D({"fill-extrusion-base":this.options.base,"fill-extrusion-height":this.options.height,"fill-extrusion-opacity":this.options.fillOpacity},this.options.fillPattern?{"fill-extrusion-pattern":this.options.fillPattern}:{"fill-extrusion-color":this.options.fillColor}),{"fill-extrusion-translate":this.options.translate,"fill-extrusion-translate-anchor":this.options.translateAnchor,"fill-extrusion-vertical-gradient":this.options.verticalGradient})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},aa.prototype._getLayerIds=function(){return[this.id]},aa.prototype._getSourceIds=function(){var e=new Set;return this.options.source instanceof ho?e.add(this.options.source.getId()):e.add(this.options.source),e},xe=aa;var sa,la=(R(ua,sa=Ie),ua.prototype.merge=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=!1,i=!1;try{for(var o=B(t),a=o.next();!a.done;a=o.next()){var s=a.value;s&&(s.hasOwnProperty("fillColor")?i=!(r=!0):s.hasOwnProperty("fillPattern")&&(r=!(i=!0)))}}catch(e){l={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(l)throw l.error}}var l=sa.prototype.merge.apply(this,j(t));return r?l.fillPattern=void 0:i&&(l.fillColor=void 0),l},ua);function ua(){var e=null!==sa&&sa.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.fillColor="#1E90FF",e.fillOpacity=.5,e.fillPattern=void 0,e}var ca,pa=(R(ha,ca=To),ha.prototype.getOptions=function(){return lo(this.options,la._cloneCustomizer)},ha.prototype.getSource=function(){return this.options.source},ha.prototype.setOptions=function(e){if(e=(new la).merge(this.options,lo(e,la._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("fill-color",e.fillColor,this.options.fillColor),this._updatePaintProperty("fill-opacity",e.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-pattern",e.fillPattern,this.options.fillPattern)}this.options=e},ha.prototype._buildLayers=function(){var e={id:this.id,type:"fill",source:this.options.source instanceof ho?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"fill-opacity":this.options.fillOpacity},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(e.filter=this.options.filter),this.options.sourceLayer&&(e["source-layer"]=this.options.sourceLayer),this.options.fillPattern?e.paint["fill-pattern"]=this.options.fillPattern:e.paint["fill-color"]=this.options.fillColor,[e]},ha.prototype._getLayerIds=function(){return[this.id]},ha.prototype._getSourceIds=function(){var e=new Set;return this.options.source instanceof ho?e.add(this.options.source.getId()):e.add(this.options.source),e},ha);function ha(e,t,n){return(t=ca.call(this,t)||this).options=(new la).merge(lo(n,la._cloneCustomizer)),t.options.source=e||t.options.source,t}var da,fa=(R(ma,da=U),ma);function ma(){var e=null!==da&&da.apply(this,arguments)||this;return e.allowOverlap=!1,e.anchor="bottom",e.ignorePlacement=!1,e.image="marker-blue",e.offset=new Or(0,0),e.optional=!1,e.pitchAlignment="auto",e.rotation=0,e.rotationAlignment="auto",e.size=1,e.opacity=1,e}var ga,ya=(R(va,ga=U),va);function va(){var e=null!==ga&&ga.apply(this,arguments)||this;return e.allowOverlap=!1,e.anchor="center",e.textField=void 0,e.font=["StandardFont-Regular"],e.ignorePlacement=!1,e.offset=new Or(0,0),e.optional=!1,e.pitchAlignment="auto",e.rotation=0,e.rotationAlignment="auto",e.size=16,e.color="#000000",e.haloBlur=0,e.haloColor="rgba(0,0,0,0)",e.haloWidth=0,e.opacity=1,e}var _a,ba=(R(xa,_a=Ie),xa);function xa(){var e=null!==_a&&_a.apply(this,arguments)||this;return e.source=void 0,e.sourceLayer=void 0,e.iconOptions=new fa,e.textOptions=new ya,e.placement="point",e.lineSpacing=250,e}var wa,Sa=(R(Ea,wa=To),Ea.prototype.getOptions=function(){return lo(this.options,ba._cloneCustomizer)},Ea.prototype.getSource=function(){return this.options.source},Ea.prototype.setOptions=function(e){if(e=(new ba).merge(this.options,lo(e,ba._cloneCustomizer)),this.map){if(e.source!==this.options.source||e.sourceLayer!==this.options.sourceLayer)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updateLayoutProperty("symbol-spacing",e.lineSpacing,this.options.lineSpacing),this._updateLayoutProperty("symbol-placement",e.placement,this.options.placement),this._updateLayoutProperty("icon-allow-overlap",e.iconOptions.allowOverlap,this.options.iconOptions.allowOverlap),this._updateLayoutProperty("icon-anchor",e.iconOptions.anchor,this.options.iconOptions.anchor),this._updateLayoutProperty("icon-ignore-placement",e.iconOptions.ignorePlacement,this.options.iconOptions.ignorePlacement),this._updateLayoutProperty("icon-image",e.iconOptions.image,this.options.iconOptions.image),this._updateLayoutProperty("icon-offset",e.iconOptions.offset,this.options.iconOptions.offset),this._updatePaintProperty("icon-opacity",e.iconOptions.opacity,this.options.iconOptions.opacity),this._updateLayoutProperty("icon-optional",e.iconOptions.optional,this.options.iconOptions.optional),this._updateLayoutProperty("icon-pitch-alignment",e.iconOptions.pitchAlignment,this.options.iconOptions.pitchAlignment),this._updateLayoutProperty("icon-rotate",e.iconOptions.rotation,this.options.iconOptions.rotation),this._updateLayoutProperty("icon-rotation-alignment",e.iconOptions.rotationAlignment,this.options.iconOptions.rotationAlignment),this._updateLayoutProperty("icon-size",e.iconOptions.size,this.options.iconOptions.size),this._updateLayoutProperty("text-allow-overlap",e.textOptions.allowOverlap,this.options.textOptions.allowOverlap),this._updateLayoutProperty("text-anchor",e.textOptions.anchor,this.options.textOptions.anchor),this._updatePaintProperty("text-color",e.textOptions.color,this.options.textOptions.color),this._updateLayoutProperty("text-font",e.textOptions.font,this.options.textOptions.font),this._updateLayoutProperty("text-ignore-placement",e.textOptions.ignorePlacement,this.options.textOptions.ignorePlacement),this._updatePaintProperty("text-halo-blur",e.textOptions.haloBlur,this.options.textOptions.haloBlur),this._updatePaintProperty("text-halo-color",e.textOptions.haloColor,this.options.textOptions.haloColor),this._updatePaintProperty("text-halo-width",e.textOptions.haloWidth,this.options.textOptions.haloWidth),this._updateLayoutProperty("text-offset",e.textOptions.offset,this.options.textOptions.offset),this._updatePaintProperty("text-opacity",e.textOptions.opacity,this.options.textOptions.opacity),this._updateLayoutProperty("text-optional",e.textOptions.optional,this.options.textOptions.optional),this._updateLayoutProperty("text-pitch-alignment",e.textOptions.pitchAlignment,this.options.textOptions.pitchAlignment),this._updateLayoutProperty("text-rotate",e.textOptions.rotation,this.options.textOptions.rotation),this._updateLayoutProperty("text-rotation-alignment",e.textOptions.rotationAlignment,this.options.textOptions.rotationAlignment),this._updateLayoutProperty("text-size",e.textOptions.size,this.options.textOptions.size),this._updateLayoutProperty("text-field",e.textOptions.textField,this.options.textOptions.textField)}this.options=e},Ea.prototype._buildLayers=function(){return[D(D(D(D({id:this.id,type:"symbol"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof ho?this.options.source.getId():this.options.source,layout:D(D({visibility:this.options.visible?"visible":"none","symbol-placement":this.options.placement,"symbol-spacing":this.options.lineSpacing,"text-allow-overlap":this.options.textOptions.allowOverlap,"text-anchor":this.options.textOptions.anchor},this.options.textOptions.textField&&{"text-field":this.options.textOptions.textField}),{"text-font":this.options.textOptions.font,"text-ignore-placement":this.options.textOptions.ignorePlacement,"text-offset":this.options.textOptions.offset,"text-optional":this.options.textOptions.optional,"text-pitch-alignment":this.options.textOptions.pitchAlignment,"text-rotate":this.options.textOptions.rotation,"text-rotation-alignment":this.options.textOptions.rotationAlignment,"text-size":this.options.textOptions.size,"icon-allow-overlap":this.options.iconOptions.allowOverlap,"icon-anchor":this.options.iconOptions.anchor,"icon-ignore-placement":this.options.iconOptions.ignorePlacement,"icon-image":this.options.iconOptions.image,"icon-offset":this.options.iconOptions.offset,"icon-optional":this.options.iconOptions.optional,"icon-pitch-alignment":this.options.iconOptions.pitchAlignment,"icon-rotate":this.options.iconOptions.rotation,"icon-rotation-alignment":this.options.iconOptions.rotationAlignment,"icon-size":this.options.iconOptions.size}),paint:{"text-color":this.options.textOptions.color,"text-halo-blur":this.options.textOptions.haloBlur,"text-halo-color":this.options.textOptions.haloColor,"text-halo-width":this.options.textOptions.haloWidth,"text-opacity":this.options.textOptions.opacity,"icon-opacity":this.options.iconOptions.opacity}}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},Ea.prototype._getLayerIds=function(){return[this.id]},Ea.prototype._getSourceIds=function(){var e=new Set;return this.options.source instanceof ho?e.add(this.options.source.getId()):e.add(this.options.source),e},Ea);function Ea(e,t,n){return(t=wa.call(this,t)||this).options=(new ba).merge(lo(n,ba._cloneCustomizer)),t.options.source=e||t.options.source,t}var Ca,Ta=(R(Ia,Ca=Le),Ia);function Ia(){var e=null!==Ca&&Ca.apply(this,arguments)||this;return e.bounds=[-180,-85.0511,180,85.0511],e.minSourceZoom=0,e.maxSourceZoom=22,e.tileSize=512,e.isTMS=!1,e.subdomains=void 0,e.tileUrl=void 0,e}var ka,Pa=(R(Aa,ka=Zo),Aa.prototype.getOptions=function(){return lo(this.options,Ta._cloneCustomizer)},Aa.prototype.setOptions=function(e){if(e=(new Ta).merge(this.options,lo(e,Ta._cloneCustomizer)),this.map){if(!Tr(e.bounds,this.options.bounds)||e.isTMS!==this.options.isTMS||e.maxSourceZoom!==this.options.maxSourceZoom||e.minSourceZoom!==this.options.minSourceZoom||!Tr(e.subdomains,this.options.subdomains)||e.tileSize!==this.options.tileSize||e.tileUrl!==this.options.tileUrl)return this.options=e,void this.map.layers.add(this);this._updateBaseProperties(e,this.options),this._updatePaintProperty("raster-contrast",e.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",e.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",e.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",e.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",e.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",e.saturation,this.options.saturation)}this.options=e},Aa.prototype._setOptionsNoUpdate=function(e){this.options=(new Ta).merge(this.options,lo(e,Ta._cloneCustomizer))},Aa.prototype._buildLayers=function(){return[D(D({id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-max":this.options.maxBrightness,"raster-brightness-min":this.options.minBrightness,"raster-opacity":this.options.opacity,"raster-saturation":this.options.saturation}},this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},Aa.prototype._getLayerIds=function(){return[this.id]},Aa.prototype._buildSource=function(){var e,t;if(this.options.tileUrl){if(-1===this.options.tileUrl.indexOf("{"))return{type:"raster",url:this.options.tileUrl};if(-1!==this.options.tileUrl.indexOf("{subdomain}")){if(!(this.options.subdomains&&0<this.options.subdomains.length))throw new Error("The {subdomain} placeholder was included in the tileUrl but no subdomains were specified");var n=[];try{for(var r=B(this.options.subdomains),i=r.next();!i.done;i=r.next()){var o=i.value;n.push(this.options.tileUrl.replace(/{subdomain}/g,o))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}t=n}else t=[this.options.tileUrl]}return D({type:"raster",bounds:this.options.bounds,maxzoom:this.options.maxSourceZoom,minzoom:this.options.minSourceZoom,scheme:this.options.isTMS?"tms":"xyz",tileSize:this.options.tileSize},t&&{tiles:t})},Aa.prototype._getSourceId=function(){return this.getId()+"-RasterSource"},Aa);function Aa(e,t){return t=ka.call(this,t)||this,e&&t.setOptions(e),t}ke=Object.freeze({__proto__:null,BubbleLayer:Lo,Layer:To,LineLayer:ea,PolygonExtrusionLayer:xe,PolygonLayer:pa,SymbolLayer:Sa,TileLayer:Pa,HeatMapLayer:Re,ImageLayer:Oe});var Ma=(Oa.convertHtmlString=function(e){if("string"!=typeof e)return e;var t=document.createElement("div");return t.innerHTML=e,t},Oa.parseWithFilter=function(e,t,n,r){var i=this;if(void 0===t&&(t=function(e){return!0}),void 0===n&&(n=function(e){return e}),void 0===r&&(r=function(){return document.createElement("div")}),"string"==typeof e){if(0==(a=(new DOMParser).parseFromString(e,"text/html").body).children.length)return n(a.innerHTML);var o,a=1==a.children.length&&1==a.childNodes.length?a.children[0]:(o=r(),Array.from(a.childNodes).map((function(e){return o.append(e)})),o)}else a=e;return Array.from(a.children).forEach((function(e){return i.parseWithFilter(e,t,n)})),t(a)?n(a):(a.parentNode&&a.parentNode.removeChild(a),null)},Oa);function Oa(){}Te=Function.prototype,Ne=Object.prototype;var La,Ra=Te.toString,Da=Ne.hasOwnProperty,za=Ra.call(Object),Na=function(e){return!(!Et(e)||"[object Object]"!=Ze(e))&&(null===(e=an(e))||"function"==typeof(e=Da.call(e,"constructor")&&e.constructor)&&e instanceof e&&Ra.call(e)==za)},Ba=function(e){return Et(e)&&1===e.nodeType&&!Na(e)},Fa=(R(ja,La=U),ja._cloneCustomizer=function(e){if(Ba(e))return e},ja);function ja(){var e=null!==La&&La.apply(this,arguments)||this;return e.anchor="none",e.draggable=!1,e.closeButton=!0,e.content=document.createElement("span"),e.fillColor="#FFFFFF",e.pixelOffset=new Or(0,0),e.position=new Ni(0,0),e.showPointer=!0,e}var Ua,Va=(R(qa,Ua=oe),qa.prototype.setPopupOptions=function(e){this.setOptions(e)},qa.prototype.setOptions=function(e){var t=(new Fa).merge(this.options,lo(e,Fa._cloneCustomizer));t.content!==this.options.content?(this.htmlContent.remove(),this.htmlContent=this._createHtmlContent(t),this.contentDiv.prepend(this.htmlContent)):t.draggable!==this.options.draggable&&this._setDraggable(this.htmlContent,t.draggable),t.closeButton&&!this.closeBtn?(this.closeBtn=this._createCloseButton(),this.contentDiv.appendChild(this.closeBtn),e=J("close"),this.contentDiv.appendChild(e),$(e,this.closeBtn,!0)):!t.closeButton&&this.closeBtn&&(this.contentDiv.removeChild(this.closeBtn),delete this.closeBtn),t.showPointer&&!this.arrowDiv?(this.arrowDiv=this._createArrowDiv(),this.containerDiv.appendChild(this.arrowDiv)):!t.showPointer&&this.arrowDiv&&(this.containerDiv.removeChild(this.arrowDiv),delete this.arrowDiv),t.fillColor!==this.options.fillColor&&(this.containerDiv.style.borderColor=t.fillColor,this.contentDiv.style.backgroundColor=t.fillColor),this.marker&&(t.anchor!==this.options.anchor?"none"===this.options.anchor?(this.autoAnchor!==t.anchor&&this._replaceMarker(this.map,t),this.map.events.remove("move",this._onMove),delete this.autoAnchor):(this._replaceMarker(this.map,t),"none"===t.anchor&&this.map.events.add("move",this._onMove)):(Tr(t.position,this.options.position)||this.marker.setLngLat(t.position),Tr(t.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(t.pixelOffset))),this.options=t},qa.prototype.getPopupOptions=function(){return this.getOptions()},qa.prototype.getOptions=function(){return lo(this.options,Fa._cloneCustomizer)},qa.prototype._dragToPixel=function(e){this.dragging||(this.dragging=!0,this.contentDiv.style.pointerEvents="none",this._invokeEvent("dragstart",{type:"dragstart",target:this})),e=[e[0]+this.dragOffset[0],e[1]+this.dragOffset[1]],e=F(this.map.pixelsToPositions([e]),1)[0],this.options.position=e,this.marker.setLngLat(this.options.position),this._invokeEvent("drag",{type:"drag",target:this})},qa.prototype._onUp=function(){this.dragging&&(this.contentDiv.style.pointerEvents="",this._invokeEvent("dragend",{type:"dragend",target:this}),"none"===this.options.anchor&&this._onMove()),delete this.dragOffset,delete this.dragging},qa.prototype._createContainerDiv=function(e){var t=this,n=document.createElement("div");n.classList.add(qa.Css.container),n.classList.add(qa.Css.hidden),n.style.borderColor=e.fillColor,n.setAttribute("role","dialog"),n.setAttribute("aria-label","Map Information Window");var r=!1;return n.addEventListener("keydown",(function(e){"Tab"!==e.key&&"Escape"!==e.key&&"Esc"!==e.key||(r=!0)})),n.addEventListener("keyup",(function(e){"Tab"!==e.key&&"Escape"!==e.key&&"Esc"!==e.key||(r=!1)})),n.addEventListener("focusin",(function(e){t.map&&!t.isOpen()&&(t.open(t.map),e.target instanceof HTMLElement&&e.target.focus())})),n.addEventListener("focusout",(function(e){r&&e.relatedTarget instanceof Node&&!n.contains(e.relatedTarget)&&(r=!1,t.isOpen()&&t.close())})),n},qa.prototype._createContentDiv=function(e){var t=document.createElement("div");return t.classList.add(qa.Css.content),t.style.backgroundColor=e.fillColor,t.setAttribute("tabindex","0"),this.htmlContent=this._createHtmlContent(e),t.appendChild(this.htmlContent),t},qa.prototype._createArrowDiv=function(){var e=document.createElement("div");return e.classList.add(qa.Css.arrow),e},qa.prototype._createCloseButton=function(){var e=document.createElement("button");return e.addEventListener("click",this.close),e.classList.add(qa.Css.close),e.setAttribute("aria-label","close"),e.setAttribute("tabindex","0"),e.innerHTML="&times;",e},qa.prototype._createHtmlContent=function(e){var t=Ma.convertHtmlString(e.content);return e.draggable&&this._setDraggable(t,e.draggable),t},qa.prototype._createMarker=function(e,t){var n=this.marker?this.marker.getLngLat():e.position;return n="none"===e.anchor?(this.autoAnchor=t||"bottom",this.containerDiv.classList.add(this.autoAnchor),new s({anchor:this.autoAnchor,element:this.containerDiv,offset:e.pixelOffset}).setLngLat(n)):(this.containerDiv.classList.add(e.anchor),new s({anchor:e.anchor,element:this.containerDiv,offset:e.pixelOffset}).setLngLat(n))},qa.prototype._getAutoAnchor=function(e,t){var n,r,i,o=this.containerDiv.offsetWidth,a=this.containerDiv.offsetHeight,s=[];return(i=this.marker?(r=(n=e._getMap().project(this.marker.getLngLat())).x,n.y):(i=F(e.positionsToPixels([t.position]),1),r=(i=F(i[0],2))[0],i[1]))<a?s.push("top"):i>e.getCanvas().offsetHeight-a&&s.push("bottom"),r<o/2?s.push("left"):r>e.getCanvas().offsetWidth-o/2&&s.push("right"),0<s.length?s.join("-"):"bottom"},qa.prototype._replaceMarker=function(e,t,n){var r=this.containerDiv.nextElementSibling;this.marker.remove(),this.containerDiv.classList.remove(this.autoAnchor||this.options.anchor),this.marker=this._createMarker(t,n),this.marker.addTo(e._getMap()),e.popups._getCollectionDiv().insertBefore(this.containerDiv,r||null)},qa.prototype._setDraggable=function(e,t){t?(e.addEventListener("mousedown",this._onDown),e.addEventListener("touchstart",this._onDown),e.addEventListener("dragstart",this._onDragStart)):(e.removeEventListener("mousedown",this._onDown),e.removeEventListener("touchstart",this._onDown),e.removeEventListener("dragstart",this._onDragStart))},qa.Css={arrow:"popup-arrow",close:"popup-close",container:"popup-container",content:"popup-content-container",hidden:"hidden-accessible-element"},qa);function qa(e){var t=Ua.call(this)||this;return t.attach=function(e){t.map!==e&&(t.map&&t.remove(),t.map=e,t.marker=t._createMarker(t.options),t.marker.addTo(t.map._getMap()),t.map.popups._getCollectionDiv().appendChild(t.containerDiv),t.map.popups.add(t))},t.open=function(e){if(!e&&!t.map)throw new Error("Must specify a map to open on or attach to a map in advance");t.attach(e||t.map),t.containerDiv.classList.remove(qa.Css.hidden),t.map.events.add("move",t._onMove),t._onMove(),t._invokeEvent("open",{target:t,type:"open"})},t.close=function(){t.map&&t.map.events.remove("move",t._onMove),t.containerDiv.classList.add(qa.Css.hidden),t._invokeEvent("close",{target:t,type:"close"})},t.remove=function(){t.map&&(t.marker.remove(),t.containerDiv.classList.remove(t.autoAnchor||t.options.anchor),t.map.events.remove("move",t._onMove),t.map.popups.remove(t),delete t.map,delete t.marker,delete t.autoAnchor)},t.isOpen=function(){return t.map&&!t.containerDiv.classList.contains(qa.Css.hidden)},t._onMove=function(){var e=t._getAutoAnchor(t.map,t.options);e!==t.autoAnchor&&(t._replaceMarker(t.map,t.options,e),t.map.events.add("move",t._onMove))},t._onDown=function(e){t.map.popups._addDraggedPopup(t);var n=F(t.map.positionsToPixels([t.options.position]),1)[0];"mousedown"===e.type?t.dragOffset=[n[0]-e.clientX,n[1]-e.clientY]:"touchstart"===e.type&&(t.dragOffset=[n[0]-e.touches[0].clientX,n[1]-e.touches[0].clientY])},t._onDragStart=function(e){e.preventDefault()},t.options=(new Fa).merge(lo(e,Fa._cloneCustomizer)),t.containerDiv=t._createContainerDiv(t.options),t.contentDiv=t._createContentDiv(t.options),t.containerDiv.appendChild(t.contentDiv),t.options.showPointer&&(t.arrowDiv=t._createArrowDiv(),t.containerDiv.appendChild(t.arrowDiv)),t.options.closeButton&&(t.closeBtn=t._createCloseButton(),t.contentDiv.appendChild(t.closeBtn),e=J("close"),t.contentDiv.appendChild(e),$(e,t.closeBtn,!0)),t}var Ha,Wa=(R(Ga,Ha=U),Ga._cloneCustomizer=function(e){if(e instanceof Va||Ba(e))return e},Ga);function Ga(){var e=null!==Ha&&Ha.apply(this,arguments)||this;return e.anchor="bottom",e.color="#1A73AA",e.draggable=!1,e.htmlContent='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.5 36.5" id="marker_'+kr()+'" width="24.5" height="36.5" display="block"><path d="M12.25.25a12.2543,12.2543,0,0,0-12,12.4937c0,6.4436,6.4879,12.1093,11.059,22.5641.5493,1.2563,1.3327,1.2563,1.882,0C17.7621,24.8529,24.25,19.1857,24.25,12.7437A12.2543,12.2543,0,0,0,12.25.25Z"   fill="{color}" stroke="{secondaryColor}" stroke-width="0.5"/><text style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; fill: white;" text-anchor="middle" x="12" y="18">{text}</text></svg>',e.pixelOffset=new Or(0,0),e.position=new Ni(0,0),e.popup=void 0,e.secondaryColor="white",e.text=void 0,e.visible=!0,e}var Za,Ka=(R(Xa,Za=oe),Xa.prototype.getOptions=function(){return lo(this.options,Wa._cloneCustomizer)},Xa.prototype.getElement=function(){return this.marker.getElement()},Xa.prototype.setOptions=function(e){e=(new Wa).merge(this.options,lo(e,Wa._cloneCustomizer)),Tr(e.htmlContent,this.options.htmlContent)&&e.anchor===this.options.anchor?("string"!=typeof e.htmlContent||e.color===this.options.color&&e.text===this.options.text&&e.secondaryColor===this.options.secondaryColor||(this.element.innerHTML=this._getSubbedHtmlString(e)||""),e.draggable!==this.options.draggable&&(this._setDraggable(e.draggable),this.marker.setDraggable(e.draggable)),Tr(e.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(e.pixelOffset),Tr(e.position,this.options.position)||this.marker.setLngLat(e.position),e.visible!==this.options.visible&&(e.visible?this.element.classList.remove(Xa.hiddenClass):this.element.classList.add(Xa.hiddenClass))):(this.marker.remove(),this._buildMarker(e),this.map&&(this.marker.addTo(this.map._getMap()),this._getCollectionContainer().appendChild(this.element))),this.options=e},Xa.prototype.togglePopup=function(){if(this.options.popup)if(this.options.popup.isOpen())this.options.popup.close();else{if(!this.map)throw new Error("The marker must be added to a map before calling togglePopup().");this.options.popup.setOptions({position:this.options.position}),this.options.popup.open(this.map)}},Xa.prototype._addToMap=function(e,t){this.map&&this.map!==e&&this._removeFromMap(),t&&(this.options.position=Zn(t),this.marker.setLngLat(this.options.position)),this.map!==e&&(this.map=e,this.marker.addTo(e._getMap()),this._getCollectionContainer().appendChild(this.element))},Xa.prototype._removeFromMap=function(){this.map&&(this.marker.remove(),delete this.map)},Xa.prototype._getId=function(){if(this.element)return("string"==typeof this.options.htmlContent?this.element.firstChild:this.element).id},Xa.prototype._buildMarker=function(e){var t;"string"==typeof e.htmlContent?(t=this._getSubbedHtmlString(e)||"",this.element=Ma.convertHtmlString(t)):this.element=e.htmlContent,this.element.classList.add(Xa.containerClass),e.draggable&&this._setDraggable(!0),e.visible||this.element.classList.add(Xa.hiddenClass),this.marker=new s({element:this.element,offset:e.pixelOffset,draggable:e.draggable,anchor:e.anchor}).setLngLat(e.position),this.marker.on("drag",this._onDrag),this.marker.on("dragstart",this._onDragStart),this.marker.on("dragend",this._onDragEnd),this.element.addEventListener("click",this._bubbleElementEvent),this.element.addEventListener("dblclick",this._bubbleElementEvent),this.element.addEventListener("contextmenu",this._bubbleElementEvent),this.element.addEventListener("keydown",this._bubbleElementEvent),this.element.addEventListener("keypress",this._bubbleElementEvent),this.element.addEventListener("keyup",this._bubbleElementEvent),this.element.addEventListener("mousedown",this._bubbleElementEvent),this.element.addEventListener("mouseenter",this._bubbleElementEvent),this.element.addEventListener("mouseleave",this._bubbleElementEvent),this.element.addEventListener("mousemove",this._bubbleElementEvent),this.element.addEventListener("mouseout",this._bubbleElementEvent),this.element.addEventListener("mouseover",this._bubbleElementEvent),this.element.addEventListener("mouseup",this._bubbleElementEvent)},Xa.prototype._getSubbedHtmlString=function(e){return"string"==typeof e.htmlContent?e.htmlContent.replace(/{color}/gi,e.color||"").replace(/{secondaryColor}/gi,e.secondaryColor||"").replace(/{text}/gi,e.text||""):null},Xa.prototype._getCollectionContainer=function(){var e=this.map.getCanvasContainer().querySelector("."+Xa.collectionContainerClass);return e||((e=document.createElement("div")).classList.add(Xa.collectionContainerClass),this.map.getCanvasContainer().appendChild(e)),e},Xa.prototype._setDraggable=function(e){e?this.element.addEventListener("dragstart",this._onEleDragStart):this.element.removeEventListener("dragstart",this._onEleDragStart)},Xa.collectionContainerClass="marker-collection-container",Xa.hiddenClass="hidden-accessible-element",Xa.containerClass="marker-container",Xa);function Xa(e){var t=Za.call(this)||this;return t._onDrag=function(){var e=t.marker.getLngLat().wrap();t.options.position=new Ni(e.lng,e.lat),t._invokeEvent("drag",{type:"drag",target:t})},t._onDragStart=function(){t._invokeEvent("dragstart",{type:"dragstart",target:t})},t._onDragEnd=function(){t._invokeEvent("dragend",{type:"dragend",target:t})},t._bubbleElementEvent=function(e){t._invokeEvent(e.type,{type:e.type,target:t})},t._onEleDragStart=function(e){e.preventDefault()},t.options=(new Wa).merge(lo(e,Wa._cloneCustomizer)),t._buildMarker(t.options),t}var Ya=function(e,t,n){(void 0===n||Se(e[t],n))&&(void 0!==n||t in e)||_t(e,t,n)},Ja=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}(),$a=function(e){return Et(e)&&qt(e)},Qa=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},es=function(e){return wt(e,Xt(e))},ts=function(e,t,n,r,i,o,a){var s,l,u,c=Qa(e,n),p=Qa(t,n),h=a.get(p);h?Ya(e,n,h):((s=void 0===(u=o?o(c,p,n+"",e,t,a):void 0))&&(h=!(l=kt(p))&&At(p),t=!l&&!h&&Dt(p),u=p,l||h||t?u=kt(c)?c:$a(c)?$t(c):h?Jt(p,!(s=!1)):t?On(p,!(s=!1)):[]:Na(p)||It(p)?It(u=c)?u=es(c):Ke(c)&&!Xe(c)||(u=Nn(p)):s=!1),s&&(a.set(p,u),i(u,p,r,o,a),a.delete(p)),Ya(e,n,u))},ns=function e(t,n,r,i,o){t!==n&&Ja(n,(function(a,s){var l;o=o||new gt,Ke(a)?ts(t,n,s,r,e,i,o):(l=i?i(Qa(t,s),a,s+"",t,n,o):void 0,Ya(t,s,l=void 0===l?a:l))}),Xt)};function rs(e){return e}var is=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},os=Math.max,as=function(e,t,n){return t=os(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=os(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),is(e,this,s)}},ss=function(e){return function(){return e}},ls=Date.now,us=function(e){var t=0,n=0;return function(){var r=ls(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(vt?function(e,t){return vt(e,"toString",{configurable:!0,enumerable:!1,value:ss(t),writable:!0})}:rs),cs=function(e,t){return us(as(e,t,rs),e+"")},ps=function(e,t,n){if(!Ke(n))return!1;var r=typeof t;return!!("number"==r?qt(n)&&Ot(t,n.length):"string"==r&&t in n)&&Se(n[t],e)},hs=function(e){return cs((function(t,n){var r=-1,i=n.length,o=1<i?n[i-1]:void 0,a=2<i?n[2]:void 0;for(o=3<e.length&&"function"==typeof o?(i--,o):void 0,a&&ps(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}((function(e,t,n){ns(e,t,n)})),ds=(fs.parse=function(e){var t=(e=e.toLowerCase()).lastIndexOf("-");return-1!==t?{code:e,language:e.substring(0,t),region:e.substring(t+1)}:{code:e,language:e}},fs);function fs(){}var ms={localizationsPath:"locs/mapcontrol/2019-3-12",sensitiveUserRegions:["il","kr","pk","in","cn","ar","bh","eg","jo","sa","kw","om","qa","ma","ae"],locales:{defaultLanguage:{defaultRegion:{code:"NGT",strings:"en/resource.json"}},ar:{defaultRegion:{code:"ar",strings:"ar-sa/resource.json"}},bg:{defaultRegion:{code:"bg-BG",strings:"bg-bg/resource.json"}},cs:{defaultRegion:{code:"cs-CZ",strings:"cs-cz/resource.json"}},da:{defaultRegion:{code:"da-DK",strings:"da-dk/resource.json"}},de:{defaultRegion:{code:"de-DE",strings:"de-de/resource.json"}},el:{defaultRegion:{code:"el-GR",strings:"el-gr/resource.json"}},en:{defaultRegion:{code:"en",strings:"en/resource.json"},us:{code:"en-US",strings:"en/resource.json"}},es:{defaultRegion:{code:"es-ES",strings:"es-es/resource.json"},mx:{code:"es-MX",strings:"es-mx/resource.json"}},fi:{defaultRegion:{code:"fi-FI",strings:"fi-fi/resource.json"}},fr:{defaultRegion:{code:"fr-FR",strings:"fr-fr/resource.json"}},hu:{defaultRegion:{code:"hu-HU",strings:"hu-hu/resource.json"}},id:{defaultRegion:{code:"id-ID",strings:"id-id/resource.json"}},it:{defaultRegion:{code:"it-IT",strings:"it-it/resource.json"}},ko:{defaultRegion:{code:"ko-KR",strings:"ko-kr/resource.json"}},lt:{defaultRegion:{code:"lt-LT",strings:"lt-lt/resource.json"}},ms:{defaultRegion:{code:"ms-MY",strings:"ms-my/resource.json"}},nb:{defaultRegion:{code:"nb-NO",strings:"nb-no/resource.json"}},nl:{defaultRegion:{code:"nl-NL",strings:"nl-nl/resource.json"}},pl:{defaultRegion:{code:"pl-PL",strings:"pl-pl/resource.json"}},pt:{defaultRegion:{code:"pt-PT",strings:"pt-pt/resource.json"},br:{code:"pt-BR",strings:"pt-br/resource.json"}},ru:{defaultRegion:{code:"ru-RU",strings:"ru-ru/resource.json"}},sk:{defaultRegion:{code:"sk-SK",strings:"sk-sk/resource.json"}},sl:{defaultRegion:{code:"sl-SL",strings:"sl-sl/resource.json"}},sv:{defaultRegion:{code:"sv-SE",strings:"sv-se/resource.json"}},th:{defaultRegion:{code:"th-TH",strings:"th-th/resource.json"}},tr:{defaultRegion:{code:"tr-TR",strings:"tr-tr/resource.json"}},zh:{defaultRegion:{code:"zh-Hant",strings:"zh-tw/resource.json"}},"zh-hant":{defaultRegion:{code:"zh-Hant",strings:"zh-tw/resource.json"}}}},gs=function(){this.Unknown="Unknown",this.Accident="Accident",this.Fog="Fog",this.Danger="Danger",this.Rain="Rain",this.Ice="Ice",this.Jam="Jam",this.LaneClosed="Lane Closed",this.RoadClosed="Road Closed",this.RoadWorks="Road Works",this.Wind="Wind",this.Flood="Flood",this.Detour="Detour"},ys=(vs.getCode=function(e){var t=ds.parse(e);return-1===ms.sensitiveUserRegions.indexOf(t.region)?this.getLocaleData(t).code:e},vs.getStrings=function(e){return e=this.getLocaleData(e),new G({domain:u,path:ms.localizationsPath+"/"+e.strings}).get().then((function(e){return e}),(function(){return new gs}))},vs.getLocaleData=function(e){if("string"==typeof e&&(e=ds.parse(e)),ms.locales[e.code])return ms.locales[e.code].defaultRegion;var t;if(ms.locales[e.language])t=ms.locales[e.language];else{if(-1!==e.language.indexOf("-"))return this.getLocaleData(e.language);t=ms.locales.defaultLanguage}return e.region&&t[e.region]?t[e.region]:t.defaultRegion},vs);function vs(){}var _s=(bs.getEdgeOrIEVersion=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}return 0<(n=e.indexOf("Edge/"))?parseInt(e.substring(n+5,e.indexOf(".",n)),10):-1},bs.isEdgeOrIE=function(){return-1!==this.getEdgeOrIEVersion()},bs.isIE=function(){var e=this.getEdgeOrIEVersion();return-1!==e&&e<=11},bs);function bs(){}(Ie=t.AuthenticationType||(t.AuthenticationType={})).subscriptionKey="subscriptionKey",Ie.aad="aad",Ie.anonymous="anonymous";var xs,ws,Ss=(R(Es,xs=U),Es.prototype.setSubscriptionKey=function(e){this.authType=t.AuthenticationType.subscriptionKey,this.subscriptionKey=e},Es.prototype.setAadProperties=function(e,n,r,i,o){this.authType=t.AuthenticationType.aad,this.authContext=o||this.authContext,this.aadInstance=i||this.aadInstance,this.clientId=e,this.aadAppId=n,this.aadTenant=r},Es.prototype.setTokenCallbackFunction=function(e){this.authType=t.AuthenticationType.anonymous,this.getToken=e},Es.prototype.merge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xs.prototype.merge.apply(this,j(e));return r.authType===t.AuthenticationType.subscriptionKey?r.authContext=r.aadAppId=r.getToken=void 0:r.authType===t.AuthenticationType.aad?r.subscriptionKey=r.getToken=void 0:r.authType===t.AuthenticationType.anonymous&&(r.subscriptionKey=r.authContext=r.aadAppId=void 0),r},Es);function Es(){var e=null!==xs&&xs.apply(this,arguments)||this;return e.authType=void 0,e.subscriptionKey=void 0,e.clientId=void 0,e.aadAppId=void 0,e.aadTenant=void 0,e.aadInstance=void 0,e.getToken=void 0,e.authContext=void 0,e}var Cs="NGT",Ts=kr(),Is=l,ks=u,Ps=c,As=p,Ms=new Ss,Os=!1,Ls=!1,Rs=!1,Ds=!1,zs=!1,Ns=!1,Bs=!1,Fs=!1,js=!1;function Us(){return Object.assign({},Ms)}function Vs(){return ks}function qs(){return Is}function Hs(){return Ps}function Ws(){return As}function Gs(){return o.workerCount}function Zs(){return o.maxParallelImageRequests}function Ks(){return Cs}function Xs(){return Ts}function Ys(){return Ms.authType===t.AuthenticationType.subscriptionKey?Ms.subscriptionKey:void 0}function Js(){return ws}function $s(e){return!_s.isIE()&&o.supported({failIfMajorPerformanceCaveat:e})}function Qs(e){Ms=(new Ss).merge(Ms,e),js=!0}function el(e){Is=e,Ls=!0}function tl(e){Ps=e,Rs=!0}function nl(e){As=e,Ds=!0}function rl(e){0<e&&(o.workerCount=e,zs=!0)}function il(e){0<e&&(o.maxParallelImageRequests=e,Ns=!0)}function ol(e){Cs=ys.getCode(e),Bs=!0}function al(e){Ts=e,Fs=!0}function sl(e){Ms.setSubscriptionKey(e),js=!0}function ll(e){ws=e,Os=!0}function ul(e,t){if(t=Math.abs(t||1),"string"==typeof e&&_l[e.toLowerCase()]){for(var n=_l[e.toLowerCase()],r=/calc\(([0-9.]+)[px]*\s*\*\s*\{scale\}\)/gi,i=n,o=r.exec(n);o;)i=i.replace(o[0],parseFloat(o[1])*t+""),o=r.exec(n);return i.replace("{scale}",t+"")}throw new Error("Invalid templateName.")}function cl(){return js}function pl(){return Ls}function hl(){return Rs}function dl(){return Ds}function fl(){return zs}function ml(){return Ns}function gl(){return Bs}function yl(){return Fs}function vl(){return Os}var _l={marker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 26 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><text x="12.5" y="17.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:2"/><text x="12.5" y="18.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-circle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><circle cx="12.5" cy="12.5" r="9" fill="{secondaryColor}"/><text x="12" y="17.5" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(24 * {scale})" height="calc(28 * {scale})" viewBox="0 0 24 28"><path d="m11.988 16.615a5.15 5.15 0 0 1-2.268-.525 4.909 4.909 0 0 1-2.805-4.442 5.019 5.019 0 0 1 5.072-4.936h.012a5.03 5.03 0 0 1 5.085 4.961 4.907 4.907 0 0 1-.549 2.224 5.114 5.114 0 0 1-4.548 2.718zm0-8.06a3.173 3.173 0 0 0-3.226 3.099 3.081 3.081 0 0 0 1.77 2.782 3.299 3.299 0 0 0 4.365-1.386 3.049 3.049 0 0 0 .342-1.381 3.184 3.184 0 0 0-3.239-3.114h-.012z" fill="{secondaryColor}"/><path d="m11.999.922a10.908 10.908 0 0 0-11.076 10.732 10.639 10.639 0 0 0 4.418 8.598l6.658 6.464 6.658-6.463a10.537 10.537 0 0 0 2.198-15.041 11.182 11.182 0 0 0-8.856-4.289zm1.873 14.341a4.221 4.221 0 0 1-5.589-1.789 3.945 3.945 0 0 1-.445-1.8 4.164 4.164 0 0 1 8.323-.037 4.028 4.028 0 0 1-2.289 3.626Z" fill="{color}"/><path d="m11.999 28-7.256-7.044a11.611 11.611 0 0 1-4.743-9.303 11.844 11.844 0 0 1 11.988-11.652.102 .102 0 0 1 .02 0 12.164 12.164 0 0 1 9.577 4.647 11.357 11.357 0 0 1 2.299 8.614 11.521 11.521 0 0 1-4.63 7.695zm-.01-26.157a9.997 9.997 0 0 0-10.143 9.812 9.769 9.769 0 0 0 4.04 7.853l.099.083 6.014 5.838 6.113-5.922a9.7 9.7 0 0 0 3.945-6.505 9.533 9.533 0 0 0-1.933-7.229 10.305 10.305 0 0 0-8.116-3.931h-.021zm.021 14.772a5.11 5.11 0 0 1-4.547-2.718 4.868 4.868 0 0 1 .932-5.743 5.118 5.118 0 0 1 3.58-1.46h.024a5.031 5.031 0 0 1 5.084 4.938 4.92 4.92 0 0 1-2.805 4.457h0a5.152 5.152 0 0 1-2.269.525zm-.011-8.079h-.015a3.277 3.277 0 0 0-2.295.933 3.029 3.029 0 0 0-.587 3.58 3.297 3.297 0 0 0 4.364 1.386h0a3.092 3.092 0 0 0 1.772-2.795 3.185 3.185 0 0 0-3.239-3.105z" fill="{secondaryColor}"/><text x="12" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"pin-round":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25 * {scale})" height="calc(25 * {scale})" viewBox="0 0 25 25"><g transform="translate(0 1)"><circle cx="12.25" cy="11.5833" r="11" fill="{color}"/><path d="m12.25 23.583a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-22a10 10 0 1 0 10 10 10 10 0 0 0-10-10z" fill="{secondaryColor}"/><circle cx="12.25" cy="11.5833" r="4.2386" fill="{secondaryColor}"/></g><text x="12.5" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-flat":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(42.8 * {scale})"  viewBox="0 0 1600 2570"><g fill="{color}"><path d="M691 2419c-409-575-641-1086-683-1504-10-106-10-136 5-224 31-188 105-330 241-458 129-124 270-190 453-214 69-9 113-10 182-1 373 46 655 326 703 698 40 308-120 801-424 1309-134 224-348 535-369 535-4 0-53-63-108-141z"/></g><g fill="rgba(0,0,0,0.15)" style="transform:scale(-1,1);transform-origin:center"><path d="M691 2419c-407-571-639-1083-682-1498-14-139-3-249 37-371 69-208 254-402 459-481 68-27 217-59 271-59h24v160 180 940 635c0 349-2 635-5 635-2 0-49-63-104-141z"/></g><circle cx="800" cy="800" r="600" fill="{secondaryColor}"/><text x="800" y="1100" style="font-size:800px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-arrow":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25.47 * {scale})" height="calc(35.18 * {scale})" viewBox="0 0 4330 5980"><g fill="{color}"><path d="m2080 5969c-49-20-93-63-115-113-25-55-1928-5486-1953-5573-40-138 67-282 210-283 36 0 246 73 987 345 518 190 947 345 955 345 8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29-33 0-71-5-85-10z"/></g><g fill="{secondaryColor}"><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z"/><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z" style="transform:scale(-1,1);transform-origin:center"/></g><g fill="rgba(0,0,0,0.2)" ><path d="m2165 685c8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29z"/></g><text x="2165" y="3300" style="font-size:2500px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-ball-pin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15.67 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 235 452"><g transform="translate(-135 10)"><path fill="{secondaryColor}" d="m256 442 0 0c-13 0-18-11-18-24l-6-323c0-13 11-24 24-24h0c13 0 24 11 24 24l-6 323c0 13-5 24-18 24z"/><circle style="fill:{color};stroke-width:10;stroke:{secondaryColor}" cx="256" cy="112" r="111"/><ellipse transform="matrix(0.834 0.5518 -0.5518 0.834 65.7916 -97.18)" fill="rgba(255,255,255,0.3)" cx="194.399" cy="60.749" rx="19.076" ry="32.428"/></g><text x="117.5" y="160" style="font-size:160px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.67 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2000 2420"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M845 2152c-22-37-58-95-80-129-22-35-62-99-90-143l-50-80-312 0-313 0 0-900 0-900 900 0 900 0 0 900 0 900-313 0-313 0-34 58c-19 31-38 59-42 60-5 2-8 8-8 12 0 9-69 123-88 145-5 6-11 15-13 21-16 39-77 123-89 124-8 0-33-31-55-68z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(38.8 * {scale})" viewBox="0 0 2500 2910"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m866 2652c-17-31-37-68-46-82-9-14-32-54-51-90-19-36-50-92-70-125l-36-60-332-3-331-2 0-905 0-905 660 0 660 0 0-38c0-71 50-196 102-258 71-85 189-164 244-164 12 0 26-4 29-10 8-13 222-13 230 0 3 6 17 10 30 10 25 0 117 45 154 76 130 107 191 232 191 392 0 155-63 284-190 386-36 29-129 76-150 76-11 0-22 5-25 10-3 6-31 10-61 10l-54 0 0 660 0 660-332 2-332 3-29 50c-17 28-48 84-70 125-22 41-47 86-56 100-9 14-30 51-46 83-17 32-36 57-45 57-8 0-28-25-44-58z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.8 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2010 2410"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M856 2155c-20-30-36-59-36-65 0-5-4-10-10-10-5 0-10-5-10-11 0-5-18-37-40-69-22-32-40-64-40-69 0-6-4-11-10-11-5 0-10-5-10-10 0-6-15-33-32-60l-33-50-127 0c-74 0-129-4-133-10-3-5-17-10-30-10-25 0-116-45-155-76-87-69-142-151-178-265-15-46-17-1075-2-1084 5-3 10-17 10-30 0-13 5-27 10-30 6-3 10-13 10-22 0-22 83-135 122-168 57-46 62-50 112-75l50-25 585 0 586 0 63 34c84 46 169 133 212 218l35 68 0 565 0 565-28 59c-32 69-100 157-139 180-15 9-33 22-40 29-23 22-99 57-123 57-13 0-27 5-30 10-4 6-60 10-135 10l-128 0-128 205c-84 136-133 205-144 205-10 0-33-24-54-55z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(32.13 * {scale})" viewBox="0 0 2500 2900"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m874 2669c-9-18-26-49-37-68-11-20-30-55-43-78-13-24-36-64-51-90-14-27-38-69-52-95l-26-48-142 0c-84 0-144-4-148-10-3-5-17-10-30-10-25 0-118-46-154-76-91-76-136-142-175-254-13-38-16-119-16-554 0-358 3-520 12-545 40-125 106-219 195-278 127-84 116-83 646-83l467 0 0-42c0-46 11-87 45-163 54-121 169-220 306-264 46-14 232-14 278 0 165 53 284 175 340 350 19 61 14 204-10 273-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-3 6-28 10-56 10l-49 0 0 462c0 446-1 464-21 522-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-4 6-65 10-149 10-138 0-143 1-154 23-12 23-62 114-112 202-16 28-44 79-63 115-42 77-67 88-93 39z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(23.5 * {scale})" height="calc(40 * {scale})" viewBox="34 28 198 308"><path style="stroke:{secondaryColor};stroke-width:15;stroke-linecap:round;" d="M42 327l0 -291"/><path style="fill:{color};stroke:{secondaryColor};stroke-width:10;stroke-linejoin:round;" d="M49 50c70 30 104 28 178 2-21 42-21 74 0 116-72 25-101 25-178 0l0-118z"/><text x="130" y="165" style="font-size:100px;fill:#fff;text-anchor:middle">{text}</text></svg>',"flag-triangle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(35.33 * {scale})" viewBox="0 0 40.5 53"><g transform="translate(-31 -20)"><path fill="{secondaryColor}" d="M34.7,73.3V48.4l34.6-10.1c0.7-0.2,1.2-0.8,1.2-1.5s-0.4-1.4-1-1.7L33.7,20.5c-0.5-0.2-1.1-0.2-1.6,0.2 c-0.5,0.3-0.7,0.8-0.7,1.4v51.2H34.7z"/><polygon points="34.7,24.5 66,36.5 34.7,45 34.7,10" fill="{color}"/></g><text x="11" y="21" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(34 * {scale})" height="calc(34 * {scale})" viewBox="0 0 34 34"><g transform="translate(2 2)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17" y="22" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(38 * {scale})" height="calc(38 * {scale})" viewBox="0 0 38 38"><g transform="translate(4 4)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19" y="24" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',triangle:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(36 * {scale})" height="calc(36 * {scale})" viewBox="0 0 36 36"><g transform="translate(2 2)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="30" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><g transform="translate(4 4)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="32" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',hexagon:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(35 * {scale})" height="calc(40 * {scale})" viewBox="0 0 35 40"><g transform="translate(2 2)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="25" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(39 * {scale})" height="calc(44 * {scale})" viewBox="0 0 39 44"><g transform="translate(4 4)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="27" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1100 1100"><g transform="translate(50 50)"><path style="stroke:{secondaryColor};stroke-width:50;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="550" y="700" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1200 1200"><g transform="translate(100 100)"><path style="stroke:{secondaryColor};stroke-width:100;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="600" y="750" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="12,0 0,24 12,17 24,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="17" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-left":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="24,12 0,0 7,12 0,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="16.5" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(12.16 * {scale})" height="calc(30.1 * {scale})" viewBox="0 0 902 364"><g fill="{color}" transform="matrix(0,2.4,-2.4,0,897,-930)"><polygon points="902,222 233,222 233,364 0,182 233,0 233,141 902,141 902,222"/></g><text x="450" y="700" style="font-size:900px;fill:#000;text-anchor:middle">{text}</text></svg>',"arrow-up-thin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 12 25"><g transform="translate(-136.91823 -751.91998)"><path fill="{color}" d="m148.271 760.71c-1.641-.547-3.186-1.47-4.633-2.769l0 18.07-1.675 0 0-18.07c-1.447 1.299-2.986 2.222-4.616 2.769l0-1.231c2.325-1.596 4.006-3.812 5.043-6.65l.838 0c1.037 2.838 2.718 5.055 5.043 6.65l0 1.231z"/></g><text x="6" y="20" style="font-size:10px;fill:#000;text-anchor:middle">{text}</text></svg>',car:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(21.93 * {scale})" height="calc(40.9 * {scale})" viewBox="0 0 6580 12270"><g transform="translate(0 12270) rotate(-90)"><path fill="{secondaryColor}" d="M7045 6566c-42-13-105-44-105-51 0-2 23-105 50-228 28-123 50-230 50-236 0-8-241-11-907-11-855 0-1145 6-1513 30-85 6-189 13-230 15-41 3-133 10-205 15-286 21-430 32-705 50-953 63-1459 18-2335-205-304-77-746-209-799-238-131-72-221-408-285-1062-34-345-42-532-48-1130-16-1557 108-2532 336-2649 32-17 469-149 676-205 409-110 819-191 1205-238 116-14 224-18 540-18 395 1 494 5 1140 50 1124 79 1224 82 2496 78l641-3-53-237c-29-131-52-238-51-239 1-1 31-14 66-29 56-23 76-26 142-23 67 3 83 7 120 33 23 17 50 41 61 55 10 14 51 117 91 230l73 205 674 3 675 2 90-39c98-43 198-72 315-93 122-21 829-18 990 5 321 45 626 143 849 270 293 168 516 378 704 662 266 402 416 893 467 1527 15 174 8 882-9 998-6 41-18 127-27 190-69 502-253 969-523 1325-79 105-262 284-381 374-189 142-355 229-574 300-336 110-526 139-952 148-457 9-685-23-887-124l-47-24-678-6-678-6-64 179c-79 224-92 253-121 284-67 70-177 97-274 66zm-2752-5073c-23-2-64-2-90 0-26 2-7 3 42 3 50 0 71-1 48-3zm395 0c-21-2-55-2-75 0-21 2-4 4 37 4 41 0 58-2 38-4z"/><path fill="{color}" d="M7043 6498c-13-6-23-19-23-28 0-9 23-117 50-240 28-123 50-230 50-237 0-22-2126-13-2465 10-132 10-400 28-595 42-661 47-824 55-1160 62-435 7-656-8-1040-73-415-70-865-183-1447-365-168-53-272-556-325-1569-16-319-16-1311 0-1630 45-872 129-1366 257-1518 22-26 51-39 172-77 557-177 1122-310 1563-369 271-36 351-40 690-40 361 1 463 6 1165 54 1122 78 1288 83 2337 79 460-2 840-7 843-11 4-4-17-117-47-252l-55-245 39-16c76-30 180-8 224 47 10 13 54 124 98 246l79 222 709 0 709 0 47-24c74-37 219-83 322-101 122-22 606-32 802-16 374 29 658 102 933 238 124 62 271 155 361 230l61 51 6 100c19 278 103 497 247 643 88 89 173 136 278 152l70 11 41 131c116 369 159 673 168 1170 10 584-38 984-167 1397l-40 126-70 12c-193 33-348 175-441 405-56 139-89 302-89 445 0 43-3 47-58 91-290 235-644 384-1068 450-191 29-796 39-974 16-135-18-263-54-368-102l-75-35-701 0-701 0-79 223c-82 232-102 267-163 293-38 16-138 17-170 2zm-2023-820c332-15 1155-12 1835 6 308 8 563 12 566 8 4-4 10-21 13-38 7-30 6-31-92-77-518-244-1197-396-2112-474-295-25-1282-25-1579 0-231 20-473 46-479 51-6 7 49 110 93 171 160 226 416 335 855 365 142 10 539 5 900-12zm3304-263c525-111 899-887 934-1935 19-557-37-1023-172-1435-186-563-521-900-896-899-81 0-158 14-525 92-426 91-431 92-540 146-195 96-287 207-306 368-12 104-11 2985 1 3078 22 170 135 291 365 389 49 21 191 55 480 115 226 47 419 87 430 89 45 10 164 6 229-8zm-5570-485c112-43 197-156 216-291 12-83 13-2623 1-2706-23-158-125-273-270-304-44-9-100-1-542 75-272 47-514 91-539 98-266 68-487 424-594 958-56 280-70 548-40 800 56 484 207 878 414 1081 115 114 122 116 702 218 277 49 524 90 550 90 26 1 72-8 102-19zm2111-3440c1023-44 1884-213 2462-486l113-53-7-33c-3-18-8-35-10-37-2-3-236 1-521 7-993 24-1271 26-1708 11-541-18-1128-18-1249-1-377 56-588 181-734 437-32 55-41 79-32 84 12 8 246 32 491 51 356 28 815 36 1195 20z"/></g><text x="3250" y="8250" style="font-size:3000px;fill:#fff;text-anchor:middle">{text}</text></svg>',checker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 16 16"><pattern id="p" x="0" y="0" width="16" height="16" patternUnits="userSpaceOnUse"><rect fill="{color}" x="0" width="8" height="8" y="0"/><rect fill="{color}" x="8" width="8" height="8" y="8"/></pattern><rect x="0" y="0" width="16" height="16" fill="{secondaryColor}"/><rect x="0" y="0" width="16" height="16" fill="url(#p)"/></svg>',"checker-rotated":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 60 60"><rect width="60" height="60" fill="{secondaryColor}"/><rect width="42.42" height="42.42" transform="translate(30 0) rotate(45)" fill="{color}"/></svg>',"zig-zag":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 120 60 120 90 90 120 60 120 0 120 0 60 60 0 0 0 60 30 90 60 120 120 120"/></svg>',"zig-zag-vertical":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 0 120 60 90 30 60 0 0 0 0 0 60 60 0 120 60 120 90 90 120 60 120 0"/></svg>',"circles-spaced":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="2" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',circles:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(7 * {scale})" height="calc(7 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="6" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',"diagonal-lines-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-lines-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-stripes-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"diagonal-stripes-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(14 * {scale})" height="calc(14 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(45 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}" transform="rotate(-45 3 3)"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-stripes":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"x-fill":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="45.3" height="45.3" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z"/></g></svg>',dots:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(13 * {scale})" height="calc(13 * {scale})" viewBox="0 0 20 20"><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><g fill="{color}"><circle cx="3" cy="3" r="3"/><circle cx="13" cy="13" r="3"/></g></svg>'},bl=(xl.getHighContrastMode=function(){return matchMedia("(-ms-high-contrast: white-on-black)").matches?"dark":matchMedia("(-ms-high-contrast: black-on-white)").matches?"light":matchMedia("(-ms-high-contrast: active)").matches?"dark":matchMedia("(inverted-colors: inverted)").matches?"invert":null},xl);function xl(){}var wl=2,Sl="function",El="object",Cl="undefined",Tl="prototype",Il="hasOwnProperty",kl=Object,Pl=kl[Tl],Al=kl.assign,Ml=kl.create,Ol=(Le=kl.defineProperty,Pl[Il]);function Ll(){return typeof globalThis!==Cl&&globalThis?globalThis:typeof self!==Cl&&self?self:typeof window!==Cl&&window?window:typeof e!==Cl&&e?e:null}function Rl(e){throw new TypeError(e)}function Dl(e){if(Ml)return Ml(e);if(null==e)return{};var t=typeof e;function n(){}return t!==El&&t!==Sl&&Rl("Object prototype may only be an Object:"+e),n[Tl]=e,new n}(Ll()||{}).Symbol,(Ll()||{}).Reflect;var zl=Al||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Pl[Il].call(t,i)&&(e[i]=t[i]);return e},Nl=function(e,t){return(Nl=kl.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[Il](n)&&(e[n]=t[n])})(e,t)};function Bl(e,t){function n(){this.constructor=e}typeof t!==Sl&&null!==t&&Rl("Class extends value "+String(t)+" is not a constructor or null"),Nl(e,t),e[Tl]=null===t?Dl(t):(n[Tl]=t[Tl],new n)}var Fl,jl="constructor",Ul="prototype",Vl="function",ql="_dynInstFuncs",Hl="_isDynProxy",Wl="_dynClass",Gl="_dynInstChk",Zl=Gl,Kl="_dfOpts",Xl="_unknown_",Yl="__proto__",Jl="useBaseInst",$l="setInstFuncs",Ql=Object,eu=Ql.getPrototypeOf,tu=0;function nu(e,t){return e&&Ql[Ul].hasOwnProperty.call(e,t)}function ru(e){return e&&(e===Ql[Ul]||e===Array[Ul])}function iu(e){return ru(e)||e===Function[Ul]}function ou(e){if(e){if(eu)return eu(e);if(e=e[Yl]||e[Ul]||(e[jl]?e[jl][Ul]:null))return e}return null}function au(e,t){var n=[],r=Ql.getOwnPropertyNames;if(r)n=r(e);else for(var i in e)"string"==typeof i&&nu(e,i)&&n.push(i);if(n&&0<n.length)for(var o=0;o<n.length;o++)t(n[o])}function su(e,t,n){return t!==jl&&typeof e[t]===Vl&&(n||nu(e,t))}function lu(e){throw new TypeError("DynamicProto: "+e)}function uu(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}function cu(e,t,n,r,i){function o(e,t){function n(){var r,i,o,a;return(function(e,t,n,r){var i=null;if(e&&nu(n,Wl)){var o=e[ql]||{};if((i=(o[n[Wl]]||{})[t])||lu("Missing ["+t+"] "+Vl),!i[Gl]&&!1!==o[Zl]){for(var a=!nu(e,t),s=ou(e),l=[];a&&s&&!iu(s)&&!uu(l,s);){var u=s[t];if(u){a=u===r;break}l.push(s),s=ou(s)}try{a&&(e[t]=i),i[Gl]=1}catch(e){o[Zl]=!1}}}return i}(this,t,e,n)||(o=n,typeof(a=(a=(i=e)[r=t])===o?ou(i)[r]:a)!==Vl&&lu("["+r+"] is not a "+Vl),a)).apply(this,arguments)}return n[Hl]=1,n}var a,s;ru(e)||(a=n[ql]=n[ql]||{},s=a[t]=a[t]||{},!1!==a[Zl]&&(a[Zl]=!!i),au(n,(function(t){su(n,t,!1)&&n[t]!==r[t]&&(s[t]=n[t],delete n[t],nu(e,t)&&(!e[t]||e[t][Hl])||(e[t]=o(e,t)))})))}function pu(e,t){return nu(e,Ul)?e.name||t||Xl:((e||{})[jl]||{}).name||t||Xl}function hu(e,t,n,r){nu(e,Ul)||lu("theClass is an invalid class definition.");var i=e[Ul];!function(e,t){if(eu)for(var n=[],r=ou(t);r&&!iu(r)&&!uu(n,r);){if(r===e)return 1;n.push(r),r=ou(r)}}(i,t)&&lu("["+pu(e)+"] is not in class hierarchy of ["+pu(t)+"]");var o=null;nu(i,Wl)?o=i[Wl]:(o="_dynCls$"+pu(e,"_")+"$"+tu,tu++,i[Wl]=o);var a,s,l=hu[Kl],u=!!l[Jl];u&&r&&void 0!==r[Jl]&&(u=!!r[Jl]),n(t,function(e,t,n,r){function i(e,t,n){var i,o=t[n];return o[Hl]&&r&&!1!==(i=e[ql]||{})[Zl]&&(o=(i[t[Wl]]||{})[n]||o),function(){return o.apply(e,arguments)}}var o={};au(n,(function(e){o[e]=i(t,n,e)}));for(var a=ou(e),s=[];a&&!iu(a)&&!uu(s,a);)au(a,(function(e){!o[e]&&su(a,e,!eu)&&(o[e]=i(t,a,e))})),s.push(a),a=ou(a);return o}(i,t,(s={},au(a=t,(function(e){!s[e]&&su(a,e,!1)&&(s[e]=a[e])})),e=s),u)),cu(i,o,t,e,!1!==(l=(l=!!eu&&!!l[$l])&&r?!!r[$l]:l))}hu[Kl]={setInstFuncs:!0,useBaseInst:!0},(xe=Fl=Fl||{})[xe.CRITICAL=1]="CRITICAL",xe[xe.WARNING=2]="WARNING";var du={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},fu="attachEvent",mu="addEventListener",gu="detachEvent",yu="removeEventListener",vu=Le;function _u(e){return Pl.toString.call(e)}function bu(e){return void 0===e||typeof e===Cl}function xu(e){return null===e||bu(e)}function wu(e){return!xu(e)}function Su(e,t){return e&&Ol.call(e,t)}function Eu(e){return typeof e===El}function Cu(e){return typeof e===Sl}function Tu(e,t,n,r){void 0===r&&(r=!1);var i=!1;if(!xu(e))try{xu(e[mu])?xu(e[fu])||(e[fu]("on"+t,n),i=!0):(e[mu](t,n,r),i=!0)}catch(e){}return i}function Iu(e,t,n,r){if(void 0===r&&(r=!1),!xu(e))try{xu(e[yu])?xu(e[gu])||e[gu]("on"+t,n):e[yu](t,n,r)}catch(e){}}function ku(e,t){if(e)for(var n in e)Ol.call(e,n)&&t.call(e,n,e[n])}function Pu(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}function Au(e){return"[object Array]"===_u(e)}function Mu(e){return"[object Error]"===_u(e)}function Ou(e){return"string"==typeof e}function Lu(e){return"number"==typeof e}function Ru(e){if("[object Date]"===_u(e)){var t=function(e){return 1===(e=String(e)).length?"0"+e:e};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function Du(e,t,n){for(var r=e.length,i=0;i<r&&(!(i in e)||-1!==t.call(n||e,e[i],i,e));i++);}function zu(e,t,n){for(var r=e.length,i=(n=n||0,Math.max(0<=n?n:r-Math.abs(n),0));i<r;i++)if(i in e&&e[i]===t)return i;return-1}function Nu(e,t,n){for(var r=e.length,i=n||e,o=new Array(r),a=0;a<r;a++)a in e&&(o[a]=t.call(i,e[a],e));return o}function Bu(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}var Fu=!{toString:null}.propertyIsEnumerable("toString"),ju=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Uu(e){var t=typeof e;t===Sl||t===El&&null!==e||Rl("objKeys called on non-object");var n,r=[];for(n in e)e&&Ol.call(e,n)&&r.push(n);if(Fu)for(var i=ju.length,o=0;o<i;o++)e&&Ol.call(e,ju[o])&&r.push(ju[o]);return r}function Vu(e,t,n,r){if(vu)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),vu(e,t,i),!0}catch(e){}return!1}function qu(){var e=Date;return e.now?e.now():(new e).getTime()}function Hu(e){return Mu(e)?e.name:""}function Wu(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(e[t]=o=n)),o}function Gu(e,t,n){var r;return e?!(r=e[t])&&xu(r)&&(r=bu(n)?{}:n,e[t]=r):r=bu(n)?{}:n,r}function Zu(e){return!e}function Ku(e){return!!e}function Xu(e){throw new Error(e)}function Yu(e,t,n){if(e&&t&&e!==t&&Eu(e)&&Eu(t))for(var r in t)!function(r){var i,o;Ou(r)&&(Cu(i=t[r])?n&&!n(r,!0,t,e)||(e[r]=(o=r,function(){return t[o].apply(t,arguments)})):n&&!n(r,!1,t,e)||(Su(e,r)&&delete e[r],Vu(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i)))}(r);return e}function Ju(e){return e&&kl(Al?Al({},e):e)}var $u="window",Qu="document",ec="navigator",tc="history",nc="location",rc="console",ic="performance",oc="JSON",ac="msie",sc="trident/",lc=null,uc=null,cc=!1;function pc(e){var t=Ll();return t&&t[e]?t[e]:e===$u&&hc()?window:null}function hc(){return Boolean(typeof window===El&&window)}function dc(){return hc()?window:pc($u)}function fc(){return Boolean(typeof document===El&&document)}function mc(){return fc()?document:pc(Qu)}function gc(){return Boolean(typeof navigator===El&&navigator)?navigator:pc(ec)}function yc(){return Boolean(typeof history===El&&history)?history:pc(tc)}function vc(e){return e&&cc&&(e=pc("__mockLocation"))?e:typeof location===El&&location?location:pc(nc)}function _c(){return pc(ic)}function bc(){return Boolean(typeof JSON===El&&JSON||null!==pc(oc))}function xc(){return bc()?JSON||pc(oc):null}function wc(){var e=gc();return!e||e.userAgent===uc&&null!==lc||(e=((uc=e.userAgent)||"").toLowerCase(),lc=Pu(e,ac)||Pu(e,sc)),lc}function Sc(e){var t;return Pu(e=((e=(e=void 0===e?null:e)?e:(t=gc()||{})?(t.userAgent||"").toLowerCase():"")||"").toLowerCase(),ac)?parseInt(e.split(ac)[1]):Pu(e,sc)&&(e=parseInt(e.split(sc)[1]))?e+4:null}function Ec(e){var t=Object[Tl].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":bc()&&(n=xc().stringify(e)),t+n}function Cc(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var Tc=(Ic.dataType="MessageData",Ic);function Ic(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e,e="",bc()&&(e=xc().stringify(r)),e=(t?" message:"+Cc(t):"")+(r?" props:"+Cc(e):""),this.message+=e}function kc(e,t){return(e||{}).logger||new Pc(t)}var Pc=function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={};hu(e,this,(function(e){function i(e,n){return xu(e=t[e])?n:e}xu(t)&&(t={}),e.consoleLoggingLevel=function(){return i("loggingLevelConsole",0)},e.telemetryLoggingLevel=function(){return i("loggingLevelTelemetry",1)},e.maxInternalMessageLimit=function(){return i("maxMessageLimit",25)},e.enableDebugExceptions=function(){return i("enableDebugExceptions",!1)},e.throwInternal=function(t,n,i,o,a){if(i=new Tc(n,i,a=void 0!==a&&a,o),e.enableDebugExceptions())throw i;bu(i.message)||(o=e.consoleLoggingLevel(),a?(a=+i.messageId,!r[a]&&o>=Fl.WARNING&&(e.warnToConsole(i.message),r[a]=!0)):o>=Fl.WARNING&&e.warnToConsole(i.message),e.logInternalMessage(t,i))},e.warnToConsole=function(e){var t,n=typeof console!==Cl?console:pc(rc);n&&(t="log",Cu(n[t=n.warn?"warn":t])&&n[t](e))},e.resetInternalMessageCount=function(){n=0,r={}},e.logInternalMessage=function(t,i){var o,a;n>=e.maxInternalMessageLimit()||(o=!0,a="AITR_"+i.messageId,r[a]?o=!1:r[a]=!0,o&&(t<=e.telemetryLoggingLevel()&&(e.queue.push(i),n++),n===e.maxInternalMessageLimit()&&(i=new Tc(du.MessageLimitPerPVExceeded,t="Internal events throttle limit per PageView reached for this app.",!1),e.queue.push(i),e.warnToConsole(t))))}}))},Ac=(Mc.ParentContextKey="parent",Mc.ChildrenContextKey="childEvts",Mc);function Mc(e,t,n){var r,i=this,o=!1;i.start=qu(),i.name=e,i.isAsync=n,i.isChildEvt=function(){return!1},Cu(t)&&(o=Vu(i,"payload",(function(){return!r&&Cu(t)&&(r=t(),t=null),r}))),i.getCtx=function(e){return e?(e===Mc.ParentContextKey||e===Mc.ChildrenContextKey?i:i.ctx||{})[e]:null},i.setCtx=function(e,t){e&&(e===Mc.ParentContextKey?(i[e]||(i.isChildEvt=function(){return!0}),i[e]=t):e===Mc.ChildrenContextKey?i[e]=t:(i.ctx=i.ctx||{})[e]=t)},i.complete=function(){var e=0,n=i.getCtx(Mc.ChildrenContextKey);if(Au(n))for(var r=0;r<n.length;r++){var a=n[r];a&&(e+=a.time)}i.time=qu()-i.start,i.exTime=i.time-e,i.complete=function(){},!o&&Cu(t)&&(i.payload=t())}}var Oc=function e(t){this.ctx={},hu(e,this,(function(e){e.create=function(e,t,n){return new Ac(e,t,n)},e.fire=function(e){e&&(e.complete(),t&&t.perfEvent(e))},e.setCtx=function(t,n){t&&((e.ctx=e.ctx||{})[t]=n)},e.getCtx=function(t){return(e.ctx||{})[t]}}))},Lc="CoreUtils.doPerf";function Rc(e,t,n,r,i){if(e){var o=e;if(o=Cu(o.getPerfMgr)?o.getPerfMgr():o){var a=void 0;e=o.getCtx(Lc);try{var s;if(a=o.create(t(),r,i))return e&&a.setCtx&&(a.setCtx(Ac.ParentContextKey,e),e.getCtx&&e.setCtx&&((s=e.getCtx(Ac.ChildrenContextKey))||(s=[],e.setCtx(Ac.ChildrenContextKey,s)),s.push(a))),o.setCtx(Lc,a),n(a)}catch(e){a&&a.setCtx&&a.setCtx("exception",e)}finally{a&&o.fire(a),o.setCtx(Lc,e)}}}return n()}var Dc=function(e,t){var n=this,r=null,i=Cu(e.processTelemetry),o=Cu(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return r},n.setNext=function(e){r=e},n.processTelemetry=function(a,s){s=s||t;var l=e?e.identifier:"TelemetryPluginChain";Rc(s?s.core():null,(function(){return l+":processTelemetry"}),(function(){if(e&&i){n._hasRun=!0;try{s.setNext(r),o&&e.setNextPlugin(r),r&&(r._hasRun=!1),e.processTelemetry(a,s)}catch(l){var t=r&&r._hasRun;r&&t||s.diagLog().throwInternal(Fl.CRITICAL,du.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+l),r&&!t&&r.processTelemetry(a,s)}}else r&&(n._hasRun=!0,r.processTelemetry(a,s))}),(function(){return{item:a}}),!a.sync)}};function zc(e,t){var n=[];if(e&&0<e.length)for(var r=null,i=0;i<e.length;i++){var o=e[i];o&&Cu(o.processTelemetry)&&(o=new Dc(o,t),n.push(o),r&&r.setNext(o),r=o)}return 0<n.length?n[0]:null}var Nc=function e(t,n,r,i){var o,a,s,l,u,c=this,p=null;null!==i&&(t&&Cu(t.getPlugin)?p=function(e,t,n){var r=[],i=!n;if(e)for(;e;){var o=e.getPlugin();!i&&o!==n||(i=!0,r.push(o)),e=e.getNext()}return i||r.push(n),zc(r,t)}(t,c,i||t.getPlugin()):i?(a=c,l=o=t,u=!1,(s=i)&&o&&(l=[],Du(o,(function(e){!u&&e!==s||(u=!0,l.push(e))}))),s&&!u&&(l=l||[]).push(s),p=zc(l,a)):bu(i)&&(p=zc(t,c))),c.core=function(){return r},c.diagLog=function(){return kc(r,n)},c.getCfg=function(){return n},c.getExtCfg=function(e,t){var r,i;return void 0===t&&(t={}),!n||(i=n.extensionConfig)&&e&&(r=i[e]),r||t},c.getConfig=function(e,t,r){var i;return void 0===r&&(r=!1),(e=c.getExtCfg(e,null))&&!xu(e[t])?i=e[t]:n&&!xu(n[t])&&(i=n[t]),xu(i)?r:i},c.hasNext=function(){return null!=p},c.getNext=function(){return p},c.setNext=function(e){p=e},c.processNext=function(e){var t=p;t&&(p=t.getNext(),t.processTelemetry(e,c))},c.createNew=function(t,i){return new e((t=void 0===t?null:t)||p,n,r,i)}},Bc="extensionConfig",Fc="getPlugin";function jc(){var e=this,t=!1,n=null,r=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){r=e},e.processNext=function(e,t){t?t.processNext(e):r&&Cu(r.processTelemetry)&&r.processTelemetry(e,null)},e._getTelCtx=function(t){var i=t=void 0===t?null:t;return i||(t=n||new Nc(null,{},e.core),i=r&&r[Fc]?t.createNew(null,r[Fc]):t.createNew(null,r)),i},e._baseTelInit=function(i,o,a,s){i&&Wu(i,Bc,[],null,xu),!s&&o&&(s=o.getProcessTelContext().getNext());var l=r;r&&r[Fc]&&(l=r[Fc]()),e.core=o,n=new Nc(s,i,o,l),t=!0}}jc.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)};var Uc="processTelemetry",Vc="priority",qc="setNextPlugin",Hc="isInitialized";function Wc(e,t){for(var n=[],r=null,i=e.getNext();i;){var o=i.getPlugin();o&&(r&&Cu(r[qc])&&Cu(o[Uc])&&r[qc](o),Cu(o[Hc])&&o[Hc]()||n.push(o),r=o,i=i.getNext())}Du(n,(function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())}))}function Gc(e){return e.sort((function(e,t){var n=0,r=Cu(t[Uc]);return Cu(e[Uc])?n=r?e[Vc]-t[Vc]:1:r&&(n=-1),n}))}var Zc,Kc=(Bl(Xc,Zc=Re=jc),Xc._staticInit=(Vu(Oe=Xc.prototype,"ChannelControls",Oe.getChannelControls),void Vu(Oe,"channelQueue",Oe.getChannelControls)),Xc);function Xc(){var e,t=Zc.call(this)||this;function n(t){t&&0<t.length&&(Du(t=t.sort((function(e,t){return e.priority-t.priority})),(function(e){e.priority<500&&Xu("Channel has invalid priority"+e.identifier)})),e.push(t))}return t.identifier="ChannelControllerPlugin",t.priority=500,hu(Xc,t,(function(r,i){r.setNextPlugin=function(e){},r.processTelemetry=function(n,r){e&&Du(e,(function(e){0<e.length&&t._getTelCtx(r).createNew(e).processNext(n)}))},r.getChannelControls=function(){return e},r.initialize=function(t,o,a){r.isInitialized()||(i.initialize(t,o,a),function(t,r){var i;e=[],t&&Du(t,n),r&&(i=[],Du(r,(function(e){500<e.priority&&i.push(e)})),n(i))}((t||{}).channels,a),Du(e,(function(e){return Wc(new Nc(e,t,o),a)})))}})),t}var Yc="toGMTString",Jc="toUTCString",$c="cookie",Qc="expires",ep="enabled",tp="isCookieUseDisabled",np="disableCookiesUsage",rp="_ckMgr",ip="",op=null,ap=null,sp=null,lp=mc(),up={},cp={};function pp(e){return!e||e.isEnabled()}function hp(e,t){var n,r;return e?n=e.getCookieMgr():t&&(n=t.cookieCfg[rp]||dp(t)),n||(r=t,t=(e||{}).logger,(e=dp[rp]||cp[rp])||(e=dp[rp]=dp(r,t),cp[rp]=e),n=e),n}function dp(e,t){var n,r,i=(Wu(r=(n=e||cp).cookieCfg=n.cookieCfg||{},"domain",n.cookieDomain,wu,xu),Wu(r,"path",n.cookiePath||"/",null,xu),xu(r[ep])&&(e=void 0,bu(n[tp])||(e=!n[tp]),bu(n[np])||(e=!n[np]),r[ep]=e),r),o=i.path||"/",a=i.domain,s=!1!==i[ep],l={isEnabled:function(){var e=s&&fp(t),n=cp[rp];return e&&n&&l!==n?pp(n):e},setEnabled:function(e){s=!1!==e},set:function(e,t,n,r,s){var u,c,p;pp(l)&&(u={},-1!==(p=(c=Bu(t||ip)).indexOf(";"))&&(c=Bu(t.substring(0,p)),u=mp(t.substring(p+1))),Wu(u,"domain",r||a,Ku,bu),xu(n)||(t=wc(),!bu(u[Qc])||0<(p=qu()+1e3*n)&&((r=new Date).setTime(p),Wu(u,Qc,gp(r,t?Yc:Jc)||gp(r,t?Yc:Jc)||ip,Ku)),t||Wu(u,"max-age",ip+n,null,bu)),(n=vc())&&"https:"===n.protocol&&(Wu(u,"secure",null,null,bu),(ap=null===ap?!function(e){return!!Ou(e)&&(!(!Pu(e,"CPU iPhone OS 12")&&!Pu(e,"iPad; CPU OS 12"))||!!(Pu(e,"Macintosh; Intel Mac OS X 10_14")&&Pu(e,"Version/")&&Pu(e,"Safari"))||!(!Pu(e,"Macintosh; Intel Mac OS X 10_14")||!function(e,t){if(e&&t){var n=t.length,r=e.length;if(e===t)return 1;if(n<=r){for(var i=r-1,o=n-1;0<=o;o--){if(e[i]!=t[o])return;i--}return 1}}}(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))||!(!Pu(e,"Chrome/5")&&!Pu(e,"Chrome/6"))||!(!Pu(e,"UnrealEngine")||Pu(e,"Chrome"))||!(!Pu(e,"UCBrowser/12")&&!Pu(e,"UCBrowser/11")))}((gc()||{}).userAgent):ap)&&Wu(u,"SameSite","None",null,bu)),Wu(u,"path",s||o,null,bu),(i.setCookie||vp)(e,yp(c,u)))},get:function(e){var t=ip;return pp(l)?(i.getCookie||function(e){var t,n=ip;return lp&&(t=lp[$c]||ip,sp!==t&&(up=mp(t),sp=t),n=Bu(up[e]||ip)),n})(e):t},del:function(e,t){pp(l)&&l.purge(e,t)},purge:function(e,n){var r;fp(t)&&((r={}).path=n||"/",r[Qc]="Thu, 01 Jan 1970 00:00:01 GMT",r=r,wc()||(r["max-age"]="0"),(i.delCookie||vp)(e,yp(ip,r)))}};return l[rp]=l}function fp(e){if(null===op){op=!1;try{op=void 0!==(lp||{})[$c]}catch(r){e&&e.throwInternal(Fl.WARNING,du.CannotAccessCookie,"Cannot access document.cookie - "+Hu(r),{exception:Ec(r)})}}return op}function mp(e){var t={};return e&&e.length&&Du(Bu(e).split(";"),(function(e){var n;(e=Bu(e||ip))&&(-1===(n=e.indexOf("="))?t[e]=null:t[Bu(e.substring(0,n))]=Bu(e.substring(n+1)))})),t}function gp(e,t){return Cu(e[t])?e[t]():null}function yp(e,t){var n=e||ip;return ku(t,(function(e,t){n+="; "+e+(xu(t)?ip:"="+t)})),n}function vp(e,t){lp&&(lp[$c]=e+"="+t)}var _p,bp="_notificationManager",xp=function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;hu(e,this,(function(e){e.addNotificationListener=function(t){e.listeners.push(t)},e.removeNotificationListener=function(t){for(var n=zu(e.listeners,t);-1<n;)e.listeners.splice(n,1),n=zu(e.listeners,t)},e.eventsSent=function(t){Du(e.listeners,(function(e){e&&e.eventsSent&&setTimeout((function(){return e.eventsSent(t)}),0)}))},e.eventsDiscarded=function(t,n){Du(e.listeners,(function(e){e&&e.eventsDiscarded&&setTimeout((function(){return e.eventsDiscarded(t,n)}),0)}))},e.eventsSendRequest=function(t,n){Du(e.listeners,(function(e){if(e&&e.eventsSendRequest)if(n)setTimeout((function(){return e.eventsSendRequest(t,n)}),0);else try{e.eventsSendRequest(t,n)}catch(e){}}))},e.perfEvent=function(t){t&&(!n&&t.isChildEvt()||Du(e.listeners,(function(e){if(e&&e.perfEvent)if(t.isAsync)setTimeout((function(){return e.perfEvent(t)}),0);else try{e.perfEvent(t)}catch(e){}})))}}))},wp=(Bl(Sp,_p=function e(){var t,n,r,i,o,a=!1;hu(e,this,(function(e){e._extensions=new Array,n=new Kc,e.logger=Dl({throwInternal:function(e,t,n,r,i){},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),t=[],e.isInitialized=function(){return a},e.initialize=function(t,i,o,s){e.isInitialized()&&Xu("Core should not be initialized more than once"),t&&!xu(t.instrumentationKey)||Xu("Please provide instrumentation key"),r=s,e[bp]=s,e.config=t||{},t.extensions=xu(t.extensions)?[]:t.extensions,Gu(t,Bc).NotificationManager=s,o&&(e.logger=o),(s=[]).push.apply(s,i.concat(t.extensions)),s=Gc(s);var l=[],u={};Du(s,(function(e){(xu(e)||xu(e.initialize))&&Xu("Extensions must provide callback to initialize");var t=e.priority,r=e.identifier;e&&t&&(xu(u[t])?u[t]=r:o.warnToConsole("Two extensions have same priority #"+t+" - "+u[t]+", "+r)),(!t||t<n.priority)&&l.push(e)})),s.push(n),l.push(n),s=Gc(s),e._extensions=s,Wc(new Nc([n],t,e),s),Wc(new Nc(l,t,e),s),e._extensions=l,0===e.getTransmissionControls().length&&Xu("No channels available"),a=!0,e.releaseQueue()},e.getTransmissionControls=function(){return n.getChannelControls()},e.track=function(n){Wu(n,"iKey",e.config.instrumentationKey,null,Zu),Wu(n,"time",Ru(new Date),null,Zu),Wu(n,"ver","4.0",null,xu),e.isInitialized()?e.getProcessTelContext().processNext(n):t.push(n)},e.getProcessTelContext=function(){var t=e._extensions,r=t;return t&&0!==t.length||(r=[n]),new Nc(r,e.config,e)},e.getNotifyMgr=function(){return r||(r=Dl({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),e[bp]=r),r},e.getCookieMgr=function(){return o=o||dp(e.config,e.logger)},e.setCookieMgr=function(e){o=e},e.getPerfMgr=function(){return i||e.config&&e.config.enablePerfMgr&&(i=new Oc(e.getNotifyMgr())),i},e.setPerfMgr=function(e){i=e},e.eventCnt=function(){return t.length},e.releaseQueue=function(){0<t.length&&(Du(t,(function(t){e.getProcessTelContext().processNext(t)})),t=[])}}))}),Sp);function Sp(){var e=_p.call(this)||this;return hu(Sp,e,(function(e,t){function n(t){var n=e.getNotifyMgr();n&&n.eventsDiscarded([t],wl)}e.initialize=function(e,n,r,i){t.initialize(e,n,r||new Pc(e),i||new xp(e))},e.track=function(r){Rc(e.getPerfMgr(),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),Xu("Invalid telemetry item")),function(e){if(xu(e.name))throw n(e),Error("telemetry name required")}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)},e.addNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.addNotificationListener(t)},e.removeNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.removeNotificationListener(t)},e.pollInternalLogs=function(t){var n=e.config.diagnosticLogInterval;return n&&0<n||(n=1e4),setInterval((function(){var n=e.logger?e.logger.queue:[];Du(n,(function(n){n={name:t||"InternalMessageId: "+n.messageId,iKey:e.config.instrumentationKey,time:Ru(new Date),baseType:Tc.dataType,baseData:{message:n.message}},e.track(n)})),n.length=0}),n)}})),e}var Ep=4294967296,Cp=4294967295,Tp=!1,Ip=123456789,kp=987654321;function Pp(){try{var e=2147483647&qu();(t=(Math.random()*Ep^e)+e)<0&&(t>>>=0),Ip=123456789+t&Cp,kp=987654321-t&Cp,Tp=!0}catch(e){}var t}function Ap(e){var t=(t=pc("crypto")||pc("msCrypto"))&&t.getRandomValues?t.getRandomValues(new Uint32Array(1))[0]&Cp:wc()?(Tp||Pp(),function(e){var t=((kp=36969*(65535&kp)+(kp>>16)&Cp)<<16)+(65535&(Ip=18e3*(65535&Ip)+(Ip>>16)&Cp))>>>0&Cp|0;return t>>>=0}()&Cp):Math.floor(Ep*Math.random()|0);return e||(t>>>=0),t}function Mp(e,t){var n=!1,r=dc();return r&&(n=Tu(r,e,t),n=Tu(r.body,e,t)||n),(r=mc())&&Rp.Attach(r,e,t)||n}function Op(e){void 0===e&&(e=22);for(var t=Ap()>>>0,n=0,r="";r.length<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Ap()<<2&4294967295|3&t)>>>0,n=0);return r}function Lp(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=t[15&(e=Ap())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Ap())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)}var Rp={Attach:Tu,AttachEvent:Tu,Detach:Iu,DetachEvent:Iu},Dp="_aiHooks",zp=["req","rsp","hkErr","fnErr"];function Np(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function Bp(e,t,n,r,i){0<=i&&i<=2&&Np(e,(function(e,o){var a=e.cbks;if(e=a[zp[i]]){t.ctx=function(){return r[o]=r[o]||{}};try{e.apply(t.inst,n)}catch(o){e=t.err;try{var s=a[zp[2]];s&&(t.err=o,s.apply(t.inst,n))}catch(o){}finally{t.err=e}}}}))}function Fp(e){return function(){var t=arguments,n=e.h,r={name:e.n,inst:this,ctx:null,set:function(e,n){(t=a([],t))[e]=n,o=a([r],t)}},i=[],o=a([r],t);function a(e,t){return Np(t,(function(t){e.push(t)})),e}Bp(n,r,o,i,0);var s=e.f;try{r.rslt=s.apply(this,t)}catch(s){throw r.err=s,Bp(n,r,o,i,3),s}return Bp(n,r,o,i,1),r.rslt}}var jp=Object.getPrototypeOf;function Up(e,t,n){var r=null;return e&&(Su(e,t)?r=e:n&&(r=Up(function(e){if(e){if(jp)return jp(e);if(e=e.__proto__||e[Tl]||e.constructor)return e}return null}(e),t,!1))),r}function Vp(e,t,n,r){if(void 0===r&&(r=!0),e&&t&&n&&(e=Up(e,t,r))&&typeof(r=e[t])===Sl){var i=r[Dp];return i||((r=Fp(i={i:0,n:t,f:r,h:[]}))[Dp]=i,e[t]=r),n={id:i.i,cbks:n,rm:function(){var e=this.id;Np(i.h,(function(t,n){return t.id===e&&(i.h.splice(n,1),1)}))}},i.i++,i.h.push(n),n}return null}var qp="Request-Context",Hp="appId",Wp="appId=cid-v1:",Gp="Request-Id",Zp="traceparent",Kp="Sdk-Context",Xp="appId",Yp="request-context";function Jp(e,t,n){var r=t.length,i=function(e,t){var n;return t&&150<(t=Bu(t.toString())).length&&(n=t.substring(0,150),e.throwInternal(Fl.WARNING,du.NameTooLong,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}(e,t);if(i.length!==r){for(var o=0,a=i;void 0!==n[a];)o++,a=i.substring(0,147)+function(e){return(e="00"+e).substr(e.length-3)}(o);i=a}return i}function $p(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=Bu(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(Fl.WARNING,du.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function Qp(e,t){return rh(e,t,2048,du.UrlTooLong)}function eh(e,t){var n;return t&&32768<t.length&&(n=t.substring(0,32768),e.throwInternal(Fl.WARNING,du.MessageTruncated,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function th(e,t){var n;return t&&(n={},ku(t,(function(t,r){if(Eu(r)&&bc())try{r=xc().stringify(r)}catch(t){e.throwInternal(Fl.WARNING,du.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:t},!0)}r=$p(e,r,8192),t=Jp(e,t,n),n[t]=r})),t=n),t}function nh(e,t){var n;return t&&(n={},ku(t,(function(t,r){t=Jp(e,t,n),n[t]=r})),t=n),t}function rh(e,t,n,r){var i;return t&&(t=Bu(t)).length>n&&(i=t.substring(0,n),e.throwInternal(Fl.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t}function ih(e){var t,n=null;return Cu(Event)?n=new Event(e):(t=mc())&&t.createEvent&&(n=t.createEvent("Event")).initEvent(e,!0,!0),n}function oh(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()}function ah(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24;return e=Math.floor(e/864e5),t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(0<e?e+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t}function sh(){var e=gc();return"sendBeacon"in e&&e.sendBeacon}var lh,uh,ch="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ph="sampleRate",hh="ProcessLegacy",dh="http.method",fh="https://dc.services.visualstudio.com",mh="not_specified";(Te=lh=lh||{})[Te.LocalStorage=0]="LocalStorage",Te[Te.SessionStorage=1]="SessionStorage",(Ne=uh=uh||{})[Ne.AI=0]="AI",Ne[Ne.AI_AND_W3C=1]="AI_AND_W3C",Ne[Ne.W3C=2]="W3C";var gh=void 0,yh=void 0;function vh(){return xh()?_h(lh.LocalStorage):null}function _h(e){try{if(xu(Ll()))return null;var t=new Date,n=pc(e===lh.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(e){}return null}function bh(){return wh()?_h(lh.SessionStorage):null}function xh(){return gh=void 0===gh?!!_h(lh.LocalStorage):gh}function wh(){return yh=void 0===yh?!!_h(lh.SessionStorage):yh}function Sh(e,t){var n=bh();if(null!==n)try{return n.getItem(t)}catch(t){yh=!1,e.throwInternal(Fl.WARNING,du.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+Hu(t),{exception:Ec(t)})}return null}function Eh(e,t,n){var r=bh();if(null!==r)try{return r.setItem(t,n),1}catch(t){yh=!1,e.throwInternal(Fl.WARNING,du.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+Hu(t),{exception:Ec(t)})}}var Ch=mc()||{},Th=0,Ih=[null,null,null,null,null];function kh(e){var t=Th,n=Ih,r=n[t];return Ch.createElement?n[t]||(r=n[t]=Ch.createElement("a")):r={host:function(e,t){return(e=Ph(e,t)||"")&&null!=(t=e.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i))&&3<t.length&&Ou(t[2])&&0<t[2].length?t[2]+(t[3]||""):e}(e,!0)},r.href=e,++t>=n.length&&(t=0),Th=t,r}function Ph(e,t){var n=null;return!e||null!=(e=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<e.length&&Ou(e[2])&&0<e[2].length&&(n=e[2]||"",t&&2<e.length&&(t=(e[1]||"").toLowerCase(),e=e[3]||"",n+=e="http"===t&&":80"===e||"https"===t&&":443"===e?"":e)),n}var Ah=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"];function Mh(e){return-1!==Ah.indexOf(e.toLowerCase())}var Oh={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns)for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1;var i,o=kh(t).host.toLowerCase();if(!o||-1===o.indexOf(":443")&&-1===o.indexOf(":80")||(o=(Ph(t,!0)||"").toLowerCase()),(!e||!e.enableCorsCorrelation)&&o&&o!==n)return!1;if((n=e&&e.correlationHeaderDomains)&&(Du(n,(function(e){e=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")),i=i||e.test(o)})),!i))return!1;var a=e&&e.correlationHeaderExcludedDomains;if(!a||0===a.length)return!0;for(r=0;r<a.length;r++)if(new RegExp(a[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(o))return!1;return o&&0<o.length},getCorrelationContext:function(e){if(e&&(e=Oh.getCorrelationContextValue(e,Hp))&&e!==Oh.correlationIdPrefix)return e},getCorrelationContextValue:function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(2===i.length&&i[0]===t)return i[1]}}};function Lh(){var e=_c();return e&&e.now&&e.timing&&0<(e=e.now()+e.timing.navigationStart)?e:qu()}function Rh(e,t){var n=null;return 0===e||0===t||xu(e)||xu(t)?n:t-e}var Dh,zh=";",Nh="=";function Bh(e){if(!e)return{};var t=function(e,t,n){var r,i=e.length,o=0;if(3<=arguments.length)r=n;else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=t(r,e[o],o,e)),o++;return r}(e.split(zh),(function(e,t){var n=t.split(Nh);return 2===n.length&&(t=n[0].toLowerCase(),n=n[1],e[t]=n),e}),{});return 0<Uu(t).length&&(t.endpointsuffix&&(e=t.location?t.location+".":"",t.ingestionendpoint=t.ingestionendpoint||"https://"+e+"dc."+t.endpointsuffix),t.ingestionendpoint=t.ingestionendpoint||fh),t}function Fh(){return Dh.call(this)||this}Bl(Fh,Dh=function(){}),Ie=Fh;var jh,Uh=(Bl(Vh,jh=function(){this.ver=1,this.sampleRate=100,this.tags={}}),Vh);function Vh(e,t,n){var r=jh.call(this)||this;return r.name=$p(e,n)||mh,r.data=t,r.time=Ru(new Date),r.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===r.sampleRate?4:1},tags:1,data:1},r}var qh,Hh=(Bl(Wh,qh=c=function(){this.ver=2,this.properties={},this.measurements={}}),Wh.envelopeType="Microsoft.ApplicationInsights.{0}.Event",Wh.dataType="EventData",Wh);function Wh(e,t,n,r){var i=qh.call(this)||this;return i.aiDataContract={ver:1,name:1,properties:0,measurements:0},i.name=$p(e,t)||mh,i.properties=th(e,n),i.measurements=nh(e,r),i}p=function(){},xe=function(){this.hasFullStack=!0,this.parsedStack=[]};var Gh="error",Zh="stack",Kh="stackDetails",Xh="errorSrc",Yh="message",Jh="description";function $h(e,t){var n=e;return n&&!Ou(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(e),!t||n&&"{}"!==n||(n=Cu(e.toString)?e.toString():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function Qh(e,t){var n=e;return e&&((n=n&&!Ou(n)&&(e[Yh]||e[Jh])||n)&&!Ou(n)&&(n=$h(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),(n=t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(n||"").indexOf(t)?t+": "+n:n)||""}function ed(e){return e&&e.src&&Ou(e.src)&&e.obj&&Au(e.obj)}function td(e){var t=e||"";return e=(t=Ou(t)?t:Ou(t[Zh])?t[Zh]:""+t).split("\n"),{src:t,obj:e}}function nd(e){var t,n=null;if(e)try{e[Zh]?n=td(e[Zh]):e[Gh]&&e[Gh][Zh]?n=td(e[Gh][Zh]):e.exception&&e.exception[Zh]?n=td(e.exception[Zh]):ed(e)?n=e:ed(e[Kh])?n=e[Kh]:window.opera&&e[Yh]?n=function(e){for(var t=[],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e.message):Ou(e)?n=td(e):(t=e[Yh]||e[Jh]||"",Ou(e[Xh])&&(t&&(t+="\n"),t+=" from "+e[Xh]),t&&(n=td(t)))}catch(e){n=td(e)}return n||{src:"",obj:null}}function rd(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,200})\(/.exec(e.constructor.toString());t=n&&1<n.length?n[1]:""}catch(e){}return t}function id(e){if(e)try{if(!Ou(e)){var t=rd(e),n=$h(e,!1);return n&&"{}"!==n||(e[Gh]&&(t=rd(e=e[Gh])),n=$h(e,!0)),0!==n.indexOf(t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var od,ad=(Bl(sd,od=function(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}),sd.CreateAutoException=function(e,t,n,r,i,o,a,s){var l=rd(i||o||e);return{message:Qh(e,l),url:t,lineNumber:n,columnNumber:r,error:id(i||o||e),evt:id(o||e),typeName:l,stackDetails:nd(a||i||o),errorSrc:s}},sd.CreateFromInterface=function(e,t,n,r){var i=t.exceptions&&Nu(t.exceptions,(function(t){return ud.CreateFromInterface(e,t)}));return new sd(e,zl({},t,{exceptions:i}),n,r)},sd.prototype.toInterface=function(){var e=this.exceptions,t=this.properties,n=this.measurements,r=this.severityLevel,i=(this.ver,this.problemGroup),o=this.id,a=this.isManual;return{ver:"4.0",exceptions:e instanceof Array&&Nu(e,(function(e){return e.toInterface()}))||void 0,severityLevel:r,properties:t,measurements:n,problemGroup:i,id:o,isManual:a}},sd.CreateSimpleException=function(e,t,n,r,i,o){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},sd.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",sd.dataType="ExceptionData",sd.formatError=id,sd);function sd(e,t,n,r,i,o){var a,s=od.call(this)||this;return s.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},Eu(a=t)&&"ver"in a&&"exceptions"in a&&"properties"in a?(s.exceptions=t.exceptions,s.properties=t.properties,s.measurements=t.measurements,t.severityLevel&&(s.severityLevel=t.severityLevel),t.id&&(s.id=t.id),t.problemGroup&&(s.problemGroup=t.problemGroup),s.ver=2,xu(t.isManual)||(s.isManual=t.isManual)):(s.exceptions=[new ud(e,t,n=n||{})],s.properties=th(e,n),s.measurements=nh(e,r),i&&(s.severityLevel=i),o&&(s.id=o)),s}var ld,ud=(Bl(cd,ld=xe),cd.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&Nu(this.parsedStack,(function(e){return e.toInterface()}));return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[Zh],parsedStack:e||void 0}},cd.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&Nu(t.parsedStack,(function(e){return dd.CreateFromInterface(e)}))||t.parsedStack;return new cd(e,zl({},t,{parsedStack:n}))},cd);function cd(e,t,n){var r,i,o,a,s=ld.call(this)||this;return s.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},Eu(a=t)&&"hasFullStack"in a&&"typeName"in a?(s.typeName=t.typeName,s.message=t.message,s[Zh]=t[Zh],s.parsedStack=t.parsedStack,s.hasFullStack=t.hasFullStack):(a=(r=t)&&r.evt,Mu(r)||(r=r[Gh]||a||r),s.typeName=$p(e,rd(r))||mh,s.message=eh(e,Qh(t||r,s.typeName))||mh,r=t[Kh]||nd(t),s.parsedStack=function(e){if((e=e.obj)&&0<e.length){var t=[],n=0,r=0;if(Du(e,(function(e){e=e.toString(),dd.regex.test(e)&&(e=new dd(e,n++),r+=e.sizeInBytes,t.push(e))})),32768<r)for(var i=0,o=t.length-1,a=0,s=i,l=o;i<o;){if(32768<(a+=t[i].sizeInBytes+t[o].sizeInBytes)){t.splice(s,l-s+1);break}s=i,l=o,i++,o--}}return t}(r),s[Zh]=(t=e,o="",(e=r)&&(e.obj?Du(e.obj,(function(e){o+=e+"\n"})):o=e.src||""),!(r=o)||32768<(e=""+r).length&&(i=e.substring(0,32768),t.throwInternal(Fl.WARNING,du.ExceptionTruncated,"exception is too long, it has been truncated to 32768 characters.",{exception:r},!0)),i||r),s.hasFullStack=Au(s.parsedStack)&&0<s.parsedStack.length,n&&(n.typeName=n.typeName||s.typeName)),s}var pd,hd,dd=(Bl(fd,pd=p),fd.CreateFromInterface=function(e){return new fd(e,null)},fd.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},fd.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,fd.baseSize=58,fd);function fd(e,t){var n,r=pd.call(this)||this;return r.sizeInBytes=0,r.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},"string"==typeof e?(n=e,r.level=t,r.method="<no_method>",r.assembly=Bu(n),r.fileName="",r.line=0,(n=n.match(fd.regex))&&5<=n.length&&(r.method=Bu(n[2])||r.method,r.fileName=Bu(n[4]),r.line=parseInt(n[5])||0)):(r.level=e.level,r.method=e.method,r.assembly=e.assembly,r.fileName=e.fileName,r.line=e.line,r.sizeInBytes=0),r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=fd.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}Le=function(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}},(Oe=hd=hd||{})[Oe.Measurement=0]="Measurement",Oe[Oe.Aggregation=1]="Aggregation";var md,gd=(Bl(yd,md=function(){this.kind=hd.Measurement}),yd);function yd(){var e=null!==md&&md.apply(this,arguments)||this;return e.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},e}var vd,_d,bd=(Bl(xd,vd=Le),xd.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",xd.dataType="MetricData",xd);function xd(e,t,n,r,i,o,a,s){var l=vd.call(this)||this;l.aiDataContract={ver:1,metrics:1,properties:0};var u=new gd;return u.count=0<r?r:void 0,u.max=isNaN(o)||null===o?void 0:o,u.min=isNaN(i)||null===i?void 0:i,u.name=$p(e,t)||mh,u.value=n,l.metrics=[u],l.properties=th(e,a),l.measurements=nh(e,s),l}function wd(){var e=_d.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}Bl(wd,_d=c);var Sd,Ed=(Bl(Cd,Sd=Te=wd),Cd.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Cd.dataType="PageviewData",Cd);function Cd(e,t,n,r,i,o,a){var s=Sd.call(this)||this;return s.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},s.id=(a=a)&&rh(e,a,128,du.IdTooLong).toString(),s.url=Qp(e,n),s.name=$p(e,t)||mh,isNaN(r)||(s.duration=ah(r)),s.properties=th(e,i),s.measurements=nh(e,o),s}var Td,Id=(Bl(kd,Td=function(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}),kd.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",kd.dataType="RemoteDependencyData",kd);function kd(e,t,n,r,i,o,a,s,l,u,c,p){void 0===l&&(l="Ajax");var h,d,f=Td.call(this)||this;return f.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},f.id=t,f.duration=ah(i),f.success=o,f.resultCode=a+"",f.type=$p(e,l),h=e,t=s,a=o=i=r,o=(l=n)&&0<l.length?(d=(s=kh(l)).host,o||(null!=s.pathname?("/"!==(n=0===s.pathname.length?"/":s.pathname).charAt(0)&&(n="/"+n),a=s.pathname,$p(h,t?t+" "+n:n)):$p(h,l))):d=i,a={target:d,name:o,data:a},f.data=Qp(e,r)||a.data,f.target=$p(e,a.target),u&&(f.target=f.target+" | "+u),f.name=$p(e,a.name),f.properties=th(e,c),f.measurements=nh(e,p),f}var Pd,Ad,Md=(Bl(Od,Pd=function(){this.ver=2,this.properties={},this.measurements={}}),Od.envelopeType="Microsoft.ApplicationInsights.{0}.Message",Od.dataType="MessageData",Od);function Od(e,t,n,r,i){var o=Pd.call(this)||this;return o.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},o.message=eh(e,t=t||mh),o.properties=th(e,r),o.measurements=nh(e,i),n&&(o.severityLevel=n),o}function Ld(){var e=Ad.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}Bl(Ld,Ad=Te);var Rd,Dd=(Bl(zd,Rd=Ne=Ld),zd.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",zd.dataType="PageviewPerformanceData",zd);function zd(e,t,n,r,i,o,a){var s=Rd.call(this)||this;return s.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},s.url=Qp(e,n),s.name=$p(e,t)||mh,s.properties=th(e,i),s.measurements=nh(e,o),a&&(s.domProcessing=a.domProcessing,s.duration=a.duration,s.networkConnect=a.networkConnect,s.perfTotal=a.perfTotal,s.receivedResponse=a.receivedResponse,s.sentRequest=a.sentRequest),s}var Nd,Bd,Fd=(Bl(jd,Nd=Ie),jd);function jd(e,t){var n=Nd.call(this)||this;return n.aiDataContract={baseType:1,baseData:1},n.baseType=e,n.baseData=t,n}function Ud(e){var t="ai."+e+".";return function(e){return t+e}}(xe=Bd=Bd||{})[xe.Verbose=0]="Verbose",xe[xe.Information=1]="Information",xe[xe.Warning=2]="Warning",xe[xe.Error=3]="Error",xe[xe.Critical=4]="Critical",p=Ud("application"),Oe=Ud("device"),Le=Ud("location"),c=Ud("operation"),Te=Ud("session"),Ne=Ud("user"),Ie=Ud("cloud"),xe=Ud("internal");var Vd,qd,Hd=(qd={applicationVersion:p("ver"),applicationBuild:p("build"),applicationTypeId:p("typeId"),applicationId:p("applicationId"),applicationLayer:p("layer"),deviceId:Oe("id"),deviceIp:Oe("ip"),deviceLanguage:Oe("language"),deviceLocale:Oe("locale"),deviceModel:Oe("model"),deviceFriendlyName:Oe("friendlyName"),deviceNetwork:Oe("network"),deviceNetworkName:Oe("networkName"),deviceOEMName:Oe("oemName"),deviceOS:Oe("os"),deviceOSVersion:Oe("osVersion"),deviceRoleInstance:Oe("roleInstance"),deviceRoleName:Oe("roleName"),deviceScreenResolution:Oe("screenResolution"),deviceType:Oe("type"),deviceMachineName:Oe("machineName"),deviceVMName:Oe("vmName"),deviceBrowser:Oe("browser"),deviceBrowserVersion:Oe("browserVersion"),locationIp:Le("ip"),locationCountry:Le("country"),locationProvince:Le("province"),locationCity:Le("city"),operationId:c("id"),operationName:c("name"),operationParentId:c("parentId"),operationRootId:c("rootId"),operationSyntheticSource:c("syntheticSource"),operationCorrelationVector:c("correlationVector"),sessionId:Te("id"),sessionIsFirst:Te("isFirst"),sessionIsNew:Te("isNew"),userAccountAcquisitionDate:Ne("accountAcquisitionDate"),userAccountId:Ne("accountId"),userAgent:Ne("userAgent"),userId:Ne("id"),userStoreRegion:Ne("storeRegion"),userAuthUserId:Ne("authUserId"),userAnonymousUserAcquisitionDate:Ne("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Ne("authUserAcquisitionDate"),cloudName:Ie("name"),cloudRole:Ie("role"),cloudRoleVer:Ie("roleVer"),cloudRoleInstance:Ie("roleInstance"),cloudEnvironment:Ie("environment"),cloudLocation:Ie("location"),cloudDeploymentUnit:Ie("deploymentUnit"),internalNodeName:xe("nodeName"),internalSdkVersion:xe("sdkVersion"),internalAgentVersion:xe("agentVersion"),internalSnippet:xe("snippet"),internalSdkSrc:xe("sdkSrc")},Bl(Wd,Vd=function(){var e=this;qd&&ku(qd,(function(t,n){e[t]=n}))}),Wd);function Wd(){return Vd.call(this)||this}var Gd=(Zd.create=function(e,t,n,r,i,o){if(n=$p(r,n)||mh,xu(e)||xu(t)||xu(n))throw Error("Input doesn't contain all required fields");var a={name:n,time:Ru(new Date),iKey:"",ext:o||{},tags:[],data:{},baseType:t,baseData:e};return xu(i)||ku(i,(function(e,t){a.data[e]=t})),a},Zd);function Zd(){}var Kd="user",Xd="device",Yd="trace",Jd="web",$d="app",Qd="os",ef=new Hd,tf="AppInsightsPropertiesPlugin",nf="AppInsightsChannelPlugin",rf=function e(t,n,r,i){hu(e,this,(function(e){var o,a=null,s=[],l=!1;function u(){r&&Du(r.getTransmissionControls(),(function(e){Du(e,(function(e){return e.flush(!0)}))}))}r&&(o=r.logger),e.trackPageView=function(e,r){var c=e.name;!xu(c)&&"string"==typeof c||(p=mc(),c=e.name=p&&p.title||"");var p,h=e.uri;if(!xu(h)&&"string"==typeof h||(p=vc(),h=e.uri=p&&p.href||""),!i.isPerformanceTimingSupported())return t.sendPageViewInternal(e,r),u(),void o.throwInternal(Fl.WARNING,du.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var d,f,m=!1,g=i.getPerformanceTiming().navigationStart;0<g&&(d=Rh(g,+new Date),i.shouldCollectDuration(d)||(d=void 0)),xu(r)||xu(r.duration)||(f=r.duration),!n&&isNaN(f)||(isNaN(f)&&((r=r||{}).duration=d),t.sendPageViewInternal(e,r),u(),m=!0),r=r||{},f=function(){var n,a=!1;try{i.isPerformanceTimingDataReady()?(a=!0,n={name:c,uri:h},i.populatePageViewPerformanceEvent(n),n.isValid||m?(m||(r.duration=n.durationMs,t.sendPageViewInternal(e,r)),l||(t.sendPageViewPerformanceInternal(n,r),l=!0)):(r.duration=d,t.sendPageViewInternal(e,r))):0<g&&6e4<Rh(g,+new Date)&&(a=!0,m||(r.duration=6e4,t.sendPageViewInternal(e,r)))}catch(n){o.throwInternal(Fl.CRITICAL,du.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+Hu(n),{exception:Ec(n)})}return a},s.push(f),a=a||setInterval((function(){var e=s.slice(0),t=!1;s=[],Du(e,(function(e){e()?t=!0:s.push(e)})),0===s.length&&(clearInterval(a),a=null),t&&u()}),100)}}))},of=(af.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+Ec(e))}},af.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(e){return this._logger.warnToConsole("Call to restart failed: "+Ec(e)),null}},af.prototype.startPageVisitTimer=function(e,t){try{var n,r;wh()&&(null!=Sh(this._logger,this.prevPageVisitDataKeyName)&&Xu("Cannot call startPageVisit consecutively without first calling stopPageVisit"),n=new sf(e,t),r=xc().stringify(n),Eh(this._logger,this.prevPageVisitDataKeyName,r))}catch(e){this._logger.warnToConsole("Call to start failed: "+Ec(e))}},af.prototype.stopPageVisitTimer=function(){try{if(wh()){var e=qu(),t=Sh(this._logger,this.prevPageVisitDataKeyName);if(t&&bc()){var n=xc().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,function(e,t){var n=bh();if(null!==n)try{n.removeItem(t)}catch(t){yh=!1,e.throwInternal(Fl.WARNING,du.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+Hu(t),{exception:Ec(t)})}}(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+Ec(e)),null}},af);function af(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}var sf=function(e,t){this.pageVisitStartTime=qu(),this.pageName=e,this.pageUrl=t},lf=(uf.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming(),r=0,i=0,o=0,a=0,s=0;(t||n)&&(s=t?(r=t.duration,i=0===t.startTime?t.connectEnd:Rh(t.startTime,t.connectEnd),o=Rh(t.requestStart,t.responseStart),a=Rh(t.responseStart,t.responseEnd),Rh(t.responseEnd,t.loadEventEnd)):(r=Rh(n.navigationStart,n.loadEventEnd),i=Rh(n.navigationStart,n.connectEnd),o=Rh(n.requestStart,n.responseStart),a=Rh(n.responseStart,n.responseEnd),Rh(n.responseEnd,n.loadEventEnd)),0===r?this._logger.throwInternal(Fl.WARNING,du.ErrorPVCalc,"error calculating page view performance.",{total:r,network:i,request:o,response:a,dom:s}):this.shouldCollectDuration(r,i,o,a,s)?r<Math.floor(i)+Math.floor(o)+Math.floor(a)+Math.floor(s)?this._logger.throwInternal(Fl.WARNING,du.ClientPerformanceMathError,"client performance math error.",{total:r,network:i,request:o,response:a,dom:s}):(e.durationMs=r,e.perfTotal=e.duration=ah(r),e.networkConnect=ah(i),e.sentRequest=ah(o),e.receivedResponse=ah(a),e.domProcessing=ah(s),e.isValid=!0):this._logger.throwInternal(Fl.WARNING,du.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:r,network:i,request:o,response:a,dom:s}))},uf.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?_c().timing:null},uf.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?_c().getEntriesByType("navigation")[0]:null},uf.prototype.isPerformanceNavigationTimingSupported=function(){var e=_c();return e&&e.getEntriesByType&&0<e.getEntriesByType("navigation").length},uf.prototype.isPerformanceTimingSupported=function(){var e=_c();return e&&e.timing},uf.prototype.isPerformanceTimingDataReady=function(){var e;return(e=(e=_c())?e.timing:0)&&0<e.domainLookupStart&&0<e.navigationStart&&0<e.responseStart&&0<e.requestStart&&0<e.loadEventEnd&&0<e.responseEnd&&0<e.connectEnd&&0<e.domLoading},uf.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=["googlebot","adsbot-google","apis-google","mediapartners-google"],r=(gc()||{}).userAgent,i=!1;if(r)for(var o=0;o<n.length;o++)i=i||-1!==r.toLowerCase().indexOf(n[o]);if(i)return!1;for(o=0;o<e.length;o++)if(e[o]<0||e[o]>=this.MAX_DURATION_ALLOWED)return!1;return!0},uf);function uf(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}var cf="duration",pf="event";function hf(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var df,ff=(Bl(mf,df=Re),mf.getDefaultConfig=function(e){return(e=e||{}).sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=oh(e.disableExceptionTracking),e.autoTrackPageVisitTime=oh(e.autoTrackPageVisitTime),e.overridePageViewDuration=oh(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=oh(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||100<=e.samplingPercentage)&&(e.samplingPercentage=100),e.isStorageUseDisabled=oh(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=oh(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=oh(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e.enableDebug=oh(e.enableDebug),e.disableFlushOnBeforeUnload=oh(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=oh(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e},mf.Version="2.6.5",mf);function mf(){var e,t,n,r,i,o=df.call(this)||this;return o.identifier="ApplicationInsightsAnalytics",o.priority=180,o.autoRoutePVDelay=500,hu(mf,o,(function(a,s){var l=vc(!0);r=l&&l.href||"",a.getCookieMgr=function(){return hp(a.core)},a.processTelemetry=function(e,t){Rc(a.core,(function(){return a.identifier+":processTelemetry"}),(function(){var n=!1,r=a._telemetryInitializers.length;t=a._getTelCtx(t);for(var i=0;i<r;++i){var o=a._telemetryInitializers[i];if(o)try{if(!1===o.apply(null,[e])){n=!0;break}}catch(n){t.diagLog().throwInternal(Fl.CRITICAL,du.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+Hu(n),{exception:Ec(n)},!0)}}n||a.processNext(e,t)}),(function(){return{item:e}}),!e.sync)},a.trackEvent=function(e,t){try{var n=Gd.create(e,Hh.dataType,Hh.envelopeType,a.diagLog(),t);a.core.track(n)}catch(e){a.diagLog().throwInternal(Fl.WARNING,du.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+Hu(e),{exception:Ec(e)})}},a.startTrackEvent=function(t){try{e.start(t)}catch(t){a.diagLog().throwInternal(Fl.CRITICAL,du.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+Hu(t),{exception:Ec(t)})}},a.stopTrackEvent=function(t,n,r){try{e.stop(t,void 0,n)}catch(t){a.diagLog().throwInternal(Fl.CRITICAL,du.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+Hu(t),{exception:Ec(t)})}},a.trackTrace=function(e,t){try{var n=Gd.create(e,Md.dataType,Md.envelopeType,a.diagLog(),t);a.core.track(n)}catch(e){a.diagLog().throwInternal(Fl.WARNING,du.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+Hu(e),{exception:Ec(e)})}},a.trackMetric=function(e,t){try{var n=Gd.create(e,bd.dataType,bd.envelopeType,a.diagLog(),t);a.core.track(n)}catch(e){a.diagLog().throwInternal(Fl.CRITICAL,du.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+Hu(e),{exception:Ec(e)})}},a.trackPageView=function(e,t){try{var n=e||{};a._pageViewManager.trackPageView(n,zl({},n.properties,n.measurements,t)),a.config.autoTrackPageVisitTime&&a._pageVisitTimeManager.trackPreviousPageVisit(n.name,n.uri)}catch(e){a.diagLog().throwInternal(Fl.CRITICAL,du.TrackPVFailed,"trackPageView failed, page view will not be collected: "+Hu(e),{exception:Ec(e)})}},a.sendPageViewInternal=function(e,t,n){var r=mc();r&&(e.refUri=void 0===e.refUri?r.referrer:e.refUri),n=Gd.create(e,Ed.dataType,Ed.envelopeType,a.diagLog(),t,n),a.core.track(n)},a.sendPageViewPerformanceInternal=function(e,t,n){n=Gd.create(e,Dd.dataType,Dd.envelopeType,a.diagLog(),t,n),a.core.track(n)},a.trackPageViewPerformance=function(e,t){try{a._pageViewPerformanceManager.populatePageViewPerformanceEvent(e),a.sendPageViewPerformanceInternal(e,t)}catch(e){a.diagLog().throwInternal(Fl.CRITICAL,du.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+Hu(e),{exception:Ec(e)})}},a.startTrackPage=function(e){try{var n;"string"!=typeof e&&(e=(n=mc())&&n.title||""),t.start(e)}catch(e){a.diagLog().throwInternal(Fl.CRITICAL,du.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+Hu(e),{exception:Ec(e)})}},a.stopTrackPage=function(e,n,r,i){try{var o,s;"string"!=typeof e&&(e=(o=mc())&&o.title||""),"string"!=typeof n&&(n=(s=vc())&&s.href||""),t.stop(e,n,r,i),a.config.autoTrackPageVisitTime&&a._pageVisitTimeManager.trackPreviousPageVisit(e,n)}catch(e){a.diagLog().throwInternal(Fl.CRITICAL,du.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+Hu(e),{exception:Ec(e)})}},a.sendExceptionInternal=function(e,t,n){var r=e.exception||e.error||new Error(mh);e=new ad(a.diagLog(),r,e.properties||t,e.measurements,e.severityLevel,e.id).toInterface(),n=Gd.create(e,ad.dataType,ad.envelopeType,a.diagLog(),t,n),a.core.track(n)},a.trackException=function(e,t){try{a.sendExceptionInternal(e,t)}catch(e){a.diagLog().throwInternal(Fl.CRITICAL,du.TrackExceptionFailed,"trackException failed, exception will not be collected: "+Hu(e),{exception:Ec(e)})}},a._onerror=function(e){var t,n,r=e&&e.error,i=e&&e.evt;try{i||(t=dc())&&(i=t[pf]);var o=e&&e.url||(mc()||{}).URL,s=e.errorSrc||"window.onerror@"+o+":"+(e.lineNumber||0)+":"+(e.columnNumber||0),l={errorSrc:s,url:o,lineNumber:e.lineNumber||0,columnNumber:e.columnNumber||0,message:e.message};n=e.message,e.url,e.lineNumber,e.columnNumber,e.error||!Ou(n)||"Script error."!==n&&"Script error"!==n?(e.errorSrc||(e.errorSrc=s),a.trackException({exception:e,severityLevel:Bd.Error},l)):function(e,t){t=Gd.create(e,ad.dataType,ad.envelopeType,a.diagLog(),t),a.core.track(t)}(ad.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",o,e.lineNumber||0,e.columnNumber||0,r,i,null,s),l)}catch(e){r=r?r.name+", "+r.message:"null",a.diagLog().throwInternal(Fl.CRITICAL,du.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+Hu(e),{exception:Ec(e),errorString:r})}},a.addTelemetryInitializer=function(e){a._telemetryInitializers.push(e)},a.initialize=function(l,u,c,p){if(!a.isInitialized()){if(xu(u))throw Error("Error initializing");s.initialize(l,u,c,p),a.setInitialized(!1);var h=a._getTelCtx(),d=a.identifier;a.config=h.getExtCfg(d),void 0!==(u=mf.getDefaultConfig(l))&&ku(u,(function(e,t){a.config[e]=h.getConfig(d,e,t),void 0===a.config[e]&&(a.config[e]=t)})),a.config.isStorageUseDisabled&&(yh=gh=!1),p={instrumentationKey:function(){return l.instrumentationKey},accountId:function(){return a.config.accountId||l.accountId},sessionRenewalMs:function(){return a.config.sessionRenewalMs||l.sessionRenewalMs},sessionExpirationMs:function(){return a.config.sessionExpirationMs||l.sessionExpirationMs},sampleRate:function(){return a.config.samplingPercentage||l.samplingPercentage},sdkExtension:function(){return a.config.sdkExtension||l.sdkExtension},isBrowserLinkTrackingEnabled:function(){return a.config.isBrowserLinkTrackingEnabled||l.isBrowserLinkTrackingEnabled},appId:function(){return a.config.appId||l.appId}},a._pageViewPerformanceManager=new lf(a.core),a._pageViewManager=new rf(o,a.config.overridePageViewDuration,a.core,a._pageViewPerformanceManager),a._pageVisitTimeManager=new of(a.diagLog(),(function(e,t,n){t={PageName:e,PageUrl:t},a.trackMetric({name:"PageVisitTime",average:n,max:n,min:n,sampleCount:1},t)})),a._telemetryInitializers=a._telemetryInitializers||[],function(e){var t;e.isBrowserLinkTrackingEnabled()||(t=["/browserLinkSignalR/","/__browserLink/"],a._telemetryInitializers.push((function(e){if(e.baseType===Id.dataType){var n=e.baseData;if(n)for(var r=0;r<t.length;r++)if(n.target&&0<=n.target.indexOf(t[r]))return!1}return!0})))}(p),(e=new gf(a.diagLog(),"trackEvent")).action=function(e,t,n,r){(r=r||{})[cf]=n.toString(),a.trackEvent({name:e,properties:r})},(t=new gf(a.diagLog(),"trackPageView")).action=function(e,t,n,r,i){(r=xu(r)?{}:r)[cf]=n.toString(),a.sendPageViewInternal({name:e,uri:t,properties:r,measurements:i},r)};var f,m,g,y,v,_=dc(),b=(u=yc(),vc(!0)),x=o;!1===a.config.disableExceptionTracking&&!a.config.autoExceptionInstrumented&&_&&(f=_.onerror,_.onerror=function(e,t,n,r,i){var o=_[pf],a=f&&f(e,t,n,r,i);return!0!==a&&x._onerror(ad.CreateAutoException(e,t,n,r,i,o)),a},a.config.autoExceptionInstrumented=!0),!1===a.config.disableExceptionTracking&&!0===a.config.enableUnhandledPromiseRejectionTracking&&!a.config.autoUnhandledPromiseInstrumented&&_&&(m=_[p="onunhandledrejection"],_[p]=function(e){var t=_[pf],n=m&&m.call(_,e);return!0!==n&&x._onerror(ad.CreateAutoException(function(e){if(e&&e.reason){var t=e.reason;return!Ou(t)&&Cu(t.toString)?t.toString():Ec(t)}return e||""}(e),b?b.href:"",0,0,e,t)),n},a.config.autoUnhandledPromiseInstrumented=!0),!0===a.config.enableAutoRouteTracking&&u&&Cu(u.pushState)&&Cu(u.replaceState)&&_&&"undefined"!=typeof Event&&(g=o,Du(c,(function(e){e.identifier===tf&&(n=e)})),u.pushState=(v=u.pushState,function(){var e=v.apply(this,arguments);return hf(_,ih(g.config.namePrefix+"pushState")),hf(_,ih(g.config.namePrefix+"locationchange")),e}),u.replaceState=(y=u.replaceState,function(){var e=y.apply(this,arguments);return hf(_,ih(g.config.namePrefix+"replaceState")),hf(_,ih(g.config.namePrefix+"locationchange")),e}),_.addEventListener&&(_.addEventListener(g.config.namePrefix+"popstate",(function(){hf(_,ih(g.config.namePrefix+"locationchange"))})),_.addEventListener(g.config.namePrefix+"locationchange",(function(){var e;n&&n.context&&n.context.telemetryTrace&&(n.context.telemetryTrace.traceID=Lp(),e="_unknown_",b&&b.pathname&&(e=b.pathname+(b.hash||"")),n.context.telemetryTrace.name=e),i&&(r=i),i=b&&b.href||"",setTimeout(function(e){g.trackPageView({refUri:e,properties:{duration:0}})}.bind(o,r),g.autoRoutePVDelay)})))),a.setInitialized(!0)}}})),o}var gf=function(e,t){var n=this,r={};n.start=function(t){void 0!==r[t]&&e.throwInternal(Fl.WARNING,du.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:t,key:t},!0),r[t]=+new Date},n.stop=function(t,i,o,a){var s=r[t];isNaN(s)?e.throwInternal(Fl.WARNING,du.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:t,key:t},!0):(s=Rh(s,+new Date),n.action(t,i,s,o,a)),delete r[t],r[t]=void 0}},yf=function e(t){var n=[];hu(e,this,(function(e){e.enqueue=function(e){n.push(e)},e.count=function(){return n.length},e.clear=function(){n.length=0},e.getItems=function(){return n.slice(0)},e.batchPayloads=function(e){return e&&0<e.length?t.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(t){e.clear()},e.clearSent=function(e){}}))},vf=(_f.BUFFER_KEY="AI_buffer",_f.SENT_BUFFER_KEY="AI_sentBuffer",_f.MAX_BUFFER_SIZE=2e3,_f);function _f(e,t){var n,r=!1;hu(_f,this,(function(i){var o=l(_f.BUFFER_KEY),a=l(_f.SENT_BUFFER_KEY);function s(e,t){var n=[];return Du(t,(function(t){Cu(t)||-1!==zu(e,t)||n.push(t)})),n}function l(n){try{n=t.namePrefix&&t.namePrefix()?t.namePrefix()+"_"+n:n;var r=Sh(e,n);if(r){var i=xc().parse(r);if((i=Ou(i)?xc().parse(i):i)&&Au(i))return i}}catch(r){e.throwInternal(Fl.CRITICAL,du.FailedToRestoreStorageBuffer," storage key: "+n+", "+Hu(r),{exception:Ec(r)})}return[]}function u(n,r){try{n=t.namePrefix&&t.namePrefix()?t.namePrefix()+"_"+n:n;var i=JSON.stringify(r);Eh(e,n,i)}catch(r){Eh(e,n,JSON.stringify([])),e.throwInternal(Fl.WARNING,du.FailedToSetStorageBuffer," storage key: "+n+", "+Hu(r)+". Buffer cleared",{exception:Ec(r)})}}(n=o.concat(a)).length>_f.MAX_BUFFER_SIZE&&(n.length=_f.MAX_BUFFER_SIZE),u(_f.SENT_BUFFER_KEY,[]),u(_f.BUFFER_KEY,n),i.enqueue=function(t){n.length>=_f.MAX_BUFFER_SIZE?r||(e.throwInternal(Fl.WARNING,du.SessionStorageBufferFull,"Maximum buffer size reached: "+n.length,!0),r=!0):(n.push(t),u(_f.BUFFER_KEY,n))},i.count=function(){return n.length},i.clear=function(){n=[],u(_f.BUFFER_KEY,[]),u(_f.SENT_BUFFER_KEY,[]),r=!1},i.getItems=function(){return n.slice(0)},i.batchPayloads=function(e){return e&&0<e.length?t.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},i.markAsSent=function(t){n=s(t,n),u(_f.BUFFER_KEY,n);var r=l(_f.SENT_BUFFER_KEY);r instanceof Array&&t instanceof Array&&((r=r.concat(t)).length>_f.MAX_BUFFER_SIZE&&(e.throwInternal(Fl.CRITICAL,du.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+r.length,!0),r.length=_f.MAX_BUFFER_SIZE),u(_f.SENT_BUFFER_KEY,r))},i.clearSent=function(e){e=s(e,e=l(_f.SENT_BUFFER_KEY)),u(_f.SENT_BUFFER_KEY,e)}}))}var bf="baseType",xf="baseData",wf="properties";function Sf(e,t,n){return Wu(e,t,n,Ku)}var Ef=(Cf.extractPropsAndMeasurements=function(e,t,n){xu(e)||ku(e,(function(e,r){Lu(r)?n[e]=r:Ou(r)?t[e]=r:bc()&&(t[e]=xc().stringify(r))}))},Cf.createEnvelope=function(e,t,n,r){return Sf(r=new Uh(e,r,t),"sampleRate",n[ph]),(n[xf]||{}).startTime&&(r.time=Ru(n[xf].startTime)),r.iKey=n.iKey,t=n.iKey.replace(/-/g,""),r.name=r.name.replace("{0}",t),Cf.extractPartAExtensions(n,r),n.tags=n.tags||[],Ju(r)},Cf.extractPartAExtensions=function(e,t){var n=t.tags=t.tags||{},r=e.ext=e.ext||{},i=e.tags=e.tags||[],o=r.user;o&&(Sf(n,ef.userAuthUserId,o.authId),Sf(n,ef.userId,o.id||o.localId)),(o=r.app)&&Sf(n,ef.sessionId,o.sesId),(o=r.device)&&(Sf(n,ef.deviceId,o.id||o.localId),Sf(n,ef.deviceType,o.deviceClass),Sf(n,ef.deviceIp,o.ip),Sf(n,ef.deviceModel,o.model),Sf(n,ef.deviceType,o.deviceType)),(o=e.ext.web)&&(Sf(n,ef.deviceLanguage,o.browserLang),Sf(n,ef.deviceBrowserVersion,o.browserVer),Sf(n,ef.deviceBrowser,o.browser),Sf(e=(e=(e=t.data=t.data||{})[xf]=e[xf]||{})[wf]=e[wf]||{},"domain",o.domain),Sf(e,"isManual",o.isManual?"true":null),Sf(e,"screenRes",o.screenRes),Sf(e,"userConsent",o.userConsent?"true":null)),(o=r.os)&&Sf(n,ef.deviceOS,o.name),(r=r.trace)&&(Sf(n,ef.operationParentId,r.parentID),Sf(n,ef.operationName,r.name),Sf(n,ef.operationId,r.traceID));for(var a={},s=i.length-1;0<=s;s--)ku(i[s],(function(e,t){a[e]=t})),i.splice(s,1);ku(i,(function(e,t){a[e]=t})),(n=zl({},n,a))[ef.internalSdkVersion]||(n[ef.internalSdkVersion]="javascript:"+Cf.Version),t.tags=Ju(n)},Cf.prototype.Init=function(e,t){this._logger=e,xu(t[xf])&&this._logger.throwInternal(Fl.CRITICAL,du.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},Cf.Version="2.6.5",Cf);function Cf(){}var Tf,If=(Bl(kf,Tf=Ef),kf.prototype.Create=function(e,t){Tf.prototype.Init.call(this,e,t);var n=t[xf].measurements||{},r=t[xf][wf]||{};Ef.extractPropsAndMeasurements(t.data,r,n);var i=t[xf];if(xu(i))return e.warnToConsole("Invalid input for dependency data"),null;var o=i[wf]&&i[wf][dh]?i[wf][dh]:"GET";return n=new Id(e,i.id,i.target,i.name,i.duration,i.success,i.responseCode,o,i.type,i.correlationContext,r,n),n=new Fd(Id.dataType,n),Ef.createEnvelope(e,Id.envelopeType,t,n)},kf.DependencyEnvelopeCreator=new kf,kf);function kf(){return null!==Tf&&Tf.apply(this,arguments)||this}var Pf,Af=(Bl(Mf,Pf=Ef),Mf.prototype.Create=function(e,t){Pf.prototype.Init.call(this,e,t);var n={},r={};t[bf]!==Hh.dataType&&(n.baseTypeSource=t[bf]),t[bf]===Hh.dataType?(n=t[xf][wf]||{},r=t[xf].measurements||{}):t[xf]&&Ef.extractPropsAndMeasurements(t[xf],n,r),Ef.extractPropsAndMeasurements(t.data,n,r);var i=t[xf].name;return r=new Hh(e,i,n,r),r=new Fd(Hh.dataType,r),Ef.createEnvelope(e,Hh.envelopeType,t,r)},Mf.EventEnvelopeCreator=new Mf,Mf);function Mf(){return null!==Pf&&Pf.apply(this,arguments)||this}var Of,Lf=(Bl(Rf,Of=Ef),Rf.prototype.Create=function(e,t){Of.prototype.Init.call(this,e,t);var n=t[xf].measurements||{},r=t[xf][wf]||{};Ef.extractPropsAndMeasurements(t.data,r,n);var i=t[xf];return n=ad.CreateFromInterface(e,i,r,n),n=new Fd(ad.dataType,n),Ef.createEnvelope(e,ad.envelopeType,t,n)},Rf.ExceptionEnvelopeCreator=new Rf,Rf);function Rf(){return null!==Of&&Of.apply(this,arguments)||this}var Df,zf=(Bl(Nf,Df=Ef),Nf.prototype.Create=function(e,t){Df.prototype.Init.call(this,e,t);var n=t[xf],r=n[wf]||{},i=n.measurements||{};return Ef.extractPropsAndMeasurements(t.data,r,i),i=new bd(e,n.name,n.average,n.sampleCount,n.min,n.max,r,i),i=new Fd(bd.dataType,i),Ef.createEnvelope(e,bd.envelopeType,t,i)},Nf.MetricEnvelopeCreator=new Nf,Nf);function Nf(){return null!==Df&&Df.apply(this,arguments)||this}var Bf,Ff=(Bl(jf,Bf=Ef),jf.prototype.Create=function(e,t){Bf.prototype.Init.call(this,e,t);var n,r="duration";xu(a=t[xf])||xu(a[wf])||xu(a[wf][r])?xu(t.data)||xu(t.data[r])||(n=t.data[r],delete t.data[r]):(n=a[wf][r],delete a[wf][r]);var i=t[xf];((t.ext||{}).trace||{}).traceID&&(l=t.ext.trace.traceID);var o=i.id||l,a=i.name,s=(r=i.uri,i[wf]||{}),l=i.measurements||{};return xu(i.refUri)||(s.refUri=i.refUri),xu(i.pageType)||(s.pageType=i.pageType),xu(i.isLoggedIn)||(s.isLoggedIn=i.isLoggedIn.toString()),xu(i[wf])||ku(i[wf],(function(e,t){s[e]=t})),Ef.extractPropsAndMeasurements(t.data,s,l),o=new Ed(e,a,r,n,s,l,o),o=new Fd(Ed.dataType,o),Ef.createEnvelope(e,Ed.envelopeType,t,o)},jf.PageViewEnvelopeCreator=new jf,jf);function jf(){return null!==Bf&&Bf.apply(this,arguments)||this}var Uf,Vf=(Bl(qf,Uf=Ef),qf.prototype.Create=function(e,t){Uf.prototype.Init.call(this,e,t);var n=t[xf],r=n.name,i=n.uri||n.url,o=n[wf]||{},a=n.measurements||{};return Ef.extractPropsAndMeasurements(t.data,o,a),n=new Dd(e,r,i,void 0,o,a,n),n=new Fd(Dd.dataType,n),Ef.createEnvelope(e,Dd.envelopeType,t,n)},qf.PageViewPerformanceEnvelopeCreator=new qf,qf);function qf(){return null!==Uf&&Uf.apply(this,arguments)||this}var Hf,Wf=(Bl(Gf,Hf=Ef),Gf.prototype.Create=function(e,t){Hf.prototype.Init.call(this,e,t);var n=t[xf].message,r=t[xf].severityLevel,i=t[xf][wf]||{},o=t[xf].measurements||{};return Ef.extractPropsAndMeasurements(t.data,i,o),o=new Md(e,n,r,i,o),o=new Fd(Md.dataType,o),Ef.createEnvelope(e,Md.envelopeType,t,o)},Gf.TraceEnvelopeCreator=new Gf,Gf);function Gf(){return null!==Hf&&Hf.apply(this,arguments)||this}var Zf=function e(t){hu(e,this,(function(e){function n(e,o){var a="__aiCircularRefCheck",s={};if(!e)return t.throwInternal(Fl.CRITICAL,du.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:o},!0),s;if(e[a])return t.throwInternal(Fl.WARNING,du.CircularReferenceDetected,"Circular reference detected while serializing object",{name:o},!0),s;if(e.aiDataContract)return e[a]=!0,ku(e.aiDataContract,(function(i,a){var l=Cu(a)?1&a():1&a,u=Cu(a)?4&a():4&a,c=2&a,p=void 0!==e[i];a=Eu(e[i])&&null!==e[i],!l||p||c?u||(u=void 0)!==(u=a?(c?r:n)(e[i],i):e[i])&&(s[i]=u):t.throwInternal(Fl.CRITICAL,du.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:i,name:o})})),delete e[a],s;if("measurements"===o)s=i(e,"number",o);else if("properties"===o)s=i(e,"string",o);else if("tags"===o)s=i(e,"string",o);else if(Au(e))s=r(e,o);else{t.throwInternal(Fl.WARNING,du.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{xc().stringify(e),s=e}catch(a){t.throwInternal(Fl.CRITICAL,du.CannotSerializeObject,a&&Cu(a.toString)?a.toString():"Error serializing object",null,!0)}}return s}function r(e,r){if(e)if(Au(e))for(var i=[],o=0;o<e.length;o++){var a=n(e[o],r+"["+o+"]");i.push(a)}else t.throwInternal(Fl.CRITICAL,du.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},ku(e,(function(e,o){"string"===n?void 0===o?i[e]="undefined":null===o?i[e]="null":o.toString?i[e]=o.toString():i[e]="invalid field: toString() is not defined.":"number"===n?void 0===o?i[e]="undefined":null===o?i[e]="null":(o=parseFloat(o),isNaN(o)?i[e]="NaN":i[e]=o):(i[e]="invalid field: "+r+" is of unknown type.",t.throwInternal(Fl.CRITICAL,i[e],null,!0))}))),i}e.serialize=function(e){e=n(e,"root");try{return xc().stringify(e)}catch(e){t.throwInternal(Fl.CRITICAL,du.CannotSerializeObject,e&&Cu(e.toString)?e.toString():"Error serializing object",null,!0)}}}))};function Kf(){var e=dc(),t=mc(),n=!1,r=!0;hu(Kf,this,(function(i){try{var o,a;e&&Rp.Attach(e,"online",s)&&(Rp.Attach(e,"offline",l),n=!0),t&&(bu((o=t.body||t).ononline)||(o.ononline=s,o.onoffline=l,n=!0)),!n||(a=gc())&&!xu(a.onLine)&&(r=a.onLine)}catch(i){n=!1}function s(){r=!0}function l(){r=!1}i.isListening=n,i.isOnline=function(){var e=!0,t=gc();return n?e=r:t&&!xu(t.onLine)&&(e=t.onLine),e},i.isOffline=function(){return!i.isOnline()}}))}var Xf=(Kf.Offline=new Kf,Kf).Offline,Yf=(Jf.prototype.getHashCodeScore=function(e){return this.getHashCode(e)/Jf.INT_MAX_VALUE*100},Jf.prototype.getHashCode=function(e){if(""===e)return 0;for(;e.length<Jf.MIN_INPUT_LENGTH;)e=e.concat(e);for(var t=5381,n=0;n<e.length;++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},Jf.INT_MAX_VALUE=2147483647,Jf.MIN_INPUT_LENGTH=8,Jf);function Jf(){}var $f=(Qf.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},Qf);function Qf(){this.hashCodeGeneragor=new Yf,this.keys=new Hd}var em=(tm.prototype.isSampledIn=function(e){var t=this.sampleRate;return null==t||100<=t||e.baseType===bd.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},tm);function tm(e,t){this.INT_MAX_VALUE=2147483647,this._logger=t||kc(null),(100<e||e<0)&&(this._logger.throwInternal(Fl.WARNING,du.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new $f}function nm(e){try{return e.responseText}catch(e){}return null}var rm,im=(Bl(om,rm=Re),om.constructEnvelope=function(e,t,n){var r=t===e.iKey||xu(t)?e:zl({},e,{iKey:t});switch(r.baseType){case Hh.dataType:return Af.EventEnvelopeCreator.Create(n,r);case Md.dataType:return Wf.TraceEnvelopeCreator.Create(n,r);case Ed.dataType:return Ff.PageViewEnvelopeCreator.Create(n,r);case Dd.dataType:return Vf.PageViewPerformanceEnvelopeCreator.Create(n,r);case ad.dataType:return Lf.ExceptionEnvelopeCreator.Create(n,r);case bd.dataType:return zf.MetricEnvelopeCreator.Create(n,r);case Id.dataType:return If.DependencyEnvelopeCreator.Create(n,r);default:return Af.EventEnvelopeCreator.Create(n,r)}},om._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},om._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},om);function om(){var e,t,n,r,i,o=rm.call(this)||this;o.priority=1001,o.identifier=nf,o._XMLHttpRequestSupported=!1;var a={};return hu(om,o,(function(s,l){function u(){Xu("Method not implemented.")}function c(t,n,r,i,o,a){var l=null;s._appId||(l=m(a))&&l.appId&&(s._appId=l.appId),(t<200||300<=t)&&0!==t?(301!==t&&307!==t&&308!==t||p(r))&&!s._senderConfig.isRetryDisabled()&&v(t)?(g(n),s.diagLog().throwInternal(Fl.WARNING,du.TransmissionFailed,". Response code "+t+". Will retry to send "+n.length+" items.")):s._onError(n,o):Xf.isOffline()?s._senderConfig.isRetryDisabled()||(g(n,10),s.diagLog().throwInternal(Fl.WARNING,du.TransmissionFailed,". Offline - Response Code: "+t+". Offline status: "+Xf.isOffline()+". Will retry to send "+n.length+" items.")):(p(r),206===t?(l=l||m(a))&&!s._senderConfig.isRetryDisabled()?s._onPartialSuccess(n,l):s._onError(n,o):(e=0,s._onSuccess(n,i)))}function p(e){return!(10<=i)&&!xu(e)&&""!==e&&e!==s._senderConfig.endpointUrl()&&(s._senderConfig.endpointUrl=function(){return e},++i,1)}function h(e,t){var n=s._senderConfig.endpointUrl(),r=s._buffer.batchPayloads(e);r=new Blob([r],{type:"text/plain;charset=UTF-8"}),gc().sendBeacon(n,r)?(s._buffer.markAsSent(e),s._onSuccess(e,e.length)):(d(e,!0),s.diagLog().throwInternal(Fl.WARNING,du.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function d(e,t){var n=new XMLHttpRequest,r=s._senderConfig.endpointUrl();try{n[ch]=!0}catch(t){}n.open("POST",r,t),n.setRequestHeader("Content-type","application/json"),Mh(r)&&n.setRequestHeader(Kp,Xp),Du(Uu(a),(function(e){n.setRequestHeader(e,a[e])})),n.onreadystatechange=function(){return s._xhrReadyStateChange(n,e,e.length)},n.onerror=function(t){return s._onError(e,_(n),t)},r=s._buffer.batchPayloads(e),n.send(r),s._buffer.markAsSent(e)}function f(e,t){var n=s._senderConfig.endpointUrl(),r=s._buffer.batchPayloads(e),i=(r=new Blob([r],{type:"text/plain;charset=UTF-8"}),new Headers);Mh(n)&&i.append(Kp,Xp),Du(Uu(a),(function(e){i.append(e,a[e])})),r=new Request(n,{method:"POST",headers:i,body:r}),fetch(r).then((function(t){if(!t.ok)throw Error(t.statusText);t.text().then((function(n){c(t.status,e,t.url,e.length,t.statusText,n)})),s._buffer.markAsSent(e)})).catch((function(t){s._onError(e,t.message)}))}function m(e){try{if(e&&""!==e){var t=xc().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(t){s.diagLog().throwInternal(Fl.CRITICAL,du.InvalidBackendResponse,"Cannot parse the response. "+Hu(t),{response:e})}return null}function g(n,r){if(void 0===r&&(r=1),n&&0!==n.length){s._buffer.clearSent(n),e++;for(var i=0,o=n;i<o.length;i++){var a=o[i];s._buffer.enqueue(a)}!function(n){r=e<=1?10:(r=(Math.pow(2,e)-1)/2,r=Math.floor(Math.random()*r*10)+1,r*=n,Math.max(Math.min(r,3600),10));var r=qu()+1e3*r;t=r}(r),y()}}function y(){var e;n||(e=t?Math.max(0,t-qu()):0,e=Math.max(s._senderConfig.maxBatchInterval(),e),n=setTimeout((function(){s.triggerSend(!0,null,1)}),e))}function v(e){return 408===e||429===e||500===e||503===e}function _(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+nm(e)||!1:t}function b(e,t){var n=dc(),r=new XDomainRequest;if(r.onload=function(){return s._xdrOnLoad(r,e)},r.onerror=function(t){return s._onError(e,x(r),t)},n=n&&n.location&&n.location.protocol||"",0!==s._senderConfig.endpointUrl().lastIndexOf(n,0))return s.diagLog().throwInternal(Fl.WARNING,du.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void s._buffer.clear();n=s._senderConfig.endpointUrl().replace(/^(https?:)/,""),r.open("POST",n),n=s._buffer.batchPayloads(e),r.send(n),s._buffer.markAsSent(e)}function x(e,t){return e?"XDomainRequest,Response:"+nm(e)||!1:t}s.pause=u,s.resume=u,s.flush=function(){try{s.triggerSend(!0,null,1)}catch(u){s.diagLog().throwInternal(Fl.CRITICAL,du.FlushFailed,"flush failed, telemetry will not be collected: "+Hu(u),{exception:Ec(u)})}},s.onunloadFlush=function(){if(!1!==s._senderConfig.onunloadDisableBeacon()&&!1!==s._senderConfig.isBeaconApiDisabled()||!sh())s.flush();else try{s.triggerSend(!0,h,2)}catch(u){s.diagLog().throwInternal(Fl.CRITICAL,du.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Hu(u),{exception:Ec(u)})}},s.teardown=u,s.addHeader=function(e,t){a[e]=t},s.initialize=function(n,a,u,c){l.initialize(n,a,u,c);var p=s._getTelCtx(),m=s.identifier;r=new Zf(a.logger),e=0,t=null,s._sender=null,i=0,a=om._getDefaultAppInsightsChannelConfig(),s._senderConfig=om._getEmptyAppInsightsChannelConfig(),ku(a,(function(e,t){s._senderConfig[e]=function(){return p.getConfig(m,e,t())}})),s._buffer=s._senderConfig.enableSessionStorageBuffer()&&wh()?new vf(s.diagLog(),s._senderConfig):new yf(s._senderConfig),s._sample=new em(s._senderConfig.samplingPercentage(),s.diagLog()),function(e){return!(xu(e.disableInstrumentationKeyValidation)||!e.disableInstrumentationKeyValidation)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e.instrumentationKey)}(n)||s.diagLog().throwInternal(Fl.CRITICAL,du.InvalidInstrumentationKey,"Invalid Instrumentation key "+n.instrumentationKey),!Mh(s._senderConfig.endpointUrl())&&s._senderConfig.customHeaders()&&0<s._senderConfig.customHeaders().length&&Du(s._senderConfig.customHeaders(),(function(e){o.addHeader(e.header,e.value)})),!s._senderConfig.isBeaconApiDisabled()&&sh()?s._sender=h:(n=pc("XMLHttpRequest"))?"withCredentials"in new n?(s._sender=d,s._XMLHttpRequestSupported=!0):typeof XDomainRequest!==Cl&&(s._sender=b):pc("fetch")&&(s._sender=f)},s.processTelemetry=function(e,t){t=s._getTelCtx(t);try{if(s._senderConfig.disableTelemetry())return;if(!e)return void t.diagLog().throwInternal(Fl.CRITICAL,du.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void t.diagLog().throwInternal(Fl.CRITICAL,du.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!s._sender)return void t.diagLog().throwInternal(Fl.CRITICAL,du.SenderNotInitialized,"Sender was not initialized");if(!s._sample.isSampledIn(e))return void t.diagLog().throwInternal(Fl.WARNING,du.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:s._sample.sampleRate});e[ph]=s._sample.sampleRate;var n=om.constructEnvelope(e,s._senderConfig.instrumentationKey(),t.diagLog());if(!n)return void t.diagLog().throwInternal(Fl.CRITICAL,du.CreateEnvelopeError,"Unable to create an AppInsights envelope");var i=!1;if(e.tags&&e.tags[hh]&&(Du(e.tags[hh],(function(e){try{e&&!1===e(n)&&(i=!0,t.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(e){t.diagLog().throwInternal(Fl.CRITICAL,du.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+Hu(e),{exception:Ec(e)},!0)}})),delete e.tags[hh]),i)return;var o=r.serialize(n),a=s._buffer.getItems(),l=s._buffer.batchPayloads(a);l&&l.length+o.length>s._senderConfig.maxBatchSizeInBytes()&&s.triggerSend(!0,null,10),s._buffer.enqueue(o),y()}catch(e){t.diagLog().throwInternal(Fl.WARNING,du.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Hu(e),{exception:Ec(e)})}s.processNext(e,t)},s._xhrReadyStateChange=function(e,t,n){4===e.readyState&&c(e.status,t,e.responseURL,n,_(e),nm(e)||e.response)},s.triggerSend=function(e,r,i){void 0===e&&(e=!0);try{var a;s._senderConfig.disableTelemetry()?s._buffer.clear():0<s._buffer.count()&&(a=s._buffer.getItems(),function(e,t){var n=function(){var e="getNotifyMgr";return s.core[e]?s.core[e]():s.core._notificationManager}();if(n&&n.eventsSendRequest)try{n.eventsSendRequest(e,t)}catch(e){s.diagLog().throwInternal(Fl.CRITICAL,du.NotificationException,"send request notification failed: "+Hu(e),{exception:Ec(e)})}}(i||0,e),r?r.call(o,a,e):s._sender(a,e)),clearTimeout(n),t=n=null}catch(r){(!(e=Sc())||9<e)&&s.diagLog().throwInternal(Fl.CRITICAL,du.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+Hu(r),{exception:Ec(r)})}},s._onError=function(e,t,n){s.diagLog().throwInternal(Fl.WARNING,du.OnError,"Failed to send telemetry.",{message:t}),s._buffer.clearSent(e)},s._onPartialSuccess=function(e,t){for(var n=[],r=[],i=0,o=t.errors.reverse();i<o.length;i++){var a=o[i],l=e.splice(a.index,1)[0];(v(a.statusCode)?r:n).push(l)}0<e.length&&s._onSuccess(e,t.itemsAccepted),0<n.length&&s._onError(n,_(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),0<r.length&&(g(r),s.diagLog().throwInternal(Fl.WARNING,du.TransmissionFailed,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+r.length+" our of "+t.itemsReceived+" items"))},s._onSuccess=function(e,t){s._buffer.clearSent(e)},s._xdrOnLoad=function(t,n){var r=nm(t);!t||r+""!="200"&&""!==r?(r=m(r))&&r.itemsReceived&&r.itemsReceived>r.itemsAccepted&&!s._senderConfig.isRetryDisabled()?s._onPartialSuccess(n,r):s._onError(n,x(t)):(e=0,s._onSuccess(n,0))}})),o}var am=function(){},sm=(lm.acquisitionSpan=864e5,lm.renewalSpan=18e5,lm.cookieUpdateInterval=6e4,lm);function lm(e,t){var n,r,i=kc(t),o=hp(t);hu(lm,this,(function(t){Cu((e=e||{}).sessionExpirationMs)||(e.sessionExpirationMs=function(){return lm.acquisitionSpan}),Cu(e.sessionRenewalMs)||(e.sessionRenewalMs=function(){return lm.renewalSpan}),t.config=e;var a=t.config.sessionCookiePostfix&&t.config.sessionCookiePostfix()?t.config.sessionCookiePostfix():t.config.namePrefix&&t.config.namePrefix()?t.config.namePrefix():"";function s(e,t){var n=!1,r=", session will be reset",o=t.split("|");if(2<=o.length)try{var a=+o[1]||0,s=+o[2]||0;isNaN(a)||a<=0?i.throwInternal(Fl.WARNING,du.SessionRenewalDateIsZero,"AI session acquisition date is 0"+r):isNaN(s)||s<=0?i.throwInternal(Fl.WARNING,du.SessionRenewalDateIsZero,"AI session renewal date is 0"+r):o[0]&&(e.id=o[0],e.acquisitionDate=a,e.renewalDate=s,n=!0)}catch(e){i.throwInternal(Fl.CRITICAL,du.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(t||"")+"]"+r+" - "+Hu(e),{exception:Ec(e)})}return n}function l(e,i){var a=e.acquisitionDate;e.renewalDate=i;var s=t.config,l=s.sessionRenewalMs(),u=a+s.sessionExpirationMs()-i;e=[e.id,a,i],a=0,a=u<l?u/1e3:l/1e3,l=s.cookieDomain?s.cookieDomain():null,o.set(n(),e.join("|"),0<s.sessionExpirationMs()?a:null,l),r=i}n=function(){return"ai_session"+a},t.automaticSession=new am,t.update=function(){var e=qu(),a=!1,u=t.automaticSession;u.id||(a=!function(e){var t=!1,r=o.get(n());return(r&&Cu(r.split)||(r=function(e,t){var n=vh();if(null!==n)try{return n.getItem(t)}catch(t){gh=!1,e.throwInternal(Fl.WARNING,du.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+Hu(t),{exception:Ec(t)})}return null}(i,n())))&&(t=s(e,r)),t||!!e.id}(u));var c,p,h,d=t.config.sessionExpirationMs();!a&&0<d&&(p=t.config.sessionRenewalMs(),c=e-u.acquisitionDate,h=e-u.renewalDate,a=(a=(a=c<0||h<0)||d<c)||p<h),a?(p=e,a=((h=t.config||{}).getNewId?h.getNewId():null)||Op,t.automaticSession.id=a(h.idLength?h.idLength():22),t.automaticSession.acquisitionDate=p,l(t.automaticSession,p),xh()||i.throwInternal(Fl.WARNING,du.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")):(!r||lm.cookieUpdateInterval<e-r)&&l(u,e)},t.backup=function(){var e,r,o=t.automaticSession;e=o.id,r=o.acquisitionDate,o=o.renewalDate,function(e,t,n){var r=vh();if(null!==r)try{r.setItem(t,n)}catch(t){gh=!1,e.throwInternal(Fl.WARNING,du.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+Hu(t),{exception:Ec(t)})}}(i,n(),[e,r,o].join("|"))}}))}var um=function(){},cm=function(){this.id="browser",this.deviceClass="Browser"},pm=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.6.5"};function hm(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))}var dm=(fm.cookieSeparator="|",fm.userCookieName="ai_user",fm.authUserCookieName="ai_authUser",fm);function fm(e,t){this.isNewUser=!1;var n,r=kc(t),i=hp(t);hu(fm,this,(function(t){t.config=e;var o=t.config.userCookiePostfix&&t.config.userCookiePostfix()?t.config.userCookiePostfix():"";n=function(){return fm.userCookieName+o};var a,s=i.get(n());s&&(t.isNewUser=!1,0<(a=s.split(fm.cookieSeparator)).length&&(t.id=a[0])),t.id||(a=((l=e||{}).getNewId?l.getNewId():null)||Op,t.id=a(l.idLength?e.idLength():22),l=Ru(new Date),t.accountAcquisitionDate=l,t.isNewUser=!0,l=[t.id,l],i.set(n(),l.join(fm.cookieSeparator),31536e3),l=e.namePrefix&&e.namePrefix()?e.namePrefix()+"ai_session":"ai_session",function(e,t){var n=vh();if(null!==n)try{n.removeItem(t)}catch(t){gh=!1,e.throwInternal(Fl.WARNING,du.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+Hu(t),{exception:Ec(t)})}}(r,l)),t.accountId=e.accountId?e.accountId():void 0;var l=i.get(fm.authUserCookieName);l&&((l=(l=decodeURI(l)).split(fm.cookieSeparator))[0]&&(t.authenticatedId=l[0]),1<l.length&&l[1]&&(t.accountId=l[1])),t.setAuthenticatedUserContext=function(e,n,o){void 0===o&&(o=!1),!hm(e)||n&&!hm(n)?r.throwInternal(Fl.WARNING,du.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0):(t.authenticatedId=e,e=t.authenticatedId,n&&(t.accountId=n,e=[t.authenticatedId,t.accountId].join(fm.cookieSeparator)),o&&i.set(fm.authUserCookieName,encodeURI(e)))},t.clearAuthenticatedUserContext=function(){t.authenticatedId=null,t.accountId=null,i.del(fm.authUserCookieName)}}))}var mm=function(){},gm=function(e,t,n,r){this.traceID=e||Lp(),this.parentID=t,this.name=n,t=vc(),!n&&t&&t.pathname&&(this.name=t.pathname),this.name=$p(r,this.name)},ym="ext",vm="tags";function _m(e,t){e&&e[t]&&0===Uu(e[t]).length&&delete e[t]}var bm,xm=function e(t,n){var r=this,i=t.logger;this.appId=function(){return null},hu(e,this,(function(e){e.application=new um,e.internal=new pm(n),hc()&&(e.sessionManager=new sm(n,t),e.device=new cm,e.location=new mm,e.user=new dm(n,t),e.telemetryTrace=new gm(void 0,void 0,void 0,i),e.session=new am),e.applySessionContext=function(t,n){var r=e.session,i=e.sessionManager;r&&Ou(r.id)?Wu(Gu(t.ext,$d),"sesId",r.id):i&&i.automaticSession&&Wu(Gu(t.ext,$d),"sesId",i.automaticSession.id,Ou)},e.applyOperatingSystemContxt=function(t,n){Wu(t.ext,Qd,e.os)},e.applyApplicationContext=function(t,n){var r=e.application;r&&(Wu(t=Gu(t,vm),ef.applicationVersion,r.ver,Ou),Wu(t,ef.applicationBuild,r.build,Ou))},e.applyDeviceContext=function(t,n){var r=e.device;r&&(Wu(t=Gu(Gu(t,ym),Xd),"localId",r.id,Ou),Wu(t,"ip",r.ip,Ou),Wu(t,"model",r.model,Ou),Wu(t,"deviceClass",r.deviceClass,Ou))},e.applyInternalContext=function(t,n){var r,i=e.internal;i&&(Wu(r=Gu(t,vm),ef.internalAgentVersion,i.agentVersion,Ou),Wu(r,ef.internalSdkVersion,i.sdkVersion,Ou),t.baseType!==Tc.dataType&&t.baseType!==Ed.dataType||(Wu(r,ef.internalSnippet,i.snippetVer,Ou),Wu(r,ef.internalSdkSrc,i.sdkSrc,Ou)))},e.applyLocationContext=function(e,t){var n=r.location;n&&Wu(Gu(e,vm,[]),ef.locationIp,n.ip,Ou)},e.applyOperationContext=function(t,n){var r=e.telemetryTrace;r&&(Wu(t=Gu(Gu(t,ym),Yd,{traceID:void 0,parentID:void 0}),"traceID",r.traceID,Ou),Wu(t,"name",r.name,Ou),Wu(t,"parentID",r.parentID,Ou))},e.applyWebContext=function(e,t){var n=r.web;n&&Wu(Gu(e,ym),Jd,n)},e.applyUserContext=function(t,n){var r=e.user;r&&(Wu(Gu(t,vm,[]),ef.userAccountId,r.accountId,Ou),Wu(t=Gu(Gu(t,ym),Kd),"id",r.id,Ou),Wu(t,"authId",r.authenticatedId,Ou))},e.cleanUp=function(e,t){(e=e.ext)&&(_m(e,Xd),_m(e,Kd),_m(e,Jd),_m(e,Qd),_m(e,$d),_m(e,Yd))}}))},wm=(Bl(Sm,bm=Re),Sm.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}}},Sm);function Sm(){var e,t,n=bm.call(this)||this;return n.priority=110,n.identifier=tf,hu(Sm,n,(function(n,r){n.initialize=function(i,o,a,s){r.initialize(i,o,a,s);var l,u,c=n._getTelCtx(),p=n.identifier;s=Sm.getDefaultConfig(),t=t||{},ku(s,(function(e,n){t[e]=function(){return c.getConfig(p,e,n())}})),n.context=new xm(o,t),l=nf,u=null,Du(a,(function(e){if(e.identifier===l)return u=e,-1})),e=u,n.context.appId=function(){return e?e._appId:null},n._extConfig=t},n.processTelemetry=function(e,t){var r;xu(e)||(t=n._getTelCtx(t),e.name===Ed.envelopeType&&t.diagLog().resetInternalMessageCount(),(r=n.context||{}).session&&"string"!=typeof n.context.session.id&&r.sessionManager&&r.sessionManager.update(),function(e,t){Gu(e,"tags",[]),Gu(e,"ext",{});var r=n.context;r.applySessionContext(e,t),r.applyApplicationContext(e,t),r.applyDeviceContext(e,t),r.applyOperationContext(e,t),r.applyUserContext(e,t),r.applyOperatingSystemContxt(e,t),r.applyWebContext(e,t),r.applyLocationContext(e,t),r.applyInternalContext(e,t),r.cleanUp(e,t)}(e,t),r.user&&r.user.isNewUser&&(r.user.isNewUser=!1,r=new Tc(du.SendBrowserInfoOnUserInit,(gc()||{}).userAgent||""),t.diagLog().logInternalMessage(Fl.CRITICAL,r)),n.processNext(e,t))}})),n}var Em="properties";function Cm(e,t,n){var r=0;return t=e[t],n=e[n],t&&n?Rh(t,n):r}function Tm(e,t,n,r,i){var o=0;return(i=Cm(n,r,i))?Im(e,t,ah(i)):o}function Im(e,t,n){var r=0;return e&&t&&n&&((e.ajaxPerf=e.ajaxPerf||{})[t]=n,r=1),r}function km(e,t){var n,r=e.perfTiming,i=t[Em]||{},o=0,a="domainLookup",s="connect",l="request",u="response",c=s+"End",p=l+(g="Start"),h=u+"End",d="transferSize",f="encodedBodySize",m="decodedBodySize",g="serverTiming";r?(o|=Tm(i,"End",r,"redirectStart","End"),o|=Tm(i,a,r,"domainLookupStart","domainLookupEnd"),o|=Tm(i,s,r,"connectStart",c),o|=Tm(i,l,r,p,"requestEnd"),o|=Tm(i,u,r,"responseStart",h),o|=Tm(i,"networkConnect",r,"startTime",c),o|=Tm(i,"sentRequest",r,p,h),o|=Im(i,"duration",p=(p=r.duration)||Cm(r,"startTime",h)||0),o|=Im(i,"perfTotal",p),(p=r[g])&&(n={},Du(p,(function(e,t){r=e.name||""+t,t=t=(i=/([^\w\d_$])/g).test(t=r)?r.replace(i,"_"):t;var r,i,o=n[t]||{};ku(e,(function(e,t){("name"!==e&&Ou(t)||Lu(t))&&(!(t=o[e]?o[e]+";"+t:t)&&Ou(t)||(o[e]=t))})),n[t]=o})),o|=Im(i,g,n)),o|=Im(i,d,r[d]),o|=Im(i,f,r[f]),o|=Im(i,m,r[m])):e.perfMark&&(o|=Im(i,"missing",e.perfAttempts)),o&&(t[Em]=i)}var Pm=function(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.stateChangeAttached=!1},Am=function e(t,n,r){var i=this,o=r,a="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new Pm,i.clientFailure=0,i.traceID=t,i.spanID=n,hu(e,i,(function(e){e.getAbsoluteUrl=function(){return e.requestUrl?n=(t=kh(t=e.requestUrl))?t.href:n:null;var t,n},e.getPathName=function(){return e.requestUrl?Qp(o,(t=e.method,n=e.requestUrl,t?t.toUpperCase()+" "+n:n)):null;var t,n},e.CreateTrackItem=function(t,n,r){return e.ajaxTotalDuration=Math.round(1e3*Rh(e.requestSentTime,e.responseFinishedTime))/1e3,e.ajaxTotalDuration<0?null:((t={id:"|"+e.traceID+"."+e.spanID,target:e.getAbsoluteUrl(),name:e.getPathName(),type:t,startTime:null,duration:e.ajaxTotalDuration,success:200<=+e.status&&+e.status<400,responseCode:+e.status,method:e.method})[Em]={HttpMethod:e.method},e.requestSentTime&&(t.startTime=new Date,t.startTime.setTime(e.requestSentTime)),km(e,t),n&&0<Uu(e.requestHeaders).length&&(t[Em]=t[Em]||{},t[Em].requestHeaders=e.requestHeaders),!r||(n=r())&&((r=n.correlationContext)&&(t.correlationContext=r),n.headerMap&&0<Uu(n.headerMap).length&&(t[Em]=t[Em]||{},t[Em].responseHeaders=n.headerMap),400<=e.status&&(r=n.type,t[Em]=t[Em]||{},""!==r&&"text"!==r||(t[Em][a]=n[a]?n.statusText+" - "+n[a]:n.statusText),"json"===r&&(t[Em][a]=n.response?n.statusText+" - "+JSON.stringify(n.response):n.statusText))),t)}}))},Mm=(Om.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},Om.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},Om.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},Om.DEFAULT_TRACE_FLAG="01",Om.DEFAULT_VERSION="00",Om);function Om(e,t){this.traceFlag=Om.DEFAULT_TRACE_FLAG,this.version=Om.DEFAULT_VERSION,e&&Om.isValidTraceId(e)?this.traceId=e:this.traceId=Lp(),t&&Om.isValidSpanId(t)?this.spanId=t:this.spanId=Lp().substr(0,16)}var Lm="ai.ajxmn.",Rm="diagLog",Dm="ajaxData",zm="throwInternal",Nm="fetch",Bm=0;function Fm(e){var t="";try{xu(e)||xu(e[Dm])||xu(e[Dm].requestUrl)||(t+="(url: '"+e[Dm].requestUrl+"')")}catch(e){}return t}function jm(e,t,n,r,i){e[Rm]()[zm](Fl.CRITICAL,t,n,r,i)}function Um(e,t,n,r,i){e[Rm]()[zm](Fl.WARNING,t,n,r,i)}function Vm(e,t,n){return function(r){jm(e,t,n,{ajaxDiagnosticsMessage:Fm(r.inst),exception:Ec(r.err)})}}function qm(e,t){return e&&t?e.indexOf(t):-1}var Hm,Wm,Gm=(Bl(Zm,Hm=Re),Zm.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:uh.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]}},Zm.getEmptyConfig=function(){var e=this.getDefaultConfig();return ku(e,(function(t){e[t]=void 0})),e},Zm.prototype.processTelemetry=function(e,t){this.processNext(e,t)},Zm.identifier="AjaxDependencyPlugin",Zm);function Zm(){var e=Hm.call(this)||this;e.identifier=Zm.identifier,e.priority=120;var t,n,r,i,o,a="trackDependencyDataInternal",s=vc(),l=!1,u=!1,c=s&&s.host&&s.host.toLowerCase(),p=Zm.getEmptyConfig(),h=!1,d=0,f=!1,m=0,g=!1,y=[],v={};return hu(Zm,e,(function(e,s){function _(e){var t=!0;return(e||p.ignoreHeaders)&&Du(p.ignoreHeaders,(function(n){if(n.toLowerCase()===e.toLowerCase())return t=!1,-1})),t}function b(e,t,n){y.push((t=t,n=n,(e=e)?Vp(e[Tl],t,n,!1):null))}function x(e,t,n){var r=!1,i=((Ou(t)?t:(t||{}).url||"")||"").toLowerCase();if(Du(o,(function(e){var t=e;Ou(e)&&(t=new RegExp(e)),r=r||t.test(i)})),r)return r;var a=qm(i,"?"),s=qm(i,"#");return-1!==(a=-1===a||-1!==s&&s<a?s:a)&&(i=i.substring(0,a)),xu(e)?xu(t)||(r="object"==typeof t&&!0===t[ch]||!!n&&!0===n[ch]):r=!0===e[ch]||!0===i[ch],r?v[i]||(v[i]=1):v[i]&&(r=!0),r}function w(e,t){var n=!0,r=u;return xu(e)||(n=!0===t||!xu(e[Dm])),r&&n}function S(e,t){var n;t.requestUrl&&i&&f&&(n=_c())&&Cu(n.mark)&&(e=i+e+"#"+ ++Bm,n.mark(e),(e=n.getEntriesByName(e))&&1===e.length&&(t.perfMark=e[0]))}function E(e,t,n,r){var i=t.perfMark,o=_c(),a=p.maxAjaxPerfLookupAttempts,s=p.ajaxPerfLookupDelay,l=t.requestUrl,u=0;!function c(){try{if(o&&i){u++;for(var p=null,h=o.getEntries(),d=h.length-1;0<=d;d--){var f=h[d];if(f){if("resource"===f.entryType)f.initiatorType!==e||-1===qm(f.name,l)&&-1===qm(l,f.name)||(p=f);else if("mark"===f.entryType&&f.name===i.name){t.perfTiming=p;break}if(f.startTime<i.startTime-1e3)break}}}!i||t.perfTiming||a<=u||!1===t.async?(i&&Cu(o.clearMarks)&&o.clearMarks(i.name),t.perfAttempts=u,n()):setTimeout(c,s)}catch(c){r(c)}}()}function C(t){var n="";try{xu(t)||(n+="string"==typeof t?"(url: '"+t+"')":"(url: '"+t.url+"')")}catch(t){jm(e,du.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:Ec(t)})}return n}function T(t,n,r,i,o){function s(t,n,i){(i=i||{}).fetchDiagnosticsMessage=C(r),n&&(i.exception=Ec(n)),Um(e,t,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",i)}i&&(i.responseFinishedTime=Lh(),i.status=n,E("fetch",i,(function(){var t=i.CreateTrackItem("Fetch",h,o);t?e[a](t):s(du.FailedMonitorAjaxDur,null,{requestSentTime:i.requestSentTime,responseFinishedTime:i.responseFinishedTime})}),(function(e){s(du.FailedMonitorAjaxGetCorrelationHeader,e,null)})))}e.initialize=function(c,d,v,I){if(!e.isInitialized()){s.initialize(c,d,v,I);var k=e._getTelCtx();if(ku(Zm.getDefaultConfig(),(function(e,t){p[e]=k.getConfig(Zm.identifier,e,t)})),I=p.distributedTracingMode,h=p.enableRequestHeaderTracking,f=p.enableAjaxPerfTracking,m=p.maxAjaxCallsPerView,g=p.enableResponseHeaderTracking,o=p.excludeRequestFromAutoTrackingPatterns,r=I===uh.AI||I===uh.AI_AND_W3C,n=I===uh.AI_AND_W3C||I===uh.W3C,f&&(M=c.instrumentationKey||"unkwn",i=5<M.length?Lm+M.substring(M.length-5)+".":Lm+M+"."),!1===p.disableAjaxTracking&&(!function(e){var t=!1;typeof XMLHttpRequest===Cl||xu(XMLHttpRequest)||(t=!(xu(n=XMLHttpRequest[Tl])||xu(n.open)||xu(n.send)||xu(n.abort)));var n=Sc();if(t=!(n&&n<9)&&t)try{(new XMLHttpRequest)[Dm]={};var r=XMLHttpRequest[Tl].open;XMLHttpRequest[Tl].open=r}catch(n){t=!1,jm(e,du.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:Ec(n)})}return t}(e)||u||(b(XMLHttpRequest,"open",{req:function(n,r,i,o){var s=n.inst,l=s[Dm];x(s,i)||!w(s,!0)||l&&l.xhrMonitoringState.openDone||(n=s,l=r,s=i,r=o,i=t&&t.telemetryTrace&&t.telemetryTrace.traceID||Lp(),o=Lp().substr(0,16),(o=new Am(i,o,e[Rm]())).method=l,o.requestUrl=s,o.xhrMonitoringState.openDone=!0,o.requestHeaders={},o.async=r,n[Dm]=o,function(t){t[Dm].xhrMonitoringState.stateChangeAttached=Rp.Attach(t,"readystatechange",(function(){try{t&&4===t.readyState&&w(t)&&((s=(o=t)[Dm]).responseFinishedTime=Lh(),s.status=o.status,E("xmlhttprequest",s,(function(){try{var t=s.CreateTrackItem("Ajax",h,(function(){var t,n,r={statusText:o.statusText,headerMap:null,correlationContext:function(t){try{var n=t.getAllResponseHeaders();if(null!==n&&-1!==qm(n.toLowerCase(),Yp)){var r=t.getResponseHeader(qp);return Oh.getCorrelationContext(r)}}catch(n){Um(e,du.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:Fm(t),exception:Ec(n)})}}(o),type:o.responseType,responseText:function(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(e){}return null}(o),response:o.response};return!g||(t=o.getAllResponseHeaders())&&(t=Bu(t).split(/[\r\n]+/),n={},Du(t,(function(e){e=(t=e.split(": ")).shift();var t=t.join(": ");_(e)&&(n[e]=t)})),r.headerMap=n),r}));t?e[a](t):i(null,{requestSentTime:s.requestSentTime,responseFinishedTime:s.responseFinishedTime})}finally{try{o[Dm]=null}catch(t){}}}),(function(e){i(e,null)})))}catch(n){var r=Ec(n);r&&-1!==qm(r.toLowerCase(),"c00c023f")||jm(e,du.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:Fm(t),exception:r})}function i(t,n){(n=n||{}).ajaxDiagnosticsMessage=Fm(o),t&&(n.exception=Ec(t)),Um(e,du.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",n)}var o,s}))}(n))},hkErr:Vm(e,du.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),b(XMLHttpRequest,"send",{req:function(t,n){var r=t.inst;t=r[Dm],w(r)&&!t.xhrMonitoringState.sendDone&&(S("xhr",t),t.requestSentTime=Lh(),e.includeCorrelationHeaders(t,void 0,void 0,r),t.xhrMonitoringState.sendDone=!0)},hkErr:Vm(e,du.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),b(XMLHttpRequest,"abort",{req:function(e){var t=e.inst;e=t[Dm],w(t)&&!e.xhrMonitoringState.abortDone&&(e.aborted=1,e.xhrMonitoringState.abortDone=!0)},hkErr:Vm(e,du.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),h&&b(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){w(e=e.inst)&&_(t)&&(e[Dm].requestHeaders[t]=n)},hkErr:Vm(e,du.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),u=!0)),(c=function(){var e=Ll();return!e||xu(e.Request)||xu(e.Request[Tl])||xu(e[Nm])?null:e[Nm]}())&&(M=Ll(),O=c.polyfill,!1===p.disableFetchTracking?(y.push(Vp(M,Nm,{req:function(n,r,i){var o,a;!l||x(null,r,i)||O&&u||(o=n.ctx(),a=function(n,r){var i=t&&t.telemetryTrace&&t.telemetryTrace.traceID||Lp(),o=Lp().substr(0,16);(i=new Am(i,o,e[Rm]())).requestSentTime=Lh(),n instanceof Request?i.requestUrl=n?n.url:"":i.requestUrl=n,o="GET",r&&r.method?o=r.method:n&&n instanceof Request&&(o=n.method),i.method=o;var a={};return h&&new Headers((r?r.headers:0)||n instanceof Request&&n.headers||{}).forEach((function(e,t){_(t)&&(a[t]=e)})),i.requestHeaders=a,S("fetch",i),i}(r,i),(r=e.includeCorrelationHeaders(a,r,i))!==i&&n.set(1,r),o.data=a)},rsp:function(t,n){var r=t.ctx().data;r&&(t.rslt=t.rslt.then((function(t){return T(0,(t||{}).status,t,r,(function(){var n,r={statusText:t.statusText,headerMap:null,correlationContext:function(t){if(t&&t.headers)try{var n=t.headers.get(qp);return Oh.getCorrelationContext(n)}catch(n){Um(e,du.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:C(t),exception:Ec(n)})}}(t)};return g&&(n={},t.headers.forEach((function(e,t){_(t)&&(n[t]=e)})),r.headerMap=n),r})),t})).catch((function(e){throw T(0,0,n,r,null,e.message),e})))},hkErr:Vm(e,du.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),l=!0):O&&y.push(Vp(M,Nm,{req:function(e,t,n){x(null,t,n)}})),O&&(M[Nm].polyfill=O)),0<v.length&&v){for(var P=void 0,A=0;!P&&A<v.length;)v[A]&&v[A].identifier===tf&&(P=v[A]),A++;P&&(t=P.context)}}var M,O},e.teardown=function(){Du(y,(function(e){e.rm()})),u=l=!(y=[]),e.setInitialized(!1)},e.trackDependencyData=function(t,n){e[a](t,n)},e.includeCorrelationHeaders=function(i,o,a,s){var l,u,d,f=e._currentWindowHost||c;return o?(Oh.canIncludeCorrelationHeader(p,i.getAbsoluteUrl(),f)&&((a=a||{}).headers=new Headers(a.headers||o instanceof Request&&o.headers||{}),r&&(l="|"+i.traceID+"."+i.spanID,a.headers.set(Gp,l),h&&(i.requestHeaders[Gp]=l)),(u=p.appId||t&&t.appId())&&(a.headers.set(qp,Wp+u),h&&(i.requestHeaders[qp]=Wp+u)),n&&(d=new Mm(i.traceID,i.spanID),a.headers.set(Zp,d.toString()),h&&(i.requestHeaders[Zp]=d.toString()))),a):s?(Oh.canIncludeCorrelationHeader(p,i.getAbsoluteUrl(),f)&&(r&&(l="|"+i.traceID+"."+i.spanID,s.setRequestHeader(Gp,l),h&&(i.requestHeaders[Gp]=l)),(u=p.appId||t&&t.appId())&&(s.setRequestHeader(qp,Wp+u),h&&(i.requestHeaders[qp]=Wp+u)),n&&(d=new Mm(i.traceID,i.spanID),s.setRequestHeader(Zp,d.toString()),h&&(i.requestHeaders[Zp]=d.toString()))),s):void 0},e[a]=function(t,n,r){-1===m||d<m?(p.distributedTracingMode!==uh.W3C&&p.distributedTracingMode!==uh.AI_AND_W3C||"string"!=typeof t.id||"."===t.id[t.id.length-1]||(t.id+="."),xu(t.startTime)&&(t.startTime=new Date),r=Gd.create(t,Id.dataType,Id.envelopeType,e[Rm](),n,r),e.core.track(r)):d===m&&jm(e,du.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0),++d}})),e}var Km=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],Xm=(Ym.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},Ym.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},Ym.prototype.trackPageView=function(e){this.appInsights.trackPageView(e||{})},Ym.prototype.trackPageViewPerformance=function(e){this.appInsights.trackPageViewPerformance(e||{})},Ym.prototype.trackException=function(e){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},Ym.prototype._onerror=function(e){this.appInsights._onerror(e)},Ym.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},Ym.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},Ym.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},Ym.prototype.stopTrackPage=function(e,t,n,r){this.appInsights.stopTrackPage(e,t,n,r)},Ym.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},Ym.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},Ym.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},Ym.prototype.setAuthenticatedUserContext=function(e,t,n){this.properties.context.user.setAuthenticatedUserContext(e,t,n=void 0!==n&&n)},Ym.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},Ym.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},Ym.prototype.flush=function(e){var t=this;void 0===e&&(e=!0),Rc(this.core,(function(){return"AISKU.flush"}),(function(){Du(t.core.getTransmissionControls(),(function(t){Du(t,(function(t){t.flush(e)}))}))}),null,e)},Ym.prototype.onunloadFlush=function(e){void 0===e&&(e=!0),Du(this.core.getTransmissionControls(),(function(t){Du(t,(function(t){t.onunloadFlush?t.onunloadFlush():t.flush(e)}))}))},Ym.prototype.loadAppInsights=function(e,t,n){var r=this,i=this;return(e=void 0!==e&&e)&&i.config.extensions&&0<i.config.extensions.length&&Xu("Extensions not allowed in legacy mode"),Rc(i.core,(function(){return"AISKU.loadAppInsights"}),(function(){var o,a=[];a.push(i._sender),a.push(i.properties),a.push(i.dependencies),a.push(i.appInsights),i.core.initialize(i.config,a,t,n),i.context=i.properties.context,Wm&&i.context&&(i.context.internal.sdkSrc=Wm),(o=i.snippet)&&(a="",xu(i._snippetVersion)||(a+=i._snippetVersion),e&&(a+=".lg"),i.context&&i.context.internal&&(i.context.internal.snippetVer=a||"-"),ku(i,(function(e,t){Ou(e)&&!Cu(t)&&e&&"_"!==e[0]&&-1===Km.indexOf(e)&&(o[e]=t)}))),i.emptyQueue(),i.pollInternalLogs(),i.addHousekeepingBeforeUnload(r)})),i},Ym.prototype.updateSnippetDefinitions=function(e){Yu(e,this,(function(e){return e&&-1===Km.indexOf(e)}))},Ym.prototype.emptyQueue=function(){try{if(Au(this.snippet.queue)){for(var e=this.snippet.queue.length,t=0;t<e;t++)(0,this.snippet.queue[t])();this.snippet.queue=void 0,delete this.snippet.queue}}catch(e){e&&Cu(e.toString)&&e.toString()}},Ym.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},Ym.prototype.addHousekeepingBeforeUnload=function(e){var t,n;(hc()||fc())&&(t=function(){e.onunloadFlush(!1),Du(e.appInsights.core._extensions,(function(e){if(e.identifier===tf)return e&&e.context&&e.context._sessionManager&&e.context._sessionManager.backup(),-1}))},e.appInsights.config.disableFlushOnBeforeUnload||(n=Mp("beforeunload",t),n=Mp("unload",t)||n,n=Mp("pagehide",t)||n,(n=Mp("visibilitychange",t)||n)||(n=gc())&&n.product&&"ReactNative"===n.product||e.appInsights.core.logger.throwInternal(Fl.CRITICAL,du.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")),e.appInsights.config.disableFlushOnUnload||(Mp("pagehide",t),Mp("visibilitychange",t)))},Ym.prototype.getSender=function(){return this._sender},Ym.prototype.getSKUDefaults=function(){this.config.diagnosticLogInterval=this.config.diagnosticLogInterval&&0<this.config.diagnosticLogInterval?this.config.diagnosticLogInterval:1e4},Ym);function Ym(e){this._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var t,n,r=e.config||{};r.connectionString&&(n=(t=Bh(r.connectionString)).ingestionendpoint,r.endpointUrl=n?n+"/v2/track":r.endpointUrl,r.instrumentationKey=t.instrumentationkey||r.instrumentationKey),this.appInsights=new ff,this.properties=new wm,this.dependencies=new Gm,this.core=new wp,this._sender=new im,this.snippet=e,this.config=r,this.getSKUDefaults()}!function(){var e=null,t=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(e=n.src)}catch(e){}if(e)try{var r=e.toLowerCase();if(r)for(var i="",o=0;o<t.length;o++)if(-1!==r.indexOf(t[o])){i="cdn"+(o+1),-1===r.indexOf("/scripts/")&&(-1!==r.indexOf("/next/")?i+="-next":-1!==r.indexOf("/beta/")&&(i+="-beta")),Wm=i+"";break}}catch(e){}}();var Jm=($m.prototype.trackEvent=function(e,t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackEvent(e,t)},$m.prototype.setAuthenticatedUserContext=function(e,t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.setAuthenticatedUserContext(e,t)},$m.prototype.trackException=function(e){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackException(e)},$m.prototype.flush=function(e){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.flush(e)},$m);function $m(e){this.options=e,!this.options.disableTelemetry&&h&&(this.appInsights=new Xm({config:{instrumentationKey:h,disableExceptionTracking:!0,disableAjaxTracking:!0,isCookieUseDisabled:!0,maxBatchInterval:5e3}}),this.appInsights.loadAppInsights(),this.appInsights.addTelemetryInitializer((function(e){e.tags[ef.applicationVersion]=X.getFullVersion()})))}var Qm,eg=(R(tg,Qm=U),tg);function tg(){var e=null!==Qm&&Qm.apply(this,arguments)||this;return e.copyrightMessage=void 0,e.copyrightContent=void 0,e.customAttribution=void 0,e.showFeedbackLink=!0,e.showLogo=!0,e}var ng,rg=(R(ig,ng=ue),ig.prototype.onAdd=function(e){return this.container=this.buildContainer(e,t.ControlStyle.auto),this.container.className="map-copyright",this.copyrightDiv=this.buildCopyrightDiv(),this.copyrightDiv.className="azure-map-copyright",this.container.appendChild(this.copyrightDiv),this.options.showLogo&&this.addRemoveLogo(!0),this.options.showFeedbackLink&&this.addRemoveFeedbackDiv(!0),this.container},ig.prototype.onRemove=function(){ng.prototype.onRemove.call(this),delete this.container},ig.prototype.setOptions=function(e){var t=this,n=(new eg).merge(this.options,e);n.copyrightMessage===this.options.copyrightMessage&&n.customAttribution===this.options.customAttribution||(this.copyrightDiv.innerText=this.textAttribution(n)),n.copyrightContent!==this.options.copyrightContent&&(this.options.copyrightContent&&(e=Array.from(this.copyrightDiv.children).find((function(e){return e===t.options.copyrightContent})),this.copyrightDiv.removeChild(e)),0<this.copyrightDiv.childNodes.length?this.copyrightDiv.insertBefore(n.copyrightContent,this.copyrightDiv.childNodes[0]):this.copyrightDiv.appendChild(n.copyrightContent),this.options.copyrightContent=n.copyrightContent),!n.showLogo&&this.logoAnchor?this.addRemoveLogo(!1):n.showLogo&&!this.logoAnchor&&this.addRemoveLogo(!0),!n.showFeedbackLink&&this.feedbackAnchor?this.addRemoveFeedbackDiv(!1):n.showFeedbackLink&&!this.feedbackAnchor&&this.addRemoveFeedbackDiv(!0),this.options=n},ig.prototype.getDefaultAttributions=function(){var e=(new Date).getFullYear(),t=["\xa9"+e+" TomTom"];return this.options.showLogo||t.push("\xa9"+e+" Microsoft"),t},ig.prototype.buildCopyrightDiv=function(){var e=document.createElement("div");return e.innerText=this.textAttribution(this.options)||"",e},ig.prototype.buildFeedbackLink=function(){var e=document.createElement("a");return e.setAttribute("alt","Give Feedback"),e.setAttribute("aria-label","Give Feedback"),e.href="https://feedback.azuremaps.com",e.target="_blank",e.rel="noopener",e.className="azure-map-feedback",e},ig.prototype.addRemoveFeedbackDiv=function(e){e?(this.feedbackAnchor=this.buildFeedbackLink(),this.tooltip=J("Give Feedback"),this.container.appendChild(this.feedbackAnchor),this.container.appendChild(this.tooltip),$(this.tooltip,this.feedbackAnchor)):(this.feedbackAnchor.remove(),this.tooltip.remove(),delete this.tooltip,delete this.feedbackAnchor)},ig.prototype.addRemoveLogo=function(e){e?(this.logoAnchor=document.createElement("a"),this.logoAnchor.className="azure-map-logo",this.logoAnchor.href="https://microsoft.com",this.logoAnchor.setAttribute("aria-label","Microsoft"),this.container.appendChild(this.logoAnchor),this.logoTooltip=J("Visit microsoft.com"),this.container.appendChild(this.logoTooltip),$(this.logoTooltip,this.logoAnchor)):(this.logoAnchor.remove(),this.logoTooltip.remove(),delete this.logoAnchor)},ig);function ig(e){var t=ng.call(this)||this;return t.textAttribution=function(e){return[t.options.copyrightMessage,t.options.customAttribution].filter((function(e){return e})).join("")},t.options=(new eg).merge(e),t}var og=(ag.throwOnError=function(e,t){function n(e){throw r.off("error",n),e.error}var r=e instanceof dv?e._getMap():e;return r.on("error",n),t=t(),r.off("error",n),t},ag.tryCatch=function(e,t,n,r){try{return this.throwOnError(e,t)}catch(e){return n(e)}finally{"function"==typeof r&&r()}},ag.tryFinally=function(e,t,n){try{return this.throwOnError(e,t)}finally{n()}},ag);function ag(){}var sg=(lg.prototype.request=function(e){return e={domain:this.map.getServiceOptions().domain,path:"search/address/reverse/json",queryParams:D({"api-version":"1.0",language:e.style.language,limit:1,query:_i(e.position[1])+","+bi(e.position[0])},e.style.view&&{view:e.style.view})},new G(this.map.authentication.signRequest(e)).get()},lg);function lg(e){this.map=e}var ug=(cg.prototype.cache=function(e,t,n,r){r=e+"_"+n[0]+"_"+n[1]+"_"+r,this._labelIdx[t.labelType]||(this._labelIdx[t.labelType]=[],this._labelCache[t.labelType]=[]),-1===this._labelIdx[t.labelType].indexOf(r)&&(this._labelCache[t.labelType].push({name:e,radius:t.radius,minZoom:t.minZoom,maxZoom:t.maxZoom||24,position:n}),this._labelIdx[t.labelType].push(r))},cg.prototype.getNearestLabel=function(e,t,n){var r=null,i=this._labelCache[e];if(i)for(var o,a=1/0,s=0,l=i.length;s<l;s++)n>=i[s].minZoom&&n<=i[s].maxZoom&&(o=pi(i[s].position,t))<=i[s].radius&&o<=a&&(a=o,r=i[s]);return r},cg.prototype._preloadCache=function(e){if(!this._preloadedCache.has(e)){this._preloadedCache.add(e);var t={source:["Ocean label","Ocean name"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["Ocean","Ocean or sea"]},n=e,r=n.indexOf("-");switch(n=-1!==r?n.substr(0,r):n){case"fr":this.cache("Oc\xe9an Pacifique",t,[-170,32],e),this.cache("Oc\xe9an Pacifique",t,[-138,-27],e),this.cache("Oc\xe9an Atlantique",t,[-40,32],e),this.cache("Oc\xe9an Atlantique",t,[-17,-29],e);break;case"es":this.cache("Oc\xe9an Pacifique",t,[-170,32],e),this.cache("Oc\xe9an Pacifique",t,[-138,-27],e),this.cache("Oc\xe9ano Atl\xe1ntico",t,[-40,32],e),this.cache("Oc\xe9ano Atl\xe1ntico",t,[-17,-29],e);break;case"pt":this.cache("Oceano Pac\xedfico",t,[-170,32],e),this.cache("Oceano Pac\xedfico",t,[-138,-27],e),this.cache("Oceano Atl\xe2ntico",t,[-40,32],e),this.cache("Oceano Atl\xe2ntico",t,[-17,-29],e);break;case"ja":this.cache("\u592a\u5e73\u6d0b",t,[-170,32],e),this.cache("\u592a\u5e73\u6d0b",t,[-138,-27],e);break;case"en":this.cache("Pacific Ocean",t,[-170,32],e),this.cache("Pacific Ocean",t,[-138,-27],e),this.cache("Atlantic Ocean",t,[-40,32],e),this.cache("Atlantic Ocean",t,[-17,-29],e),this.cache("Indian Ocean",t,[77,-26],e)}}},cg);function cg(){this._labelCache={},this._labelIdx={},this._preloadedCache=new Set}var pg=(hg.prototype.dispose=function(){this._disposed=!0,this._map._getMap().off("move",this._onMove),this._map._getMap().off("moveend",this._onMoveEnd),this._map._getMap().off("styledata",this._onStyleData),this._map._getMap().off("rotate",this._onRotate),this._map.getCanvas().removeEventListener("mousedown",this._onPointerDown),this._map.getCanvas().removeEventListener("touchstart",this._onPointerDown),this._map.getMapContainer().removeEventListener("keydown",this._shortcutListener)},hg.prototype._getEventPos=function(e){if("touches"in e){var t=e.touches[0],n=e.target.getBoundingClientRect();return[t.pageX-n.left,t.pageY-n.top]}return[e.offsetX,e.offsetY]},hg.prototype._checkThresholds=function(e,t){return this._checkZoomThreshold(e.zoom,t.zoom)||this._checkPitchThreshold(e.pitch,t.pitch)||this._checkLocThreshold(e.center,t.center)||this._checkHeadingThreshold(e.bearing,t.bearing)},hg.prototype._checkZoomThreshold=function(e,t){return this._round(e)!==this._round(t)},hg.prototype._checkPitchThreshold=function(e,t){return Math.abs(e-t)>=this._pitchThreshold},hg.prototype._checkLocThreshold=function(e,t){return e=(t=F(this._map.positionsToPixels([t,e]),2))[0],t=t[1],Or.getDistance(e,t)>=this._moveThreshold},hg.prototype._checkHeadingThreshold=function(e,t){return e<0&&(e+=360),t<0&&(t+=360),(t=180<(t=Math.abs(e-t))?360-t:t)>=this._headingThreshold},hg.prototype._getLocDesc=function(e,t,n){return z(this,void 0,void 0,(function(){var r,i,o,a,s,l,u,c,p,h=this;return N(this,(function(d){switch(d.label){case 0:return"blank"===n?[3,3]:this._map._getMap().loaded()?[3,2]:[4,new Promise((function(e){return h._map._getMap().once("idle",e)}))];case 1:d.sent(),d.label=2;case 2:for(r={},i=this._map.positionsToPixels([e.center])[0],og.tryCatch(this._map,(function(){o=h._map._getMap().queryRenderedFeatures(i,{layers:h._polygonStyleLayer,filter:["==",["geometry-type"],"Polygon"]})}),(function(){})),a=null,o&&0<o.length&&(a=o[0]),s=null,l=0,u=this._lableConfig.length;l<u;l++)c=this._lableConfig[l],e.zoom>=c.minZoom?c.polygonSources?a&&-1!==c.polygonSources.indexOf(a.layer["source-layer"])?(s=c.labelType,this._getClosestLabel(c,e,t,r,!1)):this._getClosestLabel(c,e,t,r,!0):this._getClosestLabel(c,e,t,r,!1):this._getClosestLabel(c,e,t,r,!0);return 8<=e.zoom&&this._processRoads(r,e,t),this._labelCache.forEach((function(t){r[t]||(p=null,(p="water"!==t&&"majorPoi"!==t||t===s?hg._labelCache.getNearestLabel(t,e.center,e.zoom):p)&&(r[t]=p.name))})),[2,this._processLocInfo(e,s,r,!0,this._restFallback)];case 3:return[2,this._processLocInfo(e,null,null,!1,!1)]}}))}))},hg.prototype._getHeadingDesc=function(e){var t=e.bearing;switch(t<0&&(t+=360),t=this._round(t,this._headingThreshold)){case 0:case 360:return"north";case 45:return"north east";case 90:return"east";case 135:return"south east";case 180:return"south";case 225:return"south west";case 270:return"west";case 315:return"north west";default:return t+" degrees"}},hg.prototype._getClosestLabel=function(e,t,n,r,i){for(var o=e.radius,a=0,s=e.source.length;a<s;a++){var l={sourceLayer:e.source[a]},u=this._map._getMap().querySourceFeatures(this._baseVectorTileSourceId,l),c=null,p=1/0,h=this._labelCache.has(e.labelType);if(!i||h)for(var d=0,f=u.length;d<f;d++){var m,g="Point"===u[d].geometry.type?u[d]:Di(t.center,u[d].geometry);i||(m="Point"===u[d].geometry.type?pi(t.center,g.geometry.coordinates):g.properties.distance)<p&&(p=m,c=u[d]),h&&hg._labelCache.cache(u[d].properties.name,e,g.geometry.coordinates,n)}i||(l=e.labelType+"Dis",c&&p<=o&&("number"!=typeof r[l]||p<=r[l])&&(r[e.labelType]=c.properties.name,r[l]=p))}},hg.prototype._processRoads=function(e,t,n,r){var i=this._map._getMap().queryRenderedFeatures(r,{filter:["==",["geometry-type"],"LineString"]});if(i){for(var o,a=void 0,s=void 0,l=void 0,u=void 0,c=0,p=i.length;c<p;c++)this._roadLayers.has(i[c].layer["source-layer"])&&i[c].properties.name&&""!==i[c].properties.name&&(o=Di(t.center,i[c]),(!l||o.properties.distance<l.properties.distance)&&(a&&i[c].properties.name===a.properties.name?l=o:a&&i[c].properties.name===a.properties.name?(!u||o.properties.distance<u.properties.distance)&&(u=o,s=i[c]):(u=l,s=a,l=o,a=i[c])));a&&(e.country||(e.country=a.properties.country_code,e.countryDis=0,hg._labelCache.cache(e.country,{source:["Country name"],labelType:"country",radius:5e3,minZoom:0},l.geometry.coordinates,n)),e.state||(e.state=a.properties.country_subdivision,e.stateDis=0,hg._labelCache.cache(e.state,{source:["State name"],labelType:"state",radius:5e3,minZoom:4},l.geometry.coordinates,n)),15<=t.zoom&&(r=this._map.positionsToPixels([t.center,l.geometry.coordinates]),(Or.getDistance(r[0],r[1])<this._roadPixelRadius||l.properties.distance<this._minRoadDistance)&&(e.road=a.properties.name),s&&(n=this._map.positionsToPixels([u.geometry.coordinates]),(Or.getDistance(r[0],n[0])<this._minIntersectionPixelDistance||u.properties.distance<this._minRoadDistance)&&(e.secondRoad=s.properties.name,e.secondRoadDis=u.properties.distance))))}},hg.prototype._getActionDesc=function(e){if(this._lastCam){var t,n,r=[];return this._checkLocThreshold(e.center,this._lastCam.center)&&(n=["panned"],0===(t=Math.round(fi(this._lastCam.center,e.center)))||360===t?n.push("north"):t<90?n.push("north east"):90===t?n.push("east"):t<180?n.push("south east"):180===t?n.push("south"):t<270?n.push("south west"):270===t?n.push("west"):t<360&&n.push("north west"),t=pi(this._lastCam.center,e.center,Fr.meters),n.push(1e3<t?li(t/1e3,2)+" kilometers":li(t,2)+" meters"),r.push(n.join(" "))),this._checkZoomThreshold(e.zoom,this._lastCam.zoom)&&((n=["zoomed"]).push(this._lastCam.zoom<e.zoom?"in":"out"),1<=(t=Math.abs(this._lastCam.zoom-e.zoom))&&(t=Math.ceil(t),n.push(1<t?t+" levels":t+" level")),this._getCanonicalZoom(this._lastCam.zoom)!==this._getCanonicalZoom(e.zoom)&&n.push("to "+this._getCanonicalZoom(e.zoom)+" level"),e.zoom>=e.maxZoom&&n.push("Zoom In button disabled, maximum zoom level reached"),t=Zi.getSouth(e.bounds)<=-Kr&&Zi.getNorth(e.bounds)>=Kr,(e.zoom<=e.minZoom||t)&&n.push("Zoom Out button disabled, minimum zoom level reached"),r.push(n.join(" "))),this._checkPitchThreshold(e.pitch,this._lastCam.pitch)&&(n=this._round(e.pitch,this._pitchThreshold),r.push("pitched to "+n+" degrees"),60!==e.pitch&&0!==e.pitch||(n=60===e.pitch?"maximum":"minimum",r.push("reached "+n+" of "+e.pitch+" degrees"))),this._checkHeadingThreshold(this._lastCam.bearing,e.bearing)&&r.push("rotated to "+this._getHeadingDesc(e)),r.join(" and ")||null}return null},hg.prototype._getCanonicalZoom=function(e){return(e=this._round(e))<2?"world":e<5?"country":e<11?"state province":e<15?"city":"street"},hg.prototype._processLocInfo=function(e,t,n,r,i){var o=this;return new Promise((function(a,s){var l=[];if(r){var u=[];if(n&&(t&&("water"===t&&n.water?u.push(n.water):"majorPoi"===t&&n.majorPoi&&u.push(n.majorPoi)),0===u.length&&(n.majorPoi&&8<=e.zoom?u.push(n.majorPoi):(n.poi&&14<=e.zoom?u.push(n.poi):n.road&&15<=e.zoom&&(n.secondRoad?u.push(n.road+" & "+n.secondRoad):u.push(n.road)),n.neighbourhood&&12<=e.zoom&&u.push(n.neighbourhood),n.city&&6<=e.zoom&&u.push(n.city)),n.state&&4<=e.zoom&&u.push(n.state),0===u.length?n.water?u.push(n.water):n.country&&u.push(n.country):1===u.length&&n.state&&4<=e.zoom&&n.country&&u.push(n.country))),0<u.length)l.push("<p>Location: ",u.join(", "),".</p>");else if(i&&"water"!==t)return void o._reverseGeocodeDescription(e).then((function(e){a(e)}),(function(){s("<p>Location: unknown</p>")}))}o._returnDetailedDescriptions&&(l.push("<p>Zoom: ",li(e.zoom,2),".</p>"),l.push("<p>Latitude: ",li(e.center[1],5),".</p>"),l.push("<p>Longitude: ",li(e.center[0],5),".</p>")),a(l.join(""))}))},hg.prototype._reverseGeocodeDescription=function(e){var t=this;return new Promise((function(n){var r=t._map.getStyle();t._reverseSearch.request({position:e.center,style:r}).then((function(i){var o={};i&&i.addresses&&0<i.addresses.length&&i.addresses[0].address&&((i=i.addresses[0].address).country&&(o.country=i.country,hg._labelCache.cache(o.country,{source:["Country name"],labelType:"country",radius:5e3,minZoom:0},e.center,r.language)),i.countrySubdivision&&(o.state=i.countrySubdivision,hg._labelCache.cache(o.state,{source:["State name"],labelType:"state",radius:5e3,minZoom:4},e.center,r.language)),i.municipality&&(o.city=i.municipality,hg._labelCache.cache(o.state,{source:["Small city"],labelType:"city",radius:1e3,minZoom:10},e.center,r.language)),i.streetNameAndNumber?o.road=i.streetNameAndNumber:i.street&&(o.road=i.street)),t._processLocInfo(e,null,o,!0,!1).then((function(e){n(e)}))}),(function(r){t._processLocInfo(e,null,null,!0,!1).then((function(e){n(e)}))})).catch((function(r){t._processLocInfo(e,null,null,!0,!1).then((function(e){n(e)}))}))}))},hg.prototype._round=function(e,t){return void 0===t&&(t=1),Math.round(e/t)*t},hg);function hg(e,t){var n=this;this._disposed=!1,this._lastHeadingTime=0,this._actionQueue=[],this._pointerUpdateDelay=3e3,this._camUpdateDelay=1e3,this._headUpdateLimit=1e3,this._controlEventDelay=500,this._moveThreshold=25,this._headingThreshold=5,this._pitchThreshold=5,this._roadPixelRadius=120,this._minRoadDistance=25,this._minIntersectionPixelDistance=50,this._baseVectorTileSourceId="vectorTiles",this._lableConfig=[{source:["Ocean label","Ocean name"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["Ocean","Ocean or sea"]},{source:["Sea label"],labelType:"water",minZoom:3,radius:1e6,polygonSources:["Sea","Ocean or sea"]},{source:["Country name"],labelType:"country",minZoom:0,maxZoom:5,radius:3e5},{source:["State name","State name short"],labelType:"state",minZoom:4,maxZoom:7,radius:3e5},{source:["Capital city","Large city"],labelType:"city",minZoom:8,radius:4e4},{source:["Medium city"],labelType:"city",minZoom:8,radius:3e4},{source:["Small city"],labelType:"city",minZoom:8,radius:2e4},{source:["Island label"],labelType:"city",minZoom:8,radius:1e4},{source:["Town"],labelType:"city",minZoom:10,radius:1e4},{source:["Village"],labelType:"neighbourhood",minZoom:12,radius:6e3},{source:["Amusement area label"],labelType:"poi",minZoom:14,radius:2e3,polygonSources:["Amusement park"]},{source:["Hospital label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Hospital"]},{source:["Shopping centre label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Shopping"]},{source:["Stadium label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Stadium"]},{source:["University/School label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["University"]},{source:["Zoo label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Zoo"]},{source:["Airport Label","Airport name","Airport POI"],labelType:"majorPoi",minZoom:11,radius:3e3,polygonSources:["Airport","Runway"]},{source:["National park label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["National or state park","National park","Forest"]},{source:["Reservation label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["Reservation"]}],this._polygonStyleLayer=["National or state park","National park","Reservation","Airport","Runway","Stadium","University","Zoo","Shopping","Hospital","Amusement park","Ocean","Sea","Ocean or sea"],this._labelCache=new Set(["city","state","country","water","majorPoi"]),this._roadLayers=new Set(["Connecting road","Connecting road tunnel","International road","International road tunnel","Local road","Local road tunnel","Major local road","Major local road tunnel","Major road","Major road tunnel","Minor local road","Minor local road tunnel","Motorway","Motorway tunnel","Secondary road","Secondary road tunnel","Toll connecting road","Toll connecting road tunnel","Toll international road","Toll international road tunnel","Toll local road","Toll local road tunnel","Toll major local road","Toll major local road tunnel","Toll major road","Toll major road tunnel","Toll minor local road","Toll minor local road tunnel","Toll motorway","Toll motorway tunnel","Toll secondary road","Toll secondary road tunnel"]),this._returnDetailedDescriptions=!1,this._shortcutListener=function(e){return z(n,void 0,void 0,(function(){var t,n,r;return N(this,(function(i){switch(i.label){case 0:return e.altKey&&e.ctrlKey&&68===e.keyCode?(this._returnDetailedDescriptions=!this._returnDetailedDescriptions,t=this._map.getCamera(),r=this._map.getStyle(),n=r.language.toLowerCase(),r=r.style.toLowerCase(),[4,this._getLocDesc(t,n,r)]):[3,2];case 1:r=i.sent(),this._descCallback(r),i.label=2;case 2:return[2]}}))}))},this._onRotate=function(){n._rotateTimeout||(Date.now()-n._lastHeadingTime>=n._headUpdateLimit?n._rotateTimeout=setTimeout(n._updateHeading,me.RotationDuration+25):n._rotateTimeout=setTimeout(n._updateHeading,n._headUpdateLimit-(Date.now()-n._lastHeadingTime)))},this._onMove=function(){n._moveTimeout&&(clearTimeout(n._moveTimeout),delete n._moveTimeout),n._controlTimeout&&(clearTimeout(n._controlTimeout),delete n._controlTimeout)},this._onMoveEnd=function(e){e.fromControl?n._controlTimeout=setTimeout(n._updateCam,n._controlEventDelay):n._updateCam()},this._onStyleData=function(){setTimeout(n._updateStyle)},this._onPointerDown=function(e){n._lastPointerPos=n._getEventPos(e),n._pointerTimeout=setTimeout((function(){return z(n,void 0,void 0,(function(){var e,t,n;return N(this,(function(r){switch(r.label){case 0:return t=this._map.getStyle(),e=t.language.toLowerCase(),n=t.style.toLowerCase(),(t=this._map.getCamera()).center=this._map.pixelsToPositions([this._lastPointerPos])[0],[4,this._getLocDesc(t,e,n)];case 1:return n=r.sent(),this._descCallback(n),this._onPointerUp(),[2]}}))}))}),n._pointerUpdateDelay),n._map.getCanvas().addEventListener("mousemove",n._onPointerMove),n._map.getCanvas().addEventListener("touchmove",n._onPointerMove),n._map.getCanvas().addEventListener("mouseup",n._onPointerUp),n._map.getCanvas().addEventListener("touchend",n._onPointerUp)},this._onPointerMove=function(e){var t=n._getEventPos(e);e=n._lastPointerPos[0]-t[0],t=n._lastPointerPos[1]-t[1],Math.sqrt(e*e+t*t)>n._moveThreshold&&n._onPointerUp()},this._onPointerUp=function(){clearTimeout(n._pointerTimeout),delete n._pointerTimeout,n._map.getCanvas().removeEventListener("mousemove",n._onPointerMove),n._map.getCanvas().removeEventListener("touchmove",n._onPointerMove),n._map.getCanvas().removeEventListener("mouseup",n._onPointerUp),n._map.getCanvas().removeEventListener("touchend",n._onPointerUp)},this._updateHeading=function(){var e,t=n._map.getCamera();n._lastHead&&!n._checkHeadingThreshold(t.bearing,n._lastHead)||(e=n._getHeadingDesc(t),n._lastHead=t.bearing,n._descCallback("<p>Map heading "+e+".</p>"),n._lastHeadingTime=Date.now()),delete n._rotateTimeout},this._updateStyle=function(){return z(n,void 0,void 0,(function(){var e,t,n,r;return N(this,(function(i){switch(i.label){case 0:return e=this._map.getCamera(),n=this._map.getStyle(),t=n.language.toLowerCase(),n=n.style.toLowerCase(),this._lastLang===t?[3,2]:(hg._labelCache._preloadCache(t),[4,this._getLocDesc(e,t,n)]);case 1:return r=i.sent(),[3,4];case 2:return this._lastStyle===n||"blank"!==this._lastStyle?[3,4]:[4,this._getLocDesc(e,t,n)];case 3:r=i.sent(),i.label=4;case 4:return this._lastLang=t,this._lastStyle=n,r&&this._descCallback(r),[2]}}))}))},this._updateCam=function(e){void 0===e&&(e=!1);var t,r,i,o=n._map.getCamera();(!n._lastCam||0<n._actionQueue.length||n._checkThresholds(o,n._lastCam))&&(i=n._map.getStyle(),t=i.language.toLowerCase(),r=i.style.toLowerCase(),(i=n._getActionDesc(o))&&n._actionQueue.push(i),n._lastCam=o,n._moveTimeout&&(clearTimeout(n._moveTimeout),delete n._moveTimeout),n._moveTimeout=setTimeout((function(){return z(n,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:return clearTimeout(this._rotateTimeout),delete this._rotateTimeout,[4,this._getLocDesc(o,t,r)];case 1:return e=n.sent(),0<this._actionQueue.length?(this._descCallback("<p>Map "+this._actionQueue.join(", then ")+".</p>"+e),this._actionQueue=[]):this._descCallback(e),[2]}}))}))}),e?0:n._camUpdateDelay))},this._map=e,this._restFallback=e.getServiceOptions().enableAccessibilityLocationFallback,this._descCallback=t,this._reverseSearch=new sg(e),hg._labelCache||(hg._labelCache=new ug),this._lastLang=this._map.getStyle().language.toLowerCase(),hg._labelCache._preloadCache(this._lastLang),this._map.events.addOnce("load",(function(){n._disposed||(n._updateCam(!0),n._map._getMap().on("move",n._onMove),n._map._getMap().on("moveend",n._onMoveEnd),n._map._getMap().on("styledata",n._onStyleData),n._map._getMap().on("rotate",n._onRotate),n._map.getCanvas().addEventListener("mousedown",n._onPointerDown),n._map.getCanvas().addEventListener("touchstart",n._onPointerDown))})),this._map.getMapContainer().addEventListener("keydown",this._shortcutListener)}var dg,fg,mg=function(e){var t=this;this.addToMap=function(){t.initializeMapLiveStateInfo(),t.initializeMapStyleInfo(),t.createMapKeyBindingInfo(),t.map.getMapContainer().setAttribute("role","application"),t.map.getMapContainer().setAttribute("aria-label","Map Application"),t.map.getCanvas().setAttribute("aria-label","Interactive Map"),t.map.getCanvas().setAttribute("aria-describedby","atlas-map-state atlas-map-style atlas-map-shortcuts"),t.map.getCanvas().setAttribute("alt","Interactive Map")},this.removeFromMap=function(){null!=t.mapViewDesc&&t.mapViewDesc.dispose(),delete t.mapViewDesc,null!=t.atlasMapKeyBindings&&t.map.getCanvasContainer().removeChild(t.atlasMapKeyBindings),delete t.atlasMapKeyBindings,null!=t.atlasMapLiveStateInfo&&t.map.getCanvasContainer().removeChild(t.atlasMapLiveStateInfo),delete t.atlasMapLiveStateInfo,null!=t.atlasMapStyleInfo&&t.map.getCanvasContainer().removeChild(t.atlasMapStyleInfo),delete t.atlasMapStyleInfo,t.map.getMapContainer().removeAttribute("role"),t.map.getMapContainer().removeAttribute("aria-label"),t.map.getCanvas().removeAttribute("aria-label"),t.map.getCanvas().removeAttribute("aria-describedby"),t.map.getCanvas().removeAttribute("alt"),t.map.events.remove("styledata",t.updateMapStyle)},this.createMapKeyBindingInfo=function(){t.atlasMapKeyBindings=document.createElement("div"),t.atlasMapKeyBindings.setAttribute("tabindex","-1"),t.atlasMapKeyBindings.setAttribute("aria-hidden","true"),t.atlasMapKeyBindings.id="atlas-map-shortcuts",t.atlasMapKeyBindings.classList.add("hidden-accessible-element"),t.atlasMapKeyBindings.innerHTML=["Map shortcuts:","Zoom out: hyphen.","Zoom in: plus.","Pan right 100 pixels: right arrow.","Pan left 100 pixels: left arrow.","Pan up 100 pixels: up arrow.","Pan down 100 pixels: down arrow.","Rotate 15 degrees clockwise: shift + right arrow.","Rotate 15 degrees counter clockwise: shift + left arrow.","Increase pitch 10 degrees: shift + up arrow.","Decrease pitch 10 degrees: shift + down arrow.","Toggle verbose map state: control + alt + D.","Jump focus to the map: Escape."].join("\n"),t.map.getCanvasContainer().appendChild(t.atlasMapKeyBindings),t.atlasMapKeyBindings.setAttribute("aria-live","polite")},this.initializeMapLiveStateInfo=function(){t.mapViewDesc=new pg(t.map,t.updateMapState),t.atlasMapLiveStateInfo=document.createElement("div"),t.atlasMapLiveStateInfo.setAttribute("tabindex","-1"),t.atlasMapLiveStateInfo.setAttribute("aria-hidden","true"),t.atlasMapLiveStateInfo.id="atlas-map-state",t.atlasMapLiveStateInfo.classList.add("hidden-accessible-element"),t.map.getCanvasContainer().appendChild(t.atlasMapLiveStateInfo),t.atlasMapLiveStateInfo.setAttribute("aria-live","polite")},this.initializeMapStyleInfo=function(){t.atlasMapStyleInfo=document.createElement("div"),t.atlasMapStyleInfo.setAttribute("tabindex","-1"),t.atlasMapStyleInfo.setAttribute("aria-hidden","true"),t.atlasMapStyleInfo.id="atlas-map-style",t.atlasMapStyleInfo.classList.add("hidden-accessible-element"),t.updateMapStyle(),t.map.events.add("styledata",t.updateMapStyle),t.map.getCanvasContainer().appendChild(t.atlasMapStyleInfo),t.atlasMapStyleInfo.setAttribute("aria-live","polite")},this.updateMapStyle=function(){t.atlasMapStyleInfo.innerHTML="<p>Map style: "+t.map.getStyle().style+".</p>"},this.updateMapState=function(e){t.atlasMapLiveStateInfo.innerHTML=e},this.map=e},gg=function(e){var t=this;this.listenerEnabled=!1,this.lastFlowMode="none",this.addToMap=function(){if(!t.map._isReady())throw new Error("Traffic flow could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before enabling traffic flow.");t.listenerEnabled||(t.map.events.add("styledata",t.addToMap),t.listenerEnabled=!0);var e,n=t.map.getTraffic();"none"===n.flow||(e=t.map.layers.getLayerById("traffic_"+n.flow))&&(t.lastFlowMode=n.flow,e._updateLayoutProperty("visibility","visible","none"))},this.removeFromMap=function(){var e;t.map.getTraffic(),"none"!=t.lastFlowMode&&((e=t.map.layers.getLayerById("traffic_"+t.lastFlowMode))&&e._updateLayoutProperty("visibility","none","visible"),t.lastFlowMode="none"),t.listenerEnabled&&(t.map.events.remove("styledata",t.addToMap),t.listenerEnabled=!1)},this.map=e},yg=(R(vg,dg=Pr),vg.getIncidentTypeName=function(e,t){switch(e){case 0:return t.Unknown;case 1:return t.Accident;case 2:return t.Fog;case 3:return t.Danger;case 4:return t.Rain;case 5:return t.Ice;case 6:return t.Jam;case 7:return t.LaneClosed;case 8:return t.RoadClosed;case 9:return t.RoadWorks;case 10:return t.Wind;case 11:return t.Flood;case 12:return t.Detour;default:return t.Unknown}},vg.getIncidentTypeIconName=function(e){switch(e){case 0:return"unknown";case 1:return"accident";case 2:return"fog";case 3:return"danger";case 4:return"rain";case 5:return"ice";case 6:return"jam";case 7:return"lane-closed";case 8:return"road-closed";case 9:return"road-work";case 10:return"wind";case 11:return"flood";case 12:return"detour";default:return"unknown"}},vg.getSeverityColorName=function(e){switch(e){case 0:return"grey";case 1:return"yellow";case 2:return"orange";case 3:return"red";default:return"grey"}},vg.getSeverityColorHexCode=function(e){switch(e){case 0:return"#B5B6B7";case 1:return"#F4C951";case 2:return"#F4873F";case 3:return"#F04F4E";default:return"#B5B6B7"}},vg);function vg(e,t,n){var r=null!==(i=null!==(r=null!==(i=null!==(r=null!==(i=null!==(r=null!==(i=null!==(r=null!==(i=null!==(r=null!==(i=null!==(r=null!==(i=e.icon_category_12)&&void 0!==i?i:e.icon_category_11)&&void 0!==r?r:e.icon_category_10)&&void 0!==i?i:e.icon_category_9)&&void 0!==r?r:e.icon_category_8)&&void 0!==i?i:e.icon_category_7)&&void 0!==r?r:e.icon_category_6)&&void 0!==i?i:e.icon_category_5)&&void 0!==r?r:e.icon_category_4)&&void 0!==i?i:e.icon_category_3)&&void 0!==r?r:e.icon_category_2)&&void 0!==i?i:e.icon_category_1)&&void 0!==r?r:e.icon_category_0)&&void 0!==i?i:e.icon_category,i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=null!==(i=e.description_12)&&void 0!==i?i:e.description_11)&&void 0!==i?i:e.description_10)&&void 0!==i?i:e.description_9)&&void 0!==i?i:e.description_8)&&void 0!==i?i:e.description_7)&&void 0!==i?i:e.description_6)&&void 0!==i?i:e.description_5)&&void 0!==i?i:e.description_4)&&void 0!==i?i:e.description_3)&&void 0!==i?i:e.description_2)&&void 0!==i?i:e.description_1)&&void 0!==i?i:e.description_0)&&void 0!==i?i:e.description;return e={icon:vg.getSeverityColorName(e.magnitude)+"-"+vg.getIncidentTypeIconName(r),incidentType:vg.getIncidentTypeName(r,n),description:i,delay:e.delay,color:vg.getSeverityColorHexCode(e.magnitude),id:e.id},dg.call(this,t,e)||this}(Re=fg=fg||{}).DELAY="delay",Re.LENGTH="length",Re.FROM="from",Re.TO="to";var _g=(bg.build=function(e,t){void 0===t&&(t="en-US");var n=document.createElement("div");n.classList.add("incident-popup-title"),n.classList.add("font-segoeui-b"),n.innerText=e.properties.incidentType,n.setAttribute("aria-label","Incident Type "+e.properties.incidentType),(a=document.createElement("div")).classList.add("incident-popup-subtitle"),a.classList.add("font-segoeui-b"),a.setAttribute("aria-label","Incident Description "+e.properties.description),a.innerText=e.properties.description;var r,i,o,a,s=document.createElement("div");s.classList.add("incident-popup-header"),s.style.backgroundColor=e.properties.color,s.appendChild(n),s.appendChild(a),(a=document.createElement("div")).classList.add("incident-popup-body"),e.properties.delay&&(r=Math.floor(e.properties.delay/60)+" min",r=this.createInfoSection(r,fg.DELAY),a.appendChild(r)),e.properties.length&&(r=new Intl.NumberFormat([t,"en-US"],{maximumFractionDigits:2}),o=void 0,o="en-US"===t?(i=ui(e.properties.length,"meters","miles"),r.format(i)+" miles"):(i=ui(e.properties.length,"meters","kilometers"),r.format(i)+" km"),o=this.createInfoSection(o,fg.LENGTH),a.appendChild(o)),e.properties.from&&(o=this.createInfoSection(e.properties.from,fg.FROM),a.appendChild(o)),e.properties.to&&(l=this.createInfoSection(e.properties.to,fg.TO),a.appendChild(l));var l=document.createElement("div");return l.classList.add("incident-popup-content"),l.appendChild(s),l.appendChild(a),new Va({content:l,position:e.geometry.coordinates})},bg.createInfoSection=function(e,t){var n=document.createElement("div");n.classList.add("incident-popup-info");var r=document.createElement("div");r.classList.add("icon"),r.classList.add(t);var i=document.createElement("span");return i.classList.add("message"),i.classList.add("font-segoeui"),i.setAttribute("aria-label","Incident "+t+" "+e),i.innerText=e,n.appendChild(r),n.appendChild(i),n},bg);function bg(){}var xg=(wg.prototype.getIncidentIconImageExpression=function(){return["concat",["let","magnitude",["get","magnitude"],["case",["==",["var","magnitude"],0],"grey",["==",["var","magnitude"],1],"yellow",["==",["var","magnitude"],2],"orange",["==",["var","magnitude"],3],"red",["==",["var","magnitude"],4],"grey","grey"]],"-",["let","category",["coalesce",["get","icon_category_12"],["get","icon_category_11"],["get","icon_category_10"],["get","icon_category_9"],["get","icon_category_8"],["get","icon_category_7"],["get","icon_category_6"],["get","icon_category_5"],["get","icon_category_4"],["get","icon_category_3"],["get","icon_category_2"],["get","icon_category_0"],["get","icon_category"],0],["case",["==",["var","category"],0],"unknown",["==",["var","category"],1],"accident",["==",["var","category"],2],"fog",["==",["var","category"],3],"danger",["==",["var","category"],4],"rain",["==",["var","category"],5],"ice",["==",["var","category"],6],"jam",["==",["var","category"],7],"lane-closed",["==",["var","category"],8],"road-closed",["==",["var","category"],9],"road-work",["==",["var","category"],10],"wind",["==",["var","category"],11],"flood",["==",["var","category"],12],"detour","unknown"]]]},wg);function wg(e){var t=this;this.incidentLayerName="incidents",this.incidentSourceName="mapcontrol_traffic_incident",this.addToMap=function(){t.map.sources.getById(t.incidentSourceName)||t.map.sources.add(t.vectorTileSource),t.map.layers.getLayerById(t.incidentLayerName)||t.map.layers.add(t.incidentLayer,"labels"),t.popup=new Va({position:[0,0],pixelOffset:[0,-18]}),t.map.addEventListener("mouseover",t.incidentLayerName,t.cursorToPointer),t.map.addEventListener("mouseleave",t.incidentLayerName,t.cursorToDefault),t.map.addEventListener("click",t.incidentLayerName,t.openIncidentPopup)},this.removeFromMap=function(){null!=t.map.layers.getLayerById(t.incidentLayerName)&&t.map.layers.remove(t.incidentLayerName),null!=t.map.sources.getById(t.incidentSourceName)&&t.map.sources.remove(t.incidentSourceName)},this.cursorToPointer=function(e){t.map.getCanvas().style.cursor="pointer"},this.cursorToDefault=function(e){t.map.getCanvas().style.cursor=""},this.openIncidentPopup=function(e){t.popup.remove();var n=e.position,r=e.features[0];t.map._getLocalizedStrings().then((function(e){var i=new Rr(new Ni(n[0],n[1]));e=new yg(r.properties,i,e),t.popup=_g.build(e,t.incidentLanguage),t.popup.open(t.map)}))},this.map=e,this.vectorTileSource=new wo(this.incidentSourceName,{maxZoom:22,tiles:["https://"+y+"/traffic/incident/tile/pbf?api-version=1.0&zoom={z}&x={x}&y={y}"]}),e=this.getIncidentIconImageExpression(),this.incidentLayer=new Sa(this.incidentSourceName,this.incidentLayerName,{sourceLayer:"Traffic incident POI",iconOptions:{ignorePlacement:!0,allowOverlap:!0,image:e,size:.75}})}var Sg,Eg=(R(Cg,Sg=U),Cg);function Cg(){var e=null!==Sg&&Sg.apply(this,arguments)||this;return e.interactive=!0,e.scrollZoomInteraction=!0,e.boxZoomInteraction=!0,e.dragRotateInteraction=!0,e.dragPanInteraction=!0,e.keyboardInteraction=!0,e.dblClickZoomInteraction=!0,e.touchInteraction=!0,e.wheelZoomRate=1/450,e}var Tg=(Ig.prototype.enable=function(){this.map.getMapContainer().addEventListener("keydown",this._onKeyDown)},Ig.prototype.disable=function(){this.map.getMapContainer().removeEventListener("keydown",this._onKeyDown)},Ig);function Ig(e){var t=this;this._onKeyDown=function(e){27===e.keyCode&&t.map.getCanvas().focus()},this.map=e}var kg=(Pg.prototype.enable=function(){this.map._getMap().on("touchstart",this._onTouchStart),this.map._getMap().on("touchmove",this._onTouchMove),this.map._getMap().on("touchend",this._onTouchEnd),this.map._getMap().on("touchcancel",this._onTouchCancel)},Pg.prototype.disable=function(){this.map._getMap().off("touchstart",this._onTouchStart),this.map._getMap().off("touchmove",this._onTouchMove),this.map._getMap().off("touchend",this._onTouchEnd),this.map._getMap().off("touchcancel",this._onTouchCancel)},Pg);function Pg(e){var t=this;this.minDiffX=70,this.maxDiffY=100,this.minDiff=30,this.delay=160,this._onTouchStart=function(e){var n,r;2===e.points.length&&(n=e.points[0].y-e.points[1].y,r=e.points[0].x-e.points[1].x,Math.abs(r)>=t.minDiffX&&Math.abs(n)<=t.maxDiffY&&(e.originalEvent.preventDefault(),t.map._getMap().touchZoomRotate.disable(),t.map._getMap().dragPan.disable(),t.dpPoint=e.point,t.dpPitch=t.map._getMap().getPitch(),t.startTiming=Date.now(),t.startDistance=Math.hypot(r,n),t.startEventData=e))},this._onTouchMove=function(e){if(void 0!==t.dpPoint&&void 0!==t.dpPitch){e.preventDefault(),e.originalEvent.preventDefault();var n=e.points[0].y-e.points[1].y,r=e.points[0].x-e.points[1].x;if(n=Math.hypot(r,n),Math.abs(n-t.startDistance)>=t.minDiff)return t.dpPoint&&(t.map._getMap().touchZoomRotate.enable(),t.map._getMap().dragPan.enable(),t.map._getMap().touchZoomRotate.onStart((Date.now()-t.startTiming>=t.delay?e:t.startEventData).originalEvent)),void(t.dpPoint=void 0);Date.now()-t.startTiming>=t.delay&&(e=.5*(t.dpPoint.y-e.point.y),t.map._getMap().setPitch(t.dpPitch+e))}},this._onTouchEnd=function(){t.dpPoint&&(t.map._getMap().touchZoomRotate.enable(),t.map._getMap().dragPan.enable()),t.dpPoint=void 0},this._onTouchCancel=function(){t.dpPoint&&(t.map._getMap().touchZoomRotate.enable(),t.map._getMap().dragPan.enable()),t.dpPoint=void 0},this.map=e}var Ag=(Mg.prototype.enable=function(){this.map.getCanvasContainer().addEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().addEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().addEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().addEventListener("touchend",this._onTouchEnd)},Mg.prototype.disable=function(){this.map.getCanvasContainer().removeEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().removeEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().removeEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().removeEventListener("touchend",this._onTouchEnd)},Mg);function Mg(e){var t=this;this._onGestureStart=function(e){t.hasTouch||(e.preventDefault(),t.initZoom=t.map.getCamera().zoom)},this._onGestureChange=function(e){t.hasTouch||(e.preventDefault(),t.map.setCamera({zoom:t.initZoom+e.scale-1}))},this._onTouchStart=function(e){t.hasTouch=!0},this._onTouchEnd=function(e){0===e.touches.length&&(t.hasTouch=!1)},this.map=e}var Og=(Lg.prototype.addToMap=function(){this.added||(this.added=!0,this._setInteractions(this.options))},Lg.prototype.removeFromMap=function(){this.added&&(this.added=!1,this._setInteractions({interactive:!1}))},Lg.prototype.setOptions=function(e){this.options=(new Eg).merge(this.options,e),this.added&&this._setInteractions(this.options)},Lg.prototype.getOptions=function(){return Object.assign({},this.options)},Lg.prototype._setInteractions=function(e){e.interactive?(e.boxZoomInteraction?this.map._getMap().boxZoom.enable():this.map._getMap().boxZoom.disable(),e.dblClickZoomInteraction?this.map._getMap().doubleClickZoom.enable():this.map._getMap().doubleClickZoom.disable(),e.dragPanInteraction?this.map._getMap().dragPan.enable():this.map._getMap().dragPan.disable(),e.dragRotateInteraction?this.map._getMap().dragRotate.enable():this.map._getMap().dragRotate.disable(),e.keyboardInteraction?(this.map._getMap().keyboard.enable(),this.focusShortcut.enable()):(this.map._getMap().keyboard.disable(),this.focusShortcut.disable()),e.scrollZoomInteraction?(this.map._getMap().scrollZoom.enable(),this.map._getMap().scrollZoom.setWheelZoomRate(e.wheelZoomRate)):this.map._getMap().scrollZoom.disable(),e.touchInteraction?(this.map._getMap().touchZoomRotate.enable(),this.mobilePitch.enable()):(this.map._getMap().touchZoomRotate.disable(),this.mobilePitch.disable()),this.pinchZoom.enable()):(this.map._getMap().boxZoom.disable(),this.map._getMap().doubleClickZoom.disable(),this.map._getMap().dragPan.disable(),this.map._getMap().dragRotate.disable(),this.map._getMap().keyboard.disable(),this.focusShortcut.disable(),this.map._getMap().scrollZoom.disable(),this.map._getMap().touchZoomRotate.disable(),this.mobilePitch.disable(),this.pinchZoom.disable())},Lg);function Lg(e,t){this.added=!1,this.map=e,this.mobilePitch=new kg(e),this.focusShortcut=new Tg(e),this.pinchZoom=new Ag(e),this.options=(new Eg).merge(t)}function Rg(e,t,n){var r={type:"Feature"};return 0!==(n=void 0===n?{}:n).id&&!n.id||(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Dg(e){return"Feature"===e.type?e.geometry:e}var zg=i((function(e,t){e.exports=function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var i=function(){function e(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return e}();function o(e,t){return e>t?1:e<t?-1:0}function a(e,t,n){for(var r=new i(null,null),o=r,a=r;;){var s=n(e,t.key);if(s<0){if(null===t.left)break;if(n(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,null===(t=l).left)break}a.left=t,a=t,t=t.left}else{if(!(s>0))break;if(null===t.right)break;if(n(e,t.right.key)>0&&(l=t.right,t.right=l.left,l.left=t,null===(t=l).right))break;o.right=t,o=t,t=t.right}}return o.right=t.left,a.left=t.right,t.left=r.right,t.right=r.left,t}function s(e,t,n,r){var o=new i(e,t);if(null===n)return o.left=o.right=null,o;var s=r(e,(n=a(e,n,r)).key);return s<0?(o.left=n.left,o.right=n,n.left=null):s>=0&&(o.right=n.right,o.left=n,n.right=null),o}function l(e,t,n){var r=null,i=null;if(t){var o=n((t=a(e,t,n)).key,e);0===o?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function u(e,t,n){return null===t?e:(null===e||((t=a(e.key,t,n)).left=e),t)}function c(e,t,n,r,i){if(e){r(t+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(e)+"\n");var o=t+(n?"    ":"\u2502   ");e.left&&c(e.left,o,!1,r,i),e.right&&c(e.right,o,!0,r,i)}}var p=function(){function e(e){void 0===e&&(e=o),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=s(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var n=new i(e,t);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=a(e,this._root,r),s=r(e,o.key);return 0===s?this._root=o:(s<0?(n.left=o.left,n.right=o,o.left=null):s>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,n){var r;return null===t?null:0===n(e,(t=a(e,t,n)).key)?(null===t.left?r=t.right:(r=a(e,t.left,n)).right=t.right,this._size--,r):t},e.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=a(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var r=n(e,t.key);if(0===r)return t;t=r<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=a(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var r=n(e,t.key);if(0===r)return!0;t=r<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),e.call(t,n),n=n.right):i=!0;return this},e.prototype.range=function(e,t,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,t)>0)break;if(o(a.key,e)>=0&&n.call(r,a))return this;a=a.right}return this},e.prototype.keys=function(){var e=[];return this.forEach((function(t){var n=t.key;return e.push(n)})),e},e.prototype.values=function(){var e=[];return this.forEach((function(t){var n=t.data;return e.push(n)})),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},e.prototype.at=function(e){for(var t=this._root,n=!1,r=0,i=[];!n;)if(t)i.push(t),t=t.left;else if(i.length>0){if(t=i.pop(),r===e)return t;r++,t=t.right}else n=!0;return null},e.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var r=this._comparator;t;){var i=r(e.key,t.key);if(0===i)break;i<0?(n=t,t=t.left):t=t.right}return n},e.prototype.prev=function(e){var t=this._root,n=null;if(null!==e.left){for(n=e.left;n.right;)n=n.right;return n}for(var r=this._comparator;t;){var i=r(e.key,t.key);if(0===i)break;i<0?t=t.left:(n=t,t=t.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return f(this._root)},e.prototype.load=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1);var r=e.length,i=this._comparator;if(n&&y(e,t,0,r-1,i),null===this._root)this._root=h(e,t,0,r),this._size=r;else{var o=g(this.toList(),d(e,t),i);r=this._size+r,this._root=m({head:o},0,r)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return c(this._root,"",!0,(function(e){return t.push(e)}),e),t.join("")},e.prototype.update=function(e,t,n){var r=this._comparator,i=l(e,this._root,r),o=i.left,a=i.right;r(e,t)<0?a=s(t,n,a,r):o=s(t,n,o,r),this._root=u(o,a,r)},e.prototype.split=function(e){return l(e,this._root,this._comparator)},e}();function h(e,t,n,r){var o=r-n;if(o>0){var a=n+Math.floor(o/2),s=e[a],l=t[a],u=new i(s,l);return u.left=h(e,t,n,a),u.right=h(e,t,a+1,r),u}return null}function d(e,t){for(var n=new i(null,null),r=n,o=0;o<e.length;o++)r=r.next=new i(e[o],t[o]);return r.next=null,n.next}function f(e){for(var t=e,n=[],r=!1,o=new i(null,null),a=o;!r;)t?(n.push(t),t=t.left):n.length>0?t=(t=a=a.next=n.pop()).right:r=!0;return a.next=null,o.next}function m(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=m(e,t,i),a=e.head;return a.left=o,e.head=e.head.next,a.right=m(e,i+1,n),a}return null}function g(e,t,n){for(var r=new i(null,null),o=r,a=e,s=t;null!==a&&null!==s;)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),r.next}function y(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(e[a],o)<0);do{s--}while(i(e[s],o)>0);if(a>=s)break;var l=e[a];e[a]=e[s],e[s]=l,l=t[a],t[a]=t[s],t[s]=l}y(e,t,n,s,i),y(e,t,s+1,r,i)}}var v=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},_=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x;return{ll:{x:n,y:e.ll.y<t.ll.y?t.ll.y:e.ll.y},ur:{x:r,y:e.ur.y<t.ur.y?e.ur.y:t.ur.y}}},b=Number.EPSILON;void 0===b&&(b=Math.pow(2,-52));var x=b*b,w=function(e,t){if(-b<e&&e<b&&-b<t&&t<b)return 0;var n=e-t;return n*n<x*e*t?0:e<t?-1:1},S=function(){function t(){e(this,t),this.reset()}return r(t,[{key:"reset",value:function(){this.xRounder=new E,this.yRounder=new E}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),t}(),E=function(){function t(){e(this,t),this.tree=new p,this.round(0)}return r(t,[{key:"round",value:function(e){var t=this.tree.add(e),n=this.tree.prev(t);if(null!==n&&0===w(t.key,n.key))return this.tree.remove(e),n.key;var r=this.tree.next(t);return null!==r&&0===w(t.key,r.key)?(this.tree.remove(e),r.key):e}}]),t}(),C=new S,T=function(e,t){return e.x*t.y-e.y*t.x},I=function(e,t){return e.x*t.x+e.y*t.y},k=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=T(r,i);return w(o,0)},P=function(e){return Math.sqrt(I(e,e))},A=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return T(i,r)/P(i)/P(r)},M=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return I(i,r)/P(i)/P(r)},O=function(e,t,n){return 0===t.y?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},L=function(e,t,n){return 0===t.x?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},R=function(e,t,n,r){if(0===t.x)return L(n,r,e.x);if(0===r.x)return L(e,t,n.x);if(0===t.y)return O(n,r,e.y);if(0===r.y)return O(e,t,n.y);var i=T(t,r);if(0==i)return null;var o={x:n.x-e.x,y:n.y-e.y},a=T(o,t)/i,s=T(o,r)/i;return{x:(e.x+s*t.x+(n.x+a*r.x))/2,y:(e.y+s*t.y+(n.y+a*r.y))/2}},D=function(){function t(n,r){e(this,t),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return r(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:N.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),r(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,n=0,r=t.length;n<r;n++){var i=t[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var n=this.point.events[t];if(void 0===n.segment.consumedBy)for(var r=t+1;r<e;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,n=this.point.events.length;t<n;t++){var r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:A(t.point,e.point,i.point),cosine:M(t.point,e.point,i.point)})};return function(e,t){n.has(e)||r(e),n.has(t)||r(t);var i=n.get(e),o=i.sine,a=i.cosine,s=n.get(t),l=s.sine,u=s.cosine;return o>=0&&l>=0?a<u?1:a>u?-1:0:o<0&&l<0?a<u?-1:a>u?1:0:l<o?-1:l>o?1:0}}}]),t}(),z=0,N=function(){function t(n,r,i,o){e(this,t),this.id=++z,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return r(t,null,[{key:"compare",value:function(e,t){var n=e.leftSE.point.x,r=t.leftSE.point.x,i=e.rightSE.point.x,o=t.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=e.leftSE.point.y,s=t.leftSE.point.y,l=e.rightSE.point.y,u=t.rightSE.point.y;if(n<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var c=e.comparePoint(t.leftSE.point);if(c<0)return 1;if(c>0)return-1;var p=t.comparePoint(e.rightSE.point);return 0!==p?p:-1}if(n>r){if(a<s&&a<u)return-1;if(a>s&&a>u)return 1;var h=t.comparePoint(e.leftSE.point);if(0!==h)return h;var d=e.comparePoint(t.rightSE.point);return d<0?1:d>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var f=t.comparePoint(e.rightSE.point);if(0!==f)return f}if(i>o){var m=e.comparePoint(t.rightSE.point);if(m<0)return 1;if(m>0)return-1}if(i!==o){var g=l-a,y=i-n,v=u-s,_=o-r;if(g>y&&v<_)return 1;if(g<y&&v>_)return-1}return i>o?1:i<o||l<u?-1:l>u?1:e.id<t.id?-1:e.id>t.id?1:0}}]),r(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(t.x===n.x)return e.x===t.x?0:e.x<t.x?1:-1;var i=(e.y-t.y)/r.y,o=t.x+i*r.x;if(e.x===o)return 0;var a=(e.x-t.x)/r.x,s=t.y+a*r.y;return e.y===s?0:e.y<s?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),n=e.bbox(),r=_(t,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,s=e.rightSE.point,l=v(t,a)&&0===this.comparePoint(a),u=v(n,i)&&0===e.comparePoint(i),c=v(t,s)&&0===this.comparePoint(s),p=v(n,o)&&0===e.comparePoint(o);if(u&&l)return p&&!c?o:!p&&c?s:null;if(u)return c&&i.x===s.x&&i.y===s.y?null:i;if(l)return p&&o.x===a.x&&o.y===a.y?null:a;if(p&&c)return null;if(p)return o;if(c)return s;var h=R(i,this.vector(),a,e.vector());return null===h?null:v(r,h)?C.round(h.x,h.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new D(e,!0),o=new D(e,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new t(i,a,this.rings.slice(),this.windings.slice());return D.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),D.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var u=r.rings[s],c=r.windings[s],p=n.rings.indexOf(u);-1===p?(n.rings.push(u),n.windings.push(c)):n.windings[p]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],l=t.indexOf(a);-1===l?(t.push(a),n.push(s)):n[l]+=s}for(var u=[],c=[],p=0,h=t.length;p<h;p++)if(0!==n[p]){var d=t[p],f=d.poly;if(-1===c.indexOf(f))if(d.isExterior)u.push(f);else{-1===c.indexOf(f)&&c.push(f);var m=u.indexOf(d.poly);-1!==m&&u.splice(m,1)}}for(var g=0,y=u.length;g<y;g++){var v=u[g].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Z.type){case"union":var n=0===e.length,r=0===t.length;this._isInResult=n!==r;break;case"intersection":var i,o;e.length<t.length?(i=e.length,o=t.length):(i=t.length,o=e.length),this._isInResult=o===Z.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(e.length-t.length);this._isInResult=a%2===1;break;case"difference":var s=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=s(e)!==s(t);break;default:throw new Error("Unrecognized operation type found ".concat(Z.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,a,s=D.comparePoints(e,n);if(s<0)i=e,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,a=-1}return new t(new D(i,!0),new D(o,!1),[r],[a])}}]),t}(),B=function(){function t(n,r,i){if(e(this,t),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=C.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=n.length;s<l;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=C.round(n[s][0],n[s][1]);u.x===a.x&&u.y===a.y||(this.segments.push(N.fromRing(a,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),a=u)}o.x===a.x&&o.y===a.y||this.segments.push(N.fromRing(a,o,this))}return r(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.segments.length;t<n;t++){var r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}}]),t}(),F=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new B(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new B(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return r(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,n=this.interiorRings.length;t<n;t++)for(var r=this.interiorRings[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}]),t}(),j=function(){function t(n,r){if(e(this,t),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(n){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new F(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return r(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++)for(var r=this.polys[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}]),t}(),U=function(){function t(n){e(this,t),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return r(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,u=[s],c=s.point,p=[];a=s,s=l,u.push(s),s.point!==c;)for(;;){var h=s.getAvailableLinkedEvents();if(0===h.length){var d=u[0].point,f=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===h.length){l=h[0].otherSE;break}for(var m=null,g=0,y=p.length;g<y;g++)if(p[g].point===s.point){m=g;break}if(null===m){p.push({index:u.length,point:s.point});var v=s.getLeftmostComparator(a);l=h.sort(v)[0].otherSE;break}var _=p.splice(m)[0],b=u.splice(_.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(u))}}return n}}]),r(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==k(i,e,o)&&(t.push(i),e=i)}if(1===t.length)return null;var a=t[0],s=t[1];0===k(a,e,s)&&t.shift(),t.push(t[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:t.length-1,c=this.isExteriorRing()?t.length:-1,p=[],h=u;h!=c;h+=l)p.push([t[h].x,t[h].y]);return p}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,n=this.events.length;t<n;t++){var r=this.events[t];D.compare(e,r)>0&&(e=r)}for(var i=e.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),V=function(){function t(n){e(this,t),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return r(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,n=this.interiorRings.length;t<n;t++){var r=this.interiorRings[t].getGeom();null!==r&&e.push(r)}return e}}]),t}(),q=function(){function t(n){e(this,t),this.rings=n,this.polys=this._composePolys(n)}return r(t,[{key:"getGeom",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++){var r=this.polys[t].getGeom();null!==r&&e.push(r)}return e}},{key:"_composePolys",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(!i.poly)if(i.isExteriorRing())t.push(new V(i));else{var o=i.enclosingRing();o.poly||t.push(new V(o)),o.poly.addInterior(i)}}return t}}]),t}(),H=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.compare;e(this,t),this.queue=n,this.tree=new p(r),this.segments=[]}return r(t,[{key:"process",value:function(e){var t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),n;var r=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!r)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(e.isLeft){var l=null;if(a){var u=a.getIntersection(t);if(null!==u&&(t.isAnEndpoint(u)||(l=u),!a.isAnEndpoint(u)))for(var c=this._splitSafely(a,u),p=0,h=c.length;p<h;p++)n.push(c[p])}var d=null;if(s){var f=s.getIntersection(t);if(null!==f&&(t.isAnEndpoint(f)||(d=f),!s.isAnEndpoint(f)))for(var m=this._splitSafely(s,f),g=0,y=m.length;g<y;g++)n.push(m[g])}if(null!==l||null!==d){var v=null;v=null===l?d:null===d||D.comparePoints(l,d)<=0?l:d,this.queue.remove(t.rightSE),n.push(t.rightSE);for(var _=t.split(v),b=0,x=_.length;b<x;b++)n.push(_[b])}n.length>0?(this.tree.remove(t),n.push(e)):(this.segments.push(t),t.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var S=this._splitSafely(a,w),E=0,C=S.length;E<C;E++)n.push(S[E]);if(!s.isAnEndpoint(w))for(var T=this._splitSafely(s,w),I=0,k=T.length;I<k;I++)n.push(T[I])}}this.tree.remove(t)}return n}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var n=e.rightSE;this.queue.remove(n);var r=e.split(t);return r.push(n),void 0===e.consumedBy&&this.tree.insert(e),r}}]),t}(),W="undefined"!==typeof n&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IOTC_APP_URL:"indoormaps.azureiotcentral.com",REACT_APP_IOTC_API_KEY:"SharedAccessSignature sr=ee24dc46-a5a8-47a1-9bf1-f595210e024d&sig=y%2BvAyCajS3Ef9Z%2B85u5CnltBcAg8fKgV774Cgbu4Vec%3D&skn=Indoor&se=1667560908065",REACT_APP_MAP_SUBSCRIPTION_KEY:"wDT4Vix_RNT6fnRZBqu4TGCz_2LkKeb9oYnrgiISef8",REACT_APP_MAP_STATESET_ID:"e4c2e788-bbec-90e2-8125-0042506a9596",REACT_APP_MAP_TILESET_ID:"01341fa4-3903-0e9b-dc85-3513e6a751f9"}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,G="undefined"!==typeof n&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IOTC_APP_URL:"indoormaps.azureiotcentral.com",REACT_APP_IOTC_API_KEY:"SharedAccessSignature sr=ee24dc46-a5a8-47a1-9bf1-f595210e024d&sig=y%2BvAyCajS3Ef9Z%2B85u5CnltBcAg8fKgV774Cgbu4Vec%3D&skn=Indoor&se=1667560908065",REACT_APP_MAP_SUBSCRIPTION_KEY:"wDT4Vix_RNT6fnRZBqu4TGCz_2LkKeb9oYnrgiISef8",REACT_APP_MAP_STATESET_ID:"e4c2e788-bbec-90e2-8125-0042506a9596",REACT_APP_MAP_TILESET_ID:"01341fa4-3903-0e9b-dc85-3513e6a751f9"}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Z=new(function(){function t(){e(this,t)}return r(t,[{key:"run",value:function(e,t,n){Z.type=e,C.reset();for(var r=[new j(t,!0)],i=0,o=n.length;i<o;i++)r.push(new j(n[i],!1));if(Z.numMultiPolys=r.length,"difference"===Z.type)for(var a=r[0],s=1;s<r.length;)null!==_(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===Z.type)for(var l=0,u=r.length;l<u;l++)for(var c=r[l],h=l+1,d=r.length;h<d;h++)if(null===_(c.bbox,r[h].bbox))return[];for(var f=new p(D.compare),m=0,g=r.length;m<g;m++)for(var y=r[m].getSweepEvents(),v=0,b=y.length;v<b;v++)if(f.insert(y[v]),f.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new H(f),w=f.size,S=f.pop();S;){var E=S.key;if(f.size===w){var T=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(T.id," ")+"[".concat(T.leftSE.point.x,", ").concat(T.leftSE.point.y,"] -> ")+"[".concat(T.rightSE.point.x,", ").concat(T.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>G)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var I=x.process(E),k=0,P=I.length;k<P;k++){var A=I[k];void 0===A.consumedBy&&f.insert(A)}w=f.size,S=f.pop()}C.reset();var M=U.factory(x.segments);return new q(M).getGeom()}}]),t}());return{union:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z.run("union",e,n)},intersection:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z.run("intersection",e,n)},xor:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z.run("xor",e,n)},difference:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z.run("difference",e,n)}}}()}));function Ng(e,t,n){var r;return void 0===n&&(n={}),e=Dg(e),t=Dg(t),0===(t=zg.intersection(e.coordinates,t.coordinates)).length?null:1===t.length?function(e,t,n){void 0===n&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return Rg({type:"Polygon",coordinates:e},t,n)}(t[0],n.properties):Rg({type:"MultiPolygon",coordinates:t},n=n.properties,r=void 0===r?{}:r)}var Bg,Fg=["DIV","SPAN","A"],jg=["data-azure-maps-attribution-minzoom","data-azure-maps-attribution-maxzoom","data-azure-maps-attribution-geometry","data-azure-maps-attribution-tileset","data-azure-maps-attribution-order","data-azure-maps-attribution-dynamic"],Ug=j(["href"],jg),Vg=(qg.prototype.equals=function(e){return this.stringRepresentation===e.stringRepresentation},Object.defineProperty(qg.prototype,"stringRepresentation",{get:function(){return[void 0!==this.minZoom?"minzoom="+this.minZoom:"",void 0!==this.maxZoom?"maxzoom="+this.maxZoom:"",void 0!==this.geometry?this.element.attributes.getNamedItem("data-azure-maps-attribution-geometry").value:"",void 0!==this.tilesetId?"tilesetId="+this.tilesetId:"",this.dynamic?"dynamic":""].filter((function(e){return 0<e.length})).join(";")},enumerable:!1,configurable:!0}),qg.applicable=function(e){return Array.from(e.attributes).map((function(e){return jg.includes(e.name)})).reduce((function(e,t){return e||t}),!1)},Object.defineProperty(qg.prototype,"minZoom",{get:function(){var e=this.element.attributes.getNamedItem("data-azure-maps-attribution-minzoom");return e&&!isNaN(e.value)?parseInt(e.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(qg.prototype,"maxZoom",{get:function(){var e=this.element.attributes.getNamedItem("data-azure-maps-attribution-maxzoom");return e&&!isNaN(e.value)?parseInt(e.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(qg.prototype,"geometry",{get:function(){var e=this.element.attributes.getNamedItem("data-azure-maps-attribution-geometry");if(e&&e.value)try{return JSON.parse(e.value)}catch(e){return}},enumerable:!1,configurable:!0}),Object.defineProperty(qg.prototype,"tilesetId",{get:function(){var e=this.element.attributes.getNamedItem("data-azure-maps-attribution-tileset");return e&&e.value?e.value:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(qg.prototype,"order",{get:function(){var e=this.element.attributes.getNamedItem("data-azure-maps-attribution-order");return e&&!isNaN(e.value)?parseInt(e.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(qg.prototype,"dynamic",{get:function(){return null!==this.element.attributes.getNamedItem("data-azure-maps-attribution-dynamic")},enumerable:!1,configurable:!0}),Object.defineProperty(qg.prototype,"hidesElement",{get:function(){return"none"==this.element.style.display},enumerable:!1,configurable:!0}),qg.prototype.forceHide=function(){this.element.style.display="none"},qg.prototype.satisfied=function(e){var t=!this.minZoom||!e.zoom||e.zoom>=this.minZoom,n=!this.maxZoom||!e.zoom||e.zoom<=this.maxZoom,r=!0;return this.geometry&&e.bounds&&(r=null!==Ng({type:"Feature",geometry:this.geometry,properties:{}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[Zi.getNorthWest(e.bounds),Zi.getNorthEast(e.bounds),Zi.getSouthEast(e.bounds),Zi.getSouthWest(e.bounds),Zi.getNorthWest(e.bounds)]]},properties:{}})),t&&n&&r},qg.prototype.apply=function(e,t){var n=this;void 0===t&&(t=null);var r=this.satisfied(e.getCamera()),i=this.dynamic&&this.tilesetId,o=this.hidesElement;return t=t&&["dragend","zoomend","pitchend"].includes(t.type),r||o?r&&(o||i)&&(r&&o&&this.element.style.removeProperty("display"),i&&(t?e.events.addOnce("idle",(function(t){return n.fetchAndApplyDynamicAttribution(e)})):this.fetchAndApplyDynamicAttribution(e))):this.element.style.display="none",r===o},qg.prototype.fetchAndApplyDynamicAttribution=function(e){var t,n,r,i=this,o=e.getCamera();this.lastFetchState&&Zi.containsBoundingBox(this.lastFetchState.bounds,o.bounds)&&Math.floor(this.lastFetchState.zoom)==Math.floor(o.zoom)||(t=vi(o.center,Zi.getSouthWest(o.bounds),qg.viewportBufferExpansionRatio),r=((n=vi(o.center,Zi.getNorthEast(o.bounds),qg.viewportBufferExpansionRatio))[0]<t[0]?[[t[0],t[1],180,n[1]],[-180,t[1],n[0],n[1]]]:[[t[0],t[1],n[0],n[1]]]).map((function(t){var n=new URLSearchParams({"api-version":"2.1",tilesetId:i.tilesetId,zoom:void 0!==o.zoom?""+Math.floor(o.zoom):void 0,bounds:t.join(",")}),r="https://{{azMapsDomain}}/map/attribution";return t={url:r},e._substituteDomainLanguageViewAndSignInRequest(r,t),n=t.url+"&"+n.toString(),e._sendRequest(n,"Attribution").then((function(e){return e.json()}))})),Promise.all(r).then((function(e){i.applyAttributionResponse(e),i.lastFetchState={bounds:new Zi([t[0],t[1],n[0],n[1]]),zoom:o.zoom}})).catch((function(e){return console.error(e)})))},qg.prototype.applyAttributionResponse=function(e){var t,n,r=this,i=e.map((function(e){return e.copyrights||[]})).reduce((function(e,t){return j(e,t)}),[]);0!=i.length&&(null!==(e=Ma.parseWithFilter(i.join(""),(function(e){return!0}),(function(e){return e}),(function(){return r.element.innerHTML="",r.element})))?(e="string"==typeof e?((i=document.createElement("span")).innerHTML=e,i):e,n=e===this.element?(t=document.createElement("span"),Array.from(this.element.childNodes).forEach((function(e){return t.appendChild(e)})),t):e,Array.from(this.element.attributes).filter((function(e){return jg.includes(e.name)})).forEach((function(e){return n.attributes.setNamedItem(e.cloneNode())})),n.style.display=this.element.style.display,e=this.element.parentElement,this.element.remove(),e.append(n),this.element=n,this.attributionChangeCallback(this)):console.warn("Dynamic attribution is empty after filtering"))},qg.viewportBufferExpansionRatio=2,function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);3<o&&a&&Object.defineProperty(t,n,a)}([(Bg=1e3,function(e,t,n){var r=n.value,i=new Map;return n.value=function(){var e=this,t=arguments;i.get(e)||(r.apply(e,t),i.set(e,!0),setTimeout((function(){return i.delete(e)}),Bg))},n})],qg.prototype,"fetchAndApplyDynamicAttribution",null),qg);function qg(e,t){var n=this;this.lastFetchState={bounds:null,zoom:null},this.getElement=function(){return n.element},this.element=e,this.attributionChangeCallback=t}var Hg=[/all rights reserved/gi],Wg=(Gg.prototype.addToMap=function(){this.map.events.add("stylechanged",this.loadAttributionOnceSourcesLoaded),this.map.events.add("dragend",this.applyRules),this.map.events.add("zoomend",this.applyRules),this.map.events.add("pitchend",this.applyRules)},Gg.prototype.removeFromMap=function(){this.map.events.remove("stylechanged",this.loadAttributionOnceSourcesLoaded),this.map.events.remove("dragend",this.applyRules),this.map.events.remove("zoomend",this.applyRules),this.map.events.remove("pitchend",this.applyRules)},Gg.prototype.getDefaultAttribution=function(){return this.copyrightControl.getDefaultAttributions().map((function(e){return t=e,(e=document.createElement("a")).textContent=t,e;var t}))},Gg);function Gg(e,t,n){var r,i=this;this.rules=[],this.virtualContext=((r=document.createElement("span")).className="azure-map-copyright-context",r),this.renderContext=this.virtualContext.cloneNode(!1),this.addAttributionFromSource=function(e){},this.removeAttributionFromSource=function(e){},this.getMapStyleSources=function(){var e=i.map._getMap();return Object.entries(e.getStyle().sources).map((function(t){return t=F(t,1)[0],e.getSource(t)}))},this.loadAttributionOnceSourcesLoaded=function(){var e=i.getMapStyleSources();Promise.all(e.map((function(e){return new Promise((function(t,n){"tiles"in e?t(e):(e.on("data",(function n(r){"metadata"==r.sourceDataType&&(e.off("data",n),t(e))})),e.on("error",(function t(r){e.off("error",t),n(r)})))})).then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))}))).then((function(e){i.reloadAttribution()}))},this.reloadAttribution=function(){var e=i.getMapStyleSources(),t=new Set,n={},r=Object.values(e).filter((function(e){return"attribution"in e&&e.attribution&&"tiles"in e&&0<e.tiles.length})).map((function(e){return e})).map((function(e){return e=e.attribution,Ma.parseWithFilter(e,(function(e){return Fg.includes(e.tagName)&&Array.from(e.attributes).map((function(e){return Ug.includes(e.name)})).reduce((function(e,t){return e&&t}),!0)}),(function(e){var r,o=null;return e instanceof HTMLElement&&Vg.applicable(e)&&(o=new Vg(e,(function(){return i.renderAttribution()})),t.add(o),void 0!==o.order&&(e.style.order=""+o.order)),o&&e instanceof HTMLElement&&(!((r=o.stringRepresentation)in n)||void 0!==o.order&&void 0!==n[r].order&&o.order<n[r].order||void 0!==o.order&&void 0===n[r].order)&&(n[r]=o),e}),(function(){return document.createElement("span")}))})),o=new Set(Object.values(n)),a=(e=new Set(j(t).filter((function(e){return!o.has(e)}))),new Set(j(e).map((function(e){return e.getElement()}))));j(a).filter((function(e){return null!==e.parentElement})).forEach((function(e){return e.parentElement.removeChild(e)})),i.rules=Object.values(n),r=r.filter((function(e){return"string"==typeof e||!a.has(e)})).map((function(e){return"string"==typeof e?new Text(e):e}));var s=document.createElement("span");0<r.length?r.forEach((function(e){return s.appendChild(e)})):i.getDefaultAttribution().forEach((function(e){return s.appendChild(e)})),i.virtualContext=s,i.copyrightControl.setOptions({copyrightContent:i.renderContext}),i.applyRules(),i.renderAttribution()},this.applyRules=function(e){void 0===e&&(e=null),i.rules.reduce((function(t,n){return n=n.apply(i.map,e),t||n}),!1)&&i.renderAttribution()},this.renderAttribution=function(){var e=function e(t){return Array.from("none"!=t.style.display?t.children:[]).map((function(t){return e(t)})).reduce((function(e,t){return j(e,t)}),Array.from("none"!=t.style.display?t.childNodes:[]).filter((function(e){return e.nodeType==e.TEXT_NODE})))},t=i.virtualContext.cloneNode(!0),n=e(t);n.forEach((function(e){return e.textContent=j(Hg).reduce((function(e,t){return e.replace(t,"").trim()}),e.textContent)})),n.reduce((function(e,t){return e.has(t.textContent)?(t.textContent="",t.parentElement&&t.parentElement.removeChild(t)):e.add(t.textContent),e}),new Set),i.renderContext.innerHTML="",Array.from(t.childNodes).forEach((function(e){return i.renderContext.appendChild(e)}))},this.map=e,this.copyrightControl=t,this.options=n}var Zg=i((function(e){var t=(t=function(e){if(this.REQUEST_TYPE={LOGIN:"LOGIN",RENEW_TOKEN:"RENEW_TOKEN",UNKNOWN:"UNKNOWN"},this.RESPONSE_TYPE={ID_TOKEN_TOKEN:"id_token token",TOKEN:"token"},this.CONSTANTS={ACCESS_TOKEN:"access_token",EXPIRES_IN:"expires_in",ID_TOKEN:"id_token",ERROR_DESCRIPTION:"error_description",SESSION_STATE:"session_state",ERROR:"error",STORAGE:{TOKEN_KEYS:"adal.token.keys",ACCESS_TOKEN_KEY:"adal.access.token.key",EXPIRATION_KEY:"adal.expiration.key",STATE_LOGIN:"adal.state.login",STATE_RENEW:"adal.state.renew",NONCE_IDTOKEN:"adal.nonce.idtoken",SESSION_STATE:"adal.session.state",USERNAME:"adal.username",IDTOKEN:"adal.idtoken",ERROR:"adal.error",ERROR_DESCRIPTION:"adal.error.description",LOGIN_REQUEST:"adal.login.request",LOGIN_ERROR:"adal.login.error",RENEW_STATUS:"adal.token.renew.status",ANGULAR_LOGIN_REQUEST:"adal.angular.login.request"},RESOURCE_DELIMETER:"|",CACHE_DELIMETER:"||",LOADFRAME_TIMEOUT:6e3,TOKEN_RENEW_STATUS_CANCELED:"Canceled",TOKEN_RENEW_STATUS_COMPLETED:"Completed",TOKEN_RENEW_STATUS_IN_PROGRESS:"In Progress",LOGGING_LEVEL:{ERROR:0,WARN:1,INFO:2,VERBOSE:3},LEVEL_STRING_MAP:{0:"ERROR:",1:"WARNING:",2:"INFO:",3:"VERBOSE:"},POPUP_WIDTH:483,POPUP_HEIGHT:600},t.prototype._singletonInstance)return t.prototype._singletonInstance;if((t.prototype._singletonInstance=this).instance="https://login.microsoftonline.com/",this.config={},this.callback=null,this.popUp=!1,this.isAngular=!1,this._user=null,this._activeRenewals={},this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._renewStates=[],this._callBackMappedToRenewStates={},this._callBacksMappedToRenewStates={},this._openedWindows=[],this._requestType=this.REQUEST_TYPE.LOGIN,window._adalInstance=this,e.displayCall&&"function"!=typeof e.displayCall)throw new Error("displayCall is not a function");if(!e.clientId)throw new Error("clientId is required");this.config=this._cloneConfig(e),void 0===this.config.navigateToLoginRequestUrl&&(this.config.navigateToLoginRequestUrl=!0),this.config.popUp&&(this.popUp=!0),this.config.callback&&"function"==typeof this.config.callback&&(this.callback=this.config.callback),this.config.instance&&(this.instance=this.config.instance),this.config.loginResource||(this.config.loginResource=this.config.clientId),this.config.redirectUri||(this.config.redirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.postLogoutRedirectUri||(this.config.postLogoutRedirectUri=window.location.href.split("?")[0].split("#")[0]),this.config.anonymousEndpoints||(this.config.anonymousEndpoints=[]),this.config.isAngular&&(this.isAngular=this.config.isAngular),this.config.loadFrameTimeout&&(this.CONSTANTS.LOADFRAME_TIMEOUT=this.config.loadFrameTimeout)},"undefined"!=typeof window&&(window.Logging={piiLoggingEnabled:!1,level:0,log:function(e){}}),t.prototype.login=function(){var e,t;this._loginInProgress?this.info("Login in progress"):(this._loginInProgress=!0,e=this._guid(),this.config.state=e,this._idTokenNonce=this._guid(),(t=this._getItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST))&&""!==t?this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""):t=window.location.href,this.verbose("Expected state: "+e+" startPage:"+t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,t),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,e,!0),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),t=this._getNavigateUrl("id_token",null)+"&nonce="+encodeURIComponent(this._idTokenNonce),this.config.displayCall?this.config.displayCall(t):this.popUp?(this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._renewStates.push(e),this.registerCallback(e,this.config.clientId,this.callback),this._loginPopup(t)):this.promptUser(t))},t.prototype._openPopup=function(e,t,n,r){try{var i=window.screenLeft||window.screenX,o=window.screenTop||window.screenY,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=a/2-n/2+i,u=s/2-r/2+o,c=window.open(e,t,"width="+n+", height="+r+", top="+u+", left="+l);return c.focus&&c.focus(),c}catch(e){return this.warn("Error opening popup, "+e.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},t.prototype._handlePopupError=function(e,t,n,r,i){this.warn(r),this._saveItem(this.CONSTANTS.STORAGE.ERROR,n),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,r),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,i),t&&this._activeRenewals[t]&&(this._activeRenewals[t]=null),this._loginInProgress=!1,this._acquireTokenInProgress=!1,e&&e(r,null,n)},t.prototype._loginPopup=function(e,t,n){var r,i,o,a=this._openPopup(e,"login",this.CONSTANTS.POPUP_WIDTH,this.CONSTANTS.POPUP_HEIGHT),s=n||this.callback;null!=a?(this._openedWindows.push(a),r=-1!=this.config.redirectUri.indexOf("#")?this.config.redirectUri.split("#")[0]:this.config.redirectUri,i=this,o=window.setInterval((function(){if(!a||a.closed||void 0===a.closed){var e="Popup Window closed",n="Popup Window closed by UI action/ Popup Window handle destroyed due to cross zone navigation in IE/Edge";return i.isAngular&&i._broadcast("adal:popUpClosed",n+i.CONSTANTS.RESOURCE_DELIMETER+e),i._handlePopupError(s,t,e,n,n),void window.clearInterval(o)}try{var l=a.location;if(-1!=encodeURI(l.href).indexOf(encodeURI(r)))return i.isAngular?i._broadcast("adal:popUpHashChanged",l.hash):i.handleWindowCallback(l.hash),window.clearInterval(o),i._loginInProgress=!1,i._acquireTokenInProgress=!1,i.info("Closing popup window"),i._openedWindows=[],void a.close()}catch(e){}}),1)):this._handlePopupError(s,t,"Error opening popup",n="Popup Window is null. This can happen if you are using IE",n)},t.prototype._broadcast=function(e,t){function n(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(n.prototype=window.Event.prototype,window.CustomEvent=n),t=new CustomEvent(e,{detail:t}),window.dispatchEvent(t)},t.prototype.loginInProgress=function(){return this._loginInProgress},t.prototype._hasResource=function(e){var t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);return t&&!this._isEmpty(t)&&-1<t.indexOf(e+this.CONSTANTS.RESOURCE_DELIMETER)},t.prototype.getCachedToken=function(e){if(!this._hasResource(e))return null;var t=this._getItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e),n=this._getItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e),r=this.config.expireOffsetSeconds||300;return n&&n>this._now()+r?t:(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e,0),null)},t.prototype.getCachedUser=function(){if(this._user)return this._user;var e=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN);return this._user=this._createUser(e),this._user},t.prototype.registerCallback=function(e,t,n){this._activeRenewals[t]=e,this._callBacksMappedToRenewStates[e]||(this._callBacksMappedToRenewStates[e]=[]);var r=this;this._callBacksMappedToRenewStates[e].push(n),this._callBackMappedToRenewStates[e]||(this._callBackMappedToRenewStates[e]=function(n,i,o,a){r._activeRenewals[t]=null;for(var s=0;s<r._callBacksMappedToRenewStates[e].length;++s)try{r._callBacksMappedToRenewStates[e][s](n,i,o,a)}catch(o){r.warn(o)}r._callBacksMappedToRenewStates[e]=null,r._callBackMappedToRenewStates[e]=null})},t.prototype._renewToken=function(e,t,n){this.info("renewToken is called for resource:"+e);var r=this._addAdalFrame("adalRenewFrame"+e),i=this._guid()+"|"+e;this.config.state=i,this._renewStates.push(i),this.verbose("Renew token Expected state: "+i);var o=this._urlRemoveQueryStringParameter(this._getNavigateUrl(n=n||"token",e),"prompt");n===this.RESPONSE_TYPE.ID_TOKEN_TOKEN&&(this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),o+="&nonce="+encodeURIComponent(this._idTokenNonce)),o=this._addHintParameters(o+="&prompt=none"),this.registerCallback(i,e,t),this.verbosePii("Navigate to:"+o),r.src="about:blank",this._loadFrameTimeout(o,"adalRenewFrame"+e,e)},t.prototype._renewIdToken=function(e,t){this.info("renewIdToken is called");var n=this._addAdalFrame("adalIdTokenFrame"),r=this._guid()+"|"+this.config.clientId;this._idTokenNonce=this._guid(),this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,this._idTokenNonce,!0),this.config.state=r,this._renewStates.push(r),this.verbose("Renew Idtoken Expected state: "+r);var i=null==t?null:this.config.clientId;t=t||"id_token",i=this._urlRemoveQueryStringParameter(this._getNavigateUrl(t,i),"prompt"),i=this._addHintParameters(i+="&prompt=none"),i+="&nonce="+encodeURIComponent(this._idTokenNonce),this.registerCallback(r,this.config.clientId,e),this.verbosePii("Navigate to:"+i),n.src="about:blank",this._loadFrameTimeout(i,"adalIdTokenFrame",this.config.clientId)},t.prototype._urlContainsQueryStringParameter=function(e,t){return new RegExp("[\\?&]"+e+"=").test(t)},t.prototype._urlRemoveQueryStringParameter=function(e,t){var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e.replace(n,"")},t.prototype._loadFrameTimeout=function(e,t,n){this.verbose("Set loading state to pending for: "+n),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS),this._loadFrame(e,t);var r=this;setTimeout((function(){var e;r._getItem(r.CONSTANTS.STORAGE.RENEW_STATUS+n)===r.CONSTANTS.TOKEN_RENEW_STATUS_IN_PROGRESS&&(r.verbose("Loading frame has timed out after: "+r.CONSTANTS.LOADFRAME_TIMEOUT/1e3+" seconds for resource "+n),(e=r._activeRenewals[n])&&r._callBackMappedToRenewStates[e]&&r._callBackMappedToRenewStates[e]("Token renewal operation failed due to timeout",null,"Token Renewal Failed"),r._saveItem(r.CONSTANTS.STORAGE.RENEW_STATUS+n,r.CONSTANTS.TOKEN_RENEW_STATUS_CANCELED))}),r.CONSTANTS.LOADFRAME_TIMEOUT)},t.prototype._loadFrame=function(e,t){var n=this;n.info("LoadFrame: "+t);var r=t;setTimeout((function(){var t=n._addAdalFrame(r);""!==t.src&&"about:blank"!==t.src||(t.src=e,n._loadFrame(e,r))}),500)},t.prototype.acquireToken=function(e,t){if(this._isEmpty(e))return this.warn("resource is required"),void t("resource is required",null,"resource is required");var n=this.getCachedToken(e);return n?(this.info("Token is already in cache for resource:"+e),void t(null,n,null)):this._user||this.config.extraQueryParameter&&-1!==this.config.extraQueryParameter.indexOf("login_hint")?void(this._activeRenewals[e]?this.registerCallback(this._activeRenewals[e],e,t):(this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,e===this.config.clientId?this._user?(this.verbose("renewing idtoken"),this._renewIdToken(t)):(this.verbose("renewing idtoken and access_token"),this._renewIdToken(t,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)):this._user?(this.verbose("renewing access_token"),this._renewToken(e,t)):(this.verbose("renewing idtoken and access_token"),this._renewToken(e,t,this.RESPONSE_TYPE.ID_TOKEN_TOKEN)))):(this.warn("User login is required"),void t("User login is required",null,"login required"))},t.prototype.acquireTokenPopup=function(e,t,n,r){if(this._isEmpty(e))return this.warn("resource is required"),void r("resource is required",null,"resource is required");if(!this._user)return this.warn("User login is required"),void r("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void r("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var i=this._guid()+"|"+e;this.config.state=i,this._renewStates.push(i),this._requestType=this.REQUEST_TYPE.RENEW_TOKEN,this.verbose("Renew token Expected state: "+i);var o=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",e),"prompt");if(o+="&prompt=select_account",t&&(o+=t),n&&-1===o.indexOf("&claims"))o+="&claims="+encodeURIComponent(n);else if(n&&-1!==o.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");o=this._addHintParameters(o),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+e),this.registerCallback(i,e,r),this._loginPopup(o,e,r)},t.prototype.acquireTokenRedirect=function(e,t,n){if(this._isEmpty(e))return this.warn("resource is required"),void r("resource is required",null,"resource is required");var r=this.callback;if(!this._user)return this.warn("User login is required"),void r("User login is required",null,"login required");if(this._acquireTokenInProgress)return this.warn("Acquire token interactive is already in progress"),void r("Acquire token interactive is already in progress",null,"Acquire token interactive is already in progress");var i=this._guid()+"|"+e;if(this.config.state=i,this.verbose("Renew token Expected state: "+i),r=this._urlRemoveQueryStringParameter(this._getNavigateUrl("token",e),"prompt"),r+="&prompt=select_account",t&&(r+=t),n&&-1===r.indexOf("&claims"))r+="&claims="+encodeURIComponent(n);else if(n&&-1!==r.indexOf("&claims"))throw new Error("Claims cannot be passed as an extraQueryParameter");r=this._addHintParameters(r),this._acquireTokenInProgress=!0,this.info("acquireToken interactive is called for the resource "+e),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,window.location.href),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,i,!0),this.promptUser(r)},t.prototype.promptUser=function(e){e?(this.infoPii("Navigate to:"+e),window.location.replace(e)):this.info("Navigate url is empty")},t.prototype.clearCache=function(){this._saveItem(this.CONSTANTS.STORAGE.LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.ANGULAR_LOGIN_REQUEST,""),this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_LOGIN,""),this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._renewStates=[],this._saveItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"");var e=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS);if(!this._isEmpty(e)){e=e.split(this.CONSTANTS.RESOURCE_DELIMETER);for(var t=0;t<e.length&&""!==e[t];t++)this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e[t],""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e[t],0)}this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,"")},t.prototype.clearCacheForResource=function(e){this._saveItem(this.CONSTANTS.STORAGE.STATE_RENEW,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,""),this._hasResource(e)&&(this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+e,""),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+e,0))},t.prototype.logOut=function(){var e,t;this.clearCache(),this._user=null,t=this.config.logOutUri||(e="common",t="",this.config.tenant&&(e=this.config.tenant),this.config.postLogoutRedirectUri&&(t="post_logout_redirect_uri="+encodeURIComponent(this.config.postLogoutRedirectUri)),this.instance+e+"/oauth2/logout?"+t),this.infoPii("Logout navigate to: "+t),this.promptUser(t)},t.prototype._isEmpty=function(e){return void 0===e||!e||0===e.length},t.prototype.getUser=function(e){if("function"!=typeof e)throw new Error("callback is not a function");var t;this._user?e(null,this._user):(t=this._getItem(this.CONSTANTS.STORAGE.IDTOKEN),this._isEmpty(t)?(this.warn("User information is not available"),e("User information is not available",null)):(this.info("User exists in cache: "),this._user=this._createUser(t),e(null,this._user)))},t.prototype._addHintParameters=function(e){var t;return this._user&&this._user.profile&&(this._user.profile.sid&&-1!==e.indexOf("&prompt=none")?this._urlContainsQueryStringParameter("sid",e)||(e+="&sid="+encodeURIComponent(this._user.profile.sid)):this._user.profile.upn&&(this._urlContainsQueryStringParameter("login_hint",e)||(e+="&login_hint="+encodeURIComponent(this._user.profile.upn)),!this._urlContainsQueryStringParameter("domain_hint",e)&&-1<this._user.profile.upn.indexOf("@")&&(t=this._user.profile.upn.split("@"),e+="&domain_hint="+encodeURIComponent(t[t.length-1])))),e},t.prototype._createUser=function(e){var t=null;return(e=this._extractIdToken(e))&&e.hasOwnProperty("aud")&&(e.aud.toLowerCase()===this.config.clientId.toLowerCase()?(t={userName:"",profile:e},e.hasOwnProperty("upn")?t.userName=e.upn:e.hasOwnProperty("email")&&(t.userName=e.email)):this.warn("IdToken has invalid aud field")),t},t.prototype._getHash=function(e){return-1<e.indexOf("#/")?e=e.substring(e.indexOf("#/")+2):-1<e.indexOf("#")&&(e=e.substring(1)),e},t.prototype.isCallback=function(e){return e=this._getHash(e),(e=this._deserialize(e)).hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||e.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||e.hasOwnProperty(this.CONSTANTS.ID_TOKEN)},t.prototype.getLoginError=function(){return this._getItem(this.CONSTANTS.STORAGE.LOGIN_ERROR)},t.prototype.getRequestInfo=function(e){e=this._getHash(e);var t=this._deserialize(e),n={valid:!1,parameters:{},stateMatch:!1,stateResponse:"",requestType:this.REQUEST_TYPE.UNKNOWN};if(t&&((n.parameters=t).hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)||t.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)||t.hasOwnProperty(this.CONSTANTS.ID_TOKEN))){if(n.valid=!0,e="",!t.hasOwnProperty("state"))return this.warn("No state returned"),n;if(this.verbose("State: "+t.state),e=t.state,n.stateResponse=e,this._matchState(n))return n;if(!n.stateMatch&&window.parent){n.requestType=this._requestType;for(var r=this._renewStates,i=0;i<r.length;i++)if(r[i]===n.stateResponse){n.stateMatch=!0;break}}}return n},t.prototype._matchNonce=function(e){if(t=this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN))for(var t=t.split(this.CONSTANTS.CACHE_DELIMETER),n=0;n<t.length;n++)if(t[n]&&t[n]===e.profile.nonce)return!0;return!1},t.prototype._matchState=function(e){if(t=this._getItem(this.CONSTANTS.STORAGE.STATE_LOGIN))for(var t=t.split(this.CONSTANTS.CACHE_DELIMETER),n=0;n<t.length;n++)if(t[n]&&t[n]===e.stateResponse)return e.requestType=this.REQUEST_TYPE.LOGIN,e.stateMatch=!0;if(r=this._getItem(this.CONSTANTS.STORAGE.STATE_RENEW)){var r=r.split(this.CONSTANTS.CACHE_DELIMETER);for(n=0;n<r.length;n++)if(r[n]&&r[n]===e.stateResponse)return e.requestType=this.REQUEST_TYPE.RENEW_TOKEN,e.stateMatch=!0}return!1},t.prototype._getResourceFromState=function(e){if(e){var t=e.indexOf("|");if(-1<t&&t+1<e.length)return e.substring(t+1)}return""},t.prototype.saveTokenFromHash=function(e){this.info("State status:"+e.stateMatch+"; Request type:"+e.requestType),this._saveItem(this.CONSTANTS.STORAGE.ERROR,""),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"");var t,n=this._getResourceFromState(e.stateResponse);e.parameters.hasOwnProperty(this.CONSTANTS.ERROR_DESCRIPTION)?(this.infoPii("Error :"+e.parameters.error+"; Error description:"+e.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),this._saveItem(this.CONSTANTS.STORAGE.ERROR,e.parameters.error),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,e.parameters[this.CONSTANTS.ERROR_DESCRIPTION]),e.requestType===this.REQUEST_TYPE.LOGIN&&(this._loginInProgress=!1,this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,e.parameters.error_description))):e.stateMatch?(this.info("State is right"),e.parameters.hasOwnProperty(this.CONSTANTS.SESSION_STATE)&&this._saveItem(this.CONSTANTS.STORAGE.SESSION_STATE,e.parameters[this.CONSTANTS.SESSION_STATE]),e.parameters.hasOwnProperty(this.CONSTANTS.ACCESS_TOKEN)&&(this.info("Fragment has access token"),this._hasResource(n)||(t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,t+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,e.parameters[this.CONSTANTS.ACCESS_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._expiresIn(e.parameters[this.CONSTANTS.EXPIRES_IN]))),e.parameters.hasOwnProperty(this.CONSTANTS.ID_TOKEN)&&(this.info("Fragment has id token"),this._loginInProgress=!1,this._user=this._createUser(e.parameters[this.CONSTANTS.ID_TOKEN]),this._user&&this._user.profile?this._matchNonce(this._user)?(this._saveItem(this.CONSTANTS.STORAGE.IDTOKEN,e.parameters[this.CONSTANTS.ID_TOKEN]),n=this.config.loginResource||this.config.clientId,this._hasResource(n)||(t=this._getItem(this.CONSTANTS.STORAGE.TOKEN_KEYS)||"",this._saveItem(this.CONSTANTS.STORAGE.TOKEN_KEYS,t+n+this.CONSTANTS.RESOURCE_DELIMETER)),this._saveItem(this.CONSTANTS.STORAGE.ACCESS_TOKEN_KEY+n,e.parameters[this.CONSTANTS.ID_TOKEN]),this._saveItem(this.CONSTANTS.STORAGE.EXPIRATION_KEY+n,this._user.profile.exp)):(this._saveItem(this.CONSTANTS.STORAGE.LOGIN_ERROR,"Nonce received: "+this._user.profile.nonce+" is not same as requested: "+this._getItem(this.CONSTANTS.STORAGE.NONCE_IDTOKEN)),this._user=null):(e.parameters.error="invalid id_token",e.parameters.error_description="Invalid id_token. id_token: "+e.parameters[this.CONSTANTS.ID_TOKEN],this._saveItem(this.CONSTANTS.STORAGE.ERROR,"invalid id_token"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid id_token. id_token: "+e.parameters[this.CONSTANTS.ID_TOKEN])))):(e.parameters.error="Invalid_state",e.parameters.error_description="Invalid_state. state: "+e.stateResponse,this._saveItem(this.CONSTANTS.STORAGE.ERROR,"Invalid_state"),this._saveItem(this.CONSTANTS.STORAGE.ERROR_DESCRIPTION,"Invalid_state. state: "+e.stateResponse)),this._saveItem(this.CONSTANTS.STORAGE.RENEW_STATUS+n,this.CONSTANTS.TOKEN_RENEW_STATUS_COMPLETED)},t.prototype.getResourceForEndpoint=function(e){if(this.config&&this.config.anonymousEndpoints)for(var t=0;t<this.config.anonymousEndpoints.length;t++)if(-1<e.indexOf(this.config.anonymousEndpoints[t]))return null;if(this.config&&this.config.endpoints)for(var n in this.config.endpoints)if(-1<e.indexOf(n))return this.config.endpoints[n];return(-1<e.indexOf("http://")||-1<e.indexOf("https://"))&&this._getHostFromUri(e)!==this._getHostFromUri(this.config.redirectUri)?null:this.config.loginResource},t.prototype._getHostFromUri=function(e){return String(e).replace(/^(https?:)\/\//,"").split("/")[0]},t.prototype.handleWindowCallback=function(e){if(null==e&&(e=window.location.hash),this.isCallback(e)){var t=null,n=!1;0<this._openedWindows.length&&this._openedWindows[this._openedWindows.length-1].opener&&this._openedWindows[this._openedWindows.length-1].opener._adalInstance?(t=this._openedWindows[this._openedWindows.length-1].opener._adalInstance,n=!0):window.parent&&window.parent._adalInstance&&(t=window.parent._adalInstance);var r,i=t.getRequestInfo(e),o=null,a=n||window.parent!==window?t._callBackMappedToRenewStates[i.stateResponse]:t.callback;t.info("Returned from redirect url"),t.saveTokenFromHash(i),i.requestType===this.REQUEST_TYPE.RENEW_TOKEN&&window.parent?(window.parent!==window?t.verbose("Window is in iframe, acquiring token silently"):t.verbose("acquiring token interactive in progress"),r=i.parameters[t.CONSTANTS.ACCESS_TOKEN]||i.parameters[t.CONSTANTS.ID_TOKEN],o=t.CONSTANTS.ACCESS_TOKEN):i.requestType===this.REQUEST_TYPE.LOGIN&&(r=i.parameters[t.CONSTANTS.ID_TOKEN],o=t.CONSTANTS.ID_TOKEN),e=i.parameters[t.CONSTANTS.ERROR_DESCRIPTION],i=i.parameters[t.CONSTANTS.ERROR];try{a&&a(e,r,i,o)}catch(e){t.error("Error occurred in user defined callback function: "+e)}window.parent!==window||n||(t.config.navigateToLoginRequestUrl?window.location.href=t._getItem(t.CONSTANTS.STORAGE.LOGIN_REQUEST):window.location.hash="")}},t.prototype._getNavigateUrl=function(e,t){var n="common";return this.config.tenant&&(n=this.config.tenant),t=this.instance+n+"/oauth2/authorize"+this._serialize(e,this.config,t)+this._addLibMetadata(),this.info("Navigate url:"+t),t},t.prototype._extractIdToken=function(e){if(!(e=this._decodeJwt(e)))return null;try{var t=e.JWSPayload,n=this._base64DecodeStringUrlSafe(t);return n?JSON.parse(n):(this.info("The returned id_token could not be base64 url safe decoded."),null)}catch(e){this.error("The returned id_token could not be decoded",e)}return null},t.prototype._base64DecodeStringUrlSafe=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(escape(window.atob(e))):decodeURIComponent(escape(this._decode(e)))},t.prototype._decode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(e=String(e).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var r,i,o,a,s,l,u,c="",p=0;p<n;p+=4){if(r=t.indexOf(e.charAt(p)),i=t.indexOf(e.charAt(p+1)),o=t.indexOf(e.charAt(p+2)),a=t.indexOf(e.charAt(p+3)),p+2===n-1){l=(s=r<<18|i<<12|o<<6)>>16&255,u=s>>8&255,c+=String.fromCharCode(l,u);break}if(p+1===n-1){l=(s=r<<18|i<<12)>>16&255,c+=String.fromCharCode(l);break}l=(s=r<<18|i<<12|o<<6|a)>>16&255,u=s>>8&255,c+=String.fromCharCode(l,u,255&s)}return c},t.prototype._decodeJwt=function(e){return this._isEmpty(e)?null:!(e=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e))||e.length<4?(this.warn("The returned id_token is not parseable."),null):{header:e[1],JWSPayload:e[2],JWSSig:e[3]}},t.prototype._convertUrlSafeToRegularBase64EncodedString=function(e){return e.replace("-","+").replace("_","/")},t.prototype._serialize=function(e,t,n){var r=[];return null!==t&&(r.push("?response_type="+e),r.push("client_id="+encodeURIComponent(t.clientId)),n&&r.push("resource="+encodeURIComponent(n)),r.push("redirect_uri="+encodeURIComponent(t.redirectUri)),r.push("state="+encodeURIComponent(t.state)),t.hasOwnProperty("slice")&&r.push("slice="+encodeURIComponent(t.slice)),t.hasOwnProperty("extraQueryParameter")&&r.push(t.extraQueryParameter),t=t.correlationId||this._guid(),r.push("client-request-id="+encodeURIComponent(t))),r.join("&")},t.prototype._deserialize=function(e){for(var t=/\+/g,n=/([^&=]+)=([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(t," "))},i={},o=n.exec(e);o;)i[r(o[1])]=r(o[2]),o=n.exec(e);return i},t.prototype._decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},t.prototype._guid=function(){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues){var t=new Uint8Array(16);return e.getRandomValues(t),t[6]|=64,t[6]&=79,t[8]|=128,t[8]&=191,this._decimalToHex(t[0])+this._decimalToHex(t[1])+this._decimalToHex(t[2])+this._decimalToHex(t[3])+"-"+this._decimalToHex(t[4])+this._decimalToHex(t[5])+"-"+this._decimalToHex(t[6])+this._decimalToHex(t[7])+"-"+this._decimalToHex(t[8])+this._decimalToHex(t[9])+"-"+this._decimalToHex(t[10])+this._decimalToHex(t[11])+this._decimalToHex(t[12])+this._decimalToHex(t[13])+this._decimalToHex(t[14])+this._decimalToHex(t[15])}for(var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="0123456789abcdef",i=0,o="",a=0;a<36;a++)"-"!==n[a]&&"4"!==n[a]&&(i=16*Math.random()|0),"x"===n[a]?o+=r[i]:"y"===n[a]?(i&=3,o+=r[i|=8]):o+=n[a];return o},t.prototype._expiresIn=function(e){return e=e||3599,this._now()+parseInt(e,10)},t.prototype._now=function(){return Math.round((new Date).getTime()/1e3)},t.prototype._addAdalFrame=function(e){if(void 0!==e){this.info("Add adal frame to document:"+e);var t,n=document.getElementById(e);return n||(document.createElement&&document.documentElement&&(window.opera||-1===window.navigator.userAgent.indexOf("MSIE 5.0"))?((t=document.createElement("iframe")).setAttribute("id",e),t.setAttribute("aria-hidden","true"),t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height=t.borderWidth="0px",n=document.getElementsByTagName("body")[0].appendChild(t)):document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeEnd",'<iframe name="'+e+'" id="'+e+'" style="display:none"></iframe>'),window.frames&&window.frames[e]&&(n=window.frames[e])),n}},t.prototype._saveItem=function(e,t,n){return this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation?this._supportsLocalStorage()?(n?(n=this._getItem(e)||"",localStorage.setItem(e,n+t+this.CONSTANTS.CACHE_DELIMETER)):localStorage.setItem(e,t),!0):(this.info("Local storage is not supported"),!1):this._supportsSessionStorage()?(sessionStorage.setItem(e,t),!0):(this.info("Session storage is not supported"),!1)},t.prototype._getItem=function(e){return this.config&&this.config.cacheLocation&&"localStorage"===this.config.cacheLocation?this._supportsLocalStorage()?localStorage.getItem(e):(this.info("Local storage is not supported"),null):this._supportsSessionStorage()?sessionStorage.getItem(e):(this.info("Session storage is not supported"),null)},t.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem("storageTest","A"),"A"==window.localStorage.getItem("storageTest")&&(window.localStorage.removeItem("storageTest"),!window.localStorage.getItem("storageTest")))}catch(e){return!1}},t.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem("storageTest","A"),"A"==window.sessionStorage.getItem("storageTest")&&(window.sessionStorage.removeItem("storageTest"),!window.sessionStorage.getItem("storageTest")))}catch(e){return!1}},t.prototype._cloneConfig=function(e){if(null===e||"object"!=typeof e)return e;var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},t.prototype._addLibMetadata=function(){return"&x-client-SKU=Js&x-client-Ver="+this._libVersion()},t.prototype.log=function(e,t,n,r){var i;e<=Logging.level&&(!Logging.piiLoggingEnabled&&r||(i=(new Date).toUTCString(),r="",r=this.config.correlationId?i+":"+this.config.correlationId+"-"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[e]+" "+t:i+":"+this._libVersion()+"-"+this.CONSTANTS.LEVEL_STRING_MAP[e]+" "+t,n&&(r+="\nstack:\n"+n.stack),Logging.log(r)))},t.prototype.error=function(e,t){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,e,t)},t.prototype.warn=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,e,null)},t.prototype.info=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,e,null)},t.prototype.verbose=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,e,null)},t.prototype.errorPii=function(e,t){this.log(this.CONSTANTS.LOGGING_LEVEL.ERROR,e,t,!0)},t.prototype.warnPii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.WARN,e,null,!0)},t.prototype.infoPii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.INFO,e,null,!0)},t.prototype.verbosePii=function(e){this.log(this.CONSTANTS.LOGGING_LEVEL.VERBOSE,e,null,!0)},t.prototype._libVersion=function(){return"1.0.18"},e.exports&&(e.exports=t,e.exports.inject=function(e){return new t(e)}),t)}));function Kg(e){this.message=e}Zg.inject,(Kg.prototype=new Error).name="InvalidCharacterError";var Xg="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Kg("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)&&(a+=String.fromCharCode(255&n>>(-2*i&6))))r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function Yg(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Xg(t).replace(/(.)/g,(function(e,t){return"%"+((t=t.charCodeAt(0).toString(16).toUpperCase()).length<2?"0"+t:t)})))}catch(e){return Xg(t)}}function Jg(e){this.message=e}function $g(e,t){if("string"!=typeof e)throw new Jg("Invalid token specified");t=!0===(t=t||{}).header?0:1;try{return JSON.parse(Yg(e.split(".")[t]))}catch(e){throw new Jg("Invalid token specified: "+e.message)}}(Jg.prototype=new Error).name="InvalidTokenError",$g.InvalidTokenError=Jg;var Qg=(ey.prototype.initialize=function(){var e=this;return this.initPromise||(this.initPromise=new Promise((function(n,r){e.options.authType===t.AuthenticationType.subscriptionKey?n():e.options.authType===t.AuthenticationType.aad?(e.options.authContext=e.options.authContext||ey.getDefaultAuthContext(e.options),e.options.authContext.handleWindowCallback(),e.options.authContext.getLoginError()?r(new Error("Error logging in the AAD users: "+e.options.authContext.getLoginError())):e.options.authContext.isCallback(window.location.hash)?e.map.dispose():setTimeout((function(){return e._loginAndAcquire(n,r)}))):e.options.authType===t.AuthenticationType.anonymous?n(e._triggerTokenFetch()):r(new Error("An invalid authentication type was specified."))}))),this.initPromise},ey.getDefaultAuthContext=function(e){if(!e.aadAppId)throw new Error("No AAD app ID was specified.");if(!e.aadTenant)throw new Error("No AAD tenant was specified.");return this.defaultAuthContext||(this.defaultAuthContext=new Zg({instance:e.aadInstance||d,tenant:e.aadTenant,clientId:e.aadAppId,cacheLocation:this.constants.preferredCacheLocation})),this.defaultAuthContext},ey.prototype._loginAndAcquire=function(e,t){function n(){i.options.authContext.acquireToken(M,(function(n){n?t(new Error(n)):(n={map:i.map,type:ey.constants.events.tokenAcquired},i.map.events.invoke(ey.constants.events.tokenAcquired,n),e())}))}var r,i=this,o=this.options.authContext.getCachedToken(this.options.aadAppId),a=this.options.authContext.getCachedUser();o&&a?n():(this.options.authContext.loginInProgress()||this.options.authContext.login(),r=setInterval((function(){i.options.authContext.loginInProgress()||(clearInterval(r),i.options.authContext.getCachedToken(i.options.aadAppId)?n():t(new Error(i.options.authContext.getLoginError()||"The AAD authentication context is not logged-in for the specified app ID: "+i.options.aadAppId)))}),25))},ey.prototype.getAuthType=function(){return this.options.authType},ey.prototype.getClientId=function(){return this.options.clientId},ey.prototype.getToken=function(){var e=this;if(this.options.authType===t.AuthenticationType.aad){var n=this.options.authContext.getCachedToken(M);return n||(this.options.authContext.getCachedUser()||this.options.authContext.login(),this.options.authContext.acquireToken(M,(function(t,r){t||(n=r,r={map:e.map,type:ey.constants.events.tokenAcquired},e.map.events.invoke(ey.constants.events.tokenAcquired,r))}))),n}if(this.options.authType===t.AuthenticationType.anonymous){var r=this._getItem(ey.constants.storage.accessTokenKey);if(r){var i=this._getTokenExpiry(r);if(i<300&&0<i)this._triggerTokenFetch();else if(i<=0)throw this._saveItem(ey.constants.storage.accessTokenKey,""),new Error(ey.constants.errors.tokenExpired)}else this._triggerTokenFetch();return r}if(this.options.authType===t.AuthenticationType.subscriptionKey)return this.options.subscriptionKey},ey.prototype._getTokenExpiry=function(e){var t=$g(e).exp;return 0<t-(e=this._getCurrentTime())?t-e:-1},ey.prototype._storeAccessToken=function(e){this._saveItem(ey.constants.storage.accessTokenKey,e),e={map:this.map,type:ey.constants.events.tokenAcquired},this.map.events.invoke(ey.constants.events.tokenAcquired,e)},ey.prototype._saveItem=function(e,t){return this._supportsLocalStorage()?localStorage.setItem(e,t):this._supportsSessionStorage()?sessionStorage.setItem(e,t):this.fallbackStorage[e]=t,!0},ey.prototype._getItem=function(e){return this._supportsLocalStorage()?localStorage.getItem(e):this._supportsSessionStorage()?sessionStorage.getItem(e):e in this.fallbackStorage?this.fallbackStorage[e]:null},ey.prototype._supportsLocalStorage=function(){try{return!!window.localStorage&&(window.localStorage.setItem(ey.constants.storage.testStorageKey,"A"),"A"===window.localStorage.getItem(ey.constants.storage.testStorageKey)&&(window.localStorage.removeItem(ey.constants.storage.testStorageKey),!window.localStorage.getItem(ey.constants.storage.testStorageKey)))}catch(r){return!1}},ey.prototype._supportsSessionStorage=function(){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(ey.constants.storage.testStorageKey,"A"),"A"===window.sessionStorage.getItem(ey.constants.storage.testStorageKey)&&(window.sessionStorage.removeItem(ey.constants.storage.testStorageKey),!window.sessionStorage.getItem(ey.constants.storage.testStorageKey)))}catch(r){return!1}},ey.prototype._getCurrentTime=function(){return Math.round((new Date).getTime()/1e3)},ey.prototype.signRequest=function(e){e.headers=e.headers||{},e.headers[O]=this.sessionId,e.headers[P]=A,e.headers[I]="MapControl/2.1.5 (Web)";var n=this.getToken();switch(this.options.authType){case t.AuthenticationType.aad:case t.AuthenticationType.anonymous:e.headers[k]=this.options.clientId,e.headers[m]=g+n;break;case t.AuthenticationType.subscriptionKey:if("url"in e)-1!==e.url.indexOf("?")?e.url+="&subscription-key="+n:e.url+="?&subscription-key="+n;else{if(!("domain"in e))throw new Error("Could not determine if the provided object was UrlOptions or RequestParameters");e.queryParams=e.queryParams||{},e.queryParams["subscription-key"]=n}break;default:throw new Error("An invalid authentication type was specified")}return e},ey.constants={preferredCacheLocation:"localStorage",storage:{accessTokenKey:"access.token.key",testStorageKey:"testStorage"},events:{tokenAcquired:"tokenacquired"},tokenExpiresIn:3599,tokenRefreshClockSkew:300,errors:{tokenExpired:"Token Expired, Try again"}},ey);function ey(e){var t=this;this.fallbackStorage={},this._triggerTokenFetch=function(){return new Promise((function(e,n){t.options.getToken((function(r){try{var i=t._getTokenExpiry(r)-ey.constants.tokenRefreshClockSkew;t._storeAccessToken(r),clearTimeout(t.tokenTimeOutHandle),t.tokenTimeOutHandle=setTimeout(t._triggerTokenFetch,1e3*i),e()}catch(r){n(new Error("Invalid token returned by getToken function"))}}),(function(e){n(e)}),t.map)}))};var n=e.getServiceOptions();this.options=n.authOptions,this.sessionId=n.sessionId,this.map=e}var ty=(ny.prototype.add=function(e,t){var n,r;if(Array.isArray(e))try{for(var i=B(e),o=i.next();!o.done;o=i.next()){var a=o.value;this._add(a,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else this._add(e,t)},ny.prototype.getControls=function(){return Array.from(this.controls)},ny.prototype.remove=function(e){var t,n;if(Array.isArray(e))try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o=i.value;this._remove(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}else this._remove(e)},ny.prototype._add=function(e,t){this.controls.add(e);var n=(new ee).merge(t);if(e=e.onAdd(this.map,t),!(0<(t=this.controlContainer.getElementsByClassName(n.position)).length))throw new Error("Control position "+n.position+" does not exist.");t.item(0).appendChild(e)},ny.prototype._remove=function(e){e.onRemove(),this.controls.delete(e)},ny);function ny(e){for(var n in this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("atlas-control-container"),t.ControlPosition){var r;t.ControlPosition.hasOwnProperty(n)&&((r=document.createElement("div")).classList.add(t.ControlPosition[n]),r.classList.add("subcontrol-container"),this.controlContainer.appendChild(r))}this.map.getMapContainer().appendChild(this.controlContainer),this.controls=new Set}var ry=(iy.prototype.addCallback=function(e,t,n,r,i){var o,a,s=this;if(r)o=function(e){var t=e.lngLat?new Ni(e.lngLat.lng,e.lngLat.lat):void 0,r=e.point?[e.point.x,e.point.y]:void 0,i=e.features?e.features.map((function(e){return new Pr(e.geometry,e.properties,e.id)})):[];i={type:e.type,originalEvent:e.originalEvent,position:t,coordinate:r,features:i},n(i)};else switch(e){case"data":case"sourcedata":case"styledata":o=function(r){r=D(D({dataType:r.dataType},"source"===r.dataType&&D(D(D({isSourceLoaded:r.isSourceLoaded},r.sourceDataType&&{sourceDataType:r.sourceDataType}),{source:s.map.sources.getById(r.sourceId)}),r.tile&&{tile:{id:{x:r.tile.tileID.canonical.x,y:r.tile.tileID.canonical.y,z:r.tile.tileID.canonical.z},size:r.tile.tileSize,state:r.tile.state}})),{map:s.map,type:r.type}),i&&s.map.events._removeListener(e,t,n),n(r)};break;case"error":o=function(r){r={error:r.error,map:s.map,type:r.type},i&&s.map.events._removeListener(e,t,n),n(r)};break;case"touchstart":case"touchend":case"touchmove":case"touchcancel":o=function(r){if(r.originalEvent){if(r.originalEvent===a)return;a=r.originalEvent}var o=r.point?new Or(r.point.x,r.point.y):void 0,l=r.points?r.points.map((function(e){return new Or(e.x,e.y)})):[],u=r.lngLat?new Ni(r.lngLat.lng,r.lngLat.lat):void 0,c=r.lngLats?r.lngLats.map((function(e){return new Ni(e.lng,e.lat)})):[],p=u?s.map.layers.getRenderedShapes(new Rr(u),t?[t]:void 0):[];p={map:s.map,originalEvent:r.originalEvent,pixel:o,pixels:l,position:u,positions:c,shapes:p,layerId:t||void 0,preventDefault:function(){return r.preventDefault()},type:r.type},i&&s.map.events._removeListener(e,t,n),n(p)};break;case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"click":case"dblclick":case"mouseout":case"mouseenter":case"mouseleave":case"contextmenu":o=function(r){if(r.originalEvent){if(r.originalEvent===a)return;a=r.originalEvent}var o=r.lngLat?new Ni(r.lngLat.lng,r.lngLat.lat):void 0,l=r.point?new Or(r.point.x,r.point.y):void 0,u=o?s.map.layers.getRenderedShapes(new Rr(o),t?[t]:void 0):[];u={map:s.map,originalEvent:r.originalEvent,position:o,pixel:l,preventDefault:function(){return r.preventDefault()},shapes:u,layerId:t||void 0,type:r.type},i&&s.map.events._removeListener(e,t,n),n(u)};break;case"styleimagemissing":o=function(r){i&&s.map.events._removeListener(e,t,n),n(r.id)};break;case"wheel":o=function(r){if(r.originalEvent){if(r.originalEvent===a)return;a=r.originalEvent}var o={map:s.map,originalEvent:r.originalEvent,preventDefault:function(){return r.preventDefault()},type:r.type};i&&s.map.events._removeListener(e,t,n),n(o)};break;case"resize":o=function(r){var o,a={map:s.map,type:r.type};for(o in r)"type"!==o&&"target"!==o&&(a[o]=r[o]);i&&s.map.events._removeListener(e,t,n),n(a)};break;default:o=function(r){var o={map:s.map,type:r.type};r.originalEvent&&(o.originalEvent=r.originalEvent),i&&s.map.events._removeListener(e,t,n),n(o)}}this.callbacks.has(t)||this.callbacks.set(t,new ie),this.callbacks.get(t).has(e)||this.callbacks.get(t).set(e,new Map),this.callbacks.get(t).get(e).set(n,[o,i])},iy.prototype.removeCallback=function(e,t,n){this.callbacks.has(t)&&this.callbacks.get(t).has(e)&&this.callbacks.get(t).get(e).has(n)&&this.callbacks.get(t).get(e).delete(n)},iy.prototype.getModifiedCallback=function(e,t,n){if(this.callbacks.has(t)&&this.callbacks.get(t).has(e)&&this.callbacks.get(t).get(e).has(n))return this.callbacks.get(t).get(e).get(n)[0]},iy.prototype.getLayerCallbacks=function(e){if(this.callbacks.has(e))return this.callbacks.get(e)},iy.prototype.getEventCallbacks=function(e,t){if(this.callbacks.has(t)&&(t=this.callbacks.get(t)).has(e))return t.get(e)},iy);function iy(e){this.callbacks=new ie,this.map=e}var oy=(ay.prototype.add=function(e,t,n){var r,i;if("function"==typeof t)this._addGlobalListener(e,t,!1,!1);else{t=Array.isArray(t)?t:[t];try{for(var o=B(t),a=o.next();!a.done;a=o.next()){var s=a.value;s instanceof To&&To._isMBoxEvent(e)?this._addLayerListener(e,s,n,!1,!1):s._addEventListener(e,n,!1)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}},ay.prototype.addOnce=function(e,t,n){"function"==typeof t?this._addGlobalListener(e,t,!1,!0):t instanceof To&&To._isMBoxEvent(e)?this._addLayerListener(e,t,n,!1,!0):t._addEventListener(e,n,!0)},ay.prototype._addLegacy=function(e,t,n){"function"==typeof t?this._addGlobalListener(e,t,!0,!1):this._addLayerListener(e,t,n,!0,!1)},ay.prototype._addLayerListener=function(e,t,n,r,i){var o,a,s,l,u=t instanceof To?t.getId():t,c=(t=this.map.layers.getLayerById(u),this.mapCallbackHandler.getModifiedCallback(e,u,n));if(c&&t)try{for(var p=B(t._getLayerIds()),h=p.next();!h.done;h=p.next()){var d=h.value;this.map._getMap().off(e,d,c)}}catch(e){o={error:e}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}if(this.mapCallbackHandler.addCallback(e,u,n,r,i),t){c=this.mapCallbackHandler.getModifiedCallback(e,u,n);try{for(var f=B(t._getLayerIds()),m=f.next();!m.done;m=f.next())d=m.value,this.map._getMap().on(e,d,c)}catch(e){s={error:e}}finally{try{m&&!m.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}}},ay.prototype._addGlobalListener=function(e,t,n,r){var i=this.mapCallbackHandler.getModifiedCallback(e,"",t);this.mapCallbackHandler.addCallback(e,"",t,n,r);var o,a,s=this.mapCallbackHandler.getModifiedCallback(e,"",t);"load"===e&&this.map._isLoaded()?(o={type:"load",map:this.map},setTimeout((function(){return s(o)}))):"ready"===e?this.map._isReady()&&(a={type:"ready",map:this.map},setTimeout((function(){return s(a)}))):["minzoomchanged","maxzoomchanged"].includes(e)?this.map._addEventListener(e,t,r):(i&&this.map._getMap().off(e,i),this.map._getMap().on(e,s))},ay.prototype.invoke=function(e,t,n){if(void 0===n)this._invokeListeners(e,"",t);else if(t instanceof To&&To._isMBoxEvent(e))this._invokeListeners(e,t.getId(),n);else{if(!(t instanceof oe))throw new Error("The invoke target is invalid.");t._invokeEvent(e,n)}},ay.prototype._invokeListeners=function(e,t,n){var r=this,i=new ie(this.mapCallbackHandler.getEventCallbacks(e,t));i?i.forEach((function(i,o){(i=F(i,2))[0],i[1]&&r._removeListener(e,t,o),o(n)})):"error"===e&&console.error("error"in n?n.error:n)},ay.prototype.remove=function(e,t,n){var r,i;if("function"==typeof t)this._removeListener(e,"",t);else{t=Array.isArray(t)?t:[t];try{for(var o=B(t),a=o.next();!a.done;a=o.next()){var s=a.value;s instanceof To&&To._isMBoxEvent(e)?this._removeListener(e,s,n):s._removeEventListener(e,n)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}},ay.prototype._removeLegacy=function(e,t,n){"function"==typeof t?this._removeListener(e,"",t):this._removeListener(e,t,n)},ay.prototype._removeListener=function(e,t,n){var r,i,o=t instanceof To?t.getId():t,a=this.mapCallbackHandler.getModifiedCallback(e,o,n);if(a)if(o){if(t=this.map.layers.getLayerById(o))try{for(var s=B(t._getLayerIds()),l=s.next();!l.done;l=s.next()){var u=l.value;this.map._getMap().off(e,u,a)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}else this.map._getMap().off(e,a);this.mapCallbackHandler.removeCallback(e,o,n)},ay.prototype._enableLayerEvents=function(e){var t=this,n=this.mapCallbackHandler.getLayerCallbacks(e.getId());n&&n.forEach((function(n,r){n.forEach((function(n){var i,o,a=F(n,1)[0];try{for(var s=B(e._getLayerIds()),l=s.next();!l.done;l=s.next()){var u=l.value;t.map._getMap().on(r,u,a)}}catch(n){i={error:n}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}))}))},ay.prototype._disableLayerEvents=function(e){var t=this,n=this.mapCallbackHandler.getLayerCallbacks(e.getId());n&&n.forEach((function(n,r){n.forEach((function(n){var i,o,a=F(n,1)[0];try{for(var s=B(e._getLayerIds()),l=s.next();!l.done;l=s.next()){var u=l.value;t.map._getMap().off(r,u,a)}}catch(n){i={error:n}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}))}))},ay);function ay(e){this.map=e,this.mapCallbackHandler=new ry(this.map)}var sy=(ly.prototype.add=function(e,t){var n,r;if(Array.isArray(e))try{for(var i=B(e),o=i.next();!o.done;o=i.next()){var a=o.value;this._addMarker(a,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else this._addMarker(e,t)},ly.prototype._addMarker=function(e,t){e._addToMap(this.map,t),this.markers.add(e)},ly.prototype.getMarkers=function(){return Array.from(this.markers)},ly.prototype.remove=function(e){var t,n;if(Array.isArray(e))try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o=i.value;this._removeMarker(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}else this._removeMarker(e)},ly.prototype._removeMarker=function(e){var t=this;e instanceof Ka?(e._removeFromMap(),this.markers.delete(e)):this.markers.forEach((function(n){n._getId()===e&&(n._removeFromMap(),t.markers.delete(n))}))},ly.prototype.clear=function(){var e=this;this.markers.forEach((function(t){t._removeFromMap(),e.markers.delete(t)}))},ly);function ly(e){this.markers=new Set,this.map=e}var uy=(cy.prototype.add=function(e,t){var n=this;return new Promise((function(r,i){var o,a,s;n.userImages.has(e)?r():t instanceof HTMLImageElement||t instanceof ImageData?(n.map._getMap().addImage(e,t),n.userImages.set(e,t),r()):"string"==typeof t&&(a=void 0,a=/<svg/i.test(t)&&!/^data:/i.test(t)?"data:image/svg+xml;base64,"+window.btoa(t):t,s=!1,n.map._sendRequest(a,"Image").then((function(e){return s?void 0:e.blob()})).then((function(t){var a;!s&&t&&(clearTimeout(o),(a=new Image).onload=function(){n.map._getMap().addImage(e,a),n.userImages.set(e,a),r()},a.onerror=a.onabort=function(){i("Failed to load image into HTML element.")},a.src=URL.createObjectURL(t))})).catch((function(){s||(clearTimeout(o),i("Failed to load image into HTML element."))})),o=setTimeout((function(){s=!0,i("Failed to load image within specified timeout: "+n.imageLoadTimeout+" ms.")}),n.imageLoadTimeout))}))},cy.prototype.clear=function(){var e=this;this.userImages.forEach((function(t,n){e.map._getMap().removeImage(n)})),this.userImages.clear()},cy.prototype.getImageIds=function(){var e=[];return this.userImages.forEach((function(t,n){e.push(n)})),e},cy.prototype.createFromTemplate=function(e,t,n,r,i){return n=n||"#1A73AA",r=r||"#fff",i=(i=ul(t,i)).replace(/{color}/g,n).replace(/{secondaryColor}/g,r).replace(/{text}/g,""),this.add(e,i)},cy.prototype.hasImage=function(e){return this.userImages.has(e)},cy.prototype.remove=function(e){this.map._getMap().removeImage(e),this.userImages.delete(e)},cy.prototype._restoreImages=function(){var e=this;this.userImages.forEach((function(t,n){e.map._getMap().hasImage(n)||e.map._getMap().addImage(n,t)}))},cy);function cy(e){this.userImages=new ie,this.imageLoadTimeout=5e3,this.map=e}var py,hy=(R(dy,py=To),dy.prototype._buildLayers=function(){return this.layers},dy.prototype._getLayerIds=function(){return this.layers.map((function(e){return e.id}))},dy.prototype._getSourceIds=function(){var e,t,n=new Set;try{for(var r=B(this.layers),i=r.next();!i.done;i=r.next()){var o=i.value;"string"==typeof o.source?n.add(o.source):o.source&&n.add(o.id)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},dy.prototype._updateLayoutProperty=function(e,t,n,r){var i=this;this.layers.forEach((function(o){Tr(t,n)||i.map._getMap().setLayoutProperty(o.id,e,r||t)}))},dy);function dy(e,t){return(t=py.call(this,t)||this).layers=e,t}var fy=(my.prototype.add=function(e,t){var n,r,i=t instanceof To?t.getId():t;if(Array.isArray(e))try{for(var o=B(e),a=o.next();!a.done;a=o.next()){var s=a.value;this._addLayer(s,i)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}else this._addLayer(e,i)},my.prototype._addLayer=function(e,t){if(!(this.map._isReady()||e instanceof hy))throw new Error("The layer '"+e.getId()+"' could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a layer to it.");var n,r,i;t!==e.getId()&&this.layerIndex.find((function(e){return t===e.getId()}))?this._getMapboxLayerExists(e)?(r=this.layerIndex.findIndex((function(t){return t.getId()===e.getId()})),i=this.layerIndex[r],this._removeMapboxLayers(e),this._addMapboxLayers(e,t),this.map.events._disableLayerEvents(i),this.map.events._enableLayerEvents(e),this.layerIndex.splice(r,1),n=this.layerIndex.findIndex((function(e){return e.getId()===t})),this.layerIndex.splice(n,0,e),e instanceof hy||this.userLayers.push({layer:e,before:t}),i.onRemove()):(this._addMapboxLayers(e,t),this.map.events._enableLayerEvents(e),n=this.layerIndex.findIndex((function(e){return e.getId()===t})),this.layerIndex.splice(n,0,e),e instanceof hy||this.userLayers.push({layer:e,before:t})):0<=(r=this.layerIndex.findIndex((function(t){return t.getId()===e.getId()})))?(i=this.layerIndex[r],this._removeMapboxLayers(i),this._addMapboxLayers(e,r+1),this.map.events._disableLayerEvents(i),this.map.events._enableLayerEvents(e),this.layerIndex[r]=e,i.onRemove()):(this._addMapboxLayers(e),this.map.events._enableLayerEvents(e),this.layerIndex.push(e),e instanceof hy||this.userLayers.push({layer:e,before:t})),e.onAdd(this.map)},my.prototype._addMapboxLayers=function(e,t){var n,r;if(!(e instanceof Pa)||e.getOptions().tileUrl)if(e instanceof hy)this.map.events._enableLayerEvents(e);else{e instanceof Zo&&this.map._getMap().addSource(e._getSourceId(),e._buildSource());var i=this._getMapboxBefore(t);try{for(var o=B(e._buildLayers()),a=o.next();!a.done;a=o.next()){var s=a.value;this.map._getMap().addLayer(s,i)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}this.map.events._enableLayerEvents(e)}},my.prototype._removeMapboxLayers=function(e,t){var n,r;if(e instanceof hy&&!t)this.map.events._disableLayerEvents(e);else{try{for(var i=B(e._getLayerIds()),o=i.next();!o.done;o=i.next()){var a=o.value;this.map._getMap().getLayer(a)&&this.map._getMap().removeLayer(a)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.map.events._disableLayerEvents(e),e instanceof Zo&&this.map._getMap().getSource(e._getSourceId())&&this.map._getMap().removeSource(e._getSourceId())}},my.prototype._getMapboxLayerExists=function(e){var t=this,n=!1;return"string"==typeof e?!!(e=this.layerIndex.find((function(t){return t.getId()===e}))):(e._getLayerIds().forEach((function(e){t.map._getMap().getLayer(e)&&(n=!0)})),n)},my.prototype._getMapboxBefore=function(e){var t,n,r,i;if("string"==typeof e){var o=this.layerIndex.find((function(t){return t.getId()===e}));if(!o)return;try{for(var a=B(o._getLayerIds()),s=a.next();!s.done;s=a.next()){var l=s.value;if(this.map._getMap().getLayer(l))return l}}catch(n){t={error:n}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}e=this.layerIndex.findIndex((function(t){return t.getId()===e}))+1}for(var u=e;u<this.layerIndex.length;u++)try{for(var c=(r=void 0,B(this.layerIndex[u]._getLayerIds())),p=c.next();!p.done;p=c.next())if(l=p.value,this.map._getMap().getLayer(l))return l}catch(n){r={error:n}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}},my.prototype.clear=function(){for(var e=this.layerIndex.length-1;0<=e;e--){var t=this.layerIndex[e];this._removeMapboxLayers(t,!0),this.layerIndex.splice(e,1),t.onRemove()}this.userLayers=[]},my.prototype.getLayerById=function(e){var t=this.layerIndex.find((function(t){return t.getId()===e}));if(t)return t},my.prototype.getLayers=function(){return this.layerIndex.slice(0)},my.prototype._getSourceIds=function(){var e,t,n=new Set;try{for(var r=B(this.layerIndex),i=r.next();!i.done;i=r.next())i.value._getSourceIds().forEach((function(e){return n.add(e)}))}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},my.prototype._getUserLayers=function(){return Array.from(this.userLayers)},my.prototype.move=function(e,t){var n=e instanceof To?e.getId():e,r=t instanceof To?t.getId():t;if(!this.layerIndex.find((function(e){return e.getId()===n})))throw new Error("The layer '"+n+"' has not been added to the map and cannot be moved.");t=this.layerIndex.findIndex((function(e){return e.getId()===n})),this._moveMapboxLayers(this.layerIndex[t],r),e=this.layerIndex[t],this.layerIndex.splice(t,1),t=this.layerIndex.findIndex((function(e){return e.getId()===r})),-1<t?this.layerIndex.splice(t,0,e):this.layerIndex.push(e)},my.prototype._moveMapboxLayers=function(e,t){var n,r,i=this._getMapboxBefore(t);try{for(var o=B(e._getLayerIds()),a=o.next();!a.done;a=o.next()){var s=a.value;this.map._getMap().moveLayer(s,i)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},my.prototype.getRenderedShapes=function(e,t,n){var r,i,o,a=this;if(e=e||[-180,-85.0511,180,85.0511],Array.isArray(e)?4===e.length||6===e.length?o=this.map.positionsToPixels([Zi.getSouthWest(e),Zi.getNorthEast(e)]):2!==e.length&&3!==e.length||(o=this.map.positionsToPixels([e])[0]):o=this.map.positionsToPixels([e.coordinates])[0],t){t=Array.isArray(t)?t:[t];var s=[],l=this;try{for(var u=B(t),c=u.next();!c.done;c=u.next())!function(e){var t=e instanceof To?e.getId():e;if(!(-1<(e=l.layerIndex.findIndex((function(e){return e.getId()===t})))))throw new Error("The layer '"+t+"' has not been added to the map and its rendered features cannot be retrieved.");s.push.apply(s,j(l.layerIndex[e]._getLayerIds().filter((function(e){return!!a.map._getMap().getLayer(e)}))))}(c.value)}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}return n=this.map._getMap().queryRenderedFeatures(o,{layers:s,filter:n}),this.map.sources._mapFeaturesToShapes(n)},my.prototype.remove=function(e){var t,n;if(Array.isArray(e))try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o=i.value;this._removeLayer(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}else this._removeLayer(e)},my.prototype._removeLayer=function(e){var t=e instanceof To?e.getId():e;if(!this.layerIndex.find((function(e){return e.getId()===t})))throw new Error("The layer '"+t+"' has not been added to the map and cannot be removed.");e=this.layerIndex.findIndex((function(e){return e.getId()===t}));var n=this.layerIndex[e];this._removeMapboxLayers(n),this.layerIndex.splice(e,1),0<=(e=this.userLayers.findIndex((function(e){return e.layer.getId()===n.getId()})))&&this.userLayers.splice(e,1),n.onRemove()},my);function my(e){this.layerIndex=[],this.userLayers=[],this.map=e}var gy=(yy.prototype.add=function(e){var t,n;e=Array.isArray(e)?e:[e];try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o=i.value;this.popups.has(o)||(this.popups.add(o),o.attach(this.map))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},yy.prototype.clear=function(){var e=this;this.popups.forEach((function(t){e.popups.delete(t),t.remove()}))},yy.prototype.remove=function(e){var t,n;e=Array.isArray(e)?e:[e];try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o=i.value;this.popups.has(o)&&(this.popups.delete(o),o.remove())}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},yy.prototype.getPopups=function(){return Array.from(this.popups)},yy.prototype._getCollectionDiv=function(){var e=this.map.getMapContainer().querySelector("."+yy.Css.collection);return e||((e=document.createElement("div")).classList.add(yy.Css.collection),e.setAttribute("aria-label","Map Information"),this.map.getMapContainer().appendChild(e)),e},yy.prototype._addDraggedPopup=function(e){0===this.draggedPopups.size&&(this.map.getMapContainer().addEventListener("mousemove",this._onDrag),this.map.getMapContainer().addEventListener("touchmove",this._onDrag),this.map.getMapContainer().addEventListener("mouseup",this._onUp),this.map.getMapContainer().addEventListener("touchend",this._onUp)),this.draggedPopups.add(e)},yy.Css={collection:"popup-collection-container"},yy);function yy(e){var t=this;this._onDrag=function(e){var n,r;"mousemove"===e.type?(n=e.clientX,r=e.clientY):"touchmove"===e.type&&(n=e.touches[0].clientX,r=e.touches[0].clientY),t.draggedPopups.forEach((function(e){e._dragToPixel([n,r])}))},this._onUp=function(){t.map.getMapContainer().removeEventListener("mousemove",t._onDrag),t.map.getMapContainer().removeEventListener("touchmove",t._onDrag),t.map.getMapContainer().removeEventListener("mouseup",t._onUp),t.map.getMapContainer().removeEventListener("touchend",t._onUp),t.draggedPopups.forEach((function(e){t.draggedPopups.delete(e),e._onUp()}))},this.map=e,this.popups=new Set,this.draggedPopups=new Set}var vy,_y=(R(by,vy=ho),by.prototype._buildSource=function(){return this.source},by.prototype._modifySource=function(e,t){if(e.tiles){var n=e.tiles.map((function(e){return"string"==typeof e?e:new G({domain:y,path:e.path,queryParams:D(D({},t),e.queryParams)}).toString()}));e.tiles=n}else{if(!e.url)throw new Error("Source definition must define a TileJSON 'url' or a 'tiles' array.");e.url="string"==typeof e.url?e.url:new G({domain:y,path:e.url.path,queryParams:D(D({},t),e.url.queryParams)}).toString()}return e},by);function by(e,t,n){return(e=vy.call(this,e)||this).source=e._modifySource(t,n),e}var xy=(wy.prototype.add=function(e,t){var n,r;if(void 0===t&&(t=!0),Array.isArray(e))try{for(var i=B(e),o=i.next();!o.done;o=i.next()){var a=o.value;this._addSource(a,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else this._addSource(e,t)},wy.prototype.getRenderedShapes=function(e,t,n){return e="string"==typeof e?e:e.getId(),t=this.map._getMap().querySourceFeatures(e,{sourceLayer:n,filter:t}),this.map.sources._mapFeaturesToShapes(t,!0,this.sources.get(e))},wy.prototype._buildSources=function(){var e={};return this.sources.forEach((function(t){e[t.getId()]=t._buildSource()})),e},wy.prototype.clear=function(){var e=this;this.sources.forEach((function(t){e.remove(t)}))},wy.prototype.getById=function(e){return this.sources.get(e)},wy.prototype.getSources=function(){return Array.from(this.sources.values())},wy.prototype.isSourceLoaded=function(e){return e=e instanceof ho?e.getId():e,this.map._getMap().isSourceLoaded(e)},wy.prototype.remove=function(e,t){var n,r;if(void 0===t&&(t=!0),Array.isArray(e))try{for(var i=B(e),o=i.next();!o.done;o=i.next()){var a=o.value;this._removeSource(a,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else this._removeSource(e,t)},wy.prototype._removeSource=function(e,t){if(e=e instanceof ho?e.getId():e,this.sources.has(e)){if(this.map._getMap().getSource(e)&&t&&this.map._getMap().removeSource(e),this.map._getMap().getSource(e)&&t)throw new Error("One or more layers have a dependency on the source '"+e+"'");return this.sources.get(e)._setMap(null),void this.sources.delete(e)}throw new Error("'"+e+"' is not added to the map")},wy.prototype._addSource=function(e,t){if(this.sources.has(e.getId())){if(t)throw new Error("'"+e.getId()+"' is already added to the map");this.sources.get(e.getId())._setMap(null),this.sources.delete(e.getId())}if(t){if(!this.map._isReady())throw new Error("The source '"+e.getId()+"' could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a source to it.");this.map._getMap().addSource(e.getId(),e._buildSource())}this.sources.set(e.getId(),e),e._setMap(this.map)},wy.prototype._mapFeaturesToShapes=function(e,t,n){var r,i,o=[];try{for(var a=B(e),s=a.next();!s.done;s=a.next()){var l=s.value;if((n||"string"==typeof l.source)&&"string"==typeof l.properties[Hi._shapeIdPropName]){var u=n||this.sources.get(l.source);if(u instanceof go){var c=u.getShapeById(l.properties[Hi._shapeIdPropName]);if(c instanceof Hi){o.push(c);continue}}}t||o.push(l)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o},wy.prototype._syncSources=function(e){var t=this;e&&(Object.keys(e).forEach((function(n){if(!t.sources.has(n)){var r=e[n];if("vector"===r.type){var i=new _y(n,{name:n,tiles:r.tiles,type:"vector",url:r.url});t.sources.set(n,i),i._setMap(t.map)}else{if("raster"!==r.type)throw new Error("Unable to construct source with ID "+n+".");i=new _y(n,{name:n,tiles:r.tiles,type:"raster",url:r.url}),t.sources.set(n,i),i._setMap(t.map)}}})),Object.keys(this.sources).forEach((function(n){e.hasOwnProperty(n)||(t.sources.get(n)._setMap(null),t.sources.delete(n))})))},wy);function wy(e){this.map=e,this.sources=new ie}var Sy,Ey=(R(Cy,Sy=U),Cy);function Cy(){var e=null!==Sy&&Sy.apply(this,arguments)||this;return e.duration=1e3,e.type="jump",e}var Ty,Iy=(R(ky,Ty=U),ky);function ky(){var e=null!==Ty&&Ty.apply(this,arguments)||this;return e.bottom=0,e.left=0,e.right=0,e.top=0,e}var Py,Ay=(R(My,Py=U),My.prototype.merge=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{for(var i=B(n),o=i.next();!o.done;o=i.next()){var a=o.value;a&&"number"==typeof a.padding&&(a.padding={top:a.padding,bottom:a.padding,left:a.padding,right:a.padding})}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return Py.prototype.merge.apply(this,j(n))},My);function My(){var e=null!==Py&&Py.apply(this,arguments)||this;return e.bounds=[-180,-89,180,90],e.maxBounds=void 0,e.maxZoom=20,e.offset=new Or(0,0),e.padding=new Iy,e}var Oy,Ly,Ry=(R(Dy,Oy=U),Dy);function Dy(){var e=null!==Oy&&Oy.apply(this,arguments)||this;return e.zoom=1,e.center=new Ni(0,0),e.centerOffset=new Or(0,0),e.bearing=0,e.pitch=0,e.minZoom=1,e.maxZoom=20,e.maxBounds=void 0,e}function zy(){var e=null!==Ly&&Ly.apply(this,arguments)||this;return e.name=void 0,e.before=void 0,e.minZoom=1,e.maxZoom=20,e.overwrite=!1,e.opacity=1,e}R(zy,Ly=U);var Ny,By=(R(Fy,Ny=Re=zy),Fy);function Fy(){var e=null!==Ny&&Ny.apply(this,arguments)||this;return e.color="rgba(0,0,0,.5)",e.outlineColor="#000",e.radius=1,e.outlineWidth=5,e.name="default-circles",e}var jy,Uy=(R(Vy,jy=Re),Vy);function Vy(){var e=null!==jy&&jy.apply(this,arguments)||this;return e.cap="butt",e.join="miter",e.name="default-linestrings",e.color="#000",e.width=1,e}var qy,Hy=(R(Wy,qy=Re),Wy);function Wy(){var e=null!==qy&&qy.apply(this,arguments)||this;return e.iconSize=1,e.fontSize=14,e.fontColor="#000",e.textFont="SegoeUi-Regular",e.cluster=!0,e.clusterIcon=void 0,e.textOffset=[0,0],e.name="default-pins",e.icon="pin-darkblue",e.title="",e}var Gy,Zy=(R(Ky,Gy=Re),Ky);function Ky(){var e=null!==Gy&&Gy.apply(this,arguments)||this;return e.color="rgba(0,0,0,.5)",e.outlineColor="#000",e.name="default-polygons",e}var Xy,Yy=(R(Jy,Xy=Re),Jy);function Jy(){var e=null!==Xy&&Xy.apply(this,arguments)||this;return e.name="default-raster",e}var $y,Qy=(R(ev,$y=U),ev);function ev(){var e=null!==$y&&$y.apply(this,arguments)||this;return e.anchor="map",e.color="#FFFFFF",e.intensity=.5,e.position=[1.15,210,30],e}var tv,nv=(R(rv,tv=U),rv.prototype.merge=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{for(var i=B(n),o=i.next();!o.done;o=i.next()){var a=o.value;a&&(a.hasOwnProperty("view")?a.userRegion=a.view:a.hasOwnProperty("userRegion")&&(a.view=a.userRegion),"string"==typeof a.language&&(a.language=ys.getCode(a.language)))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return tv.prototype.merge.apply(this,j(n))},rv);function rv(){var e=null!==tv&&tv.apply(this,arguments)||this;return e.autoResize=!0,e.language=Cs,e.light=new Qy,e.preserveDrawingBuffer=!1,e.renderWorldCopies=!0,e.showBuildingModels=!1,e.showFeedbackLink=!0,e.showLogo=!0,e.customAttribution=void 0,e.showTileBoundaries=!1,e.style="road",e.view=ws,e.userRegion=e.view,e}function iv(e){return 0==e.length?void 0:e.slice(1).reduce((function(e,t){return function(n,r){return n=e(n,r),D(D({},n),t(n.url,r))}}),e[0])}var ov,av=(R(sv,ov=U),sv.prototype.merge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o=i.value;o&&(o.authOptions?"string"==typeof o.authOptions.subscriptionKey&&(o.subscriptionKey=o["subscription-key"]=o.authOptions.subscriptionKey):"string"==typeof o.subscriptionKey?(o["subscription-key"]=o.subscriptionKey,o.authOptions={authType:t.AuthenticationType.subscriptionKey,subscriptionKey:o.subscriptionKey}):"string"==typeof o["subscription-key"]&&(o.subscriptionKey=o["subscription-key"],o.authOptions={authType:t.AuthenticationType.subscriptionKey,subscriptionKey:o["subscription-key"]}),"string"==typeof o.sessionId?o["session-id"]=o.sessionId:"string"==typeof o["session-id"]&&(o.sessionId=o["session-id"]),"boolean"==typeof o.disableTelemetry?o["disable-telemetry"]=o.disableTelemetry:"boolean"==typeof o["disable-telemetry"]&&(o.disableTelemetry=o["disable-telemetry"]),"boolean"==typeof o.enableAccessibility?o["enable-accessibility"]=o.enableAccessibility:"boolean"==typeof o["enable-accessibility"]&&(o.enableAccessibility=o["enable-accessibility"]))}}catch(e){l={error:e}}finally{try{i&&!i.done&&(s=r.return)&&s.call(r)}finally{if(l)throw l.error}}var a=this._transformers,s=e?e.filter((function(e){return void 0!==e})).reduce((function(e,t){return j(e,t._transformers||[])}),[]):[],l=ov.prototype.merge.apply(this,j(e));return l.authOptions.authType!==t.AuthenticationType.subscriptionKey&&(l["subscription-key"]=l.subscriptionKey=void 0),this._transformers=j(a||[],s.filter((function(e){return!a.includes(e)}))),this.transformRequest&&!this._transformers.includes(this.transformRequest)&&this._transformers.push(this.transformRequest),this.transformRequest=iv(this._transformers),l},sv.prototype.addTransformer=function(e){this._transformers||(this._transformers=[]),this._transformers.push(e),this.transformRequest=iv(this._transformers)},sv.prototype.removeTransformer=function(e){this._transformers&&(this._transformers=this._transformers.filter((function(t){return e!==t})),this.transformRequest=iv(this._transformers))},sv._cloneCustomizer=function(e){if("object"==typeof e)return Object.assign({},e)},sv);function sv(){var e=null!==ov&&ov.apply(this,arguments)||this;return e.authOptions=Us(),e.disableTelemetry=!1,e["disable-telemetry"]=e.disableTelemetry,e.domain=Is,e.staticAssetsDomain=ks,e.styleDefinitionsPath=Ps,e.styleDefinitionsVersion=As,e.enableAccessibility=!0,e["enable-accessibility"]=e.enableAccessibility,e.enableAccessibilityLocationFallback=!0,e.maxParallelImageRequests=Zs(),e.refreshExpiredTiles=!0,e.subscriptionKey=Ys(),e["subscription-key"]=e.subscriptionKey,e.sessionId=Ts,e["session-id"]=e.sessionId,e._transformers=[],e.transformRequest=void 0,e.workerCount=Gs(),e}var lv=(uv.getLayerGroup=function(e){var t;if((e=null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:e).startsWith("microsoft."))return 4<=(e=e.split(".")).length?e[3]:void 0},uv);function uv(){}var cv=(pv.prototype.initialize=function(){var e=this;return this.initPromise||(this.initPromise=this._request(this.serviceOptions.staticAssetsDomain,E+"/"+C,"StyleDefinitions").then((function(t){e.definitions=t})).catch((function(e){throw new Error("Failed to retrieve the style definitions: "+e)}))),this.styleSet="base",this.initPromise},pv.prototype.getStyleUrl=function(e){return e=this._lookUp(e),new G({domain:this.serviceOptions.staticAssetsDomain,path:E+"/"+C+"/"+e.name,queryParams:((e={})[f]=this.apiVersion,e.version=this.definitions.version,e),protocol:"https"}).toString()},pv.prototype.setStyleUrl=function(e){e=this.getStyleUrl(e);try{this.map._getMap().setStyle(e,{diff:!0,stylePatch:this._stylePatch.bind(this)})}catch(e){throw e}},pv.prototype.getTheme=function(e){return this._lookUp(e).theme.toLowerCase()||"light"},pv.prototype.setStyleSet=function(e){e!==this.styleSet&&(this.styleSet=e,this.setStyleUrl(this.map.getStyle()))},pv.prototype.getStyleSet=function(){return this.styleSet},pv.prototype.clearStyleSet=function(){"base"!==this.styleSet&&(this.styleSet="base",this.setStyleUrl(this.map.getStyle()))},pv.prototype.getDef=function(){var e=Object.assign({},this.definitions);return e.styles=e.styles.filter((function(e){return!e.name.endsWith("_indoor")&&!e.name.endsWith("_indoor_dark")})),e},pv.prototype._stylePatch=function(e,t,n,r,i,o){function a(e){u.push(s._buildFundamentalLayerFrom(p,c)),c=e,p=[]}var s=this,l=this.map.layers.getLayers(),u=[],c="",p=[],h=this.map.getStyle(),d=this.map.getTraffic();t.layers.forEach((function(e){var t,n,r=lv.getLayerGroup(e.id);c=c||r,h.showBuildingModels||"fill-extrusion"!==e.type?"fill-extrusion"===e.type&&(i(e.id,"visibility","visible"),e.layout=null!==(t=e.layout)&&void 0!==t?t:{},e.layout.visibility="visible"):(i(e.id,"visibility","none"),e.layout=null!==(n=e.layout)&&void 0!==n?n:{},e.layout.visibility="none"),"none"!==d.flow&&r&&r==="traffic_"+d.flow&&"line"==e.type&&(i(e.id,"visibility","visible"),e.layout=null!==(n=e.layout)&&void 0!==n?n:{},e.layout.visibility="visible"),r?(0<p.length&&r!=c&&a(r),p.push(e)):0<p.length&&a(r)})),0<p.length&&a("");var f=this.map.layers._getUserLayers(),m=f[0],g=l.filter((function(e){return u.findIndex((function(t){return e.getId()===t.getId()}))<0&&f.findIndex((function(t){return e.getId()===t.layer.getId()}))<0})),y=u.filter((function(e){return l.find((function(t){return t.getId()===e.getId()}))})).entries(),v=y.next();u.forEach((function(e){var t;v.value&&v.value[1].getId()===e.getId()?(t=l.findIndex((function(t){return t.getId()===e.getId()})),s.map.layers.remove(e.getId()),s.map.layers.add(e,l[t].getId()),v=y.next()):v.value?s.map.layers.add(e,v.value[1]):s.map.layers.add(e,null==m?void 0:m.layer)})),g.forEach((function(e){s.map.layers.remove(e)})),f.forEach((function(e){var t,r=void 0;s.map.layers.getLayerById(e.before)&&(r=0<(t=s.map.layers.getLayerById(e.before)._buildLayers()).length?t[0]:void 0),n(e.layer.getId(),null==r?void 0:r.id)})),this.map.sources._syncSources(t.sources),this.map.events.addOnce("styledata",(function(e){s.map.events.invoke("stylechanged",{style:s._lookUp(s.map.getStyle()).name,map:s.map,type:"stylechanged"})}))},pv.prototype._buildFundamentalLayerFrom=function(e,t){if(e&&0<e.length)return(e=new hy(e,t)).onAdd(this.map),e;throw new Error("Unable to construct fundamental map layer for ID: "+t+".")},pv.prototype._lookUp=function(e){var t,n,r,i=(e.style||this.definitions.defaultStyle).concat("indoor"===this.styleSet?"_indoor":"").concat("indoor_dark"===this.styleSet?"_indoor_dark":""),o=this.definitions.defaultStyle.concat("indoor"===this.styleSet?"_indoor":"").concat("indoor_dark"===this.styleSet?"_indoor_dark":"");try{for(var a=B((this.definitions||{}).styles),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.name===i)return l;l.name===o&&(r=l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},pv.prototype._transformStyleRequest=function(e,t){e.includes(y)&&(t.url=t.url.replace(y,this.serviceOptions.staticAssetsDomain)),e.includes(w)&&(t.url=t.url.replace(w,E)),e.includes(S)&&(t.url=t.url.replace(S,C)),t.url=t.url+(e.includes("?")?"&":"?")+f+"="+this.apiVersion},pv.prototype._request=function(e,t,n){return z(this,void 0,void 0,(function(){var r,i,o;return N(this,(function(a){switch(a.label){case 0:return i=new G({protocol:"https",domain:e,path:t,queryParams:((o={})[f]=this.apiVersion,o.version=this.serviceOptions.styleDefinitionsVersion,o)}).toString(),"function"==typeof this.serviceOptions.transformRequest&&n&&(r=this.serviceOptions.transformRequest(i,n)),o={method:"GET",mode:"cors"},r&&(r.credentials&&(o.credentials=r.credentials),r.headers&&(o.headers=r.headers),i=r.url||i),o=new Request(i,o),[4,fetch(o).then((function(e){if(e.ok)return e.json();throw new Error("HTTP "+e.status+": "+e.statusText+" ")}))];case 1:return[2,a.sent()]}}))}))},pv);function pv(e,t){this.apiVersion="2.0",this.map=e,this.serviceOptions=t}var hv,dv=(R(fv,hv=oe),fv.prototype.getCanvas=function(){return this.map.getCanvas()},fv.prototype.getCanvasContainer=function(){return this.map.getCanvasContainer()},fv.prototype.getMapContainer=function(){return this.map.getContainer()},fv.prototype.getServiceOptions=function(){return lo(this.serviceOptions,av._cloneCustomizer)},fv.prototype.setServiceOptions=function(e){this.serviceOptions=(new av).merge(this.serviceOptions,e),this.serviceOptions["enable-accessibility"]?this.accessibleMapDelegate.addToMap():this.accessibleMapDelegate.removeFromMap()},fv.prototype.addRequestTransformer=function(e){this.serviceOptions.addTransformer(e)},fv.prototype.removeRequestTransformer=function(e){this.serviceOptions.removeTransformer(e)},fv.prototype.setCamera=function(e,t){if(void 0===t&&(t=!1),"padding"in e||"offset"in e||"bounds"in e){var n,r=(new Ay).merge({maxZoom:this.getCamera().maxZoom},e),i=this._generateSafeBounds(r.bounds);if(!(n=this.map.cameraForBounds(i,{padding:r.padding,offset:r.offset,maxZoom:r.maxZoom})))throw new Error("The map cannot be fit to the current canvas with the given CameraBoundsOptions.");this.map.setMaxZoom(r.maxZoom),this._invokeEvent("maxzoomchanged",this.map.getMaxZoom()),a=this._generateSafeBounds(r.maxBounds)}else{var o=(new Ry).merge(this.getCamera(),e);o.centerOffset&&2<=o.centerOffset.length&&(i=o.centerOffset,(r=Si([o.center],o.zoom))[0][0]+=i[0],r[0][1]+=i[1],o.center=wi(r,o.zoom)[0]),n={center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch,around:void 0},this.map.setMinZoom(o.minZoom),this.map.setMaxZoom(o.maxZoom),this._invokeEvent("minzoomchanged",this.map.getMinZoom()),this._invokeEvent("maxzoomchanged",this.map.getMaxZoom()),a=this._generateSafeBounds(o.maxBounds)}a?this.map.setMaxBounds(a):this.map.setMaxBounds(null);var a=(new Ey).merge(e);e={duration:a.duration,easing:function(e){return e},offset:[0,0],animate:!0},t={fromControl:t},"jump"===a.type?this.map.jumpTo(n,t):"ease"===a.type?this.map.easeTo(D(D({},n),e),t):"fly"===a.type&&this.map.flyTo(D(D({},n),e),t)},fv.prototype.setCameraBounds=function(e){this.setCamera(e)},fv.prototype.getCamera=function(){var e=this.map.getBounds().getSouthWest().toArray(),t=this.map.getBounds().getNorthEast().toArray();return{zoom:this.map.getZoom(),center:this.map.getCenter().toArray(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),bounds:new Zi(e,t),minZoom:this.map.getMinZoom(),maxZoom:this.map.getMaxZoom()}},fv.prototype.setStyle=function(e){delete e.preserveDrawingBuffer,(e=(new nv).merge(this.styleOptions,e)).autoResize!==this.styleOptions.autoResize&&this._setAutoResize(e.autoResize),e.language!==this.styleOptions.language&&(this.localizedStringsPromise=ys.getStrings(e.language)),e.renderWorldCopies!==this.styleOptions.renderWorldCopies&&this.map.setRenderWorldCopies(e.renderWorldCopies),e.showFeedbackLink!==this.styleOptions.showFeedbackLink&&this.copyrightControl.setOptions({showFeedbackLink:e.showFeedbackLink}),e.customAttribution!==this.styleOptions.customAttribution&&this.copyrightControl.setOptions({customAttribution:e.customAttribution}),e.showLogo!==this.styleOptions.showLogo&&this.copyrightControl.setOptions({showLogo:e.showLogo}),e.showTileBoundaries!==this.styleOptions.showTileBoundaries&&(this.map.showTileBoundaries=e.showTileBoundaries),this.styleOptions=e,this._setStyleComponents(e)},fv.prototype.getStyle=function(){return Zn(this.styleOptions)},fv.prototype.addIcon=function(e,t){this.imageSprite.add(e,t)},fv.prototype.addPins=function(e,t){var n,r=(new Hy).merge(t),i=this.layers.getLayerById(r.name),o=!1;if(i||(o=!0,i=new Sa(r.name+"-source",r.name,{source:r.name+"-source",minZoom:r.minZoom,maxZoom:r.maxZoom,iconOptions:{anchor:"center",size:r.iconSize,image:["case",["has","icon"],["get","icon"],r.icon],ignorePlacement:!r.cluster,opacity:r.opacity},textOptions:{anchor:"center",textField:["case",["has","point_count"],["to-string",["get","point_count"]],["has","title"],["to-string",["get","title"]],r.title],font:["case",["has","point_count"],["literal",["StandardFontCondensed-Bold"]],["literal",[r.textFont]]],size:["case",["has","point_count"],20,r.fontSize],ignorePlacement:!r.cluster,opacity:r.opacity,offset:["case",["has","point_count"],["literal",[.5,-.45]],["literal",[r.textOffset[0]/16,r.textOffset[1]/16]]],color:r.fontColor}})),!(i instanceof Sa))throw new Error("A layer with name '"+r.name+"' already exists but it is not a SymbolLayer.A SymbolLayer should be used for rendering pins.");var a=i.getSource();if("string"==typeof a?(n=a,a=this.sources.getById(n)):n=a.getId(),t=!1,a||(t=!0,a=new go(n,{cluster:r.cluster})),!(a instanceof go))throw new Error("The source with name '"+n+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");t&&this.sources.add(a),o&&this.layers.add(i,r.before),e=new Xi(e),r.overwrite?a.setShapes(e):a.add(e)},fv.prototype.addCircles=function(e,t){var n,r=(new By).merge(t),i=this.layers.getLayerById(r.name),o=!1;if(i||(o=!0,i=new Lo(r.name+"-source",r.name,{source:r.name+"-source",minZoom:r.minZoom,maxZoom:r.maxZoom,opacity:r.opacity,radius:["case",["has","radius"],["get","radius"],r.radius],color:["case",["has","color"],["get","color"],r.color],strokeColor:["case",["has","outlineColor"],["get","outlineColor"],r.outlineColor],strokeWidth:["case",["has","outlineWidth"],["get","outlineWidth"],r.outlineWidth]})),!(i instanceof Lo))throw new Error("A layer with name '"+r.name+"' already exists but it is not a BubbleLayer.A BubbleLayer should be used for rendering circles.");var a=i.getSource();if("string"==typeof a?(n=a,a=this.sources.getById(n)):n=a.getId(),t=!1,a||(t=!0,a=new go(n)),!(a instanceof go))throw new Error("The source with name '"+n+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");t&&this.sources.add(a),o&&this.layers.add(i,r.before),e=new Xi(e),r.overwrite?a.setShapes(e):a.add(e)},fv.prototype.addLinestrings=function(e,t){var n,r=(new Uy).merge(t),i=this.layers.getLayerById(r.name),o=!1;if(i||(o=!0,i=new ea(r.name+"-source",r.name,{source:r.name+"-source",minZoom:r.minZoom,maxZoom:r.maxZoom,lineCap:r.cap,lineJoin:r.join,strokeOpacity:r.opacity,strokeColor:["case",["has","color"],["get","color"],r.color],strokeWidth:["case",["has","width"],["get","width"],r.width]})),!(i instanceof ea))throw new Error("A layer with name '"+r.name+"' already exists but it is not a LineLayer.A LineLayer should be used for rendering linestrings.");var a=i.getSource();if("string"==typeof a?(n=a,a=this.sources.getById(n)):n=a.getId(),t=!1,a||(t=!0,a=new go(n)),!(a instanceof go))throw new Error("The source with name '"+n+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");t&&this.sources.add(a),o&&this.layers.add(i,r.before),e=new Xi(e),r.overwrite?a.setShapes(e):a.add(e)},fv.prototype.addPolygons=function(e,t){var n,r=(new Zy).merge(t),i=this.layers.getLayerById(r.name),o=!1;if(i||(o=!0,i=new pa(r.name+"-source",r.name,{source:r.name+"-source",minZoom:r.minZoom,maxZoom:r.maxZoom,fillOpacity:r.opacity,fillColor:["case",["has","color"],["get","color"],r.color]})),!(i instanceof pa))throw new Error("A layer with name '"+r.name+"' already exists but it is not a PolygonLayer.A PolygonLayer should be used for rendering linestrings.");var a=i.getSource();if("string"==typeof a?(n=a,a=this.sources.getById(n)):n=a.getId(),t=!1,a||(t=!0,a=new go(n)),!(a instanceof go))throw new Error("The source with name '"+n+"' already exists but it is not a DataSource.New data can only be added to a DataSource.");t&&this.sources.add(a),o&&this.layers.add(i,r.before),e=new Xi(e),r.overwrite?a.setShapes(e):a.add(e)},fv.prototype.addRaster=function(e,t){var n=(new Yy).merge(t),r=this.layers.getLayerById(n.name);if(!((r=r||new Pa({maxZoom:n.maxZoom,minZoom:n.minZoom,opacity:n.opacity,tileSize:256,tileUrl:"{subdomain}"},n.name))instanceof Pa))throw new Error("A layer with name '"+n.name+"' already exists but it is not a TileLayer.A TileLayer should be used for rendering raster images.");if("{subdomain}"!==r.getOptions().tileUrl)throw new Error("A TileLayer with name '"+n.name+"' already exists but was configured for a single tile url [default for new TileLayer(...)].");(t=!n.overwrite&&r.getOptions().subdomains||[]).push.apply(t,j(e)),r._setOptionsNoUpdate({subdomains:t}),this.layers.add(r,n.before)},fv.prototype.getLayers=function(){return this.layers.getLayers().map((function(e){return e.getId()}))},fv.prototype.removeLayers=function(e){var t,n;try{for(var r=B(e),i=r.next();!i.done;i=r.next()){var o,a=i.value;this.layers.getLayerById(a)&&(this.layers.remove(a),o=a+"-source",this.sources.getById(o)&&this.sources.remove(o))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},fv.prototype.addHtml=function(e,t){e.id||(e.id="marker_"+kr());var n=new Ka({htmlContent:e});return this.markers.add(n,t),e.id},fv.prototype.removeHtml=function(e){this.markers.remove(e)},fv.prototype.addEventListener=function(e,t,n){this.events._addLegacy(e,t,n)},fv.prototype.removeEventListener=function(e,t,n){this.events._removeLegacy(e,t,n)},fv.prototype.setUserInteraction=function(e){this.userInteractionDelegate.setOptions(e)},fv.prototype.getUserInteraction=function(){return this.userInteractionDelegate.getOptions()},fv.prototype.addControl=function(e,t){this.controls.add(e,t)},fv.prototype.removeControl=function(e){this.controls.remove(e)},fv.prototype.setTraffic=function(e){var t=this.trafficOptions.incidents,n=this.trafficOptions.flow;if(this.trafficOptions=(new $n).merge(this.trafficOptions,e),this.controls.getControls().filter((function(e){return e instanceof or})).forEach((function(e){return e.updateButtonState()})),this.incidentDelegate&&(this.trafficOptions.incidents?t||this.incidentDelegate.addToMap():this.incidentDelegate.removeFromMap()),this.trafficOptions.flow&&"none"!==this.trafficOptions.flow)try{this.trafficOptions.flow!==n&&this.flowDelegate.addToMap()}catch(e){throw this.trafficOptions.flow=n,e}else this.flowDelegate.removeFromMap()},fv.prototype.getTraffic=function(){return Zn(this.trafficOptions)},fv.prototype.remove=function(){this.dispose()},fv.prototype.clear=function(){this.popups.clear(),this.layers.clear(),this.sources.clear(),this.markers.clear()},fv.prototype.dispose=function(){for(this.clear(),this.map.remove(),this.removed=!0;this.getMapContainer().firstChild;){var e=this.getMapContainer().firstChild;this.getMapContainer().removeChild(e)}},fv.prototype.resize=function(e,t,n){"number"!=typeof e&&"string"!=typeof e||"number"!=typeof t&&"string"!=typeof t?n=e:(e=e,this.getMapContainer().style.height="number"==typeof e?e+"px":e,this.getMapContainer().style.width="number"==typeof t?t+"px":t),t=this.getMapContainer().style.overflow,this.getMapContainer().style.overflow="hidden",this.map.resize(n),this.getMapContainer().style.overflow=t},fv.prototype.pixelsToPositions=function(e){var t,n,r=[];try{for(var i=B(e),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.map.unproject(a);r.push(new Ni(s.lng,s.lat))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},fv.prototype.positionsToPixels=function(e){var t,n,r=[];try{for(var i=B(e),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.map.project(a);r.push(new Or(s.x,s.y))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},fv.prototype.areTilesLoaded=function(){return this.map.areTilesLoaded()},fv.prototype.stop=function(){this.map.stop()},fv.prototype._getMap=function(){return this.map},fv.prototype._rebuildStyle=function(){return z(this,void 0,void 0,(function(){return N(this,(function(e){return this.styles.setStyleUrl(this.styleOptions),this.imageSprite._restoreImages(),[2]}))}))},fv.prototype._isLoaded=function(){return this.loaded},fv.prototype._isReady=function(){return this.ready},fv.prototype._getLocalizedStrings=function(){return this.localizedStringsPromise},fv.prototype._sendRequest=function(e,t,n){var r;return(r="function"==typeof this.serviceOptions.transformRequest?this.serviceOptions.transformRequest(e,t):r)?fetch(r.url||e,{credentials:r.credentials,headers:D(D({},n),r.headers),method:"GET",mode:"cors"}):fetch(e,{headers:n,method:"GET",mode:"cors"})},fv.prototype._substituteDomainLanguageViewAndSignInRequest=function(e,t){var n;(e.includes(v)||e.includes(y))&&(n=new RegExp("[^{]"+v+"[^}]"),e.match(n)&&(t.url=t.url.replace(v,y)),G.protoRegEx.test(this.serviceOptions.domain)?(n=t.url.indexOf(y),t.url=this.serviceOptions.domain+t.url.substring(n+y.length)):t.url=t.url.replace(y,this.serviceOptions.domain)),t.url.toLocaleLowerCase().includes(this.serviceOptions.domain.toLocaleLowerCase())&&this.authentication&&this.authentication.signRequest(t),e.includes(x)&&(t.url=t.url.replace(x,this.styleOptions.language)),e.includes(_)&&(t.url=this.styleOptions.view?t.url.replace(_,this.styleOptions.view):t.url.replace(_,"").replace("&"+b+"=",""))},fv.prototype._setAutoResize=function(e){e?window.addEventListener("resize",this._windowResizeCallback):window.removeEventListener("resize",this._windowResizeCallback)},fv.prototype._setStyleComponents=function(e){this.removed||(this.styleOptions=e,this._rebuildStyle())},fv.prototype._updateGlobalDefaults=function(e){e&&(e.authOptions&&!js&&Qs(e.authOptions),e.domain&&!Ls&&el(e.domain),e.styleDefinitionsPath&&!Rs&&tl(e.styleDefinitionsPath),e.styleDefinitionsVersion&&!Ds&&nl(e.styleDefinitionsVersion),e.workerCount&&!zs&&rl(e.workerCount),e.maxParallelImageRequests&&!Ns&&il(e.maxParallelImageRequests),!e.subscriptionKey&&!e["subscription-key"]||js||sl(e.subscriptionKey||e["subscription-key"]),!e.sessionId&&!e["session-id"]||Fs||al(e.sessionId||e["session-id"]),e.language&&!Bs&&ol(e.language),!e.userRegion&&!e.view||Os||ll(e.userRegion||e.view))},fv.prototype._generateSafeBounds=function(e){if(e){var t=Zi.getSouth(e),n=Zi.getWest(e),r=Zi.getNorth(e),i=Zi.getEast(e);if(isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw new Error("The bounds specified are invalid: ["+e+"]");for(;i<n;)i+=360;return new Zi([n,t,i,r])}return e},fv.prototype._detectHighContrast=function(){var e,t;switch(bl.getHighContrastMode()){case"invert":case"light":e=fv.Css.hcLight,t="high_contrast_light";break;case"dark":e=fv.Css.hcDark,t="high_contrast_dark"}e&&this.map.getContainer().classList.add(e),t&&"road"===this.styleOptions.style&&(this.styleOptions.style=t)},fv.Css={canvasContainer:"atlas-map-canvas-container",canvas:"atlas-map-canvas",container:"atlas-map",hcDark:"high-contrast-dark",hcLight:"high-contrast-light"},fv);function fv(e,n){var r=hv.call(this)||this;r.styleSourceIds=new Set,r.removed=!1,r.loaded=!1,r.ready=!1,r._windowResizeCallback=function(){return r.resize()};var i,a,s=!0;r._updateGlobalDefaults(n),r.serviceOptions=(new av).merge(n),r.styleOptions=(new nv).merge(n),r.trafficOptions=new $n,r.styles=new cv(r,r.serviceOptions),r.insights=new Jm(r.serviceOptions),r.serviceOptions.authOptions.subscriptionKey&&(r.serviceOptions.authOptions.subscriptionKey=encodeURIComponent(r.serviceOptions.authOptions.subscriptionKey)),i=r.serviceOptions.authOptions.clientId||(r.serviceOptions.authOptions.subscriptionKey?r.serviceOptions.authOptions.subscriptionKey.replace(/.(?=.{3,}$)/g,"*"):"invalid-setting"),r.insights&&r.insights.setAuthenticatedUserContext(r.serviceOptions.sessionId,i),arguments[2]&&"ENVIRONMENT"in window&&window.ENVIRONMENT.hmr?(a=arguments[2],r.ready=!0,r.loaded=!0):(e={attributionControl:!1,container:e,preserveDrawingBuffer:r.styleOptions.preserveDrawingBuffer,refreshExpiredTiles:r.serviceOptions.refreshExpiredTiles,renderWorldCopies:r.styleOptions.renderWorldCopies,trackResize:!1,transformRequest:function(e,t){var n={url:e};return"Tile"===t||"Source"===t?(e.includes(v)&&r.insights&&r.insights.trackEvent({name:"TileLoad"}),r._substituteDomainLanguageViewAndSignInRequest(e,n)):"SpriteJSON"!==t&&"SpriteImage"!==t&&"Glyphs"!==t||r.styles._transformStyleRequest(e,n),r.serviceOptions.transformRequest&&hs(n,r.serviceOptions.transformRequest(n.url,t)),n}},a=new o.Map(e));try{r.map=a,r.authentication=new Qg(r),r.controls=new ty(r),r.events=new oy(r),r.imageSprite=new uy(r),r.layers=new fy(r),r.markers=new sy(r),r.sources=new xy(r),r.popups=new gy(r),r.map.getContainer().classList.add(fv.Css.container),r.map.getCanvasContainer().classList.add(fv.Css.canvasContainer),r.map.getCanvas().classList.add(fv.Css.canvas),r._detectHighContrast(),r.copyrightControl=new rg({showFeedbackLink:r.styleOptions.showFeedbackLink,showLogo:r.styleOptions.showLogo,customAttribution:r.styleOptions.customAttribution}),r.controls.add(r.copyrightControl,{position:t.ControlPosition.NonFixed});var l=r.authentication?r.authentication.initialize():Promise.resolve();if(r.removed)return r;var u=function e(){r.loaded=!0,r.map.off("load",e)};r.map.on("load",u);var c=function e(){r.ready=!0,r.map.off("styledata",e),r.events.invoke("ready",{map:r,type:"ready"})};r.map.on("styledata",c),r._setAutoResize(r.styleOptions.autoResize),r.map.showTileBoundaries=r.styleOptions.showTileBoundaries,r.localizedStringsPromise=ys.getStrings(r.styleOptions.language);var p=r.styles.initialize();Promise.all([l,p]).then((function(){if(!r.removed){if(r.authentication&&!r.authentication.getToken())throw new Error("AuthenticationManager finished initializing, but no token is available");r.serviceOptions["enable-accessibility"]&&r.accessibleMapDelegate.addToMap(),r._setStyleComponents(r.styleOptions),r.copyrightDelegate&&r.copyrightDelegate.addToMap()}})).catch((function(e){e=e instanceof Error?e:new Error(e),r.insights&&r.insights.trackException({error:e}),r.events.invoke("error",{map:r,type:"error",error:e})})),r.setCamera(D(D({},n),{type:"jump",duration:0})),r.incidentDelegate=new xg(r),r.flowDelegate=new gg(r),r.accessibleMapDelegate=new mg(r),r.userInteractionDelegate=new Og(r,n),r.userInteractionDelegate.addToMap(),r.copyrightDelegate=new Wg(r,r.copyrightControl,r.styleOptions)}catch(e){throw s=!1,r.insights&&r.insights.trackException({error:e instanceof Error?e:new Error(e)}),e}finally{r.insights&&(r.insights.trackEvent({name:"MapLoad"},{success:s,supported:$s(!1),supportedWithPerformance:$s(!0)}),r.insights.flush())}return r}function mv(){this.detectHyperlinks=!0,this.parsePropertyPaths=!0}mv.applyTemplate=function(e,t){var n,r,i,o=this,a=document.createElement("div");return a.classList.add(mv.Css.template),e&&("boolean"!=typeof(t=t||{}).singleDescription&&(t.singleDescription=!0),t.sandboxContent="boolean"!=typeof t.sandboxContent||t.sandboxContent,t.title&&"string"==typeof t.content&&(t.content.includes("{title}")||t.content.includes("{name}"))||(e.title?t.title="{title}":e.name&&(t.title="{name}")),"boolean"!=typeof t.detectHyperlinks&&(t.detectHyperlinks=!0),"boolean"!=typeof t.parsePropertyPaths&&(t.parsePropertyPaths=!0),t.textColor&&(a.style.color=t.textColor),t.fillColor&&(a.style.backgroundColor=t.fillColor),t.title&&((i=this._applyStringTemplate(e,t.title,t)).innerText=i.textContent||i.innerText||"",this._appendChild(a,i,mv.Css.title)),(n=document.createElement("div")).classList.add(mv.Css.content),Array.isArray(t.content)?0<t.content.length&&t.content[0].propertyPath?this._appendChild(n,this._generateContent(e,t.content,t),mv.Css.item):t.content.forEach((function(r){o._appendChild(n,o._generateContent(e,r,t),mv.Css.item)})):(r=0,e.description&&Object.keys(e).forEach((function(t){o._ignoreProperty(t,e[t])||r++})),i=void 0,1===r||t.singleDescription&&e.description||2===r&&e.Snippet?(i=document.createElement("div")).innerHTML=e.description:i=this._generateContent(e,t.content,t),this._appendChild(n,i,mv.Css.item)),""!==n.innerHTML&&(t.sandboxContent?a.appendChild(mv._createSandboxedIframe(n,t)):a.appendChild(n))),a},mv._createSandboxedIframe=function(e,t){var n=document.createElement("iframe");n.sandbox.add("allow-popups");var r=e.innerHTML,i=!1,o=100,a=550,s=10,l=0;document.body.scrollWidth<=340&&(a=300,o=50);var u=r.split(/<(tr|div|br|li|h[0-9]|p>)/);return l=Math.max.apply(Math,j(u.map((function(e){return e.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length}))))-1,(e=Math.ceil(3.5*l))<a&&(a=e,o=l),r.includes("<img")||r.includes("<video")?(i=!0,n.width="550px"):(l=-1<r.indexOf(mv.Css.table)?25:20,s+=Math.max(.5*u.length*l,Math.ceil(r.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length/o)*l)),n.width=a+"px",n.height=i||280<s?"280px":s+"px",s=t.textColor?"color:"+t.textColor+";":"",t=t.fillColor?"background-color:"+t.fillColor+";":"",r='<html><head><title></title><meta charset="utf-8" /><meta http-equiv="x-ua-compatible" content="IE=Edge" /><link rel="stylesheet" href="'+mv._cssUrl+'" type="text/css"/><style>html, body{margin:0;padding:0;'+s+t+'}</style></head><body><div class="'+mv.Css.template+'" style="padding:0;width:'+(a-20)+'px">'+r+"</div></body></html>",void 0===n.srcdoc?n.src="data:text/html;charset=utf-8,"+encodeURI(r):n.srcdoc=r,n},mv._appendChild=function(e,t,n){t&&(n&&(t.className=(t.className?t.className+" ":"")+n),e.appendChild(t))},mv._generateContent=function(e,t,n){return t?Array.isArray(t)?this._generatePropertyInfoTable(e,t,n):this._applyStringTemplate(e,t,n):(e=this._generateDynamicTableHtml(e,null,n))?((n=document.createElement("div")).innerHTML=e,n):null},mv._applyStringTemplate=function(e,t,n){if(t){for(var r,i=t,o=this._placeholderRx.exec(t);o;)2<=o.length&&(r=this._getPropertyValue(e,o[1],n),i=i.replace(o[0],r)),o=this._placeholderRx.exec(t);if(i){(i=i.trim()).includes("<")&&(i=i.replace(/[\r\n]+/g,"<br/>"));var a=document.createElement("div");return a.innerHTML=i,a}}return null},mv._getPropertyValue=function(e,t,n,r){var i=n.parsePropertyPaths?t.split("/"):[t],o=i.length;if(0<o&&e){var a=i[0],s=e[a];if(n.detectHyperlinks&&"link"===t&&(!r||r.hyperlinkFormat)){var l,u=[];if(Array.isArray(s)?s.forEach((function(e){e.href?u.push(e):"string"==typeof e&&u.push({href:e})})):s.href&&u.push(s),0<u.length){r&&r.hyperlinkFormat?l=r.hyperlinkFormat:n&&n.hyperlinkFormat&&(l=n.hyperlinkFormat);var c=l&&l.target?l.target:"_blank",p=[];return u.forEach((function(e){e.title||l&&l.label||!e.rel||p.push(e.rel," - "),p.push('<a href="',e.href,'" target="',c,'">'),e.title?p.push(e.title):l&&l.label?p.push(l.label):p.push(e.href),p.push("</a>","<br/>")})),p.pop(),p.join("")}}if(null!=s){var h=void 0;for(h=1;h<o&&(s=s[i[h]],a=i[h],null!=s);h++);if(h===o&&null!=s){var d=void 0;if((d=void 0!==s.value?s.value:s)instanceof Date)return r&&r.dateFormat?d.toLocaleString(void 0,r.dateFormat):n.dateFormat?d.toLocaleString(void 0,n.dateFormat):d.toISOString();if("object"==typeof d)return(m=this._generateDynamicTableHtml(d,i.slice(1),n))||"";if("number"==typeof d){if(r){if(r.dateFormat)return new Date(d).toLocaleString(void 0,r.dateFormat);if(r.numberFormat)return d.toLocaleString(void 0,r.numberFormat)}else if(/(timestamp|date)/gi.test(a))return new Date(d).toISOString();return d.toLocaleString(void 0,n.numberFormat)}if("string"==typeof d&&""!==d&&!/[\n\r<>\s]/g.test(d)&&(n.detectHyperlinks||r&&r.hyperlinkFormat)){d=d.trim();var f=this._isUrlRx.test(d)||r&&r.hyperlinkFormat;if(e=this._isImageUrlRx.test(d)&&(f||d.startsWith("data:image")),t=this._emailRx.test(d),f||e||t){f=void 0,r&&r.hyperlinkFormat?f=r.hyperlinkFormat:n&&n.hyperlinkFormat&&(f=n.hyperlinkFormat);var m=void 0;return m=f&&f.target?' target="'+f.target+'"':' target="_blank"',n=""+(f&&f.label?f.label:d),f&&f.scheme?d=f.scheme+d:t&&(d="mailto:"+d),t=f&&f.label?' alt="'+f.label+'"':"",'<a href="'+d+'"'+m+">"+(n=f&&f.isImage||e?'<img src="'+d+'" style="max-width:100%"'+t+'"/>':n)+"</a>"}}return d.toString()}}}return""},mv._generatePropertyInfoTable=function(e,t,n){if(e&&t&&0<t.length){var r=[],i=this;return r.push('<table class="'+i.Css.table+'">'),t.forEach((function(t){var o=i._getPropertyValue(e,t.propertyPath,n,t);t.hideLabel?r.push('<tr><td colspan="2">',o,"</td></tr>"):(t=t.label||t.propertyPath.split("/")[0],r.push("<tr><th>",t,"</th><td>",o,"</td></tr>"))})),r.push("</table>"),(t=document.createElement("div")).innerHTML=r.join(""),t}return null},mv._generateDynamicTableHtml=function(e,t,n){var r=this;if(e){var i=[],o=this;i.push('<table class="'+o.Css.table+'">');var a=t&&0<t.length?t.join("/")+"/":"",s=0;return Object.keys(e).forEach((function(t){r._ignoreProperty(t,e[t])||(i.push("<tr><th>",t,"</th><td>",o._getPropertyValue(e,a+t,n),"</td></tr>"),s++)})),0===s?null:(i.push("</table>"),i.join(""))}return null},mv._ignoreProperty=function(e,t){switch(e){case"title":case"name":case"base":case"popupTemplate":case"anchor":case"icon":case"image":case"imageUrl":case"rotation":case"color":case"size":case"offset":case"strokeColor":case"strokeWidth":case"strokeOpacity":case"subType":case"fillColor":case"fillOpacity":case"visibility":case"visible":return!0;default:if(0===e.indexOf("_")||null==t||""===t)return!0}return!1},mv._placeholderRx=/\{([a-zA-Z0-9_\/\s]+)\}/gi,mv._isUrlRx=/^(http|https|ftp|tel|mailto):\/\//i,mv._isImageUrlRx=/(^data:image|.png$|.jpg$|.jpeg$|.gif$|.bmp$|.svg|.tif|.tiff$)/i,mv._emailRx=/^[^\.\s@:](?:[^\s@:]*[^\s@:\.])?@[^\.\s@]+(?:\.[^\.\s@]+)*$/,mv._cssUrl=new G({domain:u,path:"sdk/javascript/mapcontrol/"+X.getEndpointVersion()+"/atlas.min.css"}).toString(),mv.Css={template:"azure-maps-control-popup-template",title:"azure-maps-control-popup-template-title",content:"azure-maps-control-popup-template-content",item:"azure-maps-control-popup-template-content-item",table:"azure-maps-control-popup-template-table"},U=mv,a(new G({domain:u,path:"sdk/javascript/mapcontrol/"+X.getEndpointVersion()+"/mapbox-gl-rtl-text.min.js"}).toString(),(function(e){e&&console.warn(e)}),!0),t.HtmlMarker=Ka,t.Map=dv,t.Pixel=Or,t.Popup=Va,t.PopupTemplate=U,t.Shape=Hi,t._getAssetDomain=function(){return l},t._getDomain=function(){return Is},t._hasMaxParallelImageRequests=ml,t._hasSetAuthenticationOptions=cl,t._hasSetDomain=pl,t._hasSetLanguage=gl,t._hasSetSessionId=yl,t._hasSetStyleDefinitionsPath=hl,t._hasSetStyleDefinitionsVersion=dl,t._hasSetView=vl,t._hasWorkerCount=fl,t.addImageTemplate=function(e,t,n){!n&&_l[e.toLowerCase()]||(_l[e.toLowerCase()]=t)},t.clearPrewarmedResources=function(){o.clearPrewarmedResources()},t.control=r,t.data=Pe,t.getAllImageTemplateNames=function(){return Object.keys(_l)},t.getAuthenticationOptions=Us,t.getDomain=qs,t.getImageTemplate=ul,t.getLanguage=Ks,t.getMaxParallelImageRequests=Zs,t.getSessionId=Xs,t.getStaticAssetsDomain=Vs,t.getStyleDefinitionsPath=Hs,t.getStyleDefinitionsVersion=Ws,t.getSubscriptionKey=Ys,t.getUserRegion=function(){return ws},t.getVersion=function(){return X.getFullVersion()},t.getView=Js,t.getWorkerCount=Gs,t.internal=le,t.isSupported=$s,t.layer=ke,t.math=De,t.prewarm=function(){o.prewarm()},t.setAuthenticationOptions=Qs,t.setDomain=el,t.setLanguage=ol,t.setMaxParallelImageRequests=il,t.setSessionId=al,t.setStyleDefinitionsPath=tl,t.setStyleDefinitionsVersion=nl,t.setSubscriptionKey=sl,t.setUserRegion=ll,t.setView=function(e){ws=e,Os=!0},t.setWorkerCount=rl,t.source=Fe,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(33),n(51))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(39);function i(e){if(!r.a&&"undefined"!==typeof document){var t=e;return t&&t.ownerDocument?t.ownerDocument:document}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pauseBreak:19,capslock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindow:91,rightWindow:92,select:93,zero_numpad:96,one_numpad:97,two_numpad:98,three_numpad:99,four_numpad:100,five_numpad:101,six_numpad:102,seven_numpad:103,eight_numpad:104,nine_numpad:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrollLock:145,semicolon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,i=n(25),o=0,a=1,s=2,l="undefined"!==typeof navigator&&/rv:11.0/.test(navigator.userAgent),u={};try{u=window}catch(p){}var c=function(){function e(e){this._rules=[],this._preservedRules=[],this._rulesToInsert=[],this._counter=0,this._keyToClassName={},this._onResetCallbacks=[],this._classNameToArgs={},this._config=Object(i.a)({injectionMode:a,defaultPrefix:"css",namespace:void 0,cspSettings:void 0},e),this._keyToClassName=this._config.classNameCache||{}}return e.getInstance=function(){if(!(r=u.__stylesheet__)||r._lastStyleElement&&r._lastStyleElement.ownerDocument!==document){var t=(null===u||void 0===u?void 0:u.FabricConfig)||{};r=u.__stylesheet__=new e(t.mergeStyles)}return r},e.prototype.setConfig=function(e){this._config=Object(i.a)(Object(i.a)({},this._config),e)},e.prototype.onReset=function(e){this._onResetCallbacks.push(e)},e.prototype.getClassName=function(e){var t=this._config.namespace;return(t?t+"-":"")+(e||this._config.defaultPrefix)+"-"+this._counter++},e.prototype.cacheClassName=function(e,t,n,r){this._keyToClassName[t]=e,this._classNameToArgs[e]={args:n,rules:r}},e.prototype.classNameFromKey=function(e){return this._keyToClassName[e]},e.prototype.getClassNameCache=function(){return this._keyToClassName},e.prototype.argsFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.args},e.prototype.insertedRulesFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.rules},e.prototype.insertRule=function(e,t){var n=this._config.injectionMode!==o?this._getStyleElement():void 0;if(t&&this._preservedRules.push(e),n)switch(this._config.injectionMode){case a:var r=n.sheet;try{r.insertRule(e,r.cssRules.length)}catch(i){}break;case s:n.appendChild(document.createTextNode(e))}else this._rules.push(e);this._config.onInsertRule&&this._config.onInsertRule(e)},e.prototype.getRules=function(e){return(e?this._preservedRules.join(""):"")+this._rules.join("")+this._rulesToInsert.join("")},e.prototype.reset=function(){this._rules=[],this._rulesToInsert=[],this._counter=0,this._classNameToArgs={},this._keyToClassName={},this._onResetCallbacks.forEach((function(e){return e()}))},e.prototype.resetKeys=function(){this._keyToClassName={}},e.prototype._getStyleElement=function(){var e=this;return this._styleElement||"undefined"===typeof document||(this._styleElement=this._createStyleElement(),l||window.requestAnimationFrame((function(){e._styleElement=void 0}))),this._styleElement},e.prototype._createStyleElement=function(){var e=document.head,t=document.createElement("style");t.setAttribute("data-merge-styles","true");var n=this._config.cspSettings;if(n&&n.nonce&&t.setAttribute("nonce",n.nonce),this._lastStyleElement)e.insertBefore(t,this._lastStyleElement.nextElementSibling);else{var r=this._findPlaceholderStyleTag();r?e.insertBefore(t,r.nextElementSibling):e.insertBefore(t,e.childNodes[0])}return this._lastStyleElement=t,t},e.prototype._findPlaceholderStyleTag=function(){var e=document.head;return e?e.querySelector("style[data-merge-styles]"):null},e}()},,function(e,t,n){"use strict";var r=n(52),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),i=n(62),o={settings:{},scopedSettings:{},inCustomizerContext:!1},a=i.a.getValue("customizations",{settings:{},scopedSettings:{},inCustomizerContext:!1}),s=[],l=function(){function e(){}return e.reset=function(){a.settings={},a.scopedSettings={}},e.applySettings=function(t){a.settings=Object(r.a)(Object(r.a)({},a.settings),t),e._raiseChange()},e.applyScopedSettings=function(t,n){a.scopedSettings[t]=Object(r.a)(Object(r.a)({},a.scopedSettings[t]),n),e._raiseChange()},e.getSettings=function(e,t,n){void 0===n&&(n=o);for(var r={},i=t&&n.scopedSettings[t]||{},s=t&&a.scopedSettings[t]||{},l=0,u=e;l<u.length;l++){var c=u[l];r[c]=i[c]||n.settings[c]||s[c]||a.settings[c]}return r},e.applyBatchedUpdates=function(t,n){e._suppressUpdates=!0;try{t()}catch(r){}e._suppressUpdates=!1,n||e._raiseChange()},e.observe=function(e){s.push(e)},e.unobserve=function(e){s=s.filter((function(t){return t!==e}))},e._raiseChange=function(){e._suppressUpdates||s.forEach((function(e){return e()}))},e}()},function(e,t,n){"use strict";function r(e){o!==e&&(o=e)}function i(){return void 0===o&&(o="undefined"!==typeof document&&!!document.documentElement&&"rtl"===document.documentElement.getAttribute("dir")),o}var o;function a(){return{rtl:i()}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),o=i()},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n(29),i=Object(r.t)({root:{display:"inline-block"},placeholder:["ms-Icon-placeHolder",{width:"1em"}],image:["ms-Icon-imageContainer",{overflow:"hidden"}]}),o="ms-Icon",a=function(e){var t=e.className,n=e.iconClassName,r=e.isPlaceholder,o=e.isImage,a=e.styles;return{root:[r&&i.placeholder,i.root,o&&i.image,n,t,a&&a.root,a&&a.imageContainer]}}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return I})),n.d(t,"a",(function(){return k})),n.d(t,"c",(function(){return P}));var r,i=n(25),o=n(14),a={};function s(e,t){var n=e[t];"-"!==n.charAt(0)&&(e[t]=a[n]=a[n]||n.replace(/([A-Z])/g,"-$1").toLowerCase())}var l={"user-select":1};function u(e,t){var n=function(){var e;if(!r){var t="undefined"!==typeof document?document:void 0,n="undefined"!==typeof navigator?navigator:void 0,i=null===(e=null===n||void 0===n?void 0:n.userAgent)||void 0===e?void 0:e.toLowerCase();r=t?{isWebkit:!(!t||!("WebkitAppearance"in t.documentElement.style)),isMoz:!!(i&&i.indexOf("firefox")>-1),isOpera:!!(i&&i.indexOf("opera")>-1),isMs:!(!n||!/rv:11.0/i.test(n.userAgent)&&!/Edge\/\d./i.test(navigator.userAgent))}:{isWebkit:!0,isMoz:!0,isOpera:!0,isMs:!0}}return r}(),i=e[t];if(l[i]){var o=e[t+1];l[i]&&(n.isWebkit&&e.push("-webkit-"+i,o),n.isMoz&&e.push("-moz-"+i,o),n.isMs&&e.push("-ms-"+i,o),n.isOpera&&e.push("-o-"+i,o))}}var c,p=["column-count","font-weight","flex","flex-grow","flex-shrink","fill-opacity","opacity","order","z-index","zoom"];function h(e,t){var n=e[t],r=e[t+1];if("number"===typeof r){var i=p.indexOf(n)>-1,o=n.indexOf("--")>-1,a=i||o?"":"px";e[t+1]=""+r+a}}var d="left",f="right",m=((c={}).left=f,c.right=d,c),g={"w-resize":"e-resize","sw-resize":"se-resize","nw-resize":"ne-resize"};function y(e,t,n){if(e.rtl){var r=t[n];if(!r)return;var i=t[n+1];if("string"===typeof i&&i.indexOf("@noflip")>=0)t[n+1]=i.replace(/\s*(?:\/\*\s*)?\@noflip\b(?:\s*\*\/)?\s*?/g,"");else if(r.indexOf(d)>=0)t[n]=r.replace(d,f);else if(r.indexOf(f)>=0)t[n]=r.replace(f,d);else if(String(i).indexOf(d)>=0)t[n+1]=i.replace(d,f);else if(String(i).indexOf(f)>=0)t[n+1]=i.replace(f,d);else if(m[r])t[n]=m[r];else if(g[i])t[n+1]=g[i];else switch(r){case"margin":case"padding":t[n+1]=function(e){if("string"===typeof e){var t=e.split(" ");if(4===t.length)return t[0]+" "+t[3]+" "+t[2]+" "+t[1]}return e}(i);break;case"box-shadow":t[n+1]=function(e,t){var n=e.split(" "),r=parseInt(n[t],10);return n[0]=n[0].replace(String(r),String(-1*r)),n.join(" ")}(i,0)}}}function v(e){var t=e&&e["&"];return t?t.displayName:void 0}var _=/\:global\((.+?)\)/g;function b(e,t){return e.indexOf(":global(")>=0?e.replace(_,"$1"):0===e.indexOf(":")?t+e:e.indexOf("&")<0?t+" "+e:e}function x(e,t,n,r){void 0===t&&(t={__order:[]}),0===n.indexOf("@")?w([r],t,n=n+"{"+e):n.indexOf(",")>-1?function(e){if(!_.test(e))return e;for(var t=[],n=/\:global\((.+?)\)/g,r=null;r=n.exec(e);)r[1].indexOf(",")>-1&&t.push([r.index,r.index+r[0].length,r[1].split(",").map((function(e){return":global("+e.trim()+")"})).join(", ")]);return t.reverse().reduce((function(e,t){var n=t[0],r=t[1],i=t[2];return e.slice(0,n)+i+e.slice(r)}),e)}(n).split(",").map((function(e){return e.trim()})).forEach((function(n){return w([r],t,b(n,e))})):w([r],t,b(n,e))}function w(e,t,n){void 0===t&&(t={__order:[]}),void 0===n&&(n="&");var r=o.a.getInstance(),i=t[n];i||(i={},t[n]=i,t.__order.push(n));for(var a=0,s=e;a<s.length;a++){var l=s[a];if("string"===typeof l){var u=r.argsFromClassName(l);u&&w(u,t,n)}else if(Array.isArray(l))w(l,t,n);else for(var c in l)if(l.hasOwnProperty(c)){var p=l[c];if("selectors"===c){var h=l.selectors;for(var d in h)h.hasOwnProperty(d)&&x(n,t,d,h[d])}else"object"===typeof p?null!==p&&x(n,t,c,p):void 0!==p&&("margin"===c||"padding"===c?S(i,c,p):i[c]=p)}}return t}function S(e,t,n){var r="string"===typeof n?function(e){for(var t=[],n=0,r=0,i=0;i<e.length;i++)switch(e[i]){case"(":r++;break;case")":r&&r--;break;case"\t":case" ":r||(i>n&&t.push(e.substring(n,i)),n=i+1)}return n<e.length&&t.push(e.substring(n)),t}(n):[n];0===r.length&&r.push(n),"!important"===r[r.length-1]&&(r=r.slice(0,-1).map((function(e){return e+" !important"}))),e[t+"Top"]=r[0],e[t+"Right"]=r[1]||r[0],e[t+"Bottom"]=r[2]||r[0],e[t+"Left"]=r[3]||r[1]||r[0]}function E(e,t){for(var n=[e.rtl?"rtl":"ltr"],r=!1,i=0,o=t.__order;i<o.length;i++){var a=o[i];n.push(a);var s=t[a];for(var l in s)s.hasOwnProperty(l)&&void 0!==s[l]&&(r=!0,n.push(l,s[l]))}return r?n.join(""):void 0}function C(e,t){return t<=0?"":1===t?e:e+C(e,t-1)}function T(e,t){if(!t)return"";var n=[];for(var r in t)t.hasOwnProperty(r)&&"displayName"!==r&&void 0!==t[r]&&n.push(r,t[r]);for(var i=0;i<n.length;i+=2)s(n,i),h(n,i),y(e,n,i),u(n,i);for(i=1;i<n.length;i+=4)n.splice(i,1,":",n[i],";");return n.join("")}function I(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=w(t),i=E(e,r);if(i){var a=o.a.getInstance(),s={className:a.classNameFromKey(i),key:i,args:t};if(!s.className){s.className=a.getClassName(v(r));for(var l=[],u=0,c=r.__order;u<c.length;u++){var p=c[u];l.push(p,T(e,r[p]))}s.rulesToInsert=l}return s}}function k(e,t){void 0===t&&(t=1);var n=o.a.getInstance(),r=e.className,i=e.key,a=e.args,s=e.rulesToInsert;if(s){for(var l=0;l<s.length;l+=2){var u=s[l+1];if(u){var c=s[l],p=(c=c.replace(/&/g,C("."+e.className,t)))+"{"+u+"}"+(0===c.indexOf("@")?"}":"");n.insertRule(p)}}n.cacheClassName(r,i,a,s)}}function P(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=I.apply(void 0,Object(i.b)([e],t));return r?(k(r,e.specificityMultiplier),r.className):""}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(37);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.create;function i(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}Object.create},function(e,t,n){e.exports=n(94)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),i=r.createContext({customizations:{inCustomizerContext:!1,settings:{},scopedSettings:{}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(6);function i(e){var t=null;try{var n=Object(r.a)();t=n?n.sessionStorage.getItem(e):null}catch(i){}return t}function o(e,t){var n;try{null===(n=Object(r.a)())||void 0===n||n.sessionStorage.setItem(e,t)}catch(i){}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return ne})),n.d(t,"b",(function(){return ee})),n.d(t,"d",(function(){return te})),n.d(t,"k",(function(){return ue})),n.d(t,"j",(function(){return pe})),n.d(t,"o",(function(){return he})),n.d(t,"s",(function(){return de})),n.d(t,"l",(function(){return ge})),n.d(t,"r",(function(){return qe})),n.d(t,"i",(function(){return Fe})),n.d(t,"c",(function(){return re})),n.d(t,"e",(function(){return ie})),n.d(t,"q",(function(){return oe})),n.d(t,"m",(function(){return ae})),n.d(t,"v",(function(){return He})),n.d(t,"p",(function(){return We})),n.d(t,"f",(function(){return se})),n.d(t,"n",(function(){return Je})),n.d(t,"g",(function(){return $e.a})),n.d(t,"h",(function(){return Qe.a})),n.d(t,"t",(function(){return et.b})),n.d(t,"u",(function(){return r.b}));var r=n(113);var i=n(19),o=n(14),a=n(22);function s(e){var t=o.a.getInstance(),n=t.getClassName(),r=[];for(var s in e)e.hasOwnProperty(s)&&r.push(s,"{",Object(a.b)(Object(i.a)(),e[s]),"}");var l=r.join("");return t.insertRule("@keyframes "+n+"{"+l+"}",!0),t.cacheClassName(n,l,[],["keyframes",l]),n}var l="cubic-bezier(.1,.9,.2,1)",u="cubic-bezier(.1,.25,.75,.9)",c="0.167s",p="0.267s",h="0.367s",d="0.467s",f=s({from:{opacity:0},to:{opacity:1}}),m=s({from:{opacity:1},to:{opacity:0,visibility:"hidden"}}),g=Z(-10),y=Z(-20),v=Z(-40),_=Z(-400),b=Z(10),x=Z(20),w=Z(40),S=Z(400),E=K(10),C=K(20),T=K(-10),I=K(-20),k=X(10),P=X(20),A=X(40),M=X(400),O=X(-10),L=X(-20),R=X(-40),D=X(-400),z=Y(-10),N=Y(-20),B=Y(10),F=Y(20),j=s({from:{transform:"scale3d(.98,.98,1)"},to:{transform:"scale3d(1,1,1)"}}),U=s({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(.98,.98,1)"}}),V=s({from:{transform:"scale3d(1.03,1.03,1)"},to:{transform:"scale3d(1,1,1)"}}),q=s({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(1.03,1.03,1)"}}),H=s({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(90deg)"}}),W=s({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(-90deg)"}});function G(e,t,n){return{animationName:e,animationDuration:t,animationTimingFunction:n,animationFillMode:"both"}}function Z(e){return s({from:{transform:"translate3d("+e+"px,0,0)",pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function K(e){return s({from:{transform:"translate3d(0,"+e+"px,0)",pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function X(e){return s({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d("+e+"px,0,0)"}})}function Y(e){return s({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(0,"+e+"px,0)"}})}var J,$,Q,ee,te,ne=function(e){var t={},n=function(n){var i;e.hasOwnProperty(n)&&Object.defineProperty(t,n,{get:function(){return void 0===i&&(i=Object(r.b)(e[n]).toString()),i},enumerable:!0,configurable:!0})};for(var i in e)n(i);return t}({slideRightIn10:G(f+","+g,h,l),slideRightIn20:G(f+","+y,h,l),slideRightIn40:G(f+","+v,h,l),slideRightIn400:G(f+","+_,h,l),slideLeftIn10:G(f+","+b,h,l),slideLeftIn20:G(f+","+x,h,l),slideLeftIn40:G(f+","+w,h,l),slideLeftIn400:G(f+","+S,h,l),slideUpIn10:G(f+","+E,h,l),slideUpIn20:G(f+","+C,h,l),slideDownIn10:G(f+","+T,h,l),slideDownIn20:G(f+","+I,h,l),slideRightOut10:G(m+","+k,h,l),slideRightOut20:G(m+","+P,h,l),slideRightOut40:G(m+","+A,h,l),slideRightOut400:G(m+","+M,h,l),slideLeftOut10:G(m+","+O,h,l),slideLeftOut20:G(m+","+L,h,l),slideLeftOut40:G(m+","+R,h,l),slideLeftOut400:G(m+","+D,h,l),slideUpOut10:G(m+","+z,h,l),slideUpOut20:G(m+","+N,h,l),slideDownOut10:G(m+","+B,h,l),slideDownOut20:G(m+","+F,h,l),scaleUpIn100:G(f+","+j,h,l),scaleDownIn100:G(f+","+V,h,l),scaleUpOut103:G(m+","+q,c,u),scaleDownOut98:G(m+","+U,c,u),fadeIn100:G(f,c,u),fadeIn200:G(f,p,u),fadeIn400:G(f,h,u),fadeIn500:G(f,d,u),fadeOut100:G(m,c,u),fadeOut200:G(m,p,u),fadeOut400:G(m,h,u),fadeOut500:G(m,d,u),rotate90deg:G(H,"0.1s",u),rotateN90deg:G(W,"0.1s",u)});!function(e){e.Arabic="Segoe UI Web (Arabic)",e.Cyrillic="Segoe UI Web (Cyrillic)",e.EastEuropean="Segoe UI Web (East European)",e.Greek="Segoe UI Web (Greek)",e.Hebrew="Segoe UI Web (Hebrew)",e.Thai="Leelawadee UI Web",e.Vietnamese="Segoe UI Web (Vietnamese)",e.WestEuropean="Segoe UI Web (West European)",e.Selawik="Selawik Web",e.Armenian="Segoe UI Web (Armenian)",e.Georgian="Segoe UI Web (Georgian)"}(J||(J={})),function(e){e.Arabic="'"+J.Arabic+"'",e.ChineseSimplified="'Microsoft Yahei UI', Verdana, Simsun",e.ChineseTraditional="'Microsoft Jhenghei UI', Pmingliu",e.Cyrillic="'"+J.Cyrillic+"'",e.EastEuropean="'"+J.EastEuropean+"'",e.Greek="'"+J.Greek+"'",e.Hebrew="'"+J.Hebrew+"'",e.Hindi="'Nirmala UI'",e.Japanese="'Yu Gothic UI', 'Meiryo UI', Meiryo, 'MS Pgothic', Osaka",e.Korean="'Malgun Gothic', Gulim",e.Selawik="'"+J.Selawik+"'",e.Thai="'Leelawadee UI Web', 'Kmer UI'",e.Vietnamese="'"+J.Vietnamese+"'",e.WestEuropean="'"+J.WestEuropean+"'",e.Armenian="'"+J.Armenian+"'",e.Georgian="'"+J.Georgian+"'"}($||($={})),function(e){e.size10="10px",e.size12="12px",e.size14="14px",e.size16="16px",e.size18="18px",e.size20="20px",e.size24="24px",e.size28="28px",e.size32="32px",e.size42="42px",e.size68="68px",e.mini="10px",e.xSmall="10px",e.small="12px",e.smallPlus="12px",e.medium="14px",e.mediumPlus="16px",e.icon="16px",e.large="18px",e.xLarge="20px",e.xLargePlus="24px",e.xxLarge="28px",e.xxLargePlus="32px",e.superLarge="42px",e.mega="68px"}(Q||(Q={})),function(e){e.light=100,e.semilight=300,e.regular=400,e.semibold=600,e.bold=700}(ee||(ee={})),function(e){e.xSmall="10px",e.small="12px",e.medium="16px",e.large="20px"}(te||(te={}));var re="@media screen and (-ms-high-contrast: active), (forced-colors: active)",ie=639;function oe(e,t){return"@media only screen"+("number"===typeof e?" and (min-width: "+e+"px)":"")+("number"===typeof t?" and (max-width: "+t+"px)":"")}function ae(){return{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}}var se,le=n(44);function ue(e,t,n,r,i,o,a){return ce(e,"number"!==typeof t&&t?t:{inset:t,position:n,highContrastStyle:r,borderColor:i,outlineColor:o,isFocusedOnly:a})}function ce(e,t){var n,r;void 0===t&&(t={});var i=t.inset,o=void 0===i?0:i,a=t.width,s=void 0===a?1:a,l=t.position,u=void 0===l?"relative":l,c=t.highContrastStyle,p=t.borderColor,h=void 0===p?e.palette.white:p,d=t.outlineColor,f=void 0===d?e.palette.neutralSecondary:d,m=t.isFocusedOnly,g=void 0===m||m;return{outline:"transparent",position:u,selectors:(n={"::-moz-focus-inner":{border:"0"}},n["."+le.a+" &"+(g?":focus":"")+":after"]={content:'""',position:"absolute",left:o+1,top:o+1,bottom:o+1,right:o+1,border:s+"px solid "+h,outline:s+"px solid "+f,zIndex:se.FocusStyle,selectors:(r={},r[re]=c,r)},n)}}function pe(){return{selectors:{"&::-moz-focus-inner":{border:0},"&":{outline:"transparent"}}}}!function(e){e.Nav=1,e.ScrollablePane=1,e.FocusStyle=1,e.Coachmark=1e3,e.Layer=1e6,e.KeytipLayer=1000001}(se||(se={}));var he=function(e,t,n,r){var i,o,a;void 0===n&&(n="border"),void 0===r&&(r=-1);var s="borderBottom"===n;return{borderColor:e,selectors:{":after":(i={pointerEvents:"none",content:"''",position:"absolute",left:s?0:r,top:r,bottom:r,right:s?0:r},i[n]="2px solid "+e,i.borderRadius=t,i.width="borderBottom"===n?"100%":void 0,i.selectors=(o={},o[re]=(a={},a["border"===n?"borderColor":"borderBottomColor"]="Highlight",a),o),i)}}},de={position:"absolute",width:1,height:1,margin:-1,padding:0,border:0,overflow:"hidden",whiteSpace:"nowrap"},fe=n(30),me=Object(fe.b)((function(e,t){var n=o.a.getInstance();return t?Object.keys(e).reduce((function(t,r){return t[r]=n.getClassName(e[r]),t}),{}):e}));function ge(e,t,n){return me(e,void 0!==n?n:t.disableGlobalClassNames)}Object.create;Object.create;var ye,ve=n(18),_e=n(6),be=(n(61),{themeDarker:"#004578",themeDark:"#005a9e",themeDarkAlt:"#106ebe",themePrimary:"#0078d4",themeSecondary:"#2b88d8",themeTertiary:"#71afe5",themeLight:"#c7e0f4",themeLighter:"#deecf9",themeLighterAlt:"#eff6fc",black:"#000000",blackTranslucent40:"rgba(0,0,0,.4)",neutralDark:"#201f1e",neutralPrimary:"#323130",neutralPrimaryAlt:"#3b3a39",neutralSecondary:"#605e5c",neutralSecondaryAlt:"#8a8886",neutralTertiary:"#a19f9d",neutralTertiaryAlt:"#c8c6c4",neutralQuaternary:"#d2d0ce",neutralQuaternaryAlt:"#e1dfdd",neutralLight:"#edebe9",neutralLighter:"#f3f2f1",neutralLighterAlt:"#faf9f8",accent:"#0078d4",white:"#ffffff",whiteTranslucent40:"rgba(255,255,255,.4)",yellowDark:"#d29200",yellow:"#ffb900",yellowLight:"#fff100",orange:"#d83b01",orangeLight:"#ea4300",orangeLighter:"#ff8c00",redDark:"#a4262c",red:"#e81123",magentaDark:"#5c005c",magenta:"#b4009e",magentaLight:"#e3008c",purpleDark:"#32145a",purple:"#5c2d91",purpleLight:"#b4a0ff",blueDark:"#002050",blueMid:"#00188f",blue:"#0078d4",blueLight:"#00bcf2",tealDark:"#004b50",teal:"#008272",tealLight:"#00b294",greenDark:"#004b1c",green:"#107c10",greenLight:"#bad80a"});!function(e){e.depth0="0 0 0 0 transparent",e.depth4="0 1.6px 3.6px 0 rgba(0, 0, 0, 0.132), 0 0.3px 0.9px 0 rgba(0, 0, 0, 0.108)",e.depth8="0 3.2px 7.2px 0 rgba(0, 0, 0, 0.132), 0 0.6px 1.8px 0 rgba(0, 0, 0, 0.108)",e.depth16="0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132), 0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)",e.depth64="0 25.6px 57.6px 0 rgba(0, 0, 0, 0.22), 0 4.8px 14.4px 0 rgba(0, 0, 0, 0.18)"}(ye||(ye={}));var xe={elevation4:ye.depth4,elevation8:ye.depth8,elevation16:ye.depth16,elevation64:ye.depth64,roundedCorner2:"2px",roundedCorner4:"4px",roundedCorner6:"6px"};function we(e){o.a.getInstance().insertRule("@font-face{"+Object(a.b)(Object(i.a)(),e)+"}",!0)}var Se="'Segoe UI', '"+J.WestEuropean+"'",Ee={ar:$.Arabic,bg:$.Cyrillic,cs:$.EastEuropean,el:$.Greek,et:$.EastEuropean,he:$.Hebrew,hi:$.Hindi,hr:$.EastEuropean,hu:$.EastEuropean,ja:$.Japanese,kk:$.EastEuropean,ko:$.Korean,lt:$.EastEuropean,lv:$.EastEuropean,pl:$.EastEuropean,ru:$.Cyrillic,sk:$.EastEuropean,"sr-latn":$.EastEuropean,th:$.Thai,tr:$.EastEuropean,uk:$.Cyrillic,vi:$.Vietnamese,"zh-hans":$.ChineseSimplified,"zh-hant":$.ChineseTraditional,hy:$.Armenian,ka:$.Georgian};function Ce(e,t,n){return{fontFamily:n,MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontSize:e,fontWeight:t}}var Te=n(12);var Ie,ke=n(28),Pe="language";var Ae=function(e){var t=function(e){for(var t in Ee)if(Ee.hasOwnProperty(t)&&e&&0===t.indexOf(e))return Ee[t];return Se}(e)+", 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', sans-serif";return{tiny:Ce(Q.mini,ee.regular,t),xSmall:Ce(Q.xSmall,ee.regular,t),small:Ce(Q.small,ee.regular,t),smallPlus:Ce(Q.smallPlus,ee.regular,t),medium:Ce(Q.medium,ee.regular,t),mediumPlus:Ce(Q.mediumPlus,ee.regular,t),large:Ce(Q.large,ee.regular,t),xLarge:Ce(Q.xLarge,ee.semibold,t),xLargePlus:Ce(Q.xLargePlus,ee.semibold,t),xxLarge:Ce(Q.xxLarge,ee.semibold,t),xxLargePlus:Ce(Q.xxLargePlus,ee.semibold,t),superLarge:Ce(Q.superLarge,ee.semibold,t),mega:Ce(Q.mega,ee.semibold,t)}}(function(e){if(void 0===e&&(e="sessionStorage"),void 0===Ie){var t=Object(Te.a)(),n="localStorage"===e?function(e){var t=null;try{var n=Object(_e.a)();t=n?n.localStorage.getItem(e):null}catch(r){}return t}(Pe):"sessionStorage"===e?ke.a(Pe):void 0;n&&(Ie=n),void 0===Ie&&t&&(Ie=t.documentElement.getAttribute("lang")),void 0===Ie&&(Ie="en")}return Ie}());function Me(e,t,n,r){we({fontFamily:e="'"+e+"'",src:(void 0!==r?"local('"+r+"'),":"")+"url('"+t+".woff2') format('woff2'),url('"+t+".woff') format('woff')",fontWeight:n,fontStyle:"normal",fontDisplay:"swap"})}function Oe(e,t,n,r,i){void 0===r&&(r="segoeui");var o=e+"/"+n+"/"+r;Me(t,o+"-light",ee.light,i&&i+" Light"),Me(t,o+"-semilight",ee.semilight,i&&i+" SemiLight"),Me(t,o+"-regular",ee.regular,i),Me(t,o+"-semibold",ee.semibold,i&&i+" SemiBold"),Me(t,o+"-bold",ee.bold,i&&i+" Bold")}function Le(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];Re(e||{},o)}return e}function Re(e,t,n){for(var r in void 0===n&&(n=[]),n.push(t),t)if(t.hasOwnProperty(r)&&"__proto__"!==r&&"constructor"!==r&&"prototype"!==r){var i=t[r];if("object"!==typeof i||null===i||Array.isArray(i))e[r]=i;else{var o=n.indexOf(i)>-1;e[r]=o?i:Re(e[r]||{},i,n)}}return n.pop(),e}!function(e){if(e){var t=e+"/fonts";Oe(t,J.Thai,"leelawadeeui-thai","leelawadeeui"),Oe(t,J.Arabic,"segoeui-arabic"),Oe(t,J.Cyrillic,"segoeui-cyrillic"),Oe(t,J.EastEuropean,"segoeui-easteuropean"),Oe(t,J.Greek,"segoeui-greek"),Oe(t,J.Hebrew,"segoeui-hebrew"),Oe(t,J.Vietnamese,"segoeui-vietnamese"),Oe(t,J.WestEuropean,"segoeui-westeuropean","segoeui","Segoe UI"),Oe(t,$.Selawik,"selawik","selawik"),Oe(t,J.Armenian,"segoeui-armenian"),Oe(t,J.Georgian,"segoeui-georgian"),Me("Leelawadee UI Web",t+"/leelawadeeui-thai/leelawadeeui-semilight",ee.light),Me("Leelawadee UI Web",t+"/leelawadeeui-thai/leelawadeeui-bold",ee.semibold)}}(function(){var e,t,n=null===(e=Object(_e.a)())||void 0===e?void 0:e.FabricConfig;return null!==(t=null===n||void 0===n?void 0:n.fontBaseUrl)&&void 0!==t?t:"https://static2.sharepointonline.com/files/fabric/assets"}());var De=function(){return De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},De.apply(this,arguments)};Object.create;Object.create;function ze(e,t,n,r,i){return void 0===i&&(i=!1),function(e,t){var n="";!0===t&&(n=" /* @deprecated */");return e.listTextColor=e.listText+n,e.menuItemBackgroundChecked+=n,e.warningHighlight+=n,e.warningText=e.messageText+n,e.successText+=n,e}(Ne(e,t,De({primaryButtonBorder:"transparent",errorText:r?"#F1707B":"#a4262c",messageText:r?"#F3F2F1":"#323130",messageLink:r?"#6CB8F6":"#005A9E",messageLinkHovered:r?"#82C7FF":"#004578",infoIcon:r?"#C8C6C4":"#605e5c",errorIcon:r?"#F1707B":"#A80000",blockingIcon:r?"#442726":"#FDE7E9",warningIcon:r?"#C8C6C4":"#797775",severeWarningIcon:r?"#FCE100":"#D83B01",successIcon:r?"#92C353":"#107C10",infoBackground:r?"#323130":"#f3f2f1",errorBackground:r?"#442726":"#FDE7E9",blockingBackground:r?"#442726":"#FDE7E9",warningBackground:r?"#433519":"#FFF4CE",severeWarningBackground:r?"#4F2A0F":"#FED9CC",successBackground:r?"#393D1B":"#DFF6DD",warningHighlight:r?"#fff100":"#ffb900",successText:r?"#92c353":"#107C10"},n),r),i)}function Ne(e,t,n,r,i){void 0===i&&(i=!1);var o={},a=e||{},s=a.white,l=a.black,u=a.themePrimary,c=a.themeDark,p=a.themeDarker,h=a.themeDarkAlt,d=a.themeLighter,f=a.neutralLight,m=a.neutralLighter,g=a.neutralDark,y=a.neutralQuaternary,v=a.neutralQuaternaryAlt,_=a.neutralPrimary,b=a.neutralSecondary,x=a.neutralSecondaryAlt,w=a.neutralTertiary,S=a.neutralTertiaryAlt,E=a.neutralLighterAlt,C=a.accent;return s&&(o.bodyBackground=s,o.bodyFrameBackground=s,o.accentButtonText=s,o.buttonBackground=s,o.primaryButtonText=s,o.primaryButtonTextHovered=s,o.primaryButtonTextPressed=s,o.inputBackground=s,o.inputForegroundChecked=s,o.listBackground=s,o.menuBackground=s,o.cardStandoutBackground=s),l&&(o.bodyTextChecked=l,o.buttonTextCheckedHovered=l),u&&(o.link=u,o.primaryButtonBackground=u,o.inputBackgroundChecked=u,o.inputIcon=u,o.inputFocusBorderAlt=u,o.menuIcon=u,o.menuHeader=u,o.accentButtonBackground=u),c&&(o.primaryButtonBackgroundPressed=c,o.inputBackgroundCheckedHovered=c,o.inputIconHovered=c),p&&(o.linkHovered=p),h&&(o.primaryButtonBackgroundHovered=h),d&&(o.inputPlaceholderBackgroundChecked=d),f&&(o.bodyBackgroundChecked=f,o.bodyFrameDivider=f,o.bodyDivider=f,o.variantBorder=f,o.buttonBackgroundCheckedHovered=f,o.buttonBackgroundPressed=f,o.listItemBackgroundChecked=f,o.listHeaderBackgroundPressed=f,o.menuItemBackgroundPressed=f,o.menuItemBackgroundChecked=f),m&&(o.bodyBackgroundHovered=m,o.buttonBackgroundHovered=m,o.buttonBackgroundDisabled=m,o.buttonBorderDisabled=m,o.primaryButtonBackgroundDisabled=m,o.disabledBackground=m,o.listItemBackgroundHovered=m,o.listHeaderBackgroundHovered=m,o.menuItemBackgroundHovered=m),y&&(o.primaryButtonTextDisabled=y,o.disabledSubtext=y),v&&(o.listItemBackgroundCheckedHovered=v),w&&(o.disabledBodyText=w,o.variantBorderHovered=(null===n||void 0===n?void 0:n.variantBorderHovered)||w,o.buttonTextDisabled=w,o.inputIconDisabled=w,o.disabledText=w),_&&(o.bodyText=_,o.actionLink=_,o.buttonText=_,o.inputBorderHovered=_,o.inputText=_,o.listText=_,o.menuItemText=_),E&&(o.bodyStandoutBackground=E,o.defaultStateBackground=E),g&&(o.actionLinkHovered=g,o.buttonTextHovered=g,o.buttonTextChecked=g,o.buttonTextPressed=g,o.inputTextHovered=g,o.menuItemTextHovered=g),b&&(o.bodySubtext=b,o.focusBorder=b,o.inputBorder=b,o.smallInputBorder=b,o.inputPlaceholderText=b),x&&(o.buttonBorder=x),S&&(o.disabledBodySubtext=S,o.disabledBorder=S,o.buttonBackgroundChecked=S,o.menuDivider=S),C&&(o.accentButtonBackground=C),(null===t||void 0===t?void 0:t.elevation4)&&(o.cardShadow=t.elevation4),!r&&(null===t||void 0===t?void 0:t.elevation8)?o.cardShadowHovered=t.elevation8:o.variantBorderHovered&&(o.cardShadowHovered="0 0 1px "+o.variantBorderHovered),o=De(De({},o),n)}var Be={s2:"4px",s1:"8px",m:"16px",l1:"20px",l2:"32px"};function Fe(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n=!!e.isInverted;return function(e,t){var n,r,i;void 0===t&&(t={});var o=Le({},e,t,{semanticColors:Ne(t.palette,t.effects,t.semanticColors,void 0===t.isInverted?e.isInverted:t.isInverted)});if((null===(n=t.palette)||void 0===n?void 0:n.themePrimary)&&!(null===(r=t.palette)||void 0===r?void 0:r.accent)&&(o.palette.accent=t.palette.themePrimary),t.defaultFontStyle)for(var a=0,s=Object.keys(o.fonts);a<s.length;a++){var l=s[a];o.fonts[l]=Le(o.fonts[l],t.defaultFontStyle,null===(i=null===t||void 0===t?void 0:t.fonts)||void 0===i?void 0:i[l])}return o}({palette:be,effects:xe,fonts:Ae,spacing:Be,isInverted:n,disableGlobalClassNames:!1,semanticColors:ze(be,xe,void 0,n,t),rtl:void 0},e)}var je=Fe({}),Ue="theme";function Ve(){var e,t;if(!ve.a.getSettings([Ue]).theme){var n=Object(_e.a)();(null===(t=null===n||void 0===n?void 0:n.FabricConfig)||void 0===t?void 0:t.theme)&&(je=Fe(n.FabricConfig.theme)),ve.a.applySettings(((e={}).theme=je,e))}}function qe(e){return void 0===e&&(e=!1),!0===e&&(je=Fe({},e)),je}Ve();var He={boxShadow:"none",margin:0,padding:0,boxSizing:"border-box"};function We(e){return{selectors:{"::placeholder":e,":-ms-input-placeholder":e,"::-ms-input-placeholder":e}}}var Ge=n(62),Ze=n(31),Ke=Ge.a.getValue("icons",{__options:{disableWarnings:!1,warnOnMissingIcons:!0},__remapped:{}}),Xe=o.a.getInstance();Xe&&Xe.onReset&&Xe.onReset((function(){for(var e in Ke)Ke.hasOwnProperty(e)&&Ke[e].subset&&(Ke[e].subset.className=void 0)}));var Ye=function(e){return e.toLowerCase()};function Je(e){var t=void 0,n=Ke.__options;if(e=e?Ye(e):"",e=Ke.__remapped[e]||e)if(t=Ke[e]){var i=t.subset;i&&i.fontFace&&(i.isRegistered||(we(i.fontFace),i.isRegistered=!0),i.className||(i.className=Object(r.b)(i.style,{fontFamily:i.fontFace.fontFamily,fontWeight:i.fontFace.fontWeight||"normal",fontStyle:i.fontFace.fontStyle||"normal"})))}else!n.disableWarnings&&n.warnOnMissingIcons&&Object(Ze.a)('The icon "'+e+'" was used but not registered. See https://github.com/microsoft/fluentui/wiki/Using-icons for more information.');return t}var $e=n(40),Qe=n(143),et=n(114),tt=n(72);Object(tt.a)("@fluentui/style-utilities","8.3.2"),Ve()},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return p}));var r=n(14),i=!1,o=0,a={empty:!0},s={},l="undefined"===typeof WeakMap?null:WeakMap;function u(){o++}function c(e,t,n){if(void 0===t&&(t=100),void 0===n&&(n=!1),!l)return e;if(!i){var a=r.a.getInstance();a&&a.onReset&&r.a.getInstance().onReset(u),i=!0}var s,c=0,p=o;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=s;(void 0===s||p!==o||t>0&&c>t)&&(s=d(),c=0,p=o),a=s;for(var l=0;l<r.length;l++){var u=h(r[l]);a.map.has(u)||a.map.set(u,d()),a=a.map.get(u)}return a.hasOwnProperty("value")||(a.value=e.apply(void 0,r),c++),!n||null!==a.value&&void 0!==a.value||(a.value=e.apply(void 0,r)),a.value}}function p(e){if(!l)return e;var t=new l;return function(n){if(!n||"function"!==typeof n&&"object"!==typeof n)return e(n);if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}}function h(e){return e?"object"===typeof e||"function"===typeof e?e:(s[e]||(s[e]={val:e}),s[e]):a}function d(){return{map:l?new l:null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e){console&&console.warn&&console.warn(e)}},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(t){var r=n(16),i=n(99),o=n(54),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n(55)),e}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a){if("SyntaxError"===s.name)throw o(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(a)})),e.exports=l}).call(this,n(51))},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(87)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(14);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[],i=[],o=r.a.getInstance();function a(e){for(var t=0,r=e;t<r.length;t++){var s=r[t];if(s)if("string"===typeof s)if(s.indexOf(" ")>=0)a(s.split(" "));else{var l=o.argsFromClassName(s);l?a(l):-1===n.indexOf(s)&&n.push(s)}else Array.isArray(s)?a(s):"object"===typeof s&&i.push(s)}}return a(e),{classes:n,objects:i}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=!1},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(25);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e&&1===e.length&&e[0]&&!e[0].subComponentStyles)return e[0];for(var n={},o={},a=0,s=e;a<s.length;a++){var l=s[a];if(l)for(var u in l)if(l.hasOwnProperty(u)){if("subComponentStyles"===u&&void 0!==l.subComponentStyles){var c=l.subComponentStyles;for(var p in c)c.hasOwnProperty(p)&&(o.hasOwnProperty(p)?o[p].push(c[p]):o[p]=[c[p]]);continue}var h=n[u],d=l[u];n[u]=void 0===h?d:Object(r.b)(Array.isArray(h)?h:[h],Array.isArray(d)?d:[d])}}if(Object.keys(o).length>0){n.subComponentStyles={};var f=n.subComponentStyles,m=function(e){if(o.hasOwnProperty(e)){var t=o[e];f[e]=function(e){return i.apply(void 0,t.map((function(t){return"function"===typeof t?t(e):t})))}}};for(var p in o)m(p)}return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(43);function i(e,t){return e&&e!==document.body?t(e)?e:i(Object(r.a)(e),t):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(159),i=n(1),o=n(0),a=n(144),s=n(73),l=n(5),u=n(158),c=Object(a.a)(),p=/\.svg$/i;var h=o.forwardRef((function(e,t){var n=o.useRef(),r=o.useRef(),a=function(e,t){var n=e.onLoadingStateChange,r=e.onLoad,i=e.onError,a=e.src,s=o.useState(l.c.notLoaded),u=s[0],c=s[1];o.useLayoutEffect((function(){c(l.c.notLoaded)}),[a]),o.useEffect((function(){u===l.c.notLoaded&&t.current&&(a&&t.current.naturalWidth>0&&t.current.naturalHeight>0||t.current.complete&&p.test(a))&&c(l.c.loaded)})),o.useEffect((function(){null===n||void 0===n||n(u)}),[u]);var h=o.useCallback((function(e){null===r||void 0===r||r(e),a&&c(l.c.loaded)}),[a,r]),d=o.useCallback((function(e){null===i||void 0===i||i(e),c(l.c.error)}),[i]);return[u,h,d]}(e,r),h=a[0],d=a[1],f=a[2],m=Object(s.d)(e,s.f,["width","height"]),g=e.src,y=e.alt,v=e.width,_=e.height,b=e.shouldFadeIn,x=void 0===b||b,w=e.shouldStartVisible,S=e.className,E=e.imageFit,C=e.role,T=e.maximizeFrame,I=e.styles,k=e.theme,P=e.loading,A=function(e,t,n,r){var i=o.useRef(t),a=o.useRef();(void 0===a||i.current===l.c.notLoaded&&t===l.c.loaded)&&(a.current=function(e,t,n,r){var i=e.imageFit,o=e.width,a=e.height;if(void 0!==e.coverStyle)return e.coverStyle;if(t===l.c.loaded&&(i===l.b.cover||i===l.b.contain||i===l.b.centerContain||i===l.b.centerCover)&&n.current&&r.current){var s=void 0;if(s="number"===typeof o&&"number"===typeof a&&i!==l.b.centerContain&&i!==l.b.centerCover?o/a:r.current.clientWidth/r.current.clientHeight,n.current.naturalWidth/n.current.naturalHeight>s)return l.a.landscape}return l.a.portrait}(e,t,n,r));return i.current=t,a.current}(e,h,r,n),M=c(I,{theme:k,className:S,width:v,height:_,maximizeFrame:T,shouldFadeIn:x,shouldStartVisible:w,isLoaded:h===l.c.loaded||h===l.c.notLoaded&&e.shouldStartVisible,isLandscape:A===l.a.landscape,isCenter:E===l.b.center,isCenterContain:E===l.b.centerContain,isCenterCover:E===l.b.centerCover,isContain:E===l.b.contain,isCover:E===l.b.cover,isNone:E===l.b.none,isError:h===l.c.error,isNotImageFit:void 0===E});return o.createElement("div",{className:M.root,style:{width:v,height:_},ref:n},o.createElement("img",Object(i.a)({},m,{onLoad:d,onError:f,key:"fabricImage"+e.src||"",className:M.image,ref:Object(u.a)(r,t),src:g,alt:y,role:C,loading:P})))}));h.displayName="ImageBase";var d=n(29),f=n(6),m={root:"ms-Image",rootMaximizeFrame:"ms-Image--maximizeFrame",image:"ms-Image-image",imageCenter:"ms-Image-image--center",imageContain:"ms-Image-image--contain",imageCover:"ms-Image-image--cover",imageCenterContain:"ms-Image-image--centerContain",imageCenterCover:"ms-Image-image--centerCover",imageNone:"ms-Image-image--none",imageLandscape:"ms-Image-image--landscape",imagePortrait:"ms-Image-image--portrait"},g=Object(r.a)(h,(function(e){var t=e.className,n=e.width,r=e.height,i=e.maximizeFrame,o=e.isLoaded,a=e.shouldFadeIn,s=e.shouldStartVisible,l=e.isLandscape,u=e.isCenter,c=e.isContain,p=e.isCover,h=e.isCenterContain,g=e.isCenterCover,y=e.isNone,v=e.isError,_=e.isNotImageFit,b=e.theme,x=Object(d.l)(m,b),w={position:"absolute",left:"50% /* @noflip */",top:"50%",transform:"translate(-50%,-50%)"},S=Object(f.a)(),E=void 0!==S&&void 0===S.navigator.msMaxTouchPoints,C=c&&l||p&&!l?{width:"100%",height:"auto"}:{width:"auto",height:"100%"};return{root:[x.root,b.fonts.medium,{overflow:"hidden"},i&&[x.rootMaximizeFrame,{height:"100%",width:"100%"}],o&&a&&!s&&d.a.fadeIn400,(u||c||p||h||g)&&{position:"relative"},t],image:[x.image,{display:"block",opacity:0},o&&["is-loaded",{opacity:1}],u&&[x.imageCenter,w],c&&[x.imageContain,E&&{width:"100%",height:"100%",objectFit:"contain"},!E&&C,!E&&w],p&&[x.imageCover,E&&{width:"100%",height:"100%",objectFit:"cover"},!E&&C,!E&&w],h&&[x.imageCenterContain,l&&{maxWidth:"100%"},!l&&{maxHeight:"100%"},w],g&&[x.imageCenterCover,l&&{maxHeight:"100%"},!l&&{maxWidth:"100%"},w],y&&[x.imageNone,{width:"auto",height:"auto"}],_&&[!!n&&!r&&{height:"auto",width:"100%"},!n&&!!r&&{height:"100%",width:"auto"},!!n&&!!r&&{height:"100%",width:"100%"}],l&&x.imageLandscape,!l&&x.imagePortrait,!o&&"is-notLoaded",a&&"is-fadeIn",v&&"is-error"]}}),void 0,{scope:"Image"},!0);g.displayName="Image"},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=!0),e&&(t&&function(e){var t,n;return e&&(n=e)&&n._virtual&&(t=e._virtual.parent),t}(e)||e.parentNode&&e.parentNode)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(6),i="ms-Fabric--isFocusVisible",o="ms-Fabric--isFocusHidden";function a(e,t){var n=t?Object(r.a)(t):Object(r.a)();if(n){var a=n.document.body.classList;a.add(e?i:o),a.remove(e?o:i)}}},,,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,l=a(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var p=0;p<s.length;p++)o.call(n,s[p])&&(l[s[p]]=n[s[p]])}}return l}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var l=function(){function t(){}return t.merge=function(t,n){for(var r=window||e,i=0,o=t.split(".");i<o.length;i++){var s=o[i];if(!r[s])return n;r=r[s]}return a(a({},r),n)},t}(),u=6371008.8,c={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*u,kilometers:6371.0088,kilometres:6371.0088,meters:u,metres:u,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:u/1852,radians:1,yards:6967335.223679999},p={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/u,yards:1.0936133},h={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function d(e,t,n){var r={type:"Feature"};return 0!==(n=void 0===n?{}:n).id&&!n.id||(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function f(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C(e[0])||!C(e[1]))throw new Error("coordinates must contain numbers");return d({type:"Point",coordinates:e},t,n)}function m(e,t,n){void 0===n&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return d({type:"Polygon",coordinates:e},t,n)}function g(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return d({type:"LineString",coordinates:e},t,n)}function y(e,t){var n={type:"FeatureCollection"};return(t=void 0===t?{}:t).id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function v(e,t,n){return d({type:"MultiLineString",coordinates:e},t,n=void 0===n?{}:n)}function _(e,t,n){return d({type:"MultiPoint",coordinates:e},t,n=void 0===n?{}:n)}function b(e,t,n){return d({type:"MultiPolygon",coordinates:e},t,n=void 0===n?{}:n)}function x(e,t){var n=c[t=void 0===t?"kilometers":t];if(!n)throw new Error(t+" units is invalid");return e*n}function w(e,t){var n=c[t=void 0===t?"kilometers":t];if(!n)throw new Error(t+" units is invalid");return e/n}function S(e){return e%(2*Math.PI)*180/Math.PI}function E(e){return e%360*Math.PI/180}function C(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function T(e){return!!e&&e.constructor===Object}var I=Object.freeze({__proto__:null,earthRadius:u,factors:c,unitsFactors:p,areaFactors:h,feature:d,geometry:function(e,t,n){switch(e){case"Point":return f(t).geometry;case"LineString":return g(t).geometry;case"Polygon":return m(t).geometry;case"MultiPoint":return _(t).geometry;case"MultiLineString":return v(t).geometry;case"MultiPolygon":return b(t).geometry;default:throw new Error(e+" is invalid")}},point:f,points:function(e,t,n){return void 0===n&&(n={}),y(e.map((function(e){return f(e,t)})),n)},polygon:m,polygons:function(e,t,n){return void 0===n&&(n={}),y(e.map((function(e){return m(e,t)})),n)},lineString:g,lineStrings:function(e,t,n){return void 0===n&&(n={}),y(e.map((function(e){return g(e,t)})),n)},featureCollection:y,multiLineString:v,multiPoint:_,multiPolygon:b,geometryCollection:function(e,t,n){return d({type:"GeometryCollection",geometries:e},t,n=void 0===n?{}:n)},round:function(e,t){if((t=void 0===t?0:t)&&!(0<=t))throw new Error("precision must be a positive number");return t=Math.pow(10,t||0),Math.round(e*t)/t},radiansToLength:x,lengthToRadians:w,lengthToDegrees:function(e,t){return S(w(e,t))},bearingToAzimuth:function(e){return(e%=360)<0&&(e+=360),e},radiansToDegrees:S,degreesToRadians:E,convertLength:function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(0<=e))throw new Error("length must be a positive number");return x(w(e,t),n)},convertArea:function(e,t,n){if(void 0===t&&(t="meters"),void 0===n&&(n="kilometers"),!(0<=e))throw new Error("area must be a positive number");if(!(t=h[t]))throw new Error("invalid original units");if(!(n=h[n]))throw new Error("invalid final units");return e/t*n},isNumber:C,isObject:T,validateBBox:function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!C(e))throw new Error("bbox must only contain numbers")}))},validateId:function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}});function k(e,t,n){if(null!==e)for(var r,i,o,a=0,s=e.type,l="FeatureCollection"===s,u="Feature"===s,c=l?e.features.length:1,p=0;p<c;p++)for(var h,d,f=(d=!!(h=l?e.features[p].geometry:u?e.geometry:e)&&"GeometryCollection"===h.type)?h.geometries.length:1,m=0;m<f;m++){var g,y=0,v=0;if(null!==(g=d?h.geometries[m]:h)){var _=g.coordinates,b=g.type,x=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1;switch(b){case null:break;case"Point":if(!1===t(_,a,p,y,v))return!1;a++,y++;break;case"LineString":case"MultiPoint":for(r=0;r<_.length;r++){if(!1===t(_[r],a,p,y,v))return!1;a++,"MultiPoint"===b&&y++}"LineString"===b&&y++;break;case"Polygon":case"MultiLineString":for(r=0;r<_.length;r++){for(i=0;i<_[r].length-x;i++){if(!1===t(_[r][i],a,p,y,v))return!1;a++}"MultiLineString"===b&&y++,"Polygon"===b&&v++}"Polygon"===b&&y++;break;case"MultiPolygon":for(r=0;r<_.length;r++){for(i=v=0;i<_[r].length;i++){for(o=0;o<_[r][i].length-x;o++){if(!1===t(_[r][i][o],a,p,y,v))return!1;a++}v++}y++}break;case"GeometryCollection":for(r=0;r<g.geometries.length;r++)if(!1===k(g.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}function P(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function A(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function M(e,t){for(var n,r,i,o,a,s,l,u,c,p=0,h="FeatureCollection"===e.type,d="Feature"===e.type,f=h?e.features.length:1,m=0;m<f;m++){for(a=h?e.features[m].geometry:d?e.geometry:e,l=h?e.features[m].properties:d?e.properties:{},u=h?e.features[m].bbox:d?e.bbox:void 0,c=h?e.features[m].id:d?e.id:void 0,o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(i=s?a.geometries[r]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,l,u,c))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],p,l,u,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,l,u,c))return!1;p++}}function O(e,t){M(e,(function(e,n,r,i,o){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(d(e,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<e.coordinates.length;l++){var u=e.coordinates[l];if(!1===t(d({type:a,coordinates:u},r),n,l))return!1}}))}function L(e,t){O(e,(function(e,n,r){var i=0;if(e.geometry){var o=e.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,u=0;return!1!==k(e,(function(o,c,p,h,d){return void 0===a||s<n||l<h||u<d?(a=o,s=n,l=h,u=d,void(i=0)):(h=g([a,o],e.properties),!1!==t(h,n,r,d,i)&&(i++,void(a=o)))}))&&void 0}}}))}function R(e,t){if(!e)throw new Error("geojson is required");O(e,(function(e,n,r){if(null!==e.geometry){var i=e.geometry.type,o=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===t(g(o[a],e.properties),n,r,a))return!1}}}))}var D=Object.freeze({__proto__:null,coordEach:k,coordReduce:function(e,t,n,r){var i=n;return k(e,(function(e,r,o,a,s){i=0===r&&void 0===n?e:t(i,e,r,o,a,s)}),r),i},propEach:P,propReduce:function(e,t,n){var r=n;return P(e,(function(e,i){r=0===i&&void 0===n?e:t(r,e,i)})),r},featureEach:A,featureReduce:function(e,t,n){var r=n;return A(e,(function(e,i){r=0===i&&void 0===n?e:t(r,e,i)})),r},coordAll:function(e){var t=[];return k(e,(function(e){t.push(e)})),t},geomEach:M,geomReduce:function(e,t,n){var r=n;return M(e,(function(e,i,o,a,s){r=0===i&&void 0===n?e:t(r,e,i,o,a,s)})),r},flattenEach:O,flattenReduce:function(e,t,n){var r=n;return O(e,(function(e,i,o){r=0===i&&0===o&&void 0===n?e:t(r,e,i,o)})),r},segmentEach:L,segmentReduce:function(e,t,n){var r=n,i=!1;return L(e,(function(e,o,a,s,l){r=!1===i&&void 0===n?e:t(r,e,o,a,s,l),i=!0})),r},lineEach:R,lineReduce:function(e,t,n){var r=n;return R(e,(function(e,i,o,a){r=0===i&&void 0===n?e:t(r,e,i,o,a)})),r},findSegment:function(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var n,r=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":s=s||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return g([l[a=a<0?l.length+a-1:a],l[a+1]],s,t);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),g([l[o][a],l[o][a+1]],s,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),g([l[i][a],l[i][a+1]],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a-1),g([l[i][o][a],l[i][o][a+1]],s,t)}throw new Error("geojson is invalid")},findPoint:function(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var n,r=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":s=s||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return f(l,s,t);case"MultiPoint":return f(l[i=i<0?l.length+i:i],s,t);case"LineString":return f(l[a=a<0?l.length+a:a],s,t);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),f(l[o][a],s,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),f(l[i][a],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a),f(l[i][o][a],s,t)}throw new Error("geojson is invalid")}});function z(e){var t=[1/0,1/0,-1/0,-1/0];return k(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}function N(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&2<=e.length&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function B(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function F(e){return"Feature"===e.type?e.geometry:e}function j(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=N(e),i=F(t),o=(e=i.type,t=t.bbox,i.coordinates);if(t&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(r,t))return!1;"Polygon"===e&&(o=[o]);for(var a=!1,s=0;s<o.length&&!a;s++)if(U(r,o[s][0],n.ignoreBoundary)){for(var l=!1,u=1;u<o[s].length&&!l;)U(r,o[s][u],!n.ignoreBoundary)&&(l=!0),u++;l||(a=!0)}return a}function U(e,t,n){for(var r=!1,i=0,o=(t=t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]?t.slice(0,t.length-1):t).length-1;i<t.length;o=i++){var a=t[i][0],s=t[i][1],l=t[o][0],u=t[o][1];if(e[1]*(a-l)+s*(l-e[0])+u*(e[0]-a)==0&&(a-e[0])*(l-e[0])<=0&&(s-e[1])*(u-e[1])<=0)return!n;s>e[1]!=u>e[1]&&e[0]<(l-a)*(e[1]-s)/(u-s)+a&&(r=!r)}return r}function V(e,t,n){void 0===n&&(n={});for(var r=N(e),i=B(t),o=0;o<i.length-1;o++){var a=!1;if(n.ignoreEndVertices&&(0===o&&(a="start"),o===i.length-2&&(a="end"),0===o&&o+1===i.length-1&&(a="both")),q(i[o],i[o+1],r,a,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function q(e,t,n,r,i){var o=n[0],a=n[1],s=e[0],l=e[1],u=t[0],c=t[1];e=u-s,t=c-l,n=(n[0]-s)*t-(n[1]-l)*e;if(null!==i){if(Math.abs(n)>i)return!1}else if(0!=n)return!1;return r?"start"===r?Math.abs(e)>=Math.abs(t)?0<e?s<o&&o<=u:u<=o&&o<s:0<t?l<a&&a<=c:c<=a&&a<l:"end"===r?Math.abs(e)>=Math.abs(t)?0<e?s<=o&&o<u:u<o&&o<=s:0<t?l<=a&&a<c:c<a&&a<=l:"both"===r&&(Math.abs(e)>=Math.abs(t)?0<e?s<o&&o<u:u<o&&o<s:0<t?l<a&&a<c:c<a&&a<l):Math.abs(e)>=Math.abs(t)?0<e?s<=o&&o<=u:u<=o&&o<=s:0<t?l<=a&&a<=c:c<=a&&a<=l}function H(e,t){var n=F(e),r=F(t),i=n.type,o=r.type,a=n.coordinates,s=r.coordinates;switch(i){case"Point":if("Point"!==o)throw new Error("feature2 "+o+" geometry not supported");return G(a,s);case"MultiPoint":switch(o){case"Point":return function(e,t){for(var n=!1,r=0;r<e.coordinates.length;r++)if(G(e.coordinates[r],t.coordinates)){n=!0;break}return n}(n,r);case"MultiPoint":return function(e,t){for(var n=0,r=t.coordinates;n<r.length;n++){for(var i=r[n],o=!1,a=0,s=e.coordinates;a<s.length;a++)if(G(i,s[a])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return V(r,n,{ignoreEndVertices:!0});case"LineString":return function(e,t){for(var n=!1,r=0,i=t.coordinates;r<i.length;r++){var o=i[r];if(V({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(n=!0),!V({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(e,t){for(var n=!1,r=0,i=t.coordinates;r<i.length;r++){var o=i[r];if(V(o,e,{ignoreEndVertices:!0})&&(n=!0),!V(o,e))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return j(r,n,{ignoreBoundary:!0});case"LineString":return function(e,t){var n=!1,r=0;if(!W(z(e),z(t)))return!1;for(;r<t.coordinates.length-1;r++)if(j({type:"Point",coordinates:Z(t.coordinates[r],t.coordinates[r+1])},e,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(e,t){if("Feature"===e.type&&null===e.geometry)return!1;if("Feature"===t.type&&null===t.geometry)return!1;if(!W(z(e),z(t)))return!1;for(var n=0,r=F(t).coordinates;n<r.length;n++)for(var i=0,o=r[n];i<o.length;i++)if(!j(o[i],e))return!1;return!0}(n,r);case"MultiPoint":return function(e,t){for(var n=0,r=t.coordinates;n<r.length;n++)if(!j(r[n],e,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function W(e,t){return!(e[0]>t[0])&&!(e[2]<t[2])&&!(e[1]>t[1])&&!(e[3]<t[3])}function G(e,t){return e[0]===t[0]&&e[1]===t[1]}function Z(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}z.default=z;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;function K(e,t){return e(t={exports:{}},t.exports),t.exports}var X=K((function(e,t){function n(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function r(e,t){return e<t?-1:t<e?1:0}e.exports=function(e,t,i,o,a){!function e(t,r,i,o,a){for(;i<o;){var s,l,u,c,p;600<o-i&&(s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1),e(t,r,c=Math.max(i,Math.floor(r-l*u/s+p)),p=Math.min(o,Math.floor(r+(s-l)*u/s+p)),a));var h=t[r],d=i,f=o;for(n(t,i,r),0<a(t[o],h)&&n(t,i,o);d<f;){for(n(t,d,f),d++,f--;a(t[d],h)<0;)d++;for(;0<a(t[f],h);)f--}0===a(t[i],h)?n(t,i,f):n(t,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}(e,t,i||0,o||e.length-1,a||r)}})),Y=$,J=$;function $(e,t){if(!(this instanceof $))return new $(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function Q(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function ee(e,t){te(e,0,e.children.length,t,e)}function te(e,t,n,r,i){(i=i||pe(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=t;a<n;a++)o=e.children[a],ne(i,e.leaf?r(o):o);return i}function ne(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function re(e,t){return e.minX-t.minX}function ie(e,t){return e.minY-t.minY}function oe(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ae(e){return e.maxX-e.minX+(e.maxY-e.minY)}function se(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function le(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX);t=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,t-r)}function ue(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ce(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function pe(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function he(e,t,n,r,i){for(var o,a=[t,n];a.length;)(n=a.pop())-(t=a.pop())<=r||(o=t+Math.ceil((n-t)/r/2)*r,X(e,o,t,n,i),a.push(t,o,o,n))}$.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!ce(e,t))return n;for(var i,o,a,s,l=[];t;){for(i=0,o=t.children.length;i<o;i++)a=t.children[i],ce(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):ue(e,s)?this._all(a,n):l.push(a));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!ce(e,t))return!1;for(var r,i,o,a,s=[];t;){for(r=0,i=t.children.length;r<i;r++)if(o=t.children[r],ce(e,a=t.leaf?n(o):o)){if(t.leaf||ue(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r,i=this._build(e.slice(),0,e.length-1,0);return this.data.children.length?this.data.height===i.height?this._splitRoot(this.data,i):(this.data.height<i.height&&(r=this.data,this.data=i,i=r),this._insert(i,this.data.height-i.height-1,!0)):this.data=i,this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=pe([]),this},remove:function(e,t){if(!e)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(e),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(i=Q(e,a.children,t)))return a.children.splice(i,1),l.push(a),this._condense(l),this;o||a.leaf||!ue(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),a=(r=a).children[n=0])}return this},toBBox:function(e){return e},compareMinX:re,compareMinY:ie,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,o=n-t+1,a=this._maxEntries;if(o<=a)return ee(i=pe(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=pe([])).leaf=!1,i.height=r;var s,l,u,c,p=Math.ceil(o/a),h=p*Math.ceil(Math.sqrt(a));for(he(e,t,n,h,this.compareMinX),s=t;s<=n;s+=h)for(he(e,s,u=Math.min(s+h-1,n),p,this.compareMinY),l=s;l<=u;l+=p)c=Math.min(l+p-1,u),i.children.push(this._build(e,l,c,r-1));return ee(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,o,a,s,l,u,c,p;r.push(t),!t.leaf&&r.length-1!==n;){for(c=p=1/0,i=0,o=t.children.length;i<o;i++)l=oe(a=t.children[i]),(u=se(e,a)-l)<p?(p=u,c=l<c?l:c,s=a):u===p&&l<c&&(c=l,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,i=(n=n?e:r(e),[]);for((r=this._chooseSubtree(n,this.data,t,i)).children.push(e),ne(r,n);0<=t&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(n,i,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r),r=this._chooseSplitIndex(n,i,r),(r=pe(n.children.splice(r,n.children.length-r))).height=n.height,r.leaf=n.leaf,ee(n,this.toBBox),ee(r,this.toBBox),t?e[t-1].children.push(r):this._splitRoot(n,r)},_splitRoot:function(e,t){this.data=pe([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ee(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){for(var r,i,o,a,s,l=a=1/0,u=t;u<=n-t;u++)i=le(r=te(e,0,u,this.toBBox),o=te(e,u,n,this.toBBox)),o=oe(r)+oe(o),i<l?(l=i,s=u,a=o<a?o:a):i===l&&o<a&&(a=o,s=u);return s},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:re,i=e.leaf?this.compareMinY:ie;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);for(var i,o=this.toBBox,a=te(e,0,t,o),s=te(e,n-t,n,o),l=ae(a)+ae(s),u=t;u<n-t;u++)i=e.children[u],ne(a,e.leaf?o(i):i),l+=ae(a);for(u=n-t-1;t<=u;u--)i=e.children[u],ne(s,e.leaf?o(i):i),l+=ae(s);return l},_adjustParentBBoxes:function(e,t,n){for(var r=n;0<=r;r--)ne(t[r],e)},_condense:function(e){for(var t,n=e.length-1;0<=n;n--)0===e[n].children.length?0<n?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():ee(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},Y.default=J;var de=z.default,fe=D.featureEach,me=(D.coordEach,I.polygon,I.featureCollection);function ge(e){return(e=Y(e)).insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox||de(e),Y.prototype.insert.call(this,e)},e.load=function(e){var t=[];return Array.isArray(e)?e.forEach((function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox||de(e),t.push(e)})):fe(e,(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox||de(e),t.push(e)})),Y.prototype.load.call(this,t)},e.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox||de(e),Y.prototype.remove.call(this,e,t)},e.clear=function(){return Y.prototype.clear.call(this)},e.search=function(e){return e=Y.prototype.search.call(this,this.toBBox(e)),me(e)},e.collides=function(e){return Y.prototype.collides.call(this,this.toBBox(e))},e.all=function(){var e=Y.prototype.all.call(this);return me(e)},e.toJSON=function(){return Y.prototype.toJSON.call(this)},e.fromJSON=function(e){return Y.prototype.fromJSON.call(this,e)},e.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=de(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=de(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},e}var ye=ge,ve=ge;function _e(e){if(!e)throw new Error("geojson is required");var t=[];return O(e,(function(e){!function(e,t){var n=[],r=e.geometry;if(null!==r){switch(r.type){case"Polygon":n=B(r);break;case"LineString":n=[B(r)]}n.forEach((function(n){(function(e,t){var n=[];return e.reduce((function(e,r){var i=g([e,r],t);return i.bbox=function(e,t){var n=e[0],r=e[1];e=t[0],t=t[1];return[n<e?n:e,r<t?r:t,e<n?n:e,t<r?r:t]}(e,r),n.push(i),r})),n})(n,e.properties).forEach((function(e){e.id=t.length,t.push(e)}))}))}}(e,t)})),y(t)}function be(e,t,n){if(!0===(n=void 0===n?{}:n).final)return function(e,t){return(be(t,e)+180)%360}(e,t);var r=N(e),i=N(t);n=E(r[0]),e=E(i[0]),t=E(r[1]),r=E(i[1]),i=Math.sin(e-n)*Math.cos(r),n=Math.cos(t)*Math.sin(r)-Math.sin(t)*Math.cos(r)*Math.cos(e-n);return S(Math.atan2(i,n))}function xe(e,t,n){void 0===n&&(n={});var r=N(e),i=(e=E((i=N(t))[1]-r[1]),t=E(i[0]-r[0]),r=E(r[1]),E(i[1]));i=Math.pow(Math.sin(e/2),2)+Math.pow(Math.sin(t/2),2)*Math.cos(r)*Math.cos(i);return x(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),n.units)}function we(e,t,n,r){void 0===r&&(r={});var i=E((o=N(e))[0]),o=(e=E(o[1]),E(n));n=w(t,r.units),t=Math.asin(Math.sin(e)*Math.cos(n)+Math.cos(e)*Math.sin(n)*Math.cos(o));return f([S(i+Math.atan2(Math.sin(o)*Math.sin(n)*Math.cos(e),Math.cos(n)-Math.sin(e)*Math.sin(t))),S(t)],r.properties)}function Se(e,t){var n={},r=[];if("LineString"===e.type&&(e=d(e)),"LineString"===t.type&&(t=d(t)),"Feature"===e.type&&"Feature"===t.type&&null!==e.geometry&&null!==t.geometry&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var i=Ee(e,t);return i&&r.push(i),y(r)}var o=ye();return o.load(_e(t)),A(_e(e),(function(e){A(o.search(e),(function(t){var i=Ee(e,t);i&&(t=B(i).join(","),n[t]||(n[t]=!0,r.push(i)))}))})),y(r)}function Ee(e,t){var n=B(e),r=B(t);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],l=r[0][0];e=r[0][1],t=r[1][0],r=((n=r[1][1])-e)*(a-i)-(t-l)*(s-o),n=(t-l)*(o-e)-(n-e)*(i-l);return 0==r?null:(n/=r,r=(l=(a-i)*(o-e)-(s-o)*(i-l))/r,0<=n&&n<=1&&0<=r&&r<=1?f([i+n*(a-i),o+n*(s-o)]):null)}function Ce(e,t,n){void 0===n&&(n={});var r=f([1/0,1/0],{dist:1/0}),i=0;return O(e,(function(e){for(var o=B(e),a=0;a<o.length-1;a++){var s=f(o[a]);s.properties.dist=xe(t,s,n);var l=f(o[a+1]);l.properties.dist=xe(t,l,n);var u=xe(s,l,n),c=Math.max(s.properties.dist,l.properties.dist),p=be(s,l),h=we(t,c,p+90,n);p=we(t,c,p-90,n),h=Se(g([h.geometry.coordinates,p.geometry.coordinates]),g([s.geometry.coordinates,l.geometry.coordinates])),p=null;0<h.features.length&&((p=h.features[0]).properties.dist=xe(t,p,n),p.properties.location=i+xe(s,p,n)),s.properties.dist<r.properties.dist&&((r=s).properties.index=a,r.properties.location=i),l.properties.dist<r.properties.dist&&((r=l).properties.index=a+1,r.properties.location=i+u),p&&p.properties.dist<r.properties.dist&&((r=p).properties.index=a),i+=u}})),r}ye.default=ve;var Te,Ie,ke,Pe,Ae,Me,Oe,Le,Re,De,ze,Ne,Be=Object.prototype.toString,Fe=function(e){var t=Be.call(e);return"[object Arguments]"===t||"[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===Be.call(e.callee)};Object.keys||(Te=Object.prototype.hasOwnProperty,Ie=Object.prototype.toString,ke=Fe,Pe=Object.prototype.propertyIsEnumerable,Ae=!Pe.call({toString:null},"toString"),Me=Pe.call((function(){}),"prototype"),Oe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Le=function(e){var t=e.constructor;return t&&t.prototype===e},Re={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},De=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!Re["$"+e]&&Te.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{Le(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),ze=function(e){if("undefined"==typeof window||!De)return Le(e);try{return Le(e)}catch(e){return!1}},Ne=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===Ie.call(e),r=ke(e),i=t&&"[object String]"===Ie.call(e),o=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=Me&&n;if(i&&0<e.length&&!Te.call(e,0))for(var s=0;s<e.length;++s)o.push(String(s));if(r&&0<e.length)for(var l=0;l<e.length;++l)o.push(String(l));else for(var u in e)a&&"prototype"===u||!Te.call(e,u)||o.push(String(u));if(Ae)for(var c=ze(e),p=0;p<Oe.length;++p)c&&"constructor"===Oe[p]||!Te.call(e,Oe[p])||o.push(Oe[p]);return o});var je=Ne,Ue=Array.prototype.slice,Ve=Object.keys,qe=Ve?function(e){return Ve(e)}:je,He=Object.keys;qe.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return Fe(e)?He(Ue.call(e)):He(e)}):Object.keys=qe,Object.keys||qe};var We,Ge=qe,Ze=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;return("function"!=typeof Object.keys||0===Object.keys(e).length)&&(("function"!=typeof Object.getOwnPropertyNames||0===Object.getOwnPropertyNames(e).length)&&(1===(n=Object.getOwnPropertySymbols(e)).length&&n[0]===t&&(!!Object.prototype.propertyIsEnumerable.call(e,t)&&("function"!=typeof Object.getOwnPropertyDescriptor||42===(e=Object.getOwnPropertyDescriptor(e,t)).value&&!0===e.enumerable))))},Ke="undefined"!=typeof Symbol&&Symbol,Xe="Function.prototype.bind called on incompatible ",Ye=Array.prototype.slice,Je=Object.prototype.toString,$e="[object Function]",Qe=Function.prototype.bind||function(e){var t=this;if("function"!=typeof t||Je.call(t)!==$e)throw new TypeError(Xe+t);for(var n,r,i=Ye.call(arguments,1),o=Math.max(0,t.length-i.length),a=[],s=0;s<o;s++)a.push("$"+s);return n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var r=t.apply(this,i.concat(Ye.call(arguments)));return Object(r)===r?r:this}return t.apply(e,i.concat(Ye.call(arguments)))})),t.prototype&&((r=function(){}).prototype=t.prototype,n.prototype=new r,r.prototype=null),n},et=Qe.call(Function.call,Object.prototype.hasOwnProperty),tt=SyntaxError,nt=Function,rt=TypeError,it=function(e){try{return nt('"use strict"; return ('+e+").constructor;")()}catch(e){}},ot=Object.getOwnPropertyDescriptor;if(ot)try{ot({},"")}catch($n){ot=null}var at=function(){throw new rt},st=ot?function(){try{return at}catch($n){try{return ot(arguments,"callee").get}catch($n){return at}}}():at,lt="function"==typeof Ke&&"function"==typeof Symbol&&"symbol"==typeof Ke("foo")&&"symbol"==typeof Symbol("bar")&&Ze(),ut=Object.getPrototypeOf||function(e){return e.__proto__},ct={},pt="undefined"==typeof Uint8Array?We:ut(Uint8Array),ht={"%AggregateError%":"undefined"==typeof AggregateError?We:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?We:ArrayBuffer,"%ArrayIteratorPrototype%":lt?ut([][Symbol.iterator]()):We,"%AsyncFromSyncIteratorPrototype%":We,"%AsyncFunction%":ct,"%AsyncGenerator%":ct,"%AsyncGeneratorFunction%":ct,"%AsyncIteratorPrototype%":ct,"%Atomics%":"undefined"==typeof Atomics?We:Atomics,"%BigInt%":"undefined"==typeof BigInt?We:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?We:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?We:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?We:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?We:FinalizationRegistry,"%Function%":nt,"%GeneratorFunction%":ct,"%Int8Array%":"undefined"==typeof Int8Array?We:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?We:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?We:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":lt?ut(ut([][Symbol.iterator]())):We,"%JSON%":"object"==typeof JSON?JSON:We,"%Map%":"undefined"==typeof Map?We:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&lt?ut((new Map)[Symbol.iterator]()):We,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?We:Promise,"%Proxy%":"undefined"==typeof Proxy?We:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?We:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?We:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&lt?ut((new Set)[Symbol.iterator]()):We,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?We:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":lt?ut(""[Symbol.iterator]()):We,"%Symbol%":lt?Symbol:We,"%SyntaxError%":tt,"%ThrowTypeError%":st,"%TypedArray%":pt,"%TypeError%":rt,"%Uint8Array%":"undefined"==typeof Uint8Array?We:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?We:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?We:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?We:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?We:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?We:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?We:WeakSet},dt=function e(t){var n,r;return"%AsyncFunction%"===t?n=it("async function () {}"):"%GeneratorFunction%"===t?n=it("function* () {}"):"%AsyncGeneratorFunction%"===t?n=it("async function* () {}"):"%AsyncGenerator%"===t?(r=e("%AsyncGeneratorFunction%"))&&(n=r.prototype):"%AsyncIteratorPrototype%"!==t||(r=e("%AsyncGenerator%"))&&(n=ut(r.prototype)),ht[t]=n},ft={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},mt=Qe.call(Function.call,Array.prototype.concat),gt=Qe.call(Function.apply,Array.prototype.splice),yt=Qe.call(Function.call,String.prototype.replace),vt=Qe.call(Function.call,String.prototype.slice),_t=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bt=/\\(\\)?/g,xt=function(e){var t=vt(e,0,1),n=vt(e,-1);if("%"===t&&"%"!==n)throw new tt("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new tt("invalid intrinsic syntax, expected opening `%`");var r=[];return yt(e,_t,(function(e,t,n,i){r[r.length]=n?yt(i,bt,"$1"):t||e})),r},wt=function(e,t){var n,r=e;if(et(ft,r)&&(r="%"+(n=ft[r])[0]+"%"),et(ht,r)){var i=ht[r];if(void 0===(i=i===ct?dt(r):i)&&!t)throw new rt("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new tt("intrinsic "+e+" does not exist!")},St=function(e,t){if("string"!=typeof e||0===e.length)throw new rt("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new rt('"allowMissing" argument must be a boolean');var n,r,i=xt(e),o=0<i.length?i[0]:"",a=((r=wt("%"+o+"%",t)).name,r.value),s=!1;(r=r.alias)&&(o=r[0],gt(i,mt([0,1],r)));for(var l=1,u=!0;l<i.length;l+=1){var c=i[l],p=vt(c,0,1),h=vt(c,-1);if(('"'===p||"'"===p||"`"===p||'"'===h||"'"===h||"`"===h)&&p!==h)throw new tt("property names with quotes must have matching quotes");if("constructor"!==c&&u||(s=!0),et(ht,n="%"+(o+="."+c)+"%"))a=ht[n];else if(null!=a){if(!(c in a)){if(!t)throw new rt("base intrinsic for "+e+" exists, but the property is not available.");return}a=ot&&l+1>=i.length?(u=!!(h=ot(a,c)))&&"get"in h&&!("originalValue"in h.get)?h.get:a[c]:(u=et(a,c),a[c]),u&&!s&&(ht[n]=a)}}return a},Et=K((function(e){var t=St("%Function.prototype.apply%"),n=St("%Function.prototype.call%"),r=St("%Reflect.apply%",!0)||Qe.call(n,t),i=St("%Object.getOwnPropertyDescriptor%",!0),o=St("%Object.defineProperty%",!0),a=St("%Math.max%");if(o)try{o({},"a",{value:1})}catch(e){o=null}function s(){return r(Qe,t,arguments)}e.exports=function(e){var t=r(Qe,n,arguments);return i&&o&&i(t,"length").configurable&&o(t,"length",{value:1+a(0,e.length-(arguments.length-1))}),t},o?o(e.exports,"apply",{value:s}):e.exports.apply=s})),Ct=(Et.apply,Et(St("String.prototype.indexOf"))),Tt=function(e,t){return"function"==typeof(t=St(e,!!t))&&-1<Ct(e,".prototype.")?Et(t):t},It="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,kt=Tt("Object.prototype.toString"),Pt=function(e){return!(It&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===kt(e)},At=function(e){return!!Pt(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==kt(e)&&"[object Function]"===kt(e.callee)},Mt=function(){return Pt(arguments)}();Pt.isLegacyArguments=At;var Ot=Mt?Pt:At,Lt="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Rt=Object.prototype.toString,Dt=Array.prototype.concat,zt=Object.defineProperty,Nt=zt&&function(){var e={};try{for(var t in zt(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),Bt=function(e,t,n,r){t in e&&(!function(e){return"function"==typeof e&&"[object Function]"===Rt.call(e)}(r)||!r())||(Nt?zt(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},Ft=function(e,t){var n=2<arguments.length?arguments[2]:{},r=Ge(t);Lt&&(r=Dt.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)Bt(e,r[i],t[r[i]],n[r[i]])};Ft.supportsDescriptors=!!Nt;var jt=Ft,Ut=function(e){return e!=e},Vt=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!Ut(e)||!Ut(t))},qt=function(){return"function"==typeof Object.is?Object.is:Vt},Ht=Et(qt(),Object);jt(Ht,{getPolyfill:qt,implementation:Vt,shim:function(){var e=qt();return jt(Object,{is:e},{is:function(){return Object.is!==e}}),e}});var Wt,Gt,Zt,Kt,Xt,Yt=Ht,Jt=Ze()&&!!Symbol.toStringTag;Jt&&(Wt=Tt("Object.prototype.hasOwnProperty"),Gt=Tt("RegExp.prototype.exec"),Zt={},Xt={toString:Kt=function(){throw Zt},valueOf:Kt},"symbol"==typeof Symbol.toPrimitive&&(Xt[Symbol.toPrimitive]=Kt));var $t=Tt("Object.prototype.toString"),Qt=Object.getOwnPropertyDescriptor,en=Jt?function(e){if(!e||"object"!=typeof e)return!1;var t=Qt(e,"lastIndex");if(!t||!Wt(t,"value"))return!1;try{Gt(e,Xt)}catch(e){return e===Zt}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===$t(e)},tn=Object,nn=TypeError,rn=function(){if(null!=this&&this!==tn(this))throw new nn("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e},on=jt.supportsDescriptors,an=Object.getOwnPropertyDescriptor,sn=TypeError,ln=function(){if(!on)throw new sn("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=an(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof/a/.dotAll)return e.get}return rn},un=jt.supportsDescriptors,cn=Object.getOwnPropertyDescriptor,pn=Object.defineProperty,hn=TypeError,dn=Object.getPrototypeOf,fn=/a/,mn=Et(rn);jt(mn,{getPolyfill:ln,implementation:rn,shim:function(){if(!un||!dn)throw new hn("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=ln(),t=dn(fn),n=cn(t,"flags");return n&&n.get===e||pn(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var gn=mn,yn=Date.prototype.getDay,vn=Object.prototype.toString,_n="function"==typeof Symbol&&!!Symbol.toStringTag,bn=function(e){return"object"==typeof e&&null!==e&&(_n?function(e){try{return yn.call(e),!0}catch(e){return!1}}(e):"[object Date]"===vn.call(e))},xn=Date.prototype.getTime;function wn(e,t,n){return!((n=n||{}).strict?!Yt(e,t):e!==t)||(!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?Yt(e,t):e==t:function(e,t,n){var r,i;if(typeof e!=typeof t)return!1;if(Sn(e)||Sn(t))return!1;if(e.prototype!==t.prototype)return!1;if(Ot(e)!==Ot(t))return!1;var o=en(e),a=en(t);if(o!==a)return!1;if(o||a)return e.source===t.source&&gn(e)===gn(t);if(bn(e)&&bn(t))return xn.call(e)===xn.call(t);if(o=En(e),a=En(t),o!==a)return!1;if(o||a){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if(typeof e!=typeof t)return!1;try{var s=Ge(e),l=Ge(t)}catch(e){return!1}if(s.length!==l.length)return!1;for(s.sort(),l.sort(),r=s.length-1;0<=r;r--)if(s[r]!=l[r])return!1;for(r=s.length-1;0<=r;r--)if(!wn(e[i=s[r]],t[i],n))return!1;return!0}(e,t,n))}function Sn(e){return null==e}function En(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&"function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0])}var Cn=wn;function Tn(e,t){var n=B(t),r=(i=B(e))[0],i=(t=i[i.length-1],e.geometry.coordinates);return Cn(n[0],r)?i.unshift(n[1]):Cn(n[0],t)?i.push(n[1]):Cn(n[1],r)?i.unshift(n[0]):Cn(n[1],t)&&i.push(n[0]),e}var In=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=!(!e||!e.direction)&&e.direction,this.pseudoNode=!(!e||!e.pseudoNode)&&e.pseudoNode,this.objectComparator=e&&e.objectComparator?e.objectComparator:An};function kn(e){return e.coordinates.map((function(t){return{type:e.type.replace("Multi",""),coordinates:t}}))}function Pn(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}function An(e,t){return Cn(e,t,{strict:!0})}In.prototype.compare=function(e,t){if(e.type!==t.type||!Pn(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(0===e.type.indexOf("Multi")){var n=this,r=kn(e),i=kn(t);return r.every((function(e){return this.some((function(t){return n.compare(e,t)}))}),i)}}return!1},In.prototype.compareCoord=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].toFixed(this.precision)!==t[n].toFixed(this.precision))return!1;return!0},In.prototype.compareLine=function(e,t,n,r){return!!Pn(e,t)&&(e=this.pseudoNode?e:this.removePseudo(e),t=this.pseudoNode?t:this.removePseudo(t),!r||this.compareCoord(e[0],t[0])||(t=this.fixStartIndex(t,e))?(r=this.compareCoord(e[n],t[n]),this.direction||r?this.comparePath(e,t):!!this.compareCoord(e[n],t[t.length-(1+n)])&&this.comparePath(e.slice().reverse(),t)):void 0)},In.prototype.fixStartIndex=function(e,t){for(var n,r=-1,i=0;i<e.length;i++)if(this.compareCoord(e[i],t[0])){r=i;break}return 0<=r?[].concat(e.slice(r,e.length),e.slice(1,r+1)):n},In.prototype.comparePath=function(e,t){var n=this;return e.every((function(e,t){return n.compareCoord(e,this[t])}),t)},In.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){e=e.coordinates.slice(1,e.coordinates.length),t=t.coordinates.slice(1,t.coordinates.length);var n=this;return e.every((function(e){return this.some((function(t){return n.compareLine(e,t,1,!0)}))}),t)}return!1},In.prototype.compareFeature=function(e,t){return!(e.id!==t.id||!this.objectComparator(e.properties,t.properties)||!this.compareBBox(e,t))&&this.compare(e.geometry,t.geometry)},In.prototype.compareBBox=function(e,t){return!!(!e.bbox&&!t.bbox||e.bbox&&t.bbox&&this.compareCoord(e.bbox,t.bbox))},In.prototype.removePseudo=function(e){return e};var Mn=In;function On(e,t){var n=F(e),r=F(t),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Mn({precision:6}).compare(e,t))return!1;var a=0;switch(i){case"MultiPoint":for(var s=0;s<n.coordinates.length;s++)for(var l=0;l<r.coordinates.length;l++){var u=n.coordinates[s],c=r.coordinates[l];if(u[0]===c[0]&&u[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":L(e,(function(e){L(t,(function(t){(function(e,t,n){if(!T(n=(n=void 0===n?{}:n)||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=ye();return e=_e(e),a.load(e),L(t,(function(e){var t=!1;e&&(A(a.search(e),(function(n){var o,a;!1===t&&(o=B(e).sort(),a=B(n).sort(),Cn(o,a)||(0===i?V(o[0],n)&&V(o[1],n):Ce(n,o[0]).properties.dist<=i&&Ce(n,o[1]).properties.dist<=i)?(t=!0,r=r?Tn(r,e):e):(0===i?V(a[0],e)&&V(a[1],e):Ce(e,a[0]).properties.dist<=i&&Ce(e,a[1]).properties.dist<=i)&&(r=r?Tn(r,n):n))})),!1===t&&r&&(o.push(r),r=void 0))})),r&&o.push(r),y(o)})(e,t).features.length&&a++}))}));break;case"Polygon":case"MultiPolygon":L(e,(function(e){L(t,(function(t){Se(e,t).features.length&&a++}))}))}return 0<a}var Ln=K((function(e,t){e.exports=function(){var e="14.7.0";function t(e){e.parentElement.removeChild(e)}function n(e){return null!==e&&void 0!==e}function r(e){e.preventDefault()}function i(e){return"number"===typeof e&&!isNaN(e)&&isFinite(e)}function o(e,t,n){n>0&&(u(e,t),setTimeout((function(){c(e,t)}),n))}function a(e){return Math.max(Math.min(e,100),0)}function s(e){return Array.isArray(e)?e:[e]}function l(e){var t=(e=String(e)).split(".");return t.length>1?t[1].length:0}function u(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function c(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function p(e){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:n?e.documentElement.scrollLeft:e.body.scrollLeft,y:t?window.pageYOffset:n?e.documentElement.scrollTop:e.body.scrollTop}}function h(e,t){return 100/(t-e)}function d(e,t,n){return 100*t/(e[n+1]-e[n])}function f(e,t){for(var n=1;e>=t[n];)n+=1;return n}function m(e,t,n){if(n>=e.slice(-1)[0])return 100;var r=f(n,e),i=e[r-1],o=e[r],a=t[r-1],s=t[r];return a+function(e,t){return d(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}([i,o],n)/h(a,s)}function g(e,t,n,r){if(100===r)return r;var i=f(r,e),o=e[i-1],a=e[i];return n?r-o>(a-o)/2?a:o:t[i-1]?e[i-1]+function(e,t){return Math.round(e/t)*t}(r-e[i-1],t[i-1]):r}function y(e,t,n){var r;if("number"===typeof t&&(t=[t]),!Array.isArray(t))throw new Error("noUiSlider (14.7.0): 'range' contains invalid value.");if(!i(r="min"===e?0:"max"===e?100:parseFloat(e))||!i(t[0]))throw new Error("noUiSlider (14.7.0): 'range' value isn't numeric.");n.xPct.push(r),n.xVal.push(t[0]),r?n.xSteps.push(!isNaN(t[1])&&t[1]):isNaN(t[1])||(n.xSteps[0]=t[1]),n.xHighestCompleteStep.push(0)}function v(e,t,n){if(t)if(n.xVal[e]!==n.xVal[e+1]){n.xSteps[e]=d([n.xVal[e],n.xVal[e+1]],t,0)/h(n.xPct[e],n.xPct[e+1]);var r=(n.xVal[e+1]-n.xVal[e])/n.xNumSteps[e],i=Math.ceil(Number(r.toFixed(3))-1),o=n.xVal[e]+n.xNumSteps[e]*i;n.xHighestCompleteStep[e]=o}else n.xSteps[e]=n.xHighestCompleteStep[e]=n.xVal[e]}function _(e,t,n){var r;this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=t;var i=[];for(r in e)e.hasOwnProperty(r)&&i.push([e[r],r]);for(i.length&&"object"===typeof i[0][0]?i.sort((function(e,t){return e[0][0]-t[0][0]})):i.sort((function(e,t){return e[0]-t[0]})),r=0;r<i.length;r++)y(i[r][1],i[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)v(r,this.xNumSteps[r],this)}_.prototype.getDistance=function(e){var t,n=[];for(t=0;t<this.xNumSteps.length-1;t++){var r=this.xNumSteps[t];if(r&&e/r%1!==0)throw new Error("noUiSlider (14.7.0): 'limit', 'margin' and 'padding' of "+this.xPct[t]+"% range must be divisible by step.");n[t]=d(this.xVal,e,t)}return n},_.prototype.getAbsoluteDistance=function(e,t,n){var r,i=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[i+1];)i++;else e===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);n||e!==this.xPct[i+1]||i++;var o=1,a=t[i],s=0,l=0,u=0,c=0;for(r=n?(e-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):(this.xPct[i+1]-e)/(this.xPct[i+1]-this.xPct[i]);a>0;)s=this.xPct[i+1+c]-this.xPct[i+c],t[i+c]*o+100-100*r>100?(l=s*r,o=(a-100*r)/t[i+c],r=1):(l=t[i+c]*s/100*o,o=0),n?(u-=l,this.xPct.length+c>=1&&c--):(u+=l,this.xPct.length-c>=1&&c++),a=t[i+c]*o;return e+u},_.prototype.toStepping=function(e){return e=m(this.xVal,this.xPct,e)},_.prototype.fromStepping=function(e){return function(e,t,n){if(n>=100)return e.slice(-1)[0];var r=f(n,t),i=e[r-1],o=e[r],a=t[r-1];return function(e,t){return t*(e[1]-e[0])/100+e[0]}([i,o],(n-a)*h(a,t[r]))}(this.xVal,this.xPct,e)},_.prototype.getStep=function(e){return e=g(this.xPct,this.xSteps,this.snap,e)},_.prototype.getDefaultStep=function(e,t,n){var r=f(e,this.xPct);return(100===e||t&&e===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/n},_.prototype.getNearbySteps=function(e){var t=f(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}},_.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(l);return Math.max.apply(null,e)},_.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var b={to:function(e){return void 0!==e&&e.toFixed(2)},from:Number},x={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},w=".__tooltips",S=".__aria";function E(e){if(function(e){return"object"===typeof e&&"function"===typeof e.to&&"function"===typeof e.from}(e))return!0;throw new Error("noUiSlider (14.7.0): 'format' requires 'to' and 'from' methods.")}function C(e,t){if(!i(t))throw new Error("noUiSlider (14.7.0): 'step' is not numeric.");e.singleStep=t}function T(e,t){if(!i(t))throw new Error("noUiSlider (14.7.0): 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function I(e,t){if(!i(t))throw new Error("noUiSlider (14.7.0): 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function k(e,t){if("object"!==typeof t||Array.isArray(t))throw new Error("noUiSlider (14.7.0): 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider (14.7.0): Missing 'min' or 'max' in 'range'.");if(t.min===t.max)throw new Error("noUiSlider (14.7.0): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new _(t,e.snap,e.singleStep)}function P(e,t){if(t=s(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider (14.7.0): 'start' option is incorrect.");e.handles=t.length,e.start=t}function A(e,t){if(e.snap=t,"boolean"!==typeof t)throw new Error("noUiSlider (14.7.0): 'snap' option must be a boolean.")}function M(e,t){if(e.animate=t,"boolean"!==typeof t)throw new Error("noUiSlider (14.7.0): 'animate' option must be a boolean.")}function O(e,t){if(e.animationDuration=t,"number"!==typeof t)throw new Error("noUiSlider (14.7.0): 'animationDuration' option must be a number.")}function L(e,t){var n,r=[!1];if("lower"===t?t=[!0,!1]:"upper"===t&&(t=[!1,!0]),!0===t||!1===t){for(n=1;n<e.handles;n++)r.push(t);r.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider (14.7.0): 'connect' option doesn't match handle count.");r=t}e.connect=r}function R(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider (14.7.0): 'orientation' option is invalid.")}}function D(e,t){if(!i(t))throw new Error("noUiSlider (14.7.0): 'margin' option must be numeric.");0!==t&&(e.margin=e.spectrum.getDistance(t))}function z(e,t){if(!i(t))throw new Error("noUiSlider (14.7.0): 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider (14.7.0): 'limit' option is only supported on linear sliders with 2 or more handles.")}function N(e,t){var n;if(!i(t)&&!Array.isArray(t))throw new Error("noUiSlider (14.7.0): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&2!==t.length&&!i(t[0])&&!i(t[1]))throw new Error("noUiSlider (14.7.0): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==t){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],n=0;n<e.spectrum.xNumSteps.length-1;n++)if(e.padding[0][n]<0||e.padding[1][n]<0)throw new Error("noUiSlider (14.7.0): 'padding' option must be a positive number(s).");var r=t[0]+t[1],o=e.spectrum.xVal[0];if(r/(e.spectrum.xVal[e.spectrum.xVal.length-1]-o)>1)throw new Error("noUiSlider (14.7.0): 'padding' option must not exceed 100% of the range.")}}function B(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider (14.7.0): 'direction' option was not recognized.")}}function F(e,t){if("string"!==typeof t)throw new Error("noUiSlider (14.7.0): 'behaviour' must be a string containing options.");var n=t.indexOf("tap")>=0,r=t.indexOf("drag")>=0,i=t.indexOf("fixed")>=0,o=t.indexOf("snap")>=0,a=t.indexOf("hover")>=0,s=t.indexOf("unconstrained")>=0;if(i){if(2!==e.handles)throw new Error("noUiSlider (14.7.0): 'fixed' behaviour must be used with 2 handles");D(e,e.start[1]-e.start[0])}if(s&&(e.margin||e.limit))throw new Error("noUiSlider (14.7.0): 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:n||o,drag:r,fixed:i,snap:o,hover:a,unconstrained:s}}function j(e,t){if(!1!==t)if(!0===t){e.tooltips=[];for(var n=0;n<e.handles;n++)e.tooltips.push(!0)}else{if(e.tooltips=s(t),e.tooltips.length!==e.handles)throw new Error("noUiSlider (14.7.0): must pass a formatter for all handles.");e.tooltips.forEach((function(e){if("boolean"!==typeof e&&("object"!==typeof e||"function"!==typeof e.to))throw new Error("noUiSlider (14.7.0): 'tooltips' must be passed a formatter or 'false'.")}))}}function U(e,t){e.ariaFormat=t,E(t)}function V(e,t){e.format=t,E(t)}function q(e,t){if(e.keyboardSupport=t,"boolean"!==typeof t)throw new Error("noUiSlider (14.7.0): 'keyboardSupport' option must be a boolean.")}function H(e,t){e.documentElement=t}function W(e,t){if("string"!==typeof t&&!1!==t)throw new Error("noUiSlider (14.7.0): 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function G(e,t){if("object"!==typeof t)throw new Error("noUiSlider (14.7.0): 'cssClasses' must be an object.");if("string"===typeof e.cssPrefix)for(var n in e.cssClasses={},t)t.hasOwnProperty(n)&&(e.cssClasses[n]=e.cssPrefix+t[n]);else e.cssClasses=t}function Z(e){var t={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:b,format:b},r={step:{r:!1,t:C},keyboardPageMultiplier:{r:!1,t:T},keyboardDefaultStep:{r:!1,t:I},start:{r:!0,t:P},connect:{r:!0,t:L},direction:{r:!0,t:B},snap:{r:!1,t:A},animate:{r:!1,t:M},animationDuration:{r:!1,t:O},range:{r:!0,t:k},orientation:{r:!1,t:R},margin:{r:!1,t:D},limit:{r:!1,t:z},padding:{r:!1,t:N},behaviour:{r:!0,t:F},ariaFormat:{r:!1,t:U},format:{r:!1,t:V},tooltips:{r:!1,t:j},keyboardSupport:{r:!0,t:q},documentElement:{r:!1,t:H},cssPrefix:{r:!0,t:W},cssClasses:{r:!0,t:G}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:x,keyboardPageMultiplier:5,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(r).forEach((function(o){if(!n(e[o])&&void 0===i[o]){if(r[o].r)throw new Error("noUiSlider (14.7.0): '"+o+"' is required.");return!0}r[o].t(t,n(e[o])?e[o]:i[o])})),t.pips=e.pips;var o=document.createElement("div"),a=void 0!==o.style.msTransform,s=void 0!==o.style.transform;t.transformRule=s?"transform":a?"msTransform":"webkitTransform";return t.style=[["left","top"],["right","bottom"]][t.dir][t.ort],t}function K(e,i,l){var h,d,f,m,g,y,v=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},_=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),b=e,x=i.spectrum,E=[],C=[],T=[],I=0,k={},P=e.ownerDocument,A=i.documentElement||P.documentElement,M=P.body,O="rtl"===P.dir||1===i.ort?0:100;function L(e,t){var n=P.createElement("div");return t&&u(n,t),e.appendChild(n),n}function R(e,t){var n=L(e,i.cssClasses.origin),r=L(n,i.cssClasses.handle);return L(r,i.cssClasses.touchArea),r.setAttribute("data-handle",t),i.keyboardSupport&&(r.setAttribute("tabindex","0"),r.addEventListener("keydown",(function(e){return function(e,t){if(N()||B(t))return!1;var n=["Left","Right"],r=["Down","Up"],o=["PageDown","PageUp"],a=["Home","End"];i.dir&&!i.ort?n.reverse():i.ort&&!i.dir&&(r.reverse(),o.reverse());var s,l=e.key.replace("Arrow",""),u=l===o[0],c=l===o[1],p=l===r[0]||l===n[0]||u,h=l===r[1]||l===n[1]||c,d=l===a[0],f=l===a[1];if(!p&&!h&&!d&&!f)return!0;if(e.preventDefault(),h||p){var m=i.keyboardPageMultiplier,g=p?0:1,y=de(t)[g];if(null===y)return!1;!1===y&&(y=x.getDefaultStep(C[t],p,i.keyboardDefaultStep)),(c||u)&&(y*=m),y=Math.max(y,1e-7),y*=p?-1:1,s=E[t]+y}else s=f?i.spectrum.xVal[i.spectrum.xVal.length-1]:i.spectrum.xVal[0];return le(t,x.toStepping(s),!0,!0),ne("slide",t),ne("update",t),ne("change",t),ne("set",t),!1}(e,t)}))),r.setAttribute("role","slider"),r.setAttribute("aria-orientation",i.ort?"vertical":"horizontal"),0===t?u(r,i.cssClasses.handleLower):t===i.handles-1&&u(r,i.cssClasses.handleUpper),n}function D(e,t){return!!t&&L(e,i.cssClasses.connect)}function z(e,t){return!!i.tooltips[t]&&L(e.firstChild,i.cssClasses.tooltip)}function N(){return b.hasAttribute("disabled")}function B(e){return d[e].hasAttribute("disabled")}function F(){g&&(te("update"+w),g.forEach((function(e){e&&t(e)})),g=null)}function j(){F(),g=d.map(z),ee("update"+w,(function(e,t,n){if(g[t]){var r=e[t];!0!==i.tooltips[t]&&(r=i.tooltips[t].to(n[t])),g[t].innerHTML=r}}))}function U(e,t,n){var r=P.createElement("div"),o=[];o[0]=i.cssClasses.valueNormal,o[1]=i.cssClasses.valueLarge,o[2]=i.cssClasses.valueSub;var a=[];a[0]=i.cssClasses.markerNormal,a[1]=i.cssClasses.markerLarge,a[2]=i.cssClasses.markerSub;var s=[i.cssClasses.valueHorizontal,i.cssClasses.valueVertical],l=[i.cssClasses.markerHorizontal,i.cssClasses.markerVertical];function c(e,t){var n=t===i.cssClasses.value,r=n?o:a;return t+" "+(n?s:l)[i.ort]+" "+r[e]}return u(r,i.cssClasses.pips),u(r,0===i.ort?i.cssClasses.pipsHorizontal:i.cssClasses.pipsVertical),Object.keys(e).forEach((function(o){!function(e,o,a){if(-1!==(a=t?t(o,a):a)){var s=L(r,!1);s.className=c(a,i.cssClasses.marker),s.style[i.style]=e+"%",a>0&&((s=L(r,!1)).className=c(a,i.cssClasses.value),s.setAttribute("data-value",o),s.style[i.style]=e+"%",s.innerHTML=n.to(o))}}(o,e[o][0],e[o][1])})),r}function V(){m&&(t(m),m=null)}function q(e){V();var t=e.mode,n=e.density||1,r=e.filter||!1,i=function(e,t,n){if("range"===e||"steps"===e)return x.xVal;if("count"===e){if(t<2)throw new Error("noUiSlider (14.7.0): 'values' (>= 2) required for mode 'count'.");var r=t-1,i=100/r;for(t=[];r--;)t[r]=r*i;t.push(100),e="positions"}return"positions"===e?t.map((function(e){return x.fromStepping(n?x.getStep(e):e)})):"values"===e?n?t.map((function(e){return x.fromStepping(x.getStep(x.toStepping(e)))})):t:void 0}(t,e.values||!1,e.stepped||!1),o=function(e,t,n){function r(e,t){return(e+t).toFixed(7)/1}var i={},o=x.xVal[0],a=x.xVal[x.xVal.length-1],s=!1,l=!1,u=0;return n=function(e){return e.filter((function(e){return!this[e]&&(this[e]=!0)}),{})}(n.slice().sort((function(e,t){return e-t}))),n[0]!==o&&(n.unshift(o),s=!0),n[n.length-1]!==a&&(n.push(a),l=!0),n.forEach((function(o,a){var c,p,h,d,f,m,g,y,v,_,b=o,w=n[a+1],S="steps"===t;if(S&&(c=x.xNumSteps[a]),c||(c=w-b),!1!==b)for(void 0===w&&(w=b),c=Math.max(c,1e-7),p=b;p<=w;p=r(p,c)){for(y=(f=(d=x.toStepping(p))-u)/e,_=f/(v=Math.round(y)),h=1;h<=v;h+=1)i[(m=u+h*_).toFixed(5)]=[x.fromStepping(m),0];g=n.indexOf(p)>-1?1:S?2:0,!a&&s&&p!==w&&(g=0),p===w&&l||(i[d.toFixed(5)]=[p,g]),u=d}})),i}(n,t,i),a=e.format||{to:Math.round};return m=b.appendChild(U(o,r,a))}function H(){var e=h.getBoundingClientRect(),t="offset"+["Width","Height"][i.ort];return 0===i.ort?e.width||h[t]:e.height||h[t]}function W(e,t,n,r){var o=function(o){return o=function(e,t,n){var r,i,o=0===e.type.indexOf("touch"),a=0===e.type.indexOf("mouse"),s=0===e.type.indexOf("pointer");0===e.type.indexOf("MSPointer")&&(s=!0);if("mousedown"===e.type&&!e.buttons&&!e.touches)return!1;if(o){var l=function(e){return e.target===n||n.contains(e.target)||e.target.shadowRoot&&e.target.shadowRoot.contains(n)};if("touchstart"===e.type){var u=Array.prototype.filter.call(e.touches,l);if(u.length>1)return!1;r=u[0].pageX,i=u[0].pageY}else{var c=Array.prototype.find.call(e.changedTouches,l);if(!c)return!1;r=c.pageX,i=c.pageY}}t=t||p(P),(a||s)&&(r=e.clientX+t.x,i=e.clientY+t.y);return e.pageOffset=t,e.points=[r,i],e.cursor=a||s,e}(o,r.pageOffset,r.target||t),!!o&&(!(N()&&!r.doNotReject)&&(!(function(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}(b,i.cssClasses.tap)&&!r.doNotReject)&&(!(e===v.start&&void 0!==o.buttons&&o.buttons>1)&&((!r.hover||!o.buttons)&&(_||o.preventDefault(),o.calcPoint=o.points[i.ort],void n(o,r))))))},a=[];return e.split(" ").forEach((function(e){t.addEventListener(e,o,!!_&&{passive:!0}),a.push([e,o])})),a}function G(e){var t=e-function(e,t){var n=e.getBoundingClientRect(),r=e.ownerDocument,i=r.documentElement,o=p(r);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(o.x=0),t?n.top+o.y-i.clientTop:n.left+o.x-i.clientLeft}(h,i.ort),n=100*t/H();return n=a(n),i.dir?100-n:n}function K(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&Y(e,t)}function X(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return Y(e,t);var n=(i.dir?-1:1)*(e.calcPoint-t.startCalcPoint);oe(n>0,100*n/t.baseSize,t.locations,t.handleNumbers)}function Y(e,t){t.handle&&(c(t.handle,i.cssClasses.active),I-=1),t.listeners.forEach((function(e){A.removeEventListener(e[0],e[1])})),0===I&&(c(b,i.cssClasses.drag),se(),e.cursor&&(M.style.cursor="",M.removeEventListener("selectstart",r))),t.handleNumbers.forEach((function(e){ne("change",e),ne("set",e),ne("end",e)}))}function J(e,t){if(t.handleNumbers.some(B))return!1;var n;1===t.handleNumbers.length&&(n=d[t.handleNumbers[0]].children[0],I+=1,u(n,i.cssClasses.active));e.stopPropagation();var o=[],a=W(v.move,A,X,{target:e.target,handle:n,listeners:o,startCalcPoint:e.calcPoint,baseSize:H(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:C.slice()}),s=W(v.end,A,Y,{target:e.target,handle:n,listeners:o,doNotReject:!0,handleNumbers:t.handleNumbers}),l=W("mouseout",A,K,{target:e.target,handle:n,listeners:o,doNotReject:!0,handleNumbers:t.handleNumbers});o.push.apply(o,a.concat(s,l)),e.cursor&&(M.style.cursor=getComputedStyle(e.target).cursor,d.length>1&&u(b,i.cssClasses.drag),M.addEventListener("selectstart",r,!1)),t.handleNumbers.forEach((function(e){ne("start",e)}))}function $(e){e.stopPropagation();var t=G(e.calcPoint),n=function(e){var t=100,n=!1;return d.forEach((function(r,i){if(!B(i)){var o=C[i],a=Math.abs(o-e);(a<t||a<=t&&e>o||100===a&&100===t)&&(n=i,t=a)}})),n}(t);if(!1===n)return!1;i.events.snap||o(b,i.cssClasses.tap,i.animationDuration),le(n,t,!0,!0),se(),ne("slide",n,!0),ne("update",n,!0),ne("change",n,!0),ne("set",n,!0),i.events.snap&&J(e,{handleNumbers:[n]})}function Q(e){var t=G(e.calcPoint),n=x.getStep(t),r=x.fromStepping(n);Object.keys(k).forEach((function(e){"hover"===e.split(".")[0]&&k[e].forEach((function(e){e.call(y,r)}))}))}function ee(e,t){k[e]=k[e]||[],k[e].push(t),"update"===e.split(".")[0]&&d.forEach((function(e,t){ne("update",t)}))}function te(e){var t=e&&e.split(".")[0],n=t?e.substring(t.length):e;Object.keys(k).forEach((function(e){var r=e.split(".")[0],i=e.substring(r.length);t&&t!==r||n&&n!==i||function(e){return e===S||e===w}(i)&&n!==i||delete k[e]}))}function ne(e,t,n){Object.keys(k).forEach((function(r){var o=r.split(".")[0];e===o&&k[r].forEach((function(e){e.call(y,E.map(i.format.to),t,E.slice(),n||!1,C.slice(),y)}))}))}function re(e,t,n,r,o,s){var l;return d.length>1&&!i.events.unconstrained&&(r&&t>0&&(l=x.getAbsoluteDistance(e[t-1],i.margin,0),n=Math.max(n,l)),o&&t<d.length-1&&(l=x.getAbsoluteDistance(e[t+1],i.margin,1),n=Math.min(n,l))),d.length>1&&i.limit&&(r&&t>0&&(l=x.getAbsoluteDistance(e[t-1],i.limit,0),n=Math.min(n,l)),o&&t<d.length-1&&(l=x.getAbsoluteDistance(e[t+1],i.limit,1),n=Math.max(n,l))),i.padding&&(0===t&&(l=x.getAbsoluteDistance(0,i.padding[0],0),n=Math.max(n,l)),t===d.length-1&&(l=x.getAbsoluteDistance(100,i.padding[1],1),n=Math.min(n,l))),!((n=a(n=x.getStep(n)))===e[t]&&!s)&&n}function ie(e,t){var n=i.ort;return(n?t:e)+", "+(n?e:t)}function oe(e,t,n,r){var i=n.slice(),o=[!e,e],a=[e,!e];r=r.slice(),e&&r.reverse(),r.length>1?r.forEach((function(e,n){var r=re(i,e,i[e]+t,o[n],a[n],!1);!1===r?t=0:(t=r-i[e],i[e]=r)})):o=a=[!0];var s=!1;r.forEach((function(e,r){s=le(e,n[e]+t,o[r],a[r])||s})),s&&r.forEach((function(e){ne("update",e),ne("slide",e)}))}function ae(e,t){return i.dir?100-e-t:e}function se(){T.forEach((function(e){var t=C[e]>50?-1:1,n=3+(d.length+t*e);d[e].style.zIndex=n}))}function le(e,t,n,r,o){return o||(t=re(C,e,t,n,r,!1)),!1!==t&&(function(e,t){C[e]=t,E[e]=x.fromStepping(t);var n="translate("+ie(10*(ae(t,0)-O)+"%","0")+")";d[e].style[i.transformRule]=n,ue(e),ue(e+1)}(e,t),!0)}function ue(e){if(f[e]){var t=0,n=100;0!==e&&(t=C[e-1]),e!==f.length-1&&(n=C[e]);var r=n-t,o="translate("+ie(ae(t,r)+"%","0")+")",a="scale("+ie(r/100,"1")+")";f[e].style[i.transformRule]=o+" "+a}}function ce(e,t){return null===e||!1===e||void 0===e?C[t]:("number"===typeof e&&(e=String(e)),e=i.format.from(e),!1===(e=x.toStepping(e))||isNaN(e)?C[t]:e)}function pe(e,t,n){var r=s(e),a=void 0===C[0];t=void 0===t||!!t,i.animate&&!a&&o(b,i.cssClasses.tap,i.animationDuration),T.forEach((function(e){le(e,ce(r[e],e),!0,!1,n)}));for(var l=1===T.length?0:1;l<T.length;++l)T.forEach((function(e){le(e,C[e],!0,!0,n)}));se(),T.forEach((function(e){ne("update",e),null!==r[e]&&t&&ne("set",e)}))}function he(){var e=E.map(i.format.to);return 1===e.length?e[0]:e}function de(e){var t=C[e],n=x.getNearbySteps(t),r=E[e],o=n.thisStep.step,a=null;if(i.snap)return[r-n.stepBefore.startValue||null,n.stepAfter.startValue-r||null];!1!==o&&r+o>n.stepAfter.startValue&&(o=n.stepAfter.startValue-r),a=r>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&r-n.stepBefore.highestStep,100===t?o=null:0===t&&(a=null);var s=x.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(s))),null!==a&&!1!==a&&(a=Number(a.toFixed(s))),[a,o]}return h=function(e){return u(e,i.cssClasses.target),0===i.dir?u(e,i.cssClasses.ltr):u(e,i.cssClasses.rtl),0===i.ort?u(e,i.cssClasses.horizontal):u(e,i.cssClasses.vertical),u(e,"rtl"===getComputedStyle(e).direction?i.cssClasses.textDirectionRtl:i.cssClasses.textDirectionLtr),L(e,i.cssClasses.base)}(b),function(e,t){var n=L(t,i.cssClasses.connects);d=[],(f=[]).push(D(n,e[0]));for(var r=0;r<i.handles;r++)d.push(R(t,r)),T[r]=r,f.push(D(n,e[r+1]))}(i.connect,h),function(e){e.fixed||d.forEach((function(e,t){W(v.start,e.children[0],J,{handleNumbers:[t]})})),e.tap&&W(v.start,h,$,{}),e.hover&&W(v.move,h,Q,{hover:!0}),e.drag&&f.forEach((function(t,n){if(!1!==t&&0!==n&&n!==f.length-1){var r=d[n-1],o=d[n],a=[t];u(t,i.cssClasses.draggable),e.fixed&&(a.push(r.children[0]),a.push(o.children[0])),a.forEach((function(e){W(v.start,e,J,{handles:[r,o],handleNumbers:[n-1,n]})}))}}))}(i.events),pe(i.start),i.pips&&q(i.pips),i.tooltips&&j(),te("update"+S),ee("update"+S,(function(e,t,n,r,o){T.forEach((function(e){var t=d[e],r=re(C,e,0,!0,!0,!0),a=re(C,e,100,!0,!0,!0),s=o[e],l=i.ariaFormat.to(n[e]);r=x.fromStepping(r).toFixed(1),a=x.fromStepping(a).toFixed(1),s=x.fromStepping(s).toFixed(1),t.children[0].setAttribute("aria-valuemin",r),t.children[0].setAttribute("aria-valuemax",a),t.children[0].setAttribute("aria-valuenow",s),t.children[0].setAttribute("aria-valuetext",l)}))})),y={destroy:function(){for(var e in te(S),te(w),i.cssClasses)i.cssClasses.hasOwnProperty(e)&&c(b,i.cssClasses[e]);for(;b.firstChild;)b.removeChild(b.firstChild);delete b.noUiSlider},steps:function(){return T.map(de)},on:ee,off:te,get:he,set:pe,setHandle:function(e,t,n,r){if(!((e=Number(e))>=0&&e<T.length))throw new Error("noUiSlider (14.7.0): invalid handle number, got: "+e);le(e,ce(t,e),!0,!0,r),ne("update",e),n&&ne("set",e)},reset:function(e){pe(i.start,e)},__moveHandles:function(e,t,n){oe(e,t,C,n)},options:l,updateOptions:function(e,t){var r=he(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];o.forEach((function(t){void 0!==e[t]&&(l[t]=e[t])}));var a=Z(l);o.forEach((function(t){void 0!==e[t]&&(i[t]=a[t])})),x=a.spectrum,i.margin=a.margin,i.limit=a.limit,i.padding=a.padding,i.pips?q(i.pips):V(),i.tooltips?j():F(),C=[],pe(n(e.start)?e.start:r,t)},target:b,removePips:V,removeTooltips:F,getTooltips:function(){return g},getOrigins:function(){return d},pips:q},y}return{__spectrum:_,version:e,cssClasses:x,create:function(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider (14.7.0): create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider (14.7.0): Slider was already initialized.");var n=K(e,Z(t),t);return e.noUiSlider=n,n}}}()})),Rn=(Ln.create,function e(t,n){var r=t.indexOf(n);if(-1<r)return[r,t];for(var i=0,o=t;i<o.length;i++){var a=o[i];if(Array.isArray(a)&&-1!==(a=e(a,n)))return a}return-1}),Dn=function(e,t){return t=Math.pow(10,t),Math.floor(e*t)/t},zn=function(){function e(){}return e.prototype.merge=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a)for(var s in a)a.hasOwnProperty(s)&&this.hasOwnProperty(s)&&(void 0!==a[s]&&null!=a[s]?this[s]instanceof e?this[s].merge(a[s]):this[s]=a[s]:(t=t||new(Object.getPrototypeOf(this).constructor),this[s]=t[s]))}return this},e}(),Nn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.style=r.ControlStyle.light,t.position=r.ControlPosition.TopRight,t}return o(t,e),t}(zn),Bn=function(){function e(e){var t=this;this.DOUBLE_CLICK_TIMEOUT=200,this.MIN_SLIDER_LEVELS_COUNT=7,this.MIN_ZOOM_LEVEL=18.5,this.hasDoubleClicked=!1,this.onAdd=function(){return t.map.events.add("click",t.onMapClick),t.map.events.add("dblclick",t.onMapDoubleClick),t.map.events.add("moveend",t.generateLevelControl),t.map.events.add("zoom",t.onMapZoom),t.map.events.add("load",t.onMapLoad),t.map.events.add("facilitychanged",t.indoorManager,t.onFacilityChange),t.levelControlContainer=document.createElement("div"),t.levelControlContainer.classList.add("azure-maps-control-container","level-control"),t.levelControlContainer.setAttribute("aria-label","Map Level Control"),t.levelControlContainer.addEventListener("focusin",t.setInUse(!0)),t.levelControlContainer.addEventListener("focusout",t.setInUse(!1)),t.levelControlContainer},this._open=function(e,n){if(t.levelControlContainer)throw new Error("The control is already opened, it cannot be opened again.");t.map=n,t.indoorManager=e,n.controls.add(t,{position:t.options.position})},this._close=function(){if(!t.levelControlContainer)throw new Error("Cannot close the control, it has not been opened yet.");t.map.controls.remove(t),t.indoorManager=void 0},this.generateLevelControl=function(e){var n=t.indoorManager.getCurrentFacility(),r=n[0],i=n[1],o=function(e,t){void 0===t&&(t={});var n=Number(e[0]),r=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return m([[a,[i,r],[i,o],[n,o],a]],t.properties,{bbox:e,id:t.id})}(t.map.getCamera().bounds),a=[];t.getLevelFeatures().filter((function(e){var t;e=(t=e.geometry).coordinates;if("polygon"===(t=t.type.toLowerCase())){var n=m(e);return H(o,n)||H(n,o)||On(n,o)}if("multipolygon"!==t)return!1;for(var r=0,i=e;r<i.length;r++)if(n=m(i[r]),H(o,n)||H(n,o)||On(n,o))return!0;return!1})).some((function(e){return(e.properties.facility_feature_id&&e.properties.facility_feature_id)===r||(e.properties.facilityFeatureId&&e.properties.facilityFeatureId)===r}))&&(a=Object.keys(t.indoorManager._getFacilityMapping()[r]||{}));var s=new Set(a.map((function(e){return Number(e||NaN)+1})).filter((function(e){return!isNaN(e)})));t.prevLevelControlFacilityId===r&&t.uiLevelOrdinal===i&&function(e,t){return e===t||!(!e||!t)&&e.size===t.size&&(e.forEach((function(e){if(!t.has(e))return!1})),!0)}(s,t.prevLevelsSet)||(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(t.levelControlContainer),n=s.size,a=Array.from(s).sort((function(e,t){return e-t})),n>=t.MIN_SLIDER_LEVELS_COUNT?t.constructSlider(a):t.constructButtons(a),t.prevLevelsSet=s,t.prevLevelControlFacilityId=r,t.uiLevelOrdinal=i)},this.constructSlider=function(e){(f=document.createElement("div")).classList.add("slider-container",t.options.style),t.levelControlContainer.appendChild(f),t.sliderDiv=document.createElement("div");var n=document.createElement("button"),r=document.createElement("button");t.sliderDiv.id="slider",r.id="slider-down-button",n.id="slider-up-button",r.classList.add("azure-maps-control-button","button-override"),n.classList.add("azure-maps-control-button","button-override"),n.innerHTML='<svg class="indoorModule_level-control-btn-up-svg" xmlns="http://www.w3.org/2000/svg" width="12" height="6" fill="none"><path fill="#83888D" fill-rule="evenodd" d="M5.3336.2274c.3896-.3032.9432-.3032 1.3328 0L11.919 4.316a.1.1 0 0 1 .0158.1424l-1.2057 1.4664a.1.1 0 0 1-.1387.0154l-4.529-3.5253a.1.1 0 0 0-.1228 0l-4.529 3.5253a.1.1 0 0 1-.1387-.0154L.0652 4.4584A.1.1 0 0 1 .081 4.316L5.3336.2274z" clip-rule="evenodd"/></svg>',r.innerHTML='<svg class="indoorModule_level-control-btn-down-svg" xmlns="http://www.w3.org/2000/svg" width="12" height="6" fill="none"><path fill="#83888D" fill-rule="evenodd" d="M6.6664 5.5621c-.3896.2922-.9432.2922-1.3328 0L.0852 1.6261a.1.1 0 0 1-.016-.145L1.2717.0718a.1.1 0 0 1 .136-.015L5.94 3.4555a.1.1 0 0 0 .12 0L10.5921.0567a.1.1 0 0 1 .1361.0151l1.2027 1.4093a.1.1 0 0 1-.0161.145L6.6664 5.562z" clip-rule="evenodd"/></svg>',f.appendChild(n),f.appendChild(t.sliderDiv),f.appendChild(r);for(var i=e.length,o={max:[e[e.length-1]],min:[e[0]]},a={},s={},l=Dn(100/(i-1),2),u=l,c=0;c<i-1;c++){var p=e[c],h=e[c+1]-e[c];a[p]=h,s[p+h]=h,0!==c&&c!==i-1&&(o[u+"%"]=[p,h],u=Dn(u+l,2))}var d=(f=t.indoorManager.getCurrentFacility())[0],f=f[1];Ln.create(t.sliderDiv,{animate:!1,behaviour:"tap-drag",cssPrefix:"slider-",direction:"rtl",orientation:"vertical",range:o,start:f+1,step:1,tooltips:!1}),t.sliderDiv.noUiSlider.on("update",(function(e){(function(e){return document.getElementById(e)||document.getElementsByClassName(e)[0]}("slider-touch-area")).innerHTML=""+Number(e[0])})),n.addEventListener("click",(function(){var e=Number(t.sliderDiv.noUiSlider.get());t.sliderDiv.noUiSlider.set(e+a[e])})),r.addEventListener("click",(function(){var e=Number(t.sliderDiv.noUiSlider.get());t.sliderDiv.noUiSlider.set(e-s[e])})),t.sliderDiv.noUiSlider.on("update",(function(e){return t.indoorManager.setFacility(d,e[0]-1)}))},this.onFacilityChange=function(e){return t.generateLevelControl(e)},this.onMapZoom=function(){return t.updateLevelControlVisibility()},this.onMapClick=function(e){var n=e.pixel;n&&(t.doubleClickTimeout=setTimeout((function(){var e,r;t.hasDoubleClicked?t.hasDoubleClicked=!1:(r=[[n[0]-7,n[1]-7],[n[0]+7,n[1]+7]],0!==(e=t.map._getMap().queryRenderedFeatures(r).filter((function(e){return"Indoor level"===e.layer["source-layer"]}))).length?(e=(r=e[0].properties).facility_feature_id,r=r.facilityFeatureId,(e=e||r)&&(r=t.indoorManager._getCurrentMapping()[e]||0,t.indoorManager.setFacility(e,r))):t.indoorManager.setFacility("",0))}),t.DOUBLE_CLICK_TIMEOUT))},this.onMapDoubleClick=function(){clearTimeout(t.doubleClickTimeout),t.hasDoubleClicked=!0},this.onMapLoad=function(){return t.updateLevelControlVisibility()},this.getLevelFeatures=function(){return t.map._getMap().querySourceFeatures("indoorTiles",{sourceLayer:"Indoor level"})},this.updateLevelControlVisibility=function(){t.map.getCamera().zoom>=t.MIN_ZOOM_LEVEL?t.levelControlContainer.classList.remove("hidden-level-control"):t.levelControlContainer.classList.add("hidden-level-control")},this.setInUse=function(e){return function(){e?t.levelControlContainer.classList.add("in-use"):t.levelControlContainer.classList.remove("in-use")}},this.options=(new Nn).merge(e)}return e.prototype.onRemove=function(){this.map.events.remove("click",this.onMapClick),this.map.events.remove("dblclick",this.onMapDoubleClick),this.map.events.remove("moveend",this.generateLevelControl),this.map.events.remove("zoom",this.onMapZoom),this.map.events.remove("load",this.onMapLoad),this.map.events.remove("facilitychanged",this.indoorManager,this.onFacilityChange),this.map=void 0,this.sliderDiv&&this.sliderDiv.noUiSlider&&this.sliderDiv.noUiSlider.off("update"),this.levelControlContainer.remove()},e.prototype.constructButtons=function(e){var t=this,n=(o=this.indoorManager.getCurrentFacility())[0],r=o[1],i=document.createElement("div"),o=e.length;i.classList.add("buttons-container",this.options.style),this.levelControlContainer.appendChild(i);for(var a=o-1;0<=a;a--)!function(r){var o=document.createElement("button");r=e[r].toString();o.classList.add("azure-maps-control-button","button-override"),o.setAttribute("title","Level Number "+r),o.setAttribute("alt","Level Number "+r),o.setAttribute("type","button"),o.setAttribute("id",r),o.dataset.currentLevelNumber=r,o.innerHTML=r,o.addEventListener("click",(function(e){for(var r=0,a=Array.from(i.children);r<a.length;r++)a[r].classList.remove("selected");o.classList.add("selected"),e.currentTarget instanceof HTMLElement&&(e=e.currentTarget,t.indoorManager.setFacility(n,parseInt(e.dataset.currentLevelNumber)-1))})),i.appendChild(o)}(a);(o=Array.from(i.children).find((function(e){return e.innerHTML===String(r+1)})))&&o.classList.add("selected")},e}(),Fn=Object.freeze({__proto__:null,LevelControl:Bn}),jn=function(e,t){var n=this;this.defaultIndoorLayers=[],this.overlappingFacilitiesList=new Set,this.initialize=function(){var e=n.map.events;e.add("facilitychanged",n.indoorManager,n.handleOverlaps),e.add("levelchanged",n.indoorManager,n.handleOverlaps),e.add("moveend",n.onCameraMoveEnd),e.add("styledata",n.onStyledata)},this.dispose=function(){var e=n.map.events;e.remove("facilitychanged",n.indoorManager,n.handleOverlaps),e.remove("levelchanged",n.indoorManager,n.handleOverlaps),e.remove("moveend",n.onCameraMoveEnd),e.remove("styledata",n.onStyledata)},this.onStyledata=function(){n.defaultIndoorLayers=n.mapbox.getStyle().layers.filter((function(e){return!!e&&e.source&&"indoorTiles"===e.source&&e["source-layer"].startsWith("Indoor ")}))},this.onCameraMoveEnd=function(){return n.applyOverlapFilters()},this.handleOverlaps=function(e){var t;n.map._isLoaded()&&(t=e.facilityId,e=e.levelNumber,n.facilityId=t,n.levelNumber=e,n.applyOverlapFilters())},this.applyOverlapFilters=function(){var e,t;n.map._isLoaded()&&void 0!==n.facilityId&&void 0!==n.levelNumber&&("object"!=typeof(e=n.indoorManager._getFacilityMapping()[n.facilityId])||void 0===e||"object"==typeof(e=e[n.levelNumber-1])&&void 0!==e&&e.has&&(n.overlappingFacilitiesList.has(n.facilityId)||n.doesOverlapExist)&&(e=Array.from(e),t=["case",s(["any"],e.map((function(e){return["==",["get","feature_id"],"LVL"+e]})),e.map((function(e){return["==",["get","featureId"],"LVL"+e]})),[["==",["get","feature_id"],n.facilityId],["==",["get","featureId"],n.facilityId]],e.map((function(e){return["==",["get","level_feature_id"],"LVL"+e]})),e.map((function(e){return["==",["get","levelFeatureId"],"LVL"+e]}))),15,5],n.defaultIndoorLayers.forEach((function(e){var r=e.id,i=e.type;["circle","line","fill","symbol"].includes(i)&&requestAnimationFrame((function(){n.mapbox.setLayoutProperty(r,i+"-sort-key",t,{validate:!1})}))}))))},this.doesOverlapExist=function(){if(!n.map._isLoaded())return!1;if(0===n.defaultIndoorLayers.length)return!1;if(void 0===n.facilityId||void 0===n.levelNumber)return!1;if("object"!=typeof(r=n.indoorManager._getFacilityMapping()[n.facilityId])||void 0===r)return!1;var e=r[n.levelNumber-1];if("object"!=typeof e||void 0===e||!e.has)return!1;var t=n.indoorManager._getCurrentMapping(),r=n.mapbox.querySourceFeatures("indoorTiles",{sourceLayer:"Indoor level"}).filter((function(e){return e.geometry&&e.properties&&(t[e.properties.facility_feature_id]||t[e.properties.facilityFeatureId]||0)===e.properties.ordinal})),i=[],o=[];r.forEach((function(t){var n=(r=t.geometry).coordinates,r=r.type.toLowerCase();if(e.has(t.id)){if("polygon"===r)i.push(m(n));else if("multipolygon"===r)for(var a=0,s=n;a<s.length;a++){var l=s[a];i.push(m(l))}}else if("polygon"===r)o.push(m(n));else if("multipolygon"===r)for(var u=0,c=n;u<c.length;u++)l=c[u],o.push(m(l))}));var a=!1;e:for(var s=0,l=i;s<l.length;s++)for(var u=l[s],c=0,p=o;c<p.length;c++)if(On(u,p[c])){a=!0;break e}return a&&n.overlappingFacilitiesList.add(n.facilityId),a},this.indoorManager=e,this.map=t,this.mapbox=this.map._getMap()},Un=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.geography="us",t.statesetId=void 0,t.theme="auto",t.tilesetId=void 0,t.levelControl=void 0,t}return o(t,e),t}(zn),Vn="{{azMapsDomain}}",qn="{tilesetId}",Hn="indoorTiles",Wn={geography:["eu","us"],theme:["auto","dark","light"]},Gn=function(e,t){var n=this;this.initialize=function(){n.map.setServiceOptions({transformRequest:n.transformCreatorRequest})},this.setOptions=function(e){return n.options=e},this.transformCreatorRequest=function(e,t){var r=e;return"Tile"===t&&e.includes(qn)&&(t=n.options.geography||"",r.match(new RegExp("^[^/]+:[/]+"+t))||(1<(e=r.split("://")).length&&(e[1]=t+"."+e[1]),r=e.join("://")),r=r.replace(qn,n.options.tilesetId)),{url:r}},this.map=e,this.options=t},Zn=function(e,t,n){var i=this;this.sourceId="state-source",this.layerId="StateLayer",this.addToMap=function(){i.map.events.add("load",i.addStateSourceLayer),i.map._getMap().on("sourcedata",i.updateStateTileOnMap)},this.removeFromMap=function(){i.map._getMap().off("sourcedata",i.updateStateTileOnMap),i.map.events.remove("load",i.addStateSourceLayer),i.map.layers.getLayerById(i.layer.getId())&&i.map.layers.remove(i.layer),i.map.sources.getById(i.source.getId())&&i.map.sources.remove(i.source),i.map._getMap().removeFeatureState({source:"indoorTiles",sourceLayer:"Indoor unit"}),i.map._getMap().removeFeatureState({source:"indoorTiles",sourceLayer:"Indoor area_element"}),i.map._getMap().removeFeatureState({source:"indoorTiles",sourceLayer:"Indoor areaElement"})},this.addStateSourceLayer=function(){var e,t=(e=i.map).layers;(e=e.sources).getById(i.source.getId())||e.add(i.source),t.getLayerById(i.layer.getId())||(t=0<(t=i.map.layers._getUserLayers()).length?t[0].layer.getId():void 0,i.map.layers.add(i.layer,t))},this.updateStateTileOnMap=function(e){var t;e.tile&&e.sourceId===i.sourceId&&(t=e.tile.tileID.canonical,i.map._getMap().querySourceFeatures("indoorTiles",{sourceLayer:"Indoor unit"}).filter((function(e){return e.tile.z===t.z&&e.tile.x===t.x&&e.tile.y===t.y})).forEach((function(e){return i.map._getMap().removeFeatureState({source:"indoorTiles",sourceLayer:"Indoor unit",id:e.id})})),i.map._getMap().querySourceFeatures("indoorTiles",{sourceLayer:"Indoor areaElement"}).filter((function(e){return e.tile.z===t.z&&e.tile.x===t.x&&e.tile.y===t.y})).forEach((function(e){i.map._getMap().removeFeatureState({source:"indoorTiles",sourceLayer:"Indoor areaElement",id:e.id})})),i.map._getMap().querySourceFeatures(i.sourceId,{sourceLayer:i.layerId}).forEach((function(e){if(e.tile.z===t.z&&e.tile.x===t.x&&e.tile.y===t.y){var n=e.properties.sourceLayer;delete e.properties.sourceLayer;var r=e.id;e=e.properties;try{i.map._getMap().setFeatureState({source:"indoorTiles",sourceLayer:n,id:r},e)}catch(e){}}})))},this.map=e,this.manager=n,this.source=new r.source.VectorTileSource(this.sourceId,{maxZoom:19,minZoom:18,tiles:["https://"+this.manager.getOptions().geography+"."+Vn+"/map/stateTile?statesetId="+t+"&zoom={z}&x={x}&y={y}&api-version=1.0"]}),this.layer=new r.layer.LineLayer(this.sourceId,this.layerId,{maxZoom:23,minZoom:18,source:"stateTiles",sourceLayer:this.layerId,strokeOpacity:0})},Kn=function(e){function t(t,n){var r=e.call(this)||this;return r.selectedLevels={},r.facilityMapping={},r.filterList=[],r.indoorLayers=new Set(["facility","level","unit","vertical_penetration","opening","structure","area_element","line_element","labels_indoor"]),r.masterFilter=["any",["all",["has","floor0"]],["any",["has","always_false_3b8ebf86-e672-4936-959d-eb29fef7cf88"]]],r.selectedFacility=["",0],r.isDynamicStylingEnabled=!1,r.options=new Un,r.oldConsoleError=console.error,r.setFacility=function(e,t){var n,i=r.selectedFacility,o=i[0],a=i[1];!e||r.facilityMapping[e]?(r.queuedSetFacility=void 0,i=Number(r.selectedLevels[e]||0),r.focusFacilityLevel(o,a,!1),r.selectedFacility=[e,t],r.selectedLevels[e]=t,r.focusFacilityLevel(e,t,!0),r.updateMasterFilter(),r.filterList.forEach((function(e){return r.map._getMap().setFilter(e[0],e[1],{validate:!1})})),e!==o&&(n={facilityId:r.selectedFacility[0],levelNumber:t+1,map:r.map,prevFacilityId:o,prevLevelNumber:a+1,type:"facilitychanged"},r._invokeEvent("facilitychanged",n)),i!==t&&(n={facilityId:r.selectedFacility[0],levelNumber:t+1,map:r.map,prevFacilityId:o,prevLevelNumber:a+1,type:"levelchanged"},r._invokeEvent("levelchanged",n))):r.queuedSetFacility=function(){return r.setFacility(e,t)}},r.getOptions=function(){return r.options},r.getCurrentFacility=function(){return r.selectedFacility},r.setOptions=function(e){var t;void 0===e&&(e={}),r.map._isReady()?void 0===e.theme||Wn.theme.includes(e.theme)?(void 0===e.geography||Wn.geography.includes(e.geography)||console.warn("'"+e.geography+"' is not a valid geography.\nValid geographies are: "+Wn.geography.join(", ")),t={},Object.assign(t,r.options),(e.hasOwnProperty("statesetId")||e.hasOwnProperty("stateSetId"))&&(e.statesetId=e.statesetId||e.stateSetId,delete e.stateSetId),r.options=a(a({},r.options),e),r.applyStyleOptions(r.options),r.applyLevelControlOptions(t,r.options),r.applyTilesetOptions(t,r.options),r.applyStatesetOptions(t,r.options),r.applyGeographyOptions(t,r.options)):console.warn("'"+e.theme+"' is not a valid theme.\nValid themes are: "+Wn.theme.join(", ")):r.map.events.addOnce("ready",(function(){r.setOptions(e)}))},r._getCurrentMapping=function(){return r.selectedLevels},r._getFacilityMapping=function(){return r.facilityMapping},r.focusFacilityLevel=function(e,t,n){var i;!e||isNaN(t)||(i=r.facilityMapping[e])&&(!(e=i[t])||e instanceof Set&&0===i[t].size||i[t].forEach((function(e){r.map._getMap().setFeatureState({id:e,source:"indoorTiles",sourceLayer:"Indoor level"},{focused:n})})))},r.reset=function(){r.setReady(!1),r.selectedLevels={},r.facilityMapping={},r.selectedFacility=["",0],r.updateMasterFilter()},r.setReady=function(e){e?r.map._isReady()?r.isReady||(r.isReady=!0,e={map:r.map,type:"indoorready"},r._invokeEvent("indoorready",e)):console.error("Cannot set IndoorModule ready before map is ready."):r.isReady=!1},r.updateMasterFilter=function(){for(;2<r.masterFilter[1].length;)r.masterFilter[1].pop();for(;2<r.masterFilter[2].length;)r.masterFilter[2].pop();for(var e=0,t=Object.entries(r.selectedLevels);e<t.length;e++){var n=t[e];!function(e,t){if(e&&0!==r.selectedLevels[e]){var n=r.facilityMapping[e];if(n&&n[t]){var i,o=[],a=[];n[t].forEach((function(e){o.push(["!=","level_feature_id","LVL"+e]),o.push(["!=","levelFeatureId","LVL"+e]),a.push(["==","level_feature_id","LVL"+e]),a.push(["==","levelFeatureId","LVL"+e])})),r.masterFilter[1].push(s(["all"],o)),r.masterFilter[2].push(s(["any"],a)),n[0]&&(i=[],n[0].forEach((function(e){i.push(["!=","level_feature_id","LVL"+e]),i.push(["!=","levelFeatureId","LVL"+e])})),r.masterFilter[1].push(s(["all"],i))),r.masterFilter[2].push(["all",["any",["==","facility_feature_id",e],["==","facilityFeatureId",e]],["has","floor"+t]]),r.masterFilter[1].push(["!=","facility_feature_id",e]),r.masterFilter[1].push(["!=","facilityFeatureId",e])}}}(n[0],n[1])}},r.revealIndoorLayers=function(){r.map.layers.getLayers().filter((function(e){return r.indoorLayers.has(e.getId())})).forEach((function(e){(e=e.layers)&&e.forEach((function(e){try{"fill-extrusion"!==e.type&&r.map._getMap().setLayoutProperty(e.id,"visibility","visible")}catch(e){}}))}))},r.generateFilterList=function(){r.filterList=[],r.map.layers.getLayers().filter((function(e){return r.indoorLayers.has(e.getId())||r.map.layers._getUserLayers().some((function(t){return t.layer.getId()===e.getId()&&t.layer._getSourceIds().has(Hn)}))})).forEach((function(e){var t=e.layers;(t=null!=t?t:e._buildLayers())&&t.forEach((function(t){try{var n=r.map._getMap().getFilter(t.id);if(!n)return;var i=Rn(n,"floor0"),o=i[1];if(1!==i[0]||"has"!==o[0]){if(!r.map.layers._getUserLayers().some((function(t){return t.layer.getId()===e.getId()})))return;o=(n=["all",[]].concat([n]))[1]}for(var a=0;a<r.masterFilter.length;a++)o[a]=r.masterFilter[a];r.filterList.push([t.id,n])}catch(t){}}))}))},r.applyStatesetOptions=function(e,t){(e=e.statesetId)!==(t=t.statesetId)&&(e&&r.stateTileDelegate&&r.isDynamicStylingEnabled&&(r.stateTileDelegate.removeFromMap(),r.stateTileDelegate=void 0),t&&(r.stateTileDelegate=new Zn(r.map,t,r),r.isDynamicStylingEnabled&&r.stateTileDelegate.addToMap()))},r.applyTilesetOptions=function(e,t){var n=t.tilesetId;(e=e.tilesetId)!==n&&(r.requestManager.setOptions(t),n||console.warn("IndoorManagerOptions.tilesetId must be set."),e&&(r.applyStyleOptions(Object.assign({},r.options,{tilesetId:void 0})),r.applyStyleOptions(r.options)))},r.onLayerAdded=function(e){var t;e.layers||(0===(t=Array.isArray(e)?e:[]).length&&t.push(e),t.some((function(e){return e._getSourceIds().has(Hn)}))&&(r.generateFilterList(),r.setFacility(r.selectedFacility[0],r.selectedFacility[1])))},r.onStyleChange=function(e){var t;"stylechanged"==e.type&&(t=function(){if(!r.map.layers.getLayerById("facility"))return r.reset(),void r.setReady(!1);"changed"!==r.applyStyleOptions(r.options)&&(r.generateFilterList(),r.filterList.forEach((function(e){return r.map._getMap().setFilter(e[0],e[1],{validate:!1})})),r.revealIndoorLayers(),r.focusFacilityLevel(r.selectedFacility[0],r.selectedFacility[1],!0),r.setReady(!0))},r.map._isReady()?t():r.map.events.add("ready",(function(){t()})))},r.handleIndoorSource=function(){var e,t;r.map._getMap().getSource(Hn)&&r.map._getMap().isSourceLoaded(Hn)&&(r.facilityMapping={},e=r.map._getMap().querySourceFeatures(Hn,{sourceLayer:"Indoor level"}),t=r.map._getMap().querySourceFeatures(Hn,{sourceLayer:"Indoor facility"}),e.forEach((function(e){var t=e.id,n=e.properties,i=n.facility_feature_id,o=(e=n.facilityFeatureId,i||e);o&&(r.facilityMapping[o]||(r.facilityMapping[o]={}),0!==(n=Object.keys(n).filter((function(e){return e.includes("floor")}))).length&&n.forEach((function(e){e=e.substring(5),r.facilityMapping[o][e]||(r.facilityMapping[o][e]=new Set),r.facilityMapping[o][e].add("number"==typeof t?t:parseInt(t,10))})))})),t.forEach((function(e){var t=e.id;e.properties,!r.facilityMapping[t]||0!=(e=Object.getOwnPropertyNames(r.facilityMapping[t]).map((function(e){return parseInt(e,10)}))).length&&(e.includes(0)?r.selectedLevels[t]=0:0<e.filter((function(e){return 0<e})).length?r.selectedLevels[t]=e.filter((function(e){return 0<e})).sort()[0]:r.selectedLevels[t]=e.filter((function(e){return e<0})).sort().reverse[0])})),r.queuedSetFacility&&r.queuedSetFacility())},r.handleSourceData=function(e){var t=e.dataType;e=e.sourceId;"source"===t&&"indoorTiles"===e&&requestAnimationFrame((function(){return r.map.events.add("load",r.handleIndoorSource)}))},r.getMapTheme=function(){if(r.map._isReady()){var e=r.map.styles,t=r.options.theme;return"auto"===t?e.getTheme(r.map.getStyle()):t}console.error("The map must be ready before you can call `getMapTheme()`.")},r.applyLevelControlOptions=function(e,t){(e=e.levelControl)!==(t=t.levelControl)&&(e&&e._close(),t&&t._open(r,r.map))},r.applyStyleOptions=function(e){var t=e.theme;e=e.tilesetId;return r.options.theme=t,t="base",e&&(t="dark"===r.getMapTheme()?"indoor_dark":"indoor"),r.map.styles.getStyleSet()!==t?(r.map.styles.setStyleSet(t),"changed"):"unchanged"},r.applyGeographyOptions=function(e,t){e.geography!==t.geography&&r.requestManager&&(console.warn("An Azure Maps resource can only have one geography for Creator."),r.requestManager.setOptions(t))},r.isReady=!1,r.map=t,r.requestManager=new Gn(t,r.options||{}),r.requestManager.initialize(),r.setOptions(n),r.facilityOverlapHandler=new jn(r,t),r.facilityOverlapHandler.initialize(),r.map._getMap().on("sourcedata",r.handleSourceData),r.map.events.add("stylechanged",r.onStyleChange),r.map.events.add("layeradded",r.onLayerAdded),window.console&&console.error&&(console.error=function(){var e=arguments[0],t=e.status,n=e.url;e.name,"The operation was aborted. "===e.message&&400===t&&"string"==typeof n&&n.startsWith("https://atlas.microsoft.com/map/tile")}.bind(r)),r}return o(t,e),t.prototype.dispose=function(){var e=(t=this.selectedFacility)[0],t=t[1];this.focusFacilityLevel(e,t,!1),this.removeIndoorStyleData(),e=this.options.levelControl,t=this.options.statesetId||this.options.stateSetId,e&&e._close(),t&&this.stateTileDelegate&&(this.stateTileDelegate.removeFromMap(),this.stateTileDelegate=void 0),this.facilityOverlapHandler.dispose(),this.map._getMap().off("sourcedata",this.handleSourceData),this.map.events.remove("stylechanged",this.onStyleChange),this.map.events.remove("layeradded",this.onLayerAdded),window.console&&console.error&&(console.error=this.oldConsoleError)},t.prototype.setDynamicStyling=function(e){var t=this.options.statesetId||this.options.stateSetId;this.stateTileDelegate&&this.options&&t?(e&&!this.isDynamicStylingEnabled&&(this.stateTileDelegate.addToMap(),this.isDynamicStylingEnabled=!0),!e&&this.isDynamicStylingEnabled&&(this.stateTileDelegate.removeFromMap(),this.isDynamicStylingEnabled=!1)):console.error("Please initialize IndoorManager with statesetId before using the setDynamicStyling.")},t.prototype.removeIndoorStyleData=function(){this.map.styles.clearStyleSet()},t}(r.internal.EventEmitter),Xn=Object.freeze({__proto__:null,IndoorManager:Kn}),Yn=l.merge("atlas.control",Fn),Jn=l.merge("atlas.indoor",Xn);t.control=Yn,t.indoor=Jn}).call(this,n(33))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r="data-portal-element";function i(e){e.setAttribute(r,"true")}},,function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,p=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):p=-1,u.length&&d())}function d(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++p<t;)l&&l[p].run();p=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(16);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},function(e,t,n){"use strict";var r=n(16),i=n(100),o=n(101),a=n(53),s=n(102),l=n(105),u=n(106),c=n(56),p=n(34),h=n(35);e.exports=function(e){return new Promise((function(t,n){var d,f=e.data,m=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}r.isFormData(f)&&delete m["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(_+":"+b)}var x=s(e.baseURL,e.url);function w(){if(v){var r="getAllResponseHeaders"in v?l(v.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};i((function(e){t(e),y()}),(function(e){n(e),y()}),o),v=null}}if(v.open(e.method.toUpperCase(),a(x,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=w:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(w)},v.onabort=function(){v&&(n(c("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(c("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded",r=e.transitional||p.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||u(x))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;S&&(m[e.xsrfHeaderName]=S)}"setRequestHeader"in v&&r.forEach(m,(function(e,t){"undefined"===typeof f&&"content-type"===t.toLowerCase()?delete m[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),g&&"json"!==g&&(v.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){v&&(n(!e||e&&e.type?new h("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),f||(f=null),v.send(f)}))}},function(e,t,n){"use strict";var r=n(54);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(16);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function l(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||o,i=t(e);r.isUndefined(i)&&t!==l||(n[e]=i)})),n}},function(e,t){e.exports={version:"0.22.0"}},function(e,t,n){(function(e,r){var i;(function(){var o,a="Expected a function",s="__lodash_hash_undefined__",l="__lodash_placeholder__",u=16,c=32,p=64,h=128,d=256,f=1/0,m=9007199254740991,g=NaN,y=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",p],["rearg",d]],_="[object Arguments]",b="[object Array]",x="[object Boolean]",w="[object Date]",S="[object Error]",E="[object Function]",C="[object GeneratorFunction]",T="[object Map]",I="[object Number]",k="[object Object]",P="[object Promise]",A="[object RegExp]",M="[object Set]",O="[object String]",L="[object Symbol]",R="[object WeakMap]",D="[object ArrayBuffer]",z="[object DataView]",N="[object Float32Array]",B="[object Float64Array]",F="[object Int8Array]",j="[object Int16Array]",U="[object Int32Array]",V="[object Uint8Array]",q="[object Uint8ClampedArray]",H="[object Uint16Array]",W="[object Uint32Array]",G=/\b__p \+= '';/g,Z=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,J=RegExp(X.source),$=RegExp(Y.source),Q=/<%-([\s\S]+?)%>/g,ee=/<%([\s\S]+?)%>/g,te=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(oe.source),se=/^\s+/,le=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,pe=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,me=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,ye=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,_e=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,xe=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Se=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",ke="A-Z\\xc0-\\xd6\\xd8-\\xde",Pe="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Me="['\u2019]",Oe="[\\ud800-\\udfff]",Le="["+Ae+"]",Re="["+Ce+"]",De="\\d+",ze="[\\u2700-\\u27bf]",Ne="["+Ie+"]",Be="[^\\ud800-\\udfff"+Ae+De+Te+Ie+ke+"]",Fe="\\ud83c[\\udffb-\\udfff]",je="[^\\ud800-\\udfff]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+ke+"]",He="(?:"+Ne+"|"+Be+")",We="(?:"+qe+"|"+Be+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Re+"|"+Fe+")"+"?",Xe="[\\ufe0e\\ufe0f]?",Ye=Xe+Ke+("(?:\\u200d(?:"+[je,Ue,Ve].join("|")+")"+Xe+Ke+")*"),Je="(?:"+[ze,Ue,Ve].join("|")+")"+Ye,$e="(?:"+[je+Re+"?",Re,Ue,Ve,Oe].join("|")+")",Qe=RegExp(Me,"g"),et=RegExp(Re,"g"),tt=RegExp(Fe+"(?="+Fe+")|"+$e+Ye,"g"),nt=RegExp([qe+"?"+Ne+"+"+Ge+"(?="+[Le,qe,"$"].join("|")+")",We+"+"+Ze+"(?="+[Le,qe+He,"$"].join("|")+")",qe+"?"+He+"+"+Ge,qe+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Je].join("|"),"g"),rt=RegExp("[\\u200d\\ud800-\\udfff"+Ce+Pe+"]"),it=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,st={};st[N]=st[B]=st[F]=st[j]=st[U]=st[V]=st[q]=st[H]=st[W]=!0,st[_]=st[b]=st[D]=st[x]=st[z]=st[w]=st[S]=st[E]=st[T]=st[I]=st[k]=st[A]=st[M]=st[O]=st[R]=!1;var lt={};lt[_]=lt[b]=lt[D]=lt[z]=lt[x]=lt[w]=lt[N]=lt[B]=lt[F]=lt[j]=lt[U]=lt[T]=lt[I]=lt[k]=lt[A]=lt[M]=lt[O]=lt[L]=lt[V]=lt[q]=lt[H]=lt[W]=!0,lt[S]=lt[E]=lt[R]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,pt=parseInt,ht="object"==typeof e&&e&&e.Object===Object&&e,dt="object"==typeof self&&self&&self.Object===Object&&self,ft=ht||dt||Function("return this")(),mt=t&&!t.nodeType&&t,gt=mt&&"object"==typeof r&&r&&!r.nodeType&&r,yt=gt&&gt.exports===mt,vt=yt&&ht.process,_t=function(){try{var e=gt&&gt.require&&gt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(t){}}(),bt=_t&&_t.isArrayBuffer,xt=_t&&_t.isDate,wt=_t&&_t.isMap,St=_t&&_t.isRegExp,Et=_t&&_t.isSet,Ct=_t&&_t.isTypedArray;function Tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function It(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function kt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Mt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Ot(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Lt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Rt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function zt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Nt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Gt("length");function jt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ut(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Vt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ut(e,Ht,n)}function qt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Ht(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:g}function Gt(e){return function(t){return null==t?o:t[e]}}function Zt(e){return function(t){return null==e?o:e[t]}}function Kt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Xt(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==o&&(n=n===o?a:n+a)}return n}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,gn(e)+1).replace(se,""):e}function $t(e){return function(t){return e(t)}}function Qt(e,t){return Rt(t,(function(t){return e[t]}))}function en(e,t){return e.has(t)}function tn(e,t){for(var n=-1,r=e.length;++n<r&&Vt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var on=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return rt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function pn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==l||(e[n]=l,o[i++]=n)}return o}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=tt.lastIndex=0;for(;tt.test(e);)++t;return t}(e):Ft(e)}function mn(e){return ln(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&le.test(e.charAt(t)););return t}var yn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function e(t){var n=(t=null==t?ft:vn.defaults(ft.Object(),t,vn.pick(ft,ot))).Array,r=t.Date,i=t.Error,le=t.Function,Ce=t.Math,Te=t.Object,Ie=t.RegExp,ke=t.String,Pe=t.TypeError,Ae=n.prototype,Me=le.prototype,Oe=Te.prototype,Le=t["__core-js_shared__"],Re=Me.toString,De=Oe.hasOwnProperty,ze=0,Ne=function(){var e=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Be=Oe.toString,Fe=Re.call(Te),je=ft._,Ue=Ie("^"+Re.call(De).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=yt?t.Buffer:o,qe=t.Symbol,He=t.Uint8Array,We=Ve?Ve.allocUnsafe:o,Ge=cn(Te.getPrototypeOf,Te),Ze=Te.create,Ke=Oe.propertyIsEnumerable,Xe=Ae.splice,Ye=qe?qe.isConcatSpreadable:o,Je=qe?qe.iterator:o,$e=qe?qe.toStringTag:o,tt=function(){try{var e=ho(Te,"defineProperty");return e({},"",{}),e}catch(t){}}(),rt=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,ut=r&&r.now!==ft.Date.now&&r.now,ht=t.setTimeout!==ft.setTimeout&&t.setTimeout,dt=Ce.ceil,mt=Ce.floor,gt=Te.getOwnPropertySymbols,vt=Ve?Ve.isBuffer:o,_t=t.isFinite,Ft=Ae.join,Zt=cn(Te.keys,Te),_n=Ce.max,bn=Ce.min,xn=r.now,wn=t.parseInt,Sn=Ce.random,En=Ae.reverse,Cn=ho(t,"DataView"),Tn=ho(t,"Map"),In=ho(t,"Promise"),kn=ho(t,"Set"),Pn=ho(t,"WeakMap"),An=ho(Te,"create"),Mn=Pn&&new Pn,On={},Ln=jo(Cn),Rn=jo(Tn),Dn=jo(In),zn=jo(kn),Nn=jo(Pn),Bn=qe?qe.prototype:o,Fn=Bn?Bn.valueOf:o,jn=Bn?Bn.toString:o;function Un(e){if(rs(e)&&!Ga(e)&&!(e instanceof Wn)){if(e instanceof Hn)return e;if(De.call(e,"__wrapped__"))return Uo(e)}return new Hn(e)}var Vn=function(){function e(){}return function(t){if(!ns(t))return{};if(Ze)return Ze(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function qn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Kn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new Zn(e);this.size=t.size}function Jn(e,t){var n=Ga(e),r=!n&&Wa(e),i=!n&&!r&&Ya(e),o=!n&&!r&&!i&&ps(e),a=n||r||i||o,s=a?Yt(e.length,ke):[],l=s.length;for(var u in e)!t&&!De.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bo(u,l))||s.push(u);return s}function $n(e){var t=e.length;return t?e[Xr(0,t-1)]:o}function Qn(e,t){return No(Ai(e),lr(t,0,e.length))}function er(e){return No(Ai(e))}function tr(e,t,n){(n!==o&&!Va(e[t],n)||n===o&&!(t in e))&&ar(e,t,n)}function nr(e,t,n){var r=e[t];De.call(e,t)&&Va(r,n)&&(n!==o||t in e)||ar(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Va(e[n][0],t))return n;return-1}function ir(e,t,n,r){return dr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Mi(t,Ls(t),e)}function ar(e,t,n){"__proto__"==t&&tt?tt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,i=t.length,a=n(i),s=null==e;++r<i;)a[r]=s?o:ks(e,t[r]);return a}function lr(e,t,n){return e===e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function ur(e,t,n,r,i,a){var s,l=1&t,u=2&t,c=4&t;if(n&&(s=i?n(e,r,i,a):n(e)),s!==o)return s;if(!ns(e))return e;var p=Ga(e);if(p){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ai(e,s)}else{var h=go(e),d=h==E||h==C;if(Ya(e))return Ei(e,l);if(h==k||h==_||d&&!i){if(s=u||d?{}:vo(e),!l)return u?function(e,t){return Mi(e,mo(e),t)}(e,function(e,t){return e&&Mi(t,Rs(t),e)}(s,e)):function(e,t){return Mi(e,fo(e),t)}(e,or(s,e))}else{if(!lt[h])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case D:return Ci(e);case x:case w:return new r(+e);case z:return function(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case B:case F:case j:case U:case V:case q:case H:case W:return Ti(e,n);case T:return new r;case I:case O:return new r(e);case A:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case M:return new r;case L:return i=e,Fn?Te(Fn.call(i)):{}}var i}(e,h,l)}}a||(a=new Yn);var f=a.get(e);if(f)return f;a.set(e,s),ls(e)?e.forEach((function(r){s.add(ur(r,t,n,r,e,a))})):is(e)&&e.forEach((function(r,i){s.set(i,ur(r,t,n,i,e,a))}));var m=p?o:(c?u?oo:io:u?Rs:Ls)(e);return kt(m||e,(function(r,i){m&&(r=e[i=r]),nr(s,i,ur(r,t,n,i,e,a))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var i=n[r],a=t[i],s=e[i];if(s===o&&!(i in e)||!a(s))return!1}return!0}function pr(e,t,n){if("function"!=typeof e)throw new Pe(a);return Lo((function(){e.apply(o,n)}),t)}function hr(e,t,n,r){var i=-1,o=Ot,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=Rt(t,$t(n))),r?(o=Lt,a=!1):t.length>=200&&(o=en,a=!1,t=new Xn(t));e:for(;++i<s;){var c=e[i],p=null==n?c:n(c);if(c=r||0!==c?c:0,a&&p===p){for(var h=u;h--;)if(t[h]===p)continue e;l.push(c)}else o(t,p,r)||l.push(c)}return l}Un.templateSettings={escape:Q,evaluate:ee,interpolate:te,variable:"",imports:{_:Un}},Un.prototype=qn.prototype,Un.prototype.constructor=Un,Hn.prototype=Vn(qn.prototype),Hn.prototype.constructor=Hn,Wn.prototype=Vn(qn.prototype),Wn.prototype.constructor=Wn,Gn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Gn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===s?o:n}return De.call(t,e)?t[e]:o},Gn.prototype.has=function(e){var t=this.__data__;return An?t[e]!==o:De.call(t,e)},Gn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&t===o?s:t,this},Zn.prototype.clear=function(){this.__data__=[],this.size=0},Zn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},Zn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?o:t[n][1]},Zn.prototype.has=function(e){return rr(this.__data__,e)>-1},Zn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Tn||Zn),string:new Gn}},Kn.prototype.delete=function(e){var t=co(this,e).delete(e);return this.size-=t?1:0,t},Kn.prototype.get=function(e){return co(this,e).get(e)},Kn.prototype.has=function(e){return co(this,e).has(e)},Kn.prototype.set=function(e,t){var n=co(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,s),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new Zn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Zn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Kn(r)}return n.set(e,t),this.size=n.size,this};var dr=Ri(xr),fr=Ri(wr,!0);function mr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(null!=s&&(l===o?s===s&&!cs(s):n(s,l)))var l=s,u=a}return u}function yr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=_o),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?vr(s,t-1,n,r,i):Dt(i,s):r||(i[i.length]=s)}return i}var _r=Di(),br=Di(!0);function xr(e,t){return e&&_r(e,t,Ls)}function wr(e,t){return e&&br(e,t,Ls)}function Sr(e,t){return Mt(t,(function(t){return Qa(e[t])}))}function Er(e,t){for(var n=0,r=(t=bi(t,e)).length;null!=e&&n<r;)e=e[Fo(t[n++])];return n&&n==r?e:o}function Cr(e,t,n){var r=t(e);return Ga(e)?r:Dt(r,n(e))}function Tr(e){return null==e?e===o?"[object Undefined]":"[object Null]":$e&&$e in Te(e)?function(e){var t=De.call(e,$e),n=e[$e];try{e[$e]=o;var r=!0}catch(a){}var i=Be.call(e);r&&(t?e[$e]=n:delete e[$e]);return i}(e):function(e){return Be.call(e)}(e)}function Ir(e,t){return e>t}function kr(e,t){return null!=e&&De.call(e,t)}function Pr(e,t){return null!=e&&t in Te(e)}function Ar(e,t,r){for(var i=r?Lt:Ot,a=e[0].length,s=e.length,l=s,u=n(s),c=1/0,p=[];l--;){var h=e[l];l&&t&&(h=Rt(h,$t(t))),c=bn(h.length,c),u[l]=!r&&(t||a>=120&&h.length>=120)?new Xn(l&&h):o}h=e[0];var d=-1,f=u[0];e:for(;++d<a&&p.length<c;){var m=h[d],g=t?t(m):m;if(m=r||0!==m?m:0,!(f?en(f,g):i(p,g,r))){for(l=s;--l;){var y=u[l];if(!(y?en(y,g):i(e[l],g,r)))continue e}f&&f.push(g),p.push(m)}}return p}function Mr(e,t,n){var r=null==(e=Po(e,t=bi(t,e)))?e:e[Fo($o(t))];return null==r?o:Tt(r,e,n)}function Or(e){return rs(e)&&Tr(e)==_}function Lr(e,t,n,r,i){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,i,a){var s=Ga(e),l=Ga(t),u=s?b:go(e),c=l?b:go(t),p=(u=u==_?k:u)==k,h=(c=c==_?k:c)==k,d=u==c;if(d&&Ya(e)){if(!Ya(t))return!1;s=!0,p=!1}if(d&&!p)return a||(a=new Yn),s||ps(e)?no(e,t,n,r,i,a):function(e,t,n,r,i,o,a){switch(n){case z:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!o(new He(e),new He(t)));case x:case w:case I:return Va(+e,+t);case S:return e.name==t.name&&e.message==t.message;case A:case O:return e==t+"";case T:var s=un;case M:var l=1&r;if(s||(s=hn),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=no(s(e),s(t),r,i,o,a);return a.delete(e),c;case L:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,u,n,r,i,a);if(!(1&n)){var f=p&&De.call(e,"__wrapped__"),m=h&&De.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,y=m?t.value():t;return a||(a=new Yn),i(g,y,n,r,a)}}if(!d)return!1;return a||(a=new Yn),function(e,t,n,r,i,a){var s=1&n,l=io(e),u=l.length,c=io(t).length;if(u!=c&&!s)return!1;var p=u;for(;p--;){var h=l[p];if(!(s?h in t:De.call(t,h)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var m=!0;a.set(e,t),a.set(t,e);var g=s;for(;++p<u;){var y=e[h=l[p]],v=t[h];if(r)var _=s?r(v,y,h,t,e,a):r(y,v,h,e,t,a);if(!(_===o?y===v||i(y,v,n,r,a):_)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var b=e.constructor,x=t.constructor;b==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,n,r,i,a)}(e,t,n,r,Lr,i))}function Rr(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=Te(e);i--;){var l=n[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){var u=(l=n[i])[0],c=e[u],p=l[1];if(s&&l[2]){if(c===o&&!(u in e))return!1}else{var h=new Yn;if(r)var d=r(c,p,u,e,t,h);if(!(d===o?Lr(p,c,3,r,h):d))return!1}}return!0}function Dr(e){return!(!ns(e)||(t=e,Ne&&Ne in t))&&(Qa(e)?Ue:_e).test(jo(e));var t}function zr(e){return"function"==typeof e?e:null==e?ol:"object"==typeof e?Ga(e)?Vr(e[0],e[1]):Ur(e):fl(e)}function Nr(e){if(!Co(e))return Zt(e);var t=[];for(var n in Te(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Br(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=Co(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function jr(e,t){var r=-1,i=Ka(e)?n(e.length):[];return dr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Ur(e){var t=po(e);return 1==t.length&&t[0][2]?Io(t[0][0],t[0][1]):function(n){return n===e||Rr(n,e,t)}}function Vr(e,t){return wo(e)&&To(t)?Io(Fo(e),t):function(n){var r=ks(n,e);return r===o&&r===t?Ps(n,e):Lr(t,r,3)}}function qr(e,t,n,r,i){e!==t&&_r(t,(function(a,s){if(i||(i=new Yn),ns(a))!function(e,t,n,r,i,a,s){var l=Mo(e,n),u=Mo(t,n),c=s.get(u);if(c)return void tr(e,n,c);var p=a?a(l,u,n+"",e,t,s):o,h=p===o;if(h){var d=Ga(u),f=!d&&Ya(u),m=!d&&!f&&ps(u);p=u,d||f||m?Ga(l)?p=l:Xa(l)?p=Ai(l):f?(h=!1,p=Ei(u,!0)):m?(h=!1,p=Ti(u,!0)):p=[]:as(u)||Wa(u)?(p=l,Wa(l)?p=_s(l):ns(l)&&!Qa(l)||(p=vo(u))):h=!1}h&&(s.set(u,p),i(p,u,r,a,s),s.delete(u));tr(e,n,p)}(e,t,s,n,qr,r,i);else{var l=r?r(Mo(e,s),a,s+"",e,t,i):o;l===o&&(l=a),tr(e,s,l)}}),Rs)}function Hr(e,t){var n=e.length;if(n)return bo(t+=t<0?n:0,n)?e[t]:o}function Wr(e,t,n){t=t.length?Rt(t,(function(e){return Ga(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e})):[ol];var r=-1;t=Rt(t,$t(uo()));var i=jr(e,(function(e,n,i){var o=Rt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var l=Ii(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Gr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Er(e,a);n(s,a)&&ei(o,bi(a,e),s)}return o}function Zr(e,t,n,r){var i=r?qt:Vt,o=-1,a=t.length,s=e;for(e===t&&(t=Ai(t)),n&&(s=Rt(e,$t(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&Xe.call(s,l,1),Xe.call(e,l,1);return e}function Kr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;bo(i)?Xe.call(e,i,1):hi(e,i)}}return e}function Xr(e,t){return e+mt(Sn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>m)return n;do{t%2&&(n+=e),(t=mt(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Ro(ko(e,t,ol),e+"")}function $r(e){return $n(Vs(e))}function Qr(e,t){var n=Vs(e);return No(n,lr(t,0,n.length))}function ei(e,t,n,r){if(!ns(e))return e;for(var i=-1,a=(t=bi(t,e)).length,s=a-1,l=e;null!=l&&++i<a;){var u=Fo(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=s){var p=l[u];(c=r?r(p,u,l):o)===o&&(c=ns(p)?p:bo(t[i+1])?[]:{})}nr(l,u,c),l=l[u]}return e}var ti=Mn?function(e,t){return Mn.set(e,t),e}:ol,ni=tt?function(e,t){return tt(e,"toString",{configurable:!0,enumerable:!1,value:nl(t),writable:!0})}:ol;function ri(e){return No(Vs(e))}function ii(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=n(o);++i<o;)a[i]=e[i+t];return a}function oi(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!cs(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,ol,n)}function si(e,t,n,r){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!==t,l=null===t,u=cs(t),c=t===o;i<a;){var p=mt((i+a)/2),h=n(e[p]),d=h!==o,f=null===h,m=h===h,g=cs(h);if(s)var y=r||m;else y=c?m&&(r||d):l?m&&d&&(r||!f):u?m&&d&&!f&&(r||!g):!f&&!g&&(r?h<=t:h<t);y?i=p+1:a=p}return bn(a,4294967294)}function li(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Va(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function ui(e){return"number"==typeof e?e:cs(e)?g:+e}function ci(e){if("string"==typeof e)return e;if(Ga(e))return Rt(e,ci)+"";if(cs(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function pi(e,t,n){var r=-1,i=Ot,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=Lt;else if(o>=200){var u=t?null:Yi(e);if(u)return hn(u);a=!1,i=en,l=new Xn}else l=t?[]:s;e:for(;++r<o;){var c=e[r],p=t?t(c):c;if(c=n||0!==c?c:0,a&&p===p){for(var h=l.length;h--;)if(l[h]===p)continue e;t&&l.push(p),s.push(c)}else i(l,p,n)||(l!==s&&l.push(p),s.push(c))}return s}function hi(e,t){return null==(e=Po(e,t=bi(t,e)))||delete e[Fo($o(t))]}function di(e,t,n,r){return ei(e,t,n(Er(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function mi(e,t){var n=e;return n instanceof Wn&&(n=n.value()),zt(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),n)}function gi(e,t,r){var i=e.length;if(i<2)return i?pi(e[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=e[o],l=-1;++l<i;)l!=o&&(a[o]=hr(a[o]||s,e[l],t,r));return pi(vr(a,1),t,r)}function yi(e,t,n){for(var r=-1,i=e.length,a=t.length,s={};++r<i;){var l=r<a?t[r]:o;n(s,e[r],l)}return s}function vi(e){return Xa(e)?e:[]}function _i(e){return"function"==typeof e?e:ol}function bi(e,t){return Ga(e)?e:wo(e,t)?[e]:Bo(bs(e))}var xi=Jr;function wi(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:ii(e,t,n)}var Si=rt||function(e){return ft.clearTimeout(e)};function Ei(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function Ci(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ti(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ii(e,t){if(e!==t){var n=e!==o,r=null===e,i=e===e,a=cs(e),s=t!==o,l=null===t,u=t===t,c=cs(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!a&&!c&&e<t||c&&n&&i&&!r&&!a||l&&n&&i||!s&&i||!u)return-1}return 0}function ki(e,t,r,i){for(var o=-1,a=e.length,s=r.length,l=-1,u=t.length,c=_n(a-s,0),p=n(u+c),h=!i;++l<u;)p[l]=t[l];for(;++o<s;)(h||o<a)&&(p[r[o]]=e[o]);for(;c--;)p[l++]=e[o++];return p}function Pi(e,t,r,i){for(var o=-1,a=e.length,s=-1,l=r.length,u=-1,c=t.length,p=_n(a-l,0),h=n(p+c),d=!i;++o<p;)h[o]=e[o];for(var f=o;++u<c;)h[f+u]=t[u];for(;++s<l;)(d||o<a)&&(h[f+r[s]]=e[o++]);return h}function Ai(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Mi(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],u=r?r(n[l],e[l],l,n,e):o;u===o&&(u=e[l]),i?ar(n,l,u):nr(n,l,u)}return n}function Oi(e,t){return function(n,r){var i=Ga(n)?It:ir,o=t?t():{};return i(n,e,uo(r,2),o)}}function Li(e){return Jr((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(i--,a):o,s&&xo(n[0],n[1],s)&&(a=i<3?o:a,i=1),t=Te(t);++r<i;){var l=n[r];l&&e(t,l,r,a)}return t}))}function Ri(e,t){return function(n,r){if(null==n)return n;if(!Ka(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Te(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Di(e){return function(t,n,r){for(var i=-1,o=Te(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function zi(e){return function(t){var n=ln(t=bs(t))?mn(t):o,r=n?n[0]:t.charAt(0),i=n?wi(n,1).join(""):t.slice(1);return r[e]()+i}}function Ni(e){return function(t){return zt(Qs(Ws(t).replace(Qe,"")),e,"")}}function Bi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Fi(e){return function(t,n,r){var i=Te(t);if(!Ka(t)){var a=uo(n,3);t=Ls(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:o}}function ji(e){return ro((function(t){var n=t.length,r=n,i=Hn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Pe(a);if(i&&!l&&"wrapper"==so(s))var l=new Hn([],!0)}for(r=l?r:n;++r<n;){var u=so(s=t[r]),c="wrapper"==u?ao(s):o;l=c&&So(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[so(c[0])].apply(l,c[3]):1==s.length&&So(s)?l[u]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Ga(r))return l.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Ui(e,t,r,i,a,s,l,u,c,p){var d=t&h,f=1&t,m=2&t,g=24&t,y=512&t,v=m?o:Bi(e);return function o(){for(var h=arguments.length,_=n(h),b=h;b--;)_[b]=arguments[b];if(g)var x=lo(o),w=rn(_,x);if(i&&(_=ki(_,i,a,g)),s&&(_=Pi(_,s,l,g)),h-=w,g&&h<p){var S=pn(_,x);return Ki(e,t,Ui,o.placeholder,r,_,S,u,c,p-h)}var E=f?r:this,C=m?E[e]:e;return h=_.length,u?_=Ao(_,u):y&&h>1&&_.reverse(),d&&c<h&&(_.length=c),this&&this!==ft&&this instanceof o&&(C=v||Bi(C)),C.apply(E,_)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return xr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function qi(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=ui(n),r=ui(r)),i=e(n,r)}return i}}function Hi(e){return ro((function(t){return t=Rt(t,$t(uo())),Jr((function(n){var r=this;return e(t,(function(e){return Tt(e,r,n)}))}))}))}function Wi(e,t){var n=(t=t===o?" ":ci(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,dt(e/fn(t)));return ln(t)?wi(mn(r),0,e).join(""):r.slice(0,e)}function Gi(e){return function(t,r,i){return i&&"number"!=typeof i&&xo(t,r,i)&&(r=i=o),t=ms(t),r===o?(r=t,t=0):r=ms(r),function(e,t,r,i){for(var o=-1,a=_n(dt((t-e)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=e,e+=r;return s}(t,r,i=i===o?t<r?1:-1:ms(i),e)}}function Zi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vs(t),n=vs(n)),e(t,n)}}function Ki(e,t,n,r,i,a,s,l,u,h){var d=8&t;t|=d?c:p,4&(t&=~(d?p:c))||(t&=-4);var f=[e,t,i,d?a:o,d?s:o,d?o:a,d?o:s,l,u,h],m=n.apply(o,f);return So(e)&&Oo(m,f),m.placeholder=r,Do(m,e,t)}function Xi(e){var t=Ce[e];return function(e,n){if(e=vs(e),(n=null==n?0:bn(gs(n),292))&&_t(e)){var r=(bs(e)+"e").split("e");return+((r=(bs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=kn&&1/hn(new kn([,-0]))[1]==f?function(e){return new kn(e)}:cl;function Ji(e){return function(t){var n=go(t);return n==T?un(t):n==M?dn(t):function(e,t){return Rt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $i(e,t,r,i,s,f,m,g){var y=2&t;if(!y&&"function"!=typeof e)throw new Pe(a);var v=i?i.length:0;if(v||(t&=-97,i=s=o),m=m===o?m:_n(gs(m),0),g=g===o?g:gs(g),v-=s?s.length:0,t&p){var _=i,b=s;i=s=o}var x=y?o:ao(e),w=[e,t,r,i,s,_,b,f,m,g];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var u=e[3];e[3]=u?ki(u,s,t[4]):s,e[4]=u?pn(e[3],l):t[4]}(s=t[5])&&(u=e[5],e[5]=u?Pi(u,s,t[6]):s,e[6]=u?pn(e[5],l):t[6]);(s=t[7])&&(e[7]=s);r&h&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],r=w[2],i=w[3],s=w[4],!(g=w[9]=w[9]===o?y?0:e.length:_n(w[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==u?function(e,t,r){var i=Bi(e);return function a(){for(var s=arguments.length,l=n(s),u=s,c=lo(a);u--;)l[u]=arguments[u];var p=s<3&&l[0]!==c&&l[s-1]!==c?[]:pn(l,c);return(s-=p.length)<r?Ki(e,t,Ui,a.placeholder,o,l,p,o,o,r-s):Tt(this&&this!==ft&&this instanceof a?i:e,this,l)}}(e,t,g):t!=c&&33!=t||s.length?Ui.apply(o,w):function(e,t,r,i){var o=1&t,a=Bi(e);return function t(){for(var s=-1,l=arguments.length,u=-1,c=i.length,p=n(c+l),h=this&&this!==ft&&this instanceof t?a:e;++u<c;)p[u]=i[u];for(;l--;)p[u++]=arguments[++s];return Tt(h,o?r:this,p)}}(e,t,r,i);else var S=function(e,t,n){var r=1&t,i=Bi(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Do((x?ti:Oo)(S,w),e,t)}function Qi(e,t,n,r){return e===o||Va(e,Oe[n])&&!De.call(r,n)?t:e}function eo(e,t,n,r,i,a){return ns(e)&&ns(t)&&(a.set(t,e),qr(e,t,o,eo,a),a.delete(t)),e}function to(e){return as(e)?o:e}function no(e,t,n,r,i,a){var s=1&n,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(e),p=a.get(t);if(c&&p)return c==t&&p==e;var h=-1,d=!0,f=2&n?new Xn:o;for(a.set(e,t),a.set(t,e);++h<l;){var m=e[h],g=t[h];if(r)var y=s?r(g,m,h,t,e,a):r(m,g,h,e,t,a);if(y!==o){if(y)continue;d=!1;break}if(f){if(!Bt(t,(function(e,t){if(!en(f,t)&&(m===e||i(m,e,n,r,a)))return f.push(t)}))){d=!1;break}}else if(m!==g&&!i(m,g,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ro(e){return Ro(ko(e,o,Zo),e+"")}function io(e){return Cr(e,Ls,fo)}function oo(e){return Cr(e,Rs,mo)}var ao=Mn?function(e){return Mn.get(e)}:cl;function so(e){for(var t=e.name+"",n=On[t],r=De.call(On,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function lo(e){return(De.call(Un,"placeholder")?Un:e).placeholder}function uo(){var e=Un.iteratee||al;return e=e===al?zr:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function po(e){for(var t=Ls(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,To(i)]}return t}function ho(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return Dr(n)?n:o}var fo=gt?function(e){return null==e?[]:(e=Te(e),Mt(gt(e),(function(t){return Ke.call(e,t)})))}:yl,mo=gt?function(e){for(var t=[];e;)Dt(t,fo(e)),e=Ge(e);return t}:yl,go=Tr;function yo(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,o=!1;++r<i;){var a=Fo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ts(i)&&bo(a,i)&&(Ga(e)||Wa(e))}function vo(e){return"function"!=typeof e.constructor||Co(e)?{}:Vn(Ge(e))}function _o(e){return Ga(e)||Wa(e)||!!(Ye&&e&&e[Ye])}function bo(e,t){var n=typeof e;return!!(t=null==t?m:t)&&("number"==n||"symbol"!=n&&xe.test(e))&&e>-1&&e%1==0&&e<t}function xo(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Ka(n)&&bo(t,n.length):"string"==r&&t in n)&&Va(n[t],e)}function wo(e,t){if(Ga(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(re.test(e)||!ne.test(e)||null!=t&&e in Te(t))}function So(e){var t=so(e),n=Un[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(Cn&&go(new Cn(new ArrayBuffer(1)))!=z||Tn&&go(new Tn)!=T||In&&go(In.resolve())!=P||kn&&go(new kn)!=M||Pn&&go(new Pn)!=R)&&(go=function(e){var t=Tr(e),n=t==k?e.constructor:o,r=n?jo(n):"";if(r)switch(r){case Ln:return z;case Rn:return T;case Dn:return P;case zn:return M;case Nn:return R}return t});var Eo=Le?Qa:vl;function Co(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function To(e){return e===e&&!ns(e)}function Io(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==o||e in Te(n)))}}function ko(e,t,r){return t=_n(t===o?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=_n(i.length-t,0),s=n(a);++o<a;)s[o]=i[t+o];o=-1;for(var l=n(t+1);++o<t;)l[o]=i[o];return l[t]=r(s),Tt(e,this,l)}}function Po(e,t){return t.length<2?e:Er(e,ii(t,0,-1))}function Ao(e,t){for(var n=e.length,r=bn(t.length,n),i=Ai(e);r--;){var a=t[r];e[r]=bo(a,n)?i[a]:o}return e}function Mo(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Oo=zo(ti),Lo=ht||function(e,t){return ft.setTimeout(e,t)},Ro=zo(ni);function Do(e,t,n){var r=t+"";return Ro(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return kt(v,(function(n){var r="_."+n[0];t&n[1]&&!Ot(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(pe):[]}(r),n)))}function zo(e){var t=0,n=0;return function(){var r=xn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function No(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var a=Xr(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Bo=function(e){var t=za(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Fo(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jo(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Uo(e){if(e instanceof Wn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Vo=Jr((function(e,t){return Xa(e)?hr(e,vr(t,1,Xa,!0)):[]})),qo=Jr((function(e,t){var n=$o(t);return Xa(n)&&(n=o),Xa(e)?hr(e,vr(t,1,Xa,!0),uo(n,2)):[]})),Ho=Jr((function(e,t){var n=$o(t);return Xa(n)&&(n=o),Xa(e)?hr(e,vr(t,1,Xa,!0),o,n):[]}));function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=_n(r+i,0)),Ut(e,uo(t,3),i)}function Go(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=gs(n),i=n<0?_n(r+i,0):bn(i,r-1)),Ut(e,uo(t,3),i,!0)}function Zo(e){return(null==e?0:e.length)?vr(e,1):[]}function Ko(e){return e&&e.length?e[0]:o}var Xo=Jr((function(e){var t=Rt(e,vi);return t.length&&t[0]===e[0]?Ar(t):[]})),Yo=Jr((function(e){var t=$o(e),n=Rt(e,vi);return t===$o(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Ar(n,uo(t,2)):[]})),Jo=Jr((function(e){var t=$o(e),n=Rt(e,vi);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Ar(n,o,t):[]}));function $o(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Qo=Jr(ea);function ea(e,t){return e&&e.length&&t&&t.length?Zr(e,t):e}var ta=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Kr(e,Rt(t,(function(e){return bo(e,n)?+e:e})).sort(Ii)),r}));function na(e){return null==e?e:En.call(e)}var ra=Jr((function(e){return pi(vr(e,1,Xa,!0))})),ia=Jr((function(e){var t=$o(e);return Xa(t)&&(t=o),pi(vr(e,1,Xa,!0),uo(t,2))})),oa=Jr((function(e){var t=$o(e);return t="function"==typeof t?t:o,pi(vr(e,1,Xa,!0),o,t)}));function aa(e){if(!e||!e.length)return[];var t=0;return e=Mt(e,(function(e){if(Xa(e))return t=_n(e.length,t),!0})),Yt(t,(function(t){return Rt(e,Gt(t))}))}function sa(e,t){if(!e||!e.length)return[];var n=aa(e);return null==t?n:Rt(n,(function(e){return Tt(t,o,e)}))}var la=Jr((function(e,t){return Xa(e)?hr(e,t):[]})),ua=Jr((function(e){return gi(Mt(e,Xa))})),ca=Jr((function(e){var t=$o(e);return Xa(t)&&(t=o),gi(Mt(e,Xa),uo(t,2))})),pa=Jr((function(e){var t=$o(e);return t="function"==typeof t?t:o,gi(Mt(e,Xa),o,t)})),ha=Jr(aa);var da=Jr((function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,sa(e,n)}));function fa(e){var t=Un(e);return t.__chain__=!0,t}function ma(e,t){return t(e)}var ga=ro((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Wn&&bo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ma,args:[i],thisArg:o}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(i)}));var ya=Oi((function(e,t,n){De.call(e,n)?++e[n]:ar(e,n,1)}));var va=Fi(Wo),_a=Fi(Go);function ba(e,t){return(Ga(e)?kt:dr)(e,uo(t,3))}function xa(e,t){return(Ga(e)?Pt:fr)(e,uo(t,3))}var wa=Oi((function(e,t,n){De.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Sa=Jr((function(e,t,r){var i=-1,o="function"==typeof t,a=Ka(e)?n(e.length):[];return dr(e,(function(e){a[++i]=o?Tt(t,e,r):Mr(e,t,r)})),a})),Ea=Oi((function(e,t,n){ar(e,n,t)}));function Ca(e,t){return(Ga(e)?Rt:jr)(e,uo(t,3))}var Ta=Oi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ia=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&xo(e,t[0],t[1])?t=[]:n>2&&xo(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,vr(t,1),[])})),ka=ut||function(){return ft.Date.now()};function Pa(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,$i(e,h,o,o,o,o,t)}function Aa(e,t){var n;if("function"!=typeof t)throw new Pe(a);return e=gs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Ma=Jr((function(e,t,n){var r=1;if(n.length){var i=pn(n,lo(Ma));r|=c}return $i(e,r,t,n,i)})),Oa=Jr((function(e,t,n){var r=3;if(n.length){var i=pn(n,lo(Oa));r|=c}return $i(t,r,e,n,i)}));function La(e,t,n){var r,i,s,l,u,c,p=0,h=!1,d=!1,f=!0;if("function"!=typeof e)throw new Pe(a);function m(t){var n=r,a=i;return r=i=o,p=t,l=e.apply(a,n)}function g(e){return p=e,u=Lo(v,t),h?m(e):l}function y(e){var n=e-c;return c===o||n>=t||n<0||d&&e-p>=s}function v(){var e=ka();if(y(e))return _(e);u=Lo(v,function(e){var n=t-(e-c);return d?bn(n,s-(e-p)):n}(e))}function _(e){return u=o,f&&r?m(e):(r=i=o,l)}function b(){var e=ka(),n=y(e);if(r=arguments,i=this,c=e,n){if(u===o)return g(c);if(d)return Si(u),u=Lo(v,t),m(c)}return u===o&&(u=Lo(v,t)),l}return t=vs(t)||0,ns(n)&&(h=!!n.leading,s=(d="maxWait"in n)?_n(vs(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f),b.cancel=function(){u!==o&&Si(u),p=0,r=c=i=u=o},b.flush=function(){return u===o?l:_(ka())},b}var Ra=Jr((function(e,t){return pr(e,1,t)})),Da=Jr((function(e,t,n){return pr(e,vs(t)||0,n)}));function za(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(za.Cache||Kn),n}function Na(e){if("function"!=typeof e)throw new Pe(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}za.Cache=Kn;var Ba=xi((function(e,t){var n=(t=1==t.length&&Ga(t[0])?Rt(t[0],$t(uo())):Rt(vr(t,1),$t(uo()))).length;return Jr((function(r){for(var i=-1,o=bn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Tt(e,this,r)}))})),Fa=Jr((function(e,t){var n=pn(t,lo(Fa));return $i(e,c,o,t,n)})),ja=Jr((function(e,t){var n=pn(t,lo(ja));return $i(e,p,o,t,n)})),Ua=ro((function(e,t){return $i(e,d,o,o,o,t)}));function Va(e,t){return e===t||e!==e&&t!==t}var qa=Zi(Ir),Ha=Zi((function(e,t){return e>=t})),Wa=Or(function(){return arguments}())?Or:function(e){return rs(e)&&De.call(e,"callee")&&!Ke.call(e,"callee")},Ga=n.isArray,Za=bt?$t(bt):function(e){return rs(e)&&Tr(e)==D};function Ka(e){return null!=e&&ts(e.length)&&!Qa(e)}function Xa(e){return rs(e)&&Ka(e)}var Ya=vt||vl,Ja=xt?$t(xt):function(e){return rs(e)&&Tr(e)==w};function $a(e){if(!rs(e))return!1;var t=Tr(e);return t==S||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Qa(e){if(!ns(e))return!1;var t=Tr(e);return t==E||t==C||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==gs(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=m}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=wt?$t(wt):function(e){return rs(e)&&go(e)==T};function os(e){return"number"==typeof e||rs(e)&&Tr(e)==I}function as(e){if(!rs(e)||Tr(e)!=k)return!1;var t=Ge(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Fe}var ss=St?$t(St):function(e){return rs(e)&&Tr(e)==A};var ls=Et?$t(Et):function(e){return rs(e)&&go(e)==M};function us(e){return"string"==typeof e||!Ga(e)&&rs(e)&&Tr(e)==O}function cs(e){return"symbol"==typeof e||rs(e)&&Tr(e)==L}var ps=Ct?$t(Ct):function(e){return rs(e)&&ts(e.length)&&!!st[Tr(e)]};var hs=Zi(Fr),ds=Zi((function(e,t){return e<=t}));function fs(e){if(!e)return[];if(Ka(e))return us(e)?mn(e):Ai(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=go(e);return(t==T?un:t==M?hn:Vs)(e)}function ms(e){return e?(e=vs(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function gs(e){var t=ms(e),n=t%1;return t===t?n?t-n:t:0}function ys(e){return e?lr(gs(e),0,y):0}function vs(e){if("number"==typeof e)return e;if(cs(e))return g;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ve.test(e);return n||be.test(e)?pt(e.slice(2),n?2:8):ye.test(e)?g:+e}function _s(e){return Mi(e,Rs(e))}function bs(e){return null==e?"":ci(e)}var xs=Li((function(e,t){if(Co(t)||Ka(t))Mi(t,Ls(t),e);else for(var n in t)De.call(t,n)&&nr(e,n,t[n])})),ws=Li((function(e,t){Mi(t,Rs(t),e)})),Ss=Li((function(e,t,n,r){Mi(t,Rs(t),e,r)})),Es=Li((function(e,t,n,r){Mi(t,Ls(t),e,r)})),Cs=ro(sr);var Ts=Jr((function(e,t){e=Te(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&xo(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],s=Rs(a),l=-1,u=s.length;++l<u;){var c=s[l],p=e[c];(p===o||Va(p,Oe[c])&&!De.call(e,c))&&(e[c]=a[c])}return e})),Is=Jr((function(e){return e.push(o,eo),Tt(zs,o,e)}));function ks(e,t,n){var r=null==e?o:Er(e,t);return r===o?n:r}function Ps(e,t){return null!=e&&yo(e,t,Pr)}var As=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),nl(ol)),Ms=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Os=Jr(Mr);function Ls(e){return Ka(e)?Jn(e):Nr(e)}function Rs(e){return Ka(e)?Jn(e,!0):Br(e)}var Ds=Li((function(e,t,n){qr(e,t,n)})),zs=Li((function(e,t,n,r){qr(e,t,n,r)})),Ns=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Rt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),Mi(e,oo(e),n),r&&(n=ur(n,7,to));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Bs=ro((function(e,t){return null==e?{}:function(e,t){return Gr(e,t,(function(t,n){return Ps(e,n)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var n=Rt(oo(e),(function(e){return[e]}));return t=uo(t),Gr(e,n,(function(e,n){return t(e,n[0])}))}var js=Ji(Ls),Us=Ji(Rs);function Vs(e){return null==e?[]:Qt(e,Ls(e))}var qs=Ni((function(e,t,n){return t=t.toLowerCase(),e+(n?Hs(t):t)}));function Hs(e){return $s(bs(e).toLowerCase())}function Ws(e){return(e=bs(e))&&e.replace(we,on).replace(et,"")}var Gs=Ni((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Zs=Ni((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ks=zi("toLowerCase");var Xs=Ni((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ys=Ni((function(e,t,n){return e+(n?" ":"")+$s(t)}));var Js=Ni((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$s=zi("toUpperCase");function Qs(e,t,n){return e=bs(e),(t=n?o:t)===o?function(e){return it.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var el=Jr((function(e,t){try{return Tt(e,o,t)}catch(n){return $a(n)?n:new i(n)}})),tl=ro((function(e,t){return kt(t,(function(t){t=Fo(t),ar(e,t,Ma(e[t],e))})),e}));function nl(e){return function(){return e}}var rl=ji(),il=ji(!0);function ol(e){return e}function al(e){return zr("function"==typeof e?e:ur(e,1))}var sl=Jr((function(e,t){return function(n){return Mr(n,e,t)}})),ll=Jr((function(e,t){return function(n){return Mr(e,n,t)}}));function ul(e,t,n){var r=Ls(t),i=Sr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Ls(t)));var o=!(ns(n)&&"chain"in n)||!!n.chain,a=Qa(e);return kt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ai(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Dt([this.value()],arguments))})})),e}function cl(){}var pl=Hi(Rt),hl=Hi(At),dl=Hi(Bt);function fl(e){return wo(e)?Gt(Fo(e)):function(e){return function(t){return Er(t,e)}}(e)}var ml=Gi(),gl=Gi(!0);function yl(){return[]}function vl(){return!1}var _l=qi((function(e,t){return e+t}),0),bl=Xi("ceil"),xl=qi((function(e,t){return e/t}),1),wl=Xi("floor");var Sl=qi((function(e,t){return e*t}),1),El=Xi("round"),Cl=qi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Pe(a);return e=gs(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=Pa,Un.assign=xs,Un.assignIn=ws,Un.assignInWith=Ss,Un.assignWith=Es,Un.at=Cs,Un.before=Aa,Un.bind=Ma,Un.bindAll=tl,Un.bindKey=Oa,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ga(e)?e:[e]},Un.chain=fa,Un.chunk=function(e,t,r){t=(r?xo(e,t,r):t===o)?1:_n(gs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,l=n(dt(i/t));a<i;)l[s++]=ii(e,a,a+=t);return l},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Dt(Ga(r)?Ai(r):[r],vr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Rt(e,(function(e){if("function"!=typeof e[1])throw new Pe(a);return[n(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Tt(i[0],this,n))return Tt(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Ls(e);return function(n){return cr(n,e,t)}}(ur(e,1))},Un.constant=nl,Un.countBy=ya,Un.create=function(e,t){var n=Vn(e);return null==t?n:or(n,t)},Un.curry=function e(t,n,r){var i=$i(t,8,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Un.curryRight=function e(t,n,r){var i=$i(t,u,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Un.debounce=La,Un.defaults=Ts,Un.defaultsDeep=Is,Un.defer=Ra,Un.delay=Da,Un.difference=Vo,Un.differenceBy=qo,Un.differenceWith=Ho,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===o?1:gs(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===o?1:gs(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?fi(e,uo(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?fi(e,uo(t,3),!0):[]},Un.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&xo(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=gs(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:gs(r))<0&&(r+=i),r=n>r?0:ys(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Ga(e)?Mt:yr)(e,uo(t,3))},Un.flatMap=function(e,t){return vr(Ca(e,t),1)},Un.flatMapDeep=function(e,t){return vr(Ca(e,t),f)},Un.flatMapDepth=function(e,t,n){return n=n===o?1:gs(n),vr(Ca(e,t),n)},Un.flatten=Zo,Un.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,f):[]},Un.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===o?1:gs(t)):[]},Un.flip=function(e){return $i(e,512)},Un.flow=rl,Un.flowRight=il,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:Sr(e,Ls(e))},Un.functionsIn=function(e){return null==e?[]:Sr(e,Rs(e))},Un.groupBy=wa,Un.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Un.intersection=Xo,Un.intersectionBy=Yo,Un.intersectionWith=Jo,Un.invert=As,Un.invertBy=Ms,Un.invokeMap=Sa,Un.iteratee=al,Un.keyBy=Ea,Un.keys=Ls,Un.keysIn=Rs,Un.map=Ca,Un.mapKeys=function(e,t){var n={};return t=uo(t,3),xr(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=uo(t,3),xr(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Un.matches=function(e){return Ur(ur(e,1))},Un.matchesProperty=function(e,t){return Vr(e,ur(t,1))},Un.memoize=za,Un.merge=Ds,Un.mergeWith=zs,Un.method=sl,Un.methodOf=ll,Un.mixin=ul,Un.negate=Na,Un.nthArg=function(e){return e=gs(e),Jr((function(t){return Hr(t,e)}))},Un.omit=Ns,Un.omitBy=function(e,t){return Fs(e,Na(uo(t)))},Un.once=function(e){return Aa(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Ga(t)||(t=null==t?[]:[t]),Ga(n=r?o:n)||(n=null==n?[]:[n]),Wr(e,t,n))},Un.over=pl,Un.overArgs=Ba,Un.overEvery=hl,Un.overSome=dl,Un.partial=Fa,Un.partialRight=ja,Un.partition=Ta,Un.pick=Bs,Un.pickBy=Fs,Un.property=fl,Un.propertyOf=function(e){return function(t){return null==e?o:Er(e,t)}},Un.pull=Qo,Un.pullAll=ea,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,uo(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,o,n):e},Un.pullAt=ta,Un.range=ml,Un.rangeRight=gl,Un.rearg=Ua,Un.reject=function(e,t){return(Ga(e)?Mt:yr)(e,Na(uo(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Kr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Pe(a);return Jr(e,t=t===o?t:gs(t))},Un.reverse=na,Un.sampleSize=function(e,t,n){return t=(n?xo(e,t,n):t===o)?1:gs(t),(Ga(e)?Qn:Qr)(e,t)},Un.set=function(e,t,n){return null==e?e:ei(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:ei(e,t,n,r)},Un.shuffle=function(e){return(Ga(e)?er:ri)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&xo(e,t,n)?(t=0,n=r):(t=null==t?0:gs(t),n=n===o?r:gs(n)),ii(e,t,n)):[]},Un.sortBy=Ia,Un.sortedUniq=function(e){return e&&e.length?li(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?li(e,uo(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&xo(e,t,n)&&(t=n=o),(n=n===o?y:n>>>0)?(e=bs(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=ci(t))&&ln(e)?wi(mn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Pe(a);return t=null==t?0:_n(gs(t),0),Jr((function(n){var r=n[t],i=wi(n,0,t);return r&&Dt(i,r),Tt(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===o?1:gs(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===o?1:gs(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?fi(e,uo(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?fi(e,uo(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Pe(a);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),La(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=ma,Un.toArray=fs,Un.toPairs=js,Un.toPairsIn=Us,Un.toPath=function(e){return Ga(e)?Rt(e,Fo):cs(e)?[e]:Ai(Bo(bs(e)))},Un.toPlainObject=_s,Un.transform=function(e,t,n){var r=Ga(e),i=r||Ya(e)||ps(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ns(e)&&Qa(o)?Vn(Ge(e)):{}}return(i?kt:xr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return Pa(e,1)},Un.union=ra,Un.unionBy=ia,Un.unionWith=oa,Un.uniq=function(e){return e&&e.length?pi(e):[]},Un.uniqBy=function(e,t){return e&&e.length?pi(e,uo(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?pi(e,o,t):[]},Un.unset=function(e,t){return null==e||hi(e,t)},Un.unzip=aa,Un.unzipWith=sa,Un.update=function(e,t,n){return null==e?e:di(e,t,_i(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:di(e,t,_i(n),r)},Un.values=Vs,Un.valuesIn=function(e){return null==e?[]:Qt(e,Rs(e))},Un.without=la,Un.words=Qs,Un.wrap=function(e,t){return Fa(_i(t),e)},Un.xor=ua,Un.xorBy=ca,Un.xorWith=pa,Un.zip=ha,Un.zipObject=function(e,t){return yi(e||[],t||[],nr)},Un.zipObjectDeep=function(e,t){return yi(e||[],t||[],ei)},Un.zipWith=da,Un.entries=js,Un.entriesIn=Us,Un.extend=ws,Un.extendWith=Ss,ul(Un,Un),Un.add=_l,Un.attempt=el,Un.camelCase=qs,Un.capitalize=Hs,Un.ceil=bl,Un.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=vs(n))===n?n:0),t!==o&&(t=(t=vs(t))===t?t:0),lr(vs(e),t,n)},Un.clone=function(e){return ur(e,4)},Un.cloneDeep=function(e){return ur(e,5)},Un.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:o)},Un.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:o)},Un.conformsTo=function(e,t){return null==t||cr(e,t,Ls(t))},Un.deburr=Ws,Un.defaultTo=function(e,t){return null==e||e!==e?t:e},Un.divide=xl,Un.endsWith=function(e,t,n){e=bs(e),t=ci(t);var r=e.length,i=n=n===o?r:lr(gs(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Un.eq=Va,Un.escape=function(e){return(e=bs(e))&&$.test(e)?e.replace(Y,an):e},Un.escapeRegExp=function(e){return(e=bs(e))&&ae.test(e)?e.replace(oe,"\\$&"):e},Un.every=function(e,t,n){var r=Ga(e)?At:mr;return n&&xo(e,t,n)&&(t=o),r(e,uo(t,3))},Un.find=va,Un.findIndex=Wo,Un.findKey=function(e,t){return jt(e,uo(t,3),xr)},Un.findLast=_a,Un.findLastIndex=Go,Un.findLastKey=function(e,t){return jt(e,uo(t,3),wr)},Un.floor=wl,Un.forEach=ba,Un.forEachRight=xa,Un.forIn=function(e,t){return null==e?e:_r(e,uo(t,3),Rs)},Un.forInRight=function(e,t){return null==e?e:br(e,uo(t,3),Rs)},Un.forOwn=function(e,t){return e&&xr(e,uo(t,3))},Un.forOwnRight=function(e,t){return e&&wr(e,uo(t,3))},Un.get=ks,Un.gt=qa,Un.gte=Ha,Un.has=function(e,t){return null!=e&&yo(e,t,kr)},Un.hasIn=Ps,Un.head=Ko,Un.identity=ol,Un.includes=function(e,t,n,r){e=Ka(e)?e:Vs(e),n=n&&!r?gs(n):0;var i=e.length;return n<0&&(n=_n(i+n,0)),us(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Vt(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=_n(r+i,0)),Vt(e,t,i)},Un.inRange=function(e,t,n){return t=ms(t),n===o?(n=t,t=0):n=ms(n),function(e,t,n){return e>=bn(t,n)&&e<_n(t,n)}(e=vs(e),t,n)},Un.invoke=Os,Un.isArguments=Wa,Un.isArray=Ga,Un.isArrayBuffer=Za,Un.isArrayLike=Ka,Un.isArrayLikeObject=Xa,Un.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Tr(e)==x},Un.isBuffer=Ya,Un.isDate=Ja,Un.isElement=function(e){return rs(e)&&1===e.nodeType&&!as(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Ka(e)&&(Ga(e)||"string"==typeof e||"function"==typeof e.splice||Ya(e)||ps(e)||Wa(e)))return!e.length;var t=go(e);if(t==T||t==M)return!e.size;if(Co(e))return!Nr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Lr(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?Lr(e,t,o,n):!!r},Un.isError=$a,Un.isFinite=function(e){return"number"==typeof e&&_t(e)},Un.isFunction=Qa,Un.isInteger=es,Un.isLength=ts,Un.isMap=is,Un.isMatch=function(e,t){return e===t||Rr(e,t,po(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Rr(e,t,po(t),n)},Un.isNaN=function(e){return os(e)&&e!=+e},Un.isNative=function(e){if(Eo(e))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=os,Un.isObject=ns,Un.isObjectLike=rs,Un.isPlainObject=as,Un.isRegExp=ss,Un.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=m},Un.isSet=ls,Un.isString=us,Un.isSymbol=cs,Un.isTypedArray=ps,Un.isUndefined=function(e){return e===o},Un.isWeakMap=function(e){return rs(e)&&go(e)==R},Un.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Tr(e)},Un.join=function(e,t){return null==e?"":Ft.call(e,t)},Un.kebabCase=Gs,Un.last=$o,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=gs(n))<0?_n(r+i,0):bn(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Ut(e,Ht,i,!0)},Un.lowerCase=Zs,Un.lowerFirst=Ks,Un.lt=hs,Un.lte=ds,Un.max=function(e){return e&&e.length?gr(e,ol,Ir):o},Un.maxBy=function(e,t){return e&&e.length?gr(e,uo(t,2),Ir):o},Un.mean=function(e){return Wt(e,ol)},Un.meanBy=function(e,t){return Wt(e,uo(t,2))},Un.min=function(e){return e&&e.length?gr(e,ol,Fr):o},Un.minBy=function(e,t){return e&&e.length?gr(e,uo(t,2),Fr):o},Un.stubArray=yl,Un.stubFalse=vl,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Sl,Un.nth=function(e,t){return e&&e.length?Hr(e,gs(t)):o},Un.noConflict=function(){return ft._===this&&(ft._=je),this},Un.noop=cl,Un.now=ka,Un.pad=function(e,t,n){e=bs(e);var r=(t=gs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Wi(mt(i),n)+e+Wi(dt(i),n)},Un.padEnd=function(e,t,n){e=bs(e);var r=(t=gs(t))?fn(e):0;return t&&r<t?e+Wi(t-r,n):e},Un.padStart=function(e,t,n){e=bs(e);var r=(t=gs(t))?fn(e):0;return t&&r<t?Wi(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(bs(e).replace(se,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&xo(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=ms(e),t===o?(t=e,e=0):t=ms(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Sn();return bn(e+i*(t-e+ct("1e-"+((i+"").length-1))),t)}return Xr(e,t)},Un.reduce=function(e,t,n){var r=Ga(e)?zt:Kt,i=arguments.length<3;return r(e,uo(t,4),n,i,dr)},Un.reduceRight=function(e,t,n){var r=Ga(e)?Nt:Kt,i=arguments.length<3;return r(e,uo(t,4),n,i,fr)},Un.repeat=function(e,t,n){return t=(n?xo(e,t,n):t===o)?1:gs(t),Yr(bs(e),t)},Un.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,i=(t=bi(t,e)).length;for(i||(i=1,e=o);++r<i;){var a=null==e?o:e[Fo(t[r])];a===o&&(r=i,a=n),e=Qa(a)?a.call(e):a}return e},Un.round=El,Un.runInContext=e,Un.sample=function(e){return(Ga(e)?$n:$r)(e)},Un.size=function(e){if(null==e)return 0;if(Ka(e))return us(e)?fn(e):e.length;var t=go(e);return t==T||t==M?e.size:Nr(e).length},Un.snakeCase=Xs,Un.some=function(e,t,n){var r=Ga(e)?Bt:oi;return n&&xo(e,t,n)&&(t=o),r(e,uo(t,3))},Un.sortedIndex=function(e,t){return ai(e,t)},Un.sortedIndexBy=function(e,t,n){return si(e,t,uo(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Va(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return ai(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return si(e,t,uo(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(Va(e[n],t))return n}return-1},Un.startCase=Ys,Un.startsWith=function(e,t,n){return e=bs(e),n=null==n?0:lr(gs(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Un.subtract=Cl,Un.sum=function(e){return e&&e.length?Xt(e,ol):0},Un.sumBy=function(e,t){return e&&e.length?Xt(e,uo(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&xo(e,t,n)&&(t=o),e=bs(e),t=Ss({},t,r,Qi);var a,s,l=Ss({},t.imports,r.imports,Qi),u=Ls(l),c=Qt(l,u),p=0,h=t.interpolate||Se,d="__p += '",f=Ie((t.escape||Se).source+"|"+h.source+"|"+(h===te?me:Se).source+"|"+(t.evaluate||Se).source+"|$","g"),m="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(f,(function(t,n,r,i,o,l){return r||(r=i),d+=e.slice(p,l).replace(Ee,sn),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),p=l+t.length,t})),d+="';\n";var g=De.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new i("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(G,""):d).replace(Z,"$1").replace(K,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=el((function(){return le(u,m+"return "+d).apply(o,c)}));if(y.source=d,$a(y))throw y;return y},Un.times=function(e,t){if((e=gs(e))<1||e>m)return[];var n=y,r=bn(e,y);t=uo(t),e-=y;for(var i=Yt(r,t);++n<e;)t(n);return i},Un.toFinite=ms,Un.toInteger=gs,Un.toLength=ys,Un.toLower=function(e){return bs(e).toLowerCase()},Un.toNumber=vs,Un.toSafeInteger=function(e){return e?lr(gs(e),-9007199254740991,m):0===e?e:0},Un.toString=bs,Un.toUpper=function(e){return bs(e).toUpperCase()},Un.trim=function(e,t,n){if((e=bs(e))&&(n||t===o))return Jt(e);if(!e||!(t=ci(t)))return e;var r=mn(e),i=mn(t);return wi(r,tn(r,i),nn(r,i)+1).join("")},Un.trimEnd=function(e,t,n){if((e=bs(e))&&(n||t===o))return e.slice(0,gn(e)+1);if(!e||!(t=ci(t)))return e;var r=mn(e);return wi(r,0,nn(r,mn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=bs(e))&&(n||t===o))return e.replace(se,"");if(!e||!(t=ci(t)))return e;var r=mn(e);return wi(r,tn(r,mn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(ns(t)){var i="separator"in t?t.separator:i;n="length"in t?gs(t.length):n,r="omission"in t?ci(t.omission):r}var a=(e=bs(e)).length;if(ln(e)){var s=mn(e);a=s.length}if(n>=a)return e;var l=n-fn(r);if(l<1)return r;var u=s?wi(s,0,l).join(""):e.slice(0,l);if(i===o)return u+r;if(s&&(l+=u.length-l),ss(i)){if(e.slice(l).search(i)){var c,p=u;for(i.global||(i=Ie(i.source,bs(ge.exec(i))+"g")),i.lastIndex=0;c=i.exec(p);)var h=c.index;u=u.slice(0,h===o?l:h)}}else if(e.indexOf(ci(i),l)!=l){var d=u.lastIndexOf(i);d>-1&&(u=u.slice(0,d))}return u+r},Un.unescape=function(e){return(e=bs(e))&&J.test(e)?e.replace(X,yn):e},Un.uniqueId=function(e){var t=++ze;return bs(e)+t},Un.upperCase=Js,Un.upperFirst=$s,Un.each=ba,Un.eachRight=xa,Un.first=Ko,ul(Un,function(){var e={};return xr(Un,(function(t,n){De.call(Un.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Un.VERSION="4.17.21",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),kt(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===o?1:_n(gs(n),0);var r=this.__filtered__&&!t?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,y),type:e+(r.__dir__<0?"Right":"")}),r},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),kt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),kt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),kt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(ol)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Mr(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(Na(uo(e)))},Wn.prototype.slice=function(e,t){e=gs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=gs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(y)},xr(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Un[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(Un.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof Wn,u=s[0],c=l||Ga(t),p=function(e){var t=i.apply(Un,Dt([e],s));return r&&h?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=this.__chain__,d=!!this.__actions__.length,f=a&&!h,m=l&&!d;if(!a&&c){t=m?t:new Wn(this);var g=e.apply(t,s);return g.__actions__.push({func:ma,args:[p],thisArg:o}),new Hn(g,h)}return f&&m?e.apply(this,s):(g=this.thru(p),f?r?g.value()[0]:g.value():g)})})),kt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ga(i)?i:[],e)}return this[n]((function(n){return t.apply(Ga(n)?n:[],e)}))}})),xr(Wn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";De.call(On,r)||(On[r]=[]),On[r].push({name:t,func:n})}})),On[Ui(o,2).name]=[{name:"wrapper",func:o}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ai(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ga(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=bn(t,e+a);break;case"takeRight":e=_n(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,p=c.length,h=0,d=bn(l,this.__takeCount__);if(!n||!r&&i==l&&d==l)return mi(e,this.__actions__);var f=[];e:for(;l--&&h<d;){for(var m=-1,g=e[u+=t];++m<p;){var y=c[m],v=y.iteratee,_=y.type,b=v(g);if(2==_)g=b;else if(!b){if(1==_)continue e;break e}}f[h++]=g}return f},Un.prototype.at=ga,Un.prototype.chain=function(){return fa(this)},Un.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===o&&(this.__values__=fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof qn;){var r=Uo(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:ma,args:[na],thisArg:o}),new Hn(t,this.__chain__)}return this.thru(na)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Je&&(Un.prototype[Je]=function(){return this}),Un}();ft._=vn,(i=function(){return vn}.call(t,n,t,r))===o||(r.exports=i)}).call(this)}).call(this,n(33),n(93)(e))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i="undefined"===typeof window?e:window,o=i&&i.CSPSettings&&i.CSPSettings.nonce,a=function(){var e=i.__themeState__||{theme:void 0,lastStyleElement:void 0,registeredStyles:[]};e.runState||(e=r(r({},e),{perf:{count:0,duration:0},runState:{flushTimer:0,mode:0,buffer:[]}}));e.registeredThemableStyles||(e=r(r({},e),{registeredThemableStyles:[]}));return i.__themeState__=e,e}();function s(e,t){a.loadStyles?a.loadStyles(c(e).styleString,e):function(e){if("undefined"===typeof document)return;var t=document.getElementsByTagName("head")[0],n=document.createElement("style"),r=c(e),i=r.styleString,s=r.themable;n.setAttribute("data-load-themed-styles","true"),o&&n.setAttribute("nonce",o);n.appendChild(document.createTextNode(i)),a.perf.count++,t.appendChild(n);var l=document.createEvent("HTMLEvents");l.initEvent("styleinsert",!0,!1),l.args={newStyle:n},document.dispatchEvent(l);var u={styleElement:n,themableStyle:e};s?a.registeredThemableStyles.push(u):a.registeredStyles.push(u)}(e)}function l(e){a.theme=e,function(){if(a.theme){for(var e=[],t=0,n=a.registeredThemableStyles;t<n.length;t++){var r=n[t];e.push(r.themableStyle)}e.length>0&&(!function(e){void 0===e&&(e=3);3!==e&&2!==e||(u(a.registeredStyles),a.registeredStyles=[]);3!==e&&1!==e||(u(a.registeredThemableStyles),a.registeredThemableStyles=[])}(1),s([].concat.apply([],e)))}}()}function u(e){e.forEach((function(e){var t=e&&e.styleElement;t&&t.parentElement&&t.parentElement.removeChild(t)}))}function c(e){var t=a.theme,n=!1;return{styleString:(e||[]).map((function(e){var r=e.theme;if(r){n=!0;var i=t?t[r]:void 0,o=e.defaultValue||"inherit";return t&&!i&&console&&!(r in t)&&"undefined"!==typeof DEBUG&&DEBUG&&console.warn('Theming value not provided for "'+r+'". Falling back to "'+o+'".'),i||o}return e.rawString})).join(""),themable:n}}}).call(this,n(33))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6),i=0,o=function(){function e(){}return e.getValue=function(e,t){var n=a();return void 0===n[e]&&(n[e]="function"===typeof t?t():t),n[e]},e.setValue=function(e,t){var n=a(),r=n.__callbacks__,i=n[e];if(t!==i){n[e]=t;var o={oldValue:i,value:t,key:e};for(var s in r)r.hasOwnProperty(s)&&r[s](o)}return t},e.addChangeListener=function(e){var t=e.__id__,n=s();t||(t=e.__id__=String(i++)),n[t]=e},e.removeChangeListener=function(e){delete s()[e.__id__]},e}();function a(){var e,t=Object(r.a)()||{};return t.__globalSettings__||(t.__globalSettings__=((e={}).__callbacks__={},e)),t.__globalSettings__}function s(){return a().__callbacks__}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(13);var r,i=n(12),o=n(28),a=n(19),s="isRTL";function l(e){if(void 0===e&&(e={}),void 0!==e.rtl)return e.rtl;if(void 0===r){var t=Object(o.a)(s);null!==t&&function(e,t){void 0===t&&(t=!1);var n=Object(i.a)();n&&n.documentElement.setAttribute("dir",e?"rtl":"ltr");t&&Object(o.b)(s,e?"1":"0");r=e,Object(a.b)(r)}(r="1"===t);var n=Object(i.a)();void 0===r&&n&&(r="rtl"===(n.body&&n.body.getAttribute("dir")||n.documentElement.getAttribute("dir")),Object(a.b)(r))}return!!r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),i=function(){function e(e,t){this._timeoutIds=null,this._immediateIds=null,this._intervalIds=null,this._animationFrameIds=null,this._isDisposed=!1,this._parent=e||null,this._onErrorHandler=t,this._noop=function(){}}return e.prototype.dispose=function(){var e;if(this._isDisposed=!0,this._parent=null,this._timeoutIds){for(e in this._timeoutIds)this._timeoutIds.hasOwnProperty(e)&&this.clearTimeout(parseInt(e,10));this._timeoutIds=null}if(this._immediateIds){for(e in this._immediateIds)this._immediateIds.hasOwnProperty(e)&&this.clearImmediate(parseInt(e,10));this._immediateIds=null}if(this._intervalIds){for(e in this._intervalIds)this._intervalIds.hasOwnProperty(e)&&this.clearInterval(parseInt(e,10));this._intervalIds=null}if(this._animationFrameIds){for(e in this._animationFrameIds)this._animationFrameIds.hasOwnProperty(e)&&this.cancelAnimationFrame(parseInt(e,10));this._animationFrameIds=null}},e.prototype.setTimeout=function(e,t){var n=this,r=0;return this._isDisposed||(this._timeoutIds||(this._timeoutIds={}),r=setTimeout((function(){try{n._timeoutIds&&delete n._timeoutIds[r],e.apply(n._parent)}catch(t){n._logError(t)}}),t),this._timeoutIds[r]=!0),r},e.prototype.clearTimeout=function(e){this._timeoutIds&&this._timeoutIds[e]&&(clearTimeout(e),delete this._timeoutIds[e])},e.prototype.setImmediate=function(e,t){var n=this,i=0,o=Object(r.a)(t);if(!this._isDisposed){this._immediateIds||(this._immediateIds={});i=o.setTimeout((function(){try{n._immediateIds&&delete n._immediateIds[i],e.apply(n._parent)}catch(t){n._logError(t)}}),0),this._immediateIds[i]=!0}return i},e.prototype.clearImmediate=function(e,t){var n=Object(r.a)(t);this._immediateIds&&this._immediateIds[e]&&(n.clearTimeout(e),delete this._immediateIds[e])},e.prototype.setInterval=function(e,t){var n=this,r=0;return this._isDisposed||(this._intervalIds||(this._intervalIds={}),r=setInterval((function(){try{e.apply(n._parent)}catch(t){n._logError(t)}}),t),this._intervalIds[r]=!0),r},e.prototype.clearInterval=function(e){this._intervalIds&&this._intervalIds[e]&&(clearInterval(e),delete this._intervalIds[e])},e.prototype.throttle=function(e,t,n){var r=this;if(this._isDisposed)return this._noop;var i,o,a=t||0,s=!0,l=!0,u=0,c=null;n&&"boolean"===typeof n.leading&&(s=n.leading),n&&"boolean"===typeof n.trailing&&(l=n.trailing);var p=function t(n){var p=Date.now(),h=p-u,d=s?a-h:a;return h>=a&&(!n||s)?(u=p,c&&(r.clearTimeout(c),c=null),i=e.apply(r._parent,o)):null===c&&l&&(c=r.setTimeout(t,d)),i};return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o=e,p(!0)}},e.prototype.debounce=function(e,t,n){var r=this;if(this._isDisposed){var i=function(){};return i.cancel=function(){},i.flush=function(){return null},i.pending=function(){return!1},i}var o,a,s=t||0,l=!1,u=!0,c=null,p=0,h=Date.now(),d=null;n&&"boolean"===typeof n.leading&&(l=n.leading),n&&"boolean"===typeof n.trailing&&(u=n.trailing),n&&"number"===typeof n.maxWait&&!isNaN(n.maxWait)&&(c=n.maxWait);var f=function(e){d&&(r.clearTimeout(d),d=null),h=e},m=function(t){f(t),o=e.apply(r._parent,a)},g=function e(t){var n=Date.now(),i=!1;t&&(l&&n-p>=s&&(i=!0),p=n);var a=n-p,f=s-a,g=n-h,y=!1;return null!==c&&(g>=c&&d?y=!0:f=Math.min(f,c-g)),a>=s||y||i?m(n):null!==d&&t||!u||(d=r.setTimeout(e,f)),o},y=function(){return!!d},v=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a=e,g(!0)};return v.cancel=function(){y()&&f(Date.now())},v.flush=function(){return y()&&m(Date.now()),o},v.pending=y,v},e.prototype.requestAnimationFrame=function(e,t){var n=this,i=0,o=Object(r.a)(t);if(!this._isDisposed){this._animationFrameIds||(this._animationFrameIds={});var a=function(){try{n._animationFrameIds&&delete n._animationFrameIds[i],e.apply(n._parent)}catch(t){n._logError(t)}};i=o.requestAnimationFrame?o.requestAnimationFrame(a):o.setTimeout(a,0),this._animationFrameIds[i]=!0}return i},e.prototype.cancelAnimationFrame=function(e,t){var n=Object(r.a)(t);this._animationFrameIds&&this._animationFrameIds[e]&&(n.cancelAnimationFrame?n.cancelAnimationFrame(e):n.clearTimeout(e),delete this._animationFrameIds[e])},e.prototype._logError=function(e){this._onErrorHandler&&this._onErrorHandler(e)},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6),i=n(14),o=Object(r.a)()||{};void 0===o.__currentId__&&(o.__currentId__=0);var a=!1;function s(e){if(!a){var t=i.a.getInstance();t&&t.onReset&&t.onReset(l),a=!0}return(void 0===e?"id__":e)+o.__currentId__++}function l(e){void 0===e&&(e=0),o.__currentId__=e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return p}));var r=n(1),i=n(0),o=n(20),a=n(30),s=n(73),l=n(115),u=n(29),c=Object(a.b)((function(e){var t=Object(u.n)(e)||{subset:{},code:void 0},n=t.code,r=t.subset;return n?{children:n,iconClassName:r.className,fontFamily:r.fontFace&&r.fontFace.fontFamily,mergeImageProps:r.mergeImageProps}:null}),void 0,!0),p=function(e){var t=e.iconName,n=e.className,a=e.style,u=void 0===a?{}:a,p=c(t)||{},h=p.iconClassName,d=p.children,f=p.fontFamily,m=p.mergeImageProps,g=Object(s.d)(e,s.e),y=e["aria-label"]||e.title,v=e["aria-label"]||e["aria-labelledby"]||e.title?{role:m?void 0:"img"}:{"aria-hidden":!0},_=d;return m&&"object"===typeof d&&"object"===typeof d.props&&y&&(_=i.cloneElement(d,{alt:y})),i.createElement("i",Object(r.a)({"data-icon-name":t},v,g,m?{title:void 0,"aria-label":void 0}:{},{className:Object(l.a)(o.a,o.b.root,h,!t&&o.b.placeholder,n),style:Object(r.a)({fontFamily:f},u)}),_)};Object(a.b)((function(e,t,n){return p({iconName:e,className:t,"aria-label":n})}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(68),i=function(){function e(t){this._id=e._uniqueId++,this._parent=t,this._eventRecords=[]}return e.raise=function(t,n,i,o){var a;if(e._isElement(t)){if("undefined"!==typeof document&&document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent(n,o||!1,!0),Object(r.a)(s,i),a=t.dispatchEvent(s)}else if("undefined"!==typeof document&&document.createEventObject){var l=document.createEventObject(i);t.fireEvent("on"+n,l)}}else for(;t&&!1!==a;){var u=t.__events__,c=u?u[n]:null;if(c)for(var p in c)if(c.hasOwnProperty(p))for(var h=c[p],d=0;!1!==a&&d<h.length;d++){var f=h[d];f.objectCallback&&(a=f.objectCallback.call(f.parent,i))}t=o?t.parent:null}return a},e.isObserved=function(e,t){var n=e&&e.__events__;return!!n&&!!n[t]},e.isDeclared=function(e,t){var n=e&&e.__declaredEvents;return!!n&&!!n[t]},e.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},e._isElement=function(e){return!!e&&(!!e.addEventListener||"undefined"!==typeof HTMLElement&&e instanceof HTMLElement)},e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this.off(),this._parent=null)},e.prototype.onAll=function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&this.on(e,r,t[r],n)},e.prototype.on=function(t,n,r,i){var o=this;if(n.indexOf(",")>-1)for(var a=n.split(/[ ,]+/),s=0;s<a.length;s++)this.on(t,a[s],r,i);else{var l=this._parent,u={target:t,eventName:n,parent:l,callback:r,options:i};if((a=t.__events__=t.__events__||{})[n]=a[n]||{count:0},a[n][this._id]=a[n][this._id]||[],a[n][this._id].push(u),a[n].count++,e._isElement(t)){var c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!o._isDisposed){var n;try{if(!1===(n=r.apply(l,e))&&e[0]){var i=e[0];i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.cancelBubble=!0}}catch(i){}return n}};u.elementCallback=c,t.addEventListener?t.addEventListener(n,c,i):t.attachEvent&&t.attachEvent("on"+n,c)}else{u.objectCallback=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!o._isDisposed)return r.apply(l,e)}}this._eventRecords.push(u)}},e.prototype.off=function(e,t,n,r){for(var i=0;i<this._eventRecords.length;i++){var o=this._eventRecords[i];if((!e||e===o.target)&&(!t||t===o.eventName)&&(!n||n===o.callback)&&("boolean"!==typeof r||r===o.options)){var a=o.target.__events__,s=a[o.eventName],l=s?s[this._id]:null;l&&(1!==l.length&&n?(s.count--,l.splice(l.indexOf(o),1)):(s.count-=l.length,delete a[o.eventName][this._id]),s.count||delete a[o.eventName]),o.elementCallback&&(o.target.removeEventListener?o.target.removeEventListener(o.eventName,o.elementCallback,o.options):o.target.detachEvent&&o.target.detachEvent("on"+o.eventName,o.elementCallback)),this._eventRecords.splice(i--,1)}}},e.prototype.raise=function(t,n,r){return e.raise(this._parent,t,n,r)},e.prototype.declare=function(e){var t=this._parent.__declaredEvents=this._parent.__declaredEvents||{};if("string"===typeof e)t[e]=!0;else for(var n=0;n<e.length;n++)t[e[n]]=!0},e._uniqueId=0,e}()},function(e,t,n){"use strict";function r(e,t){for(var n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(var n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.apply(this,[null,e].concat(t))}function o(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t=t||{};for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a)for(var s in a)!a.hasOwnProperty(s)||e&&!e(s)||(t[s]=a[s])}return t}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n=0);for(var r=-1,i=n;e&&i<e.length;i++)if(t(e[i],i)){r=i;break}return r}function i(e,t,n){var r=e.slice();return r.splice(t,0,n),r}function o(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e){var t=r.useRef();return void 0===t.current&&(t.current={value:"function"===typeof e?e():e}),t.current.value}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Qe}));var r,i,o=n(1),a=n(0),s=n(159),l=n(8),u=n(160),c=n(149),p=n(117),h=n(146),d=n(73),f=n(115),m=n(68);!function(e){e[e.top=1]="top",e[e.bottom=-1]="bottom",e[e.left=2]="left",e[e.right=-2]="right"}(r||(r={})),function(e){e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.start=2]="start",e[e.end=3]="end"}(i||(i={}));var g,y=n(63),v=n(145),_=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=n,this.bottom=r,this.left=e,this.right=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this.right-this.left},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!1,configurable:!0}),e.prototype.equals=function(e){return parseFloat(this.top.toFixed(4))===parseFloat(e.top.toFixed(4))&&parseFloat(this.bottom.toFixed(4))===parseFloat(e.bottom.toFixed(4))&&parseFloat(this.left.toFixed(4))===parseFloat(e.left.toFixed(4))&&parseFloat(this.right.toFixed(4))===parseFloat(e.right.toFixed(4))},e}();function b(e,t,n){return{targetEdge:e,alignmentEdge:t,isAuto:n}}var x=((g={})[l.a.topLeftEdge]=b(r.top,r.left),g[l.a.topCenter]=b(r.top),g[l.a.topRightEdge]=b(r.top,r.right),g[l.a.topAutoEdge]=b(r.top,void 0,!0),g[l.a.bottomLeftEdge]=b(r.bottom,r.left),g[l.a.bottomCenter]=b(r.bottom),g[l.a.bottomRightEdge]=b(r.bottom,r.right),g[l.a.bottomAutoEdge]=b(r.bottom,void 0,!0),g[l.a.leftTopEdge]=b(r.left,r.top),g[l.a.leftCenter]=b(r.left),g[l.a.leftBottomEdge]=b(r.left,r.bottom),g[l.a.rightTopEdge]=b(r.right,r.top),g[l.a.rightCenter]=b(r.right),g[l.a.rightBottomEdge]=b(r.right,r.bottom),g);function w(e,t){return!(e.top<t.top)&&(!(e.bottom>t.bottom)&&(!(e.left<t.left)&&!(e.right>t.right)))}function S(e,t){var n=[];return e.top<t.top&&n.push(r.top),e.bottom>t.bottom&&n.push(r.bottom),e.left<t.left&&n.push(r.left),e.right>t.right&&n.push(r.right),n}function E(e,t){return e[r[t]]}function C(e,t,n){return e[r[t]]=n,e}function T(e,t){var n=N(t);return(E(e,n.positiveEdge)+E(e,n.negativeEdge))/2}function I(e,t){return e>0?t:-1*t}function k(e,t){return I(e,E(t,e))}function P(e,t,n){return I(n,E(e,n)-E(t,n))}function A(e,t,n){var r=E(e,t)-n;return e=C(e,t,n),e=C(e,-1*t,E(e,-1*t)-r)}function M(e,t,n,r){return void 0===r&&(r=0),A(e,n,E(t,n)+I(n,r))}function O(e,t,n){return k(n,e)>k(n,t)}function L(e,t,n,i,o,a,s){void 0===o&&(o=0);var l=i.alignmentEdge,u=i.alignTargetEdge,c={elementRectangle:e,targetEdge:i.targetEdge,alignmentEdge:l};a||s||(c=function(e,t,n,i,o){void 0===o&&(o=0);var a=[r.left,r.right,r.bottom,r.top];Object(y.a)()&&(a[0]*=-1,a[1]*=-1);for(var s=e,l=i.targetEdge,u=i.alignmentEdge,c=0;c<4;c++){if(O(s,n,l))return{elementRectangle:s,targetEdge:l,alignmentEdge:u};a.splice(a.indexOf(l),1),a.length>0&&(a.indexOf(-1*l)>-1?l*=-1:(u=l,l=a.slice(-1)[0]),s=z(e,t,{targetEdge:l,alignmentEdge:u},o))}return{elementRectangle:e,targetEdge:i.targetEdge,alignmentEdge:i.alignmentEdge}}(e,t,n,i,o));var p=S(e,n);if(u){if(c.alignmentEdge&&p.indexOf(-1*c.alignmentEdge)>-1){var h=function(e,t,n,r){var i=e.alignmentEdge,o=e.targetEdge,a=-1*i;return{elementRectangle:z(e.elementRectangle,t,{targetEdge:o,alignmentEdge:a},n,r),targetEdge:o,alignmentEdge:a}}(c,t,o,s);if(w(h.elementRectangle,n))return h;c=R(S(h.elementRectangle,n),c,n)}}else c=R(p,c,n);return c}function R(e,t,n){for(var r=0,i=e;r<i.length;r++){var o=i[r];t.elementRectangle=M(t.elementRectangle,n,o)}return t}function D(e,t,n){var r=N(t).positiveEdge;return A(e,r,n-(T(e,t)-E(e,r)))}function z(e,t,n,r,i){var o;void 0===r&&(r=0);var a=n.alignmentEdge,s=n.targetEdge,l=i?s:-1*s;(o=i?M(e,t,s,r):function(e,t,n,r){void 0===r&&(r=0);var i=I(-1*n,r);return A(e,-1*n,E(t,n)+i)}(e,t,s,r),a)?o=M(o,t,a):o=D(o,l,T(t,s));return o}function N(e){return e===r.top||e===r.bottom?{positiveEdge:r.left,negativeEdge:r.right}:{positiveEdge:r.top,negativeEdge:r.bottom}}function B(e,t,n){return n&&Math.abs(P(e,n,t))>Math.abs(P(e,n,-1*t))?-1*t:t}function F(e){return Math.sqrt(e*e*2)}function j(e,t,n){if(void 0===e&&(e=l.a.bottomAutoEdge),n)return{alignmentEdge:n.alignmentEdge,isAuto:n.isAuto,targetEdge:n.targetEdge};var r=Object(o.a)({},x[e]);return Object(y.a)()?(r.alignmentEdge&&r.alignmentEdge%2===0&&(r.alignmentEdge=-1*r.alignmentEdge),void 0!==t?x[t]:r):r}function U(e,t,n){var r=T(t,e),i=T(n,e),o=N(e),a=o.positiveEdge,s=o.negativeEdge;return r<=i?a:s}function V(e,t,n,r,i,o,a){var s=z(e,t,r,i,a);return w(s,n)?{elementRectangle:s,targetEdge:r.targetEdge,alignmentEdge:r.alignmentEdge}:L(e,t,n,r,i,o,a)}function q(e,t,n){var i=-1*e.targetEdge,a=new _(0,e.elementRectangle.width,0,e.elementRectangle.height),s={},l=B(e.elementRectangle,e.alignmentEdge?e.alignmentEdge:N(i).positiveEdge,n);return s[r[i]]=E(t,i),s[r[l]]=P(t,a,l),{elementPosition:Object(o.a)({},s),closestEdge:U(e.targetEdge,t,a),targetEdge:i}}function H(e,t){var n=t.targetRectangle,r=N(t.targetEdge),i=r.positiveEdge,o=r.negativeEdge,a=T(n,t.targetEdge),s=new _(e/2,t.elementRectangle.width-e/2,e/2,t.elementRectangle.height-e/2),l=new _(0,e,0,e);return O(l=D(l=A(l,-1*t.targetEdge,-e/2),-1*t.targetEdge,a-k(i,t.elementRectangle)),s,i)?O(l,s,o)||(l=M(l,s,o)):l=M(l,s,i),l}function W(e){var t=e.getBoundingClientRect();return new _(t.left,t.right,t.top,t.bottom)}function G(e){return new _(e.left,e.right,e.top,e.bottom)}function Z(e,t,n,i,o){var a=0,s=x[t],l=o?-1*s.targetEdge:s.targetEdge;return(a=l===r.top?E(e,s.targetEdge)-i.top-n:l===r.bottom?i.bottom-E(e,s.targetEdge)-n:i.bottom-e.top-n)>0?a:i.height}function K(e,t,n,i){var a=e.gapSpace?e.gapSpace:0,s=function(e,t){var n;if(t){if(t.preventDefault){var i=t;n=new _(i.clientX,i.clientX,i.clientY,i.clientY)}else if(t.getBoundingClientRect)n=W(t);else{var o=t,a=o.left||o.x,s=o.top||o.y,l=o.right||a,u=o.bottom||s;n=new _(a,l,s,u)}if(!w(n,e))for(var c=0,p=S(n,e);c<p.length;c++){var h=p[c];n[r[h]]=e[r[h]]}}else n=new _(0,0,0,0);return n}(n,e.target),l=function(e,t,n,r,i){return e.isAuto&&(e.alignmentEdge=U(e.targetEdge,t,n)),e.alignTargetEdge=i,e}(j(e.directionalHint,e.directionalHintForRTL,i),s,n,e.coverTarget,e.alignTargetEdge),u=V(W(t),s,n,l,a,e.directionalHintFixed,e.coverTarget);return Object(o.a)(Object(o.a)({},u),{targetRectangle:s})}function X(e,t,n,i,o){var a=function(e,t,n,i,o,a,s){var l={},u=W(t),c=a?n:-1*n,p=r[c],h=o||N(n).positiveEdge;return s||(h=B(e,h,i)),l[p]=P(e,u,c),l[r[h]]=P(e,u,h),l}(e.elementRectangle,t,e.targetEdge,n,e.alignmentEdge,i,o);return{elementPosition:a,targetEdge:e.targetEdge,alignmentEdge:e.alignmentEdge}}function Y(e,t,n,r,i){var a=e.isBeakVisible&&e.beakWidth||0,s=F(a)/2+(e.gapSpace?e.gapSpace:0),l=e;l.gapSpace=s;var u=e.bounds?G(e.bounds):new _(0,window.innerWidth-Object(v.b)(),0,window.innerHeight),c=K(l,n,u,r),p=q(c,H(a,c),u);return Object(o.a)(Object(o.a)({},X(c,t,u,e.coverTarget,i)),{beakPosition:p})}function J(e,t,n,r){return function(e,t,n,r){return Y(e,t,n,r,!0)}(e,t,n,r)}var $=n(6),Q=n(12),ee=n(13),te=n(64),ne=n(70);function re(){var e=Object(ne.a)((function(){return new te.a}));return a.useEffect((function(){return function(){return e.dispose()}}),[e]),e}var ie=n(148),oe=n(158),ae=n(116);function se(e){var t=e.originalElement,n=e.containsFocus;t&&n&&t!==Object($.a)()&&setTimeout((function(){var e;null===(e=t.focus)||void 0===e||e.call(t)}),0)}var le,ue=a.forwardRef((function(e,t){e=Object(o.a)({shouldRestoreFocus:!0},e);var n=a.useRef(),r=Object(oe.a)(n,t);!function(e){var t=e["aria-modal"];a.useEffect((function(){var e=Object(Q.a)();if(t&&e){for(var n=e.body.children,r=[],i=0;i<n.length-1;i++)r.push(n[i]);return(r=r.filter((function(e){return"TEMPLATE"!==e.tagName&&"SCRIPT"!==e.tagName&&"STYLE"!==e.tagName&&!e.hasAttribute("aria-hidden")}))).forEach((function(e){return e.setAttribute("aria-hidden","true")})),function(){return r.forEach((function(e){return e.removeAttribute("aria-hidden")}))}}}),[t])}(e),function(e,t){var n=e.onRestoreFocus,r=void 0===n?se:n,i=a.useRef(),o=a.useRef(!1);a.useEffect((function(){return i.current=Object(Q.a)().activeElement,Object(u.a)(t.current)&&(o.current=!0),function(){var e;null===r||void 0===r||r({originalElement:i.current,containsFocus:o.current,documentContainsFocus:(null===(e=Object(Q.a)())||void 0===e?void 0:e.hasFocus())||!1}),i.current=void 0}}),[]),Object(ie.a)(t,"focus",a.useCallback((function(){o.current=!0}),[]),!0),Object(ie.a)(t,"blur",a.useCallback((function(e){t.current&&e.relatedTarget&&!t.current.contains(e.relatedTarget)&&(o.current=!1)}),[]),!0)}(e,n);var i=e.role,s=e.className,l=e.ariaLabel,c=e.ariaLabelledBy,p=e.ariaDescribedBy,h=e.style,f=e.children,m=e.onDismiss,g=function(e,t){var n=re(),r=a.useState(!1),i=r[0],o=r[1];return a.useEffect((function(){return n.requestAnimationFrame((function(){var n;if(!e.style||!e.style.overflowY){var r=!1;if(t&&t.current&&(null===(n=t.current)||void 0===n?void 0:n.firstElementChild)){var a=t.current.clientHeight,s=t.current.firstElementChild.clientHeight;a>0&&s>a&&(r=s-a>1)}i!==r&&o(r)}})),function(){return n.dispose()}})),i}(e,n),y=a.useCallback((function(e){if(e.which===ee.a.escape)m&&(m(e),e.preventDefault(),e.stopPropagation())}),[m]),v=Object(ae.c)();return Object(ie.a)(v,"keydown",y),a.createElement("div",Object(o.a)({ref:r},Object(d.d)(e,d.c),{className:s,role:i,"aria-label":l,"aria-labelledby":c,"aria-describedby":p,onKeyDown:y,style:Object(o.a)({overflowY:g?"scroll":void 0,outline:"none"},h)}),f)})),ce=n(144),pe=n(29),he=n(147),de=((le={})[r.top]=pe.a.slideUpIn10,le[r.bottom]=pe.a.slideDownIn10,le[r.left]=pe.a.slideLeftIn10,le[r.right]=pe.a.slideRightIn10,le),fe=0,me=0,ge={opacity:0,filter:"opacity(0)",pointerEvents:"none"},ye=["role","aria-roledescription"],ve={preventDismissOnLostFocus:!1,preventDismissOnScroll:!1,preventDismissOnResize:!1,isBeakVisible:!0,beakWidth:16,gapSpace:0,minPagePadding:8,directionalHint:l.a.bottomAutoEdge},_e=Object(ce.a)({disableCaching:!0});function be(e,t,n){var r=e.beakWidth,i=e.coverTarget,o=e.directionalHint,s=e.directionalHintFixed,l=e.gapSpace,u=e.isBeakVisible,c=e.hidden,p=a.useState(),h=p[0],d=p[1],f=re(),m=t.current;return a.useEffect((function(){var e;if(h||c)c&&d(void 0);else if(s&&m){var a=(null!==l&&void 0!==l?l:0)+(u&&r?r:0);f.requestAnimationFrame((function(){t.current&&d(function(e,t,n,r,i){void 0===n&&(n=0);var o=e,a=e,s=e,l=r?G(r):new _(0,window.innerWidth-Object(v.b)(),0,window.innerHeight),u=s.left||s.x,c=s.top||s.y,p=s.right||u,h=s.bottom||c;return Z(o.stopPropagation?new _(o.clientX,o.clientX,o.clientY,o.clientY):void 0!==u&&void 0!==c?new _(u,p,c,h):W(a),t,n,l,i)}(t.current,o,a,n(),i))}))}else d(null===(e=n())||void 0===e?void 0:e.height)}),[t,m,l,r,n,c,f,i,o,s,u,h]),h}function xe(e,t,n,r,i){var s=a.useState(),l=s[0],u=s[1],c=a.useRef(0),p=a.useRef(),h=re(),d=e.hidden,f=e.target,m=e.finalHeight,g=e.onPositioned,y=e.directionalHint;return a.useEffect((function(){if(!d){var a=h.requestAnimationFrame((function(){var a,s,h=!!f;if(t.current&&n.current&&(!h||r.current)){var d=Object(o.a)(Object(o.a)({},e),{target:r.current,bounds:i()}),y=p.current===f?l:void 0,v=m?J(d,t.current,n.current,y):function(e,t,n,r){return Y(e,t,n,r)}(d,t.current,n.current,y);!l&&v||l&&v&&(s=v,!Ee((a=l).elementPosition,s.elementPosition)||!Ee(a.beakPosition.elementPosition,s.beakPosition.elementPosition))&&c.current<5?(c.current++,u(v)):c.current>0&&(c.current=0,null===g||void 0===g||g(l))}}),n.current);return p.current=f,function(){h.cancelAnimationFrame(a),p.current=void 0}}}),[d,y,h,n,t,r,m,i,g,l,e,f]),l}var we=a.memo(a.forwardRef((function(e,t){var n=Object(h.a)(ve,e),r=n.styles,i=n.style,s=n.ariaLabel,l=n.ariaDescribedBy,m=n.ariaLabelledBy,g=n.className,y=n.isBeakVisible,v=n.children,_=n.beakWidth,b=n.calloutWidth,x=n.calloutMaxWidth,w=n.calloutMinWidth,S=n.doNotLayer,E=n.finalHeight,C=n.hideOverflow,T=void 0===C?!!E:C,I=n.backgroundColor,k=n.calloutMaxHeight,P=n.onScroll,A=n.shouldRestoreFocus,M=void 0===A||A,O=n.target,L=n.hidden,R=n.onLayerMounted,D=a.useRef(null),z=a.useRef(null),N=Object(oe.a)(D,t),B=Object(he.a)(n.target,z),F=B[0],j=B[1],U=function(e,t,n){var r=e.bounds,i=e.minPagePadding,o=void 0===i?ve.minPagePadding:i,s=e.target,l=a.useRef(),u=a.useCallback((function(){if(!l.current){var e="function"===typeof r?n?r(s,n):void 0:r;!e&&n&&(e=function(e,t){return function(e,t){var n=void 0;if(t.getWindowSegments&&(n=t.getWindowSegments()),void 0===n||n.length<=1)return{top:0,left:0,right:t.innerWidth,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight};var r=0,i=0;if(null!==e&&e.getBoundingClientRect){var o=e.getBoundingClientRect();r=(o.left+o.right)/2,i=(o.top+o.bottom)/2}else null!==e&&(r=e.left||e.x,i=e.top||e.y);for(var a={top:0,left:0,right:0,bottom:0,width:0,height:0},s=0,l=n;s<l.length;s++){var u=l[s];r&&u.left<=r&&u.right>=r&&i&&u.top<=i&&u.bottom>=i&&(a={top:u.top,left:u.left,right:u.right,bottom:u.bottom,width:u.width,height:u.height})}return a}(e,t)}(t.current,n),e={top:e.top+o,left:e.left+o,right:e.right-o,bottom:e.bottom-o,width:e.width-2*o,height:e.height-2*o}),l.current=e}return l.current}),[r,o,s,t,n]);return u}(n,F,j),V=be(n,F,U),q=function(e,t){var n=e.finalHeight,r=e.hidden,i=a.useState(0),o=i[0],s=i[1],l=re(),u=a.useRef(),c=a.useCallback((function(){t.current&&n&&(u.current=l.requestAnimationFrame((function(){var e,r=null===(e=t.current)||void 0===e?void 0:e.lastChild;if(r){var i=r.scrollHeight-r.offsetHeight;s((function(e){return e+i})),r.offsetHeight<n?c():l.cancelAnimationFrame(u.current,t.current)}}),t.current))}),[l,t,n]);return a.useEffect((function(){r||c()}),[n,r,c]),o}(n,z),H=xe(n,D,z,F,U),W=function(e,t,n,r,i){var o=e.hidden,s=e.onDismiss,l=e.preventDismissOnScroll,u=e.preventDismissOnResize,h=e.preventDismissOnLostFocus,d=e.dismissOnTargetClick,f=e.shouldDismissOnWindowFocus,m=e.preventDismissOnEvent,g=a.useRef(!1),y=re(),v=Object(ne.a)([function(){g.current=!0},function(){g.current=!1}]),_=!!t;return a.useEffect((function(){var e=function(e){_&&!l&&v(e)},t=function(e){u||m&&m(e)||null===s||void 0===s||s(e)},a=function(e){h||v(e)},v=function(e){var t=e.target,o=n.current&&!Object(c.a)(n.current,t);if(o&&g.current)g.current=!1;else if(!r.current&&o||e.target!==i&&o&&(!r.current||"stopPropagation"in r.current||d||t!==r.current&&!Object(c.a)(r.current,t))){if(m&&m(e))return;null===s||void 0===s||s(e)}},b=function(e){f&&((!m||m(e))&&(m||h)||(null===i||void 0===i?void 0:i.document.hasFocus())||null!==e.relatedTarget||null===s||void 0===s||s(e))},x=new Promise((function(n){y.setTimeout((function(){if(!o&&i){var r=[Object(p.a)(i,"scroll",e,!0),Object(p.a)(i,"resize",t,!0),Object(p.a)(i.document.documentElement,"focus",a,!0),Object(p.a)(i.document.documentElement,"click",a,!0),Object(p.a)(i,"blur",b,!0)];n((function(){r.forEach((function(e){return e()}))}))}}),0)}));return function(){x.then((function(e){return e()}))}}),[o,y,n,r,i,s,f,d,h,u,l,_,m]),v}(n,H,D,F,j),G=W[0],Z=W[1];if(function(e,t,n){var r=e.hidden,i=e.setInitialFocus,o=re(),s=!!t;a.useEffect((function(){if(!r&&i&&s&&n.current){var e=o.requestAnimationFrame((function(){return Object(u.c)(n.current)}),n.current);return function(){return o.cancelAnimationFrame(e)}}}),[r,s,o,n,i])}(n,H,z),a.useEffect((function(){L||null===R||void 0===R||R()}),[L]),!j)return null;var K=k||(V?V+q:void 0),X=T,Y=y&&!!O,J=_e(r,{theme:n.theme,className:g,overflowYHidden:X,calloutWidth:b,positions:H,beakWidth:_,backgroundColor:I,calloutMaxWidth:x,calloutMinWidth:w,doNotLayer:S}),$=Object(o.a)(Object(o.a)({maxHeight:K},i),X&&{overflowY:"hidden"}),Q=n.hidden?{visibility:"hidden"}:void 0;return a.createElement("div",{ref:N,className:J.container,style:Q},a.createElement("div",Object(o.a)({},Object(d.d)(n,d.c,ye),{className:Object(f.a)(J.root,H&&H.targetEdge&&de[H.targetEdge]),style:H?H.elementPosition:ge,tabIndex:-1,ref:z}),Y&&a.createElement("div",{className:J.beak,style:Se(H)}),Y&&a.createElement("div",{className:J.beakCurtain}),a.createElement(ue,Object(o.a)({},Object(d.d)(n,ye),{ariaDescribedBy:l,ariaLabel:s,ariaLabelledBy:m,className:J.calloutMain,onDismiss:n.onDismiss,onMouseDown:G,onMouseUp:Z,onRestoreFocus:n.onRestoreFocus,onScroll:P,shouldRestoreFocus:M,style:$}),v)))})),(function(e,t){return!(t.shouldUpdateWhenHidden||!e.hidden||!t.hidden)||Object(m.b)(e,t)}));function Se(e){var t,n=Object(o.a)({},null===(t=null===e||void 0===e?void 0:e.beakPosition)||void 0===t?void 0:t.elementPosition);return n.top||n.bottom||n.left||n.right||(n.left=me,n.top=fe),n}function Ee(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=e[n],i=t[n];if(void 0===r||void 0===i)return!1;if(r.toFixed(2)!==i.toFixed(2))return!1}return!0}function Ce(e){return{height:e,width:e}}we.displayName="CalloutContentBase";var Te={container:"ms-Callout-container",root:"ms-Callout",beak:"ms-Callout-beak",beakCurtain:"ms-Callout-beakCurtain",calloutMain:"ms-Callout-main"},Ie=Object(s.a)(we,(function(e){var t,n=e.theme,r=e.className,i=e.overflowYHidden,o=e.calloutWidth,a=e.beakWidth,s=e.backgroundColor,l=e.calloutMaxWidth,u=e.calloutMinWidth,c=e.doNotLayer,p=Object(pe.l)(Te,n),h=n.semanticColors,d=n.effects;return{container:[p.container,{position:"relative"}],root:[p.root,n.fonts.medium,{position:"absolute",zIndex:c?pe.f.Layer:void 0,boxSizing:"border-box",borderRadius:d.roundedCorner2,boxShadow:d.elevation16,selectors:(t={},t[pe.c]={borderWidth:1,borderStyle:"solid",borderColor:"WindowText"},t)},Object(pe.j)(),r,!!o&&{width:o},!!l&&{maxWidth:l},!!u&&{minWidth:u}],beak:[p.beak,{position:"absolute",backgroundColor:h.menuBackground,boxShadow:"inherit",border:"inherit",boxSizing:"border-box",transform:"rotate(45deg)"},Ce(a),s&&{backgroundColor:s}],beakCurtain:[p.beakCurtain,{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:h.menuBackground,borderRadius:d.roundedCorner2}],calloutMain:[p.calloutMain,{backgroundColor:h.menuBackground,overflowX:"hidden",overflowY:"auto",position:"relative",borderRadius:d.roundedCorner2},i&&{overflowY:"hidden"},s&&{backgroundColor:s}]}}),void 0,{scope:"CalloutContent"}),ke=n(36),Pe=n(30),Ae=n(161),Me=n(7),Oe=n(18),Le=n(27);function Re(e,t){void 0===e&&(e={});var n=ze(t)?t:function(e){return function(t){return e?Object(Me.a)(Object(Me.a)({},t),e):t}}(t);return n(e)}function De(e,t){return void 0===e&&(e={}),(ze(t)?t:function(e){void 0===e&&(e={});return function(t){var n=Object(Me.a)({},t);for(var r in e)e.hasOwnProperty(r)&&(n[r]=Object(Me.a)(Object(Me.a)({},t[r]),e[r]));return n}}(t))(e)}function ze(e){return"function"===typeof e}var Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onCustomizationChange=function(){return t.forceUpdate()},t}return Object(Me.b)(t,e),t.prototype.componentDidMount=function(){Oe.a.observe(this._onCustomizationChange)},t.prototype.componentWillUnmount=function(){Oe.a.unobserve(this._onCustomizationChange)},t.prototype.render=function(){var e=this,t=this.props.contextTransform;return a.createElement(Le.a.Consumer,null,(function(n){var r=function(e,t){var n=(t||{}).customizations,r=void 0===n?{settings:{},scopedSettings:{}}:n;return{customizations:{settings:Re(r.settings,e.settings),scopedSettings:De(r.scopedSettings,e.scopedSettings),inCustomizerContext:!0}}}(e.props,n);return t&&(r=t(r)),a.createElement(Le.a.Provider,{value:r},e.props.children)}))},t}(a.Component),Be=Object(ce.a)(),Fe=Object(Pe.b)((function(e,t){return Object(pe.i)(Object(o.a)(Object(o.a)({},e),{rtl:t}))})),je=a.forwardRef((function(e,t){var n=e.className,r=e.theme,i=e.applyTheme,s=e.applyThemeToBody,l=e.styles,u=Be(l,{theme:r,applyTheme:i,className:n}),c=a.useRef(null);return function(e,t,n){var r=t.bodyThemed;a.useEffect((function(){if(e){var t=Object(Q.a)(n.current);if(t)return t.body.classList.add(r),function(){t.body.classList.remove(r)}}}),[r,e,n])}(s,u,c),Object(Ae.b)(c),a.createElement(a.Fragment,null,function(e,t,n,r){var i=t.root,s=e.as,l=void 0===s?"div":s,u=e.dir,c=e.theme,p=Object(d.d)(e,d.c,["dir"]),h=function(e){var t=e.theme,n=e.dir,r=Object(y.a)(t)?"rtl":"ltr",i=Object(y.a)()?"rtl":"ltr",o=n||r;return{rootDir:o!==r||o!==i?o:n,needsTheme:o!==r}}(e),f=h.rootDir,m=h.needsTheme,g=a.createElement(l,Object(o.a)({dir:f},p,{className:i,ref:Object(oe.a)(n,r)}));m&&(g=a.createElement(Ne,{settings:{theme:Fe(c,"rtl"===u)}},g));return g}(e,u,c,t))}));je.displayName="FabricBase";var Ue={fontFamily:"inherit"},Ve={root:"ms-Fabric",bodyThemed:"ms-Fabric-bodyThemed"},qe=Object(s.a)(je,(function(e){var t=e.theme,n=e.className,r=e.applyTheme;return{root:[Object(pe.l)(Ve,t).root,t.fonts.medium,{color:t.palette.neutralPrimary,selectors:{"& button":Ue,"& input":Ue,"& textarea":Ue}},r&&{color:t.semanticColors.bodyText,backgroundColor:t.semanticColors.bodyBackground},n],bodyThemed:[{backgroundColor:t.semanticColors.bodyBackground}]}}),void 0,{scope:"Fabric"}),He=n(49);var We,Ge={};var Ze,Ke=Object(ce.a)(),Xe=a.forwardRef((function(e,t){var n=a.useRef(null),r=Object(oe.a)(n,t),i=a.useRef(),s=a.useState(!1),l=s[0],u=s[1],c=Object(ae.b)(),p=e.eventBubblingEnabled,h=e.styles,d=e.theme,f=e.className,m=e.children,g=e.hostId,y=e.onLayerDidMount,v=void 0===y?function(){}:y,_=e.onLayerMounted,b=void 0===_?function(){}:_,x=e.onLayerWillUnmount,w=e.insertFirst,S=Ke(h,{theme:d,className:f,isNotHost:!g}),E=function(){if(c){if(g)return c.getElementById(g);var e=We;return e?c.querySelector(e):c.body}},C=function(){null===x||void 0===x||x();var e=i.current;i.current=void 0,e&&e.parentNode&&e.parentNode.removeChild(e)},T=function(){var e=E();if(c&&e){C();var t=c.createElement("div");t.className=S.root,Object(He.b)(t),function(e,t){var n=e,r=t;n._virtual||(n._virtual={children:[]});var i=n._virtual.parent;if(i&&i!==t){var o=i._virtual.children.indexOf(n);o>-1&&i._virtual.children.splice(o,1)}n._virtual.parent=r||void 0,r&&(r._virtual||(r._virtual={children:[]}),r._virtual.children.push(n))}(t,n.current),w?e.insertBefore(t,e.firstChild):e.appendChild(t),i.current=t,u(!0)}};return a.useLayoutEffect((function(){return T(),g&&function(e,t){Ge[e]||(Ge[e]=[]),Ge[e].push(t)}(g,T),function(){C(),g&&function(e,t){if(Ge[e]){var n=Ge[e].indexOf(t);n>=0&&(Ge[e].splice(n,1),0===Ge[e].length&&delete Ge[e])}}(g,T)}}),[g]),a.useEffect((function(){i.current&&l&&(null===b||void 0===b||b(),null===v||void 0===v||v(),u(!1))}),[l,b,v]),a.createElement("span",{className:"ms-layer",ref:r},i.current&&ke.createPortal(a.createElement(qe,Object(o.a)({},!p&&function(){Ze||(Ze={},["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOver","onMouseOut","onMouseUp","onTouchMove","onTouchStart","onTouchCancel","onTouchEnd","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onInvalid","onSubmit"].forEach((function(e){return Ze[e]=Ye})));return Ze}(),{className:S.content}),m),i.current))}));Xe.displayName="LayerBase";var Ye=function(e){e.eventPhase===Event.BUBBLING_PHASE&&"mouseenter"!==e.type&&"mouseleave"!==e.type&&"touchstart"!==e.type&&"touchend"!==e.type&&e.stopPropagation()};var Je={root:"ms-Layer",rootNoHost:"ms-Layer--fixed",content:"ms-Layer-content"},$e=Object(s.a)(Xe,(function(e){var t=e.className,n=e.isNotHost,r=e.theme,i=Object(pe.l)(Je,r);return{root:[i.root,r.fonts.medium,n&&[i.rootNoHost,{position:"fixed",zIndex:pe.f.Layer,top:0,left:0,bottom:0,right:0,visibility:"hidden"}],t],content:[i.content,{visibility:"visible"}]}}),void 0,{scope:"Layer",fields:["hostId","theme","styles"]}),Qe=a.forwardRef((function(e,t){var n=e.layerProps,r=e.doNotLayer,i=Object(o.d)(e,["layerProps","doNotLayer"]),s=a.createElement(Ie,Object(o.a)({},i,{doNotLayer:r,ref:t}));return r?s:a.createElement($e,Object(o.a)({},n),s)}));Qe.displayName="Callout"},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r={},i=void 0;try{i=window}catch(a){}function o(e,t){if("undefined"!==typeof i){var n=i.__packages__=i.__packages__||{};if(!n[e]||!r[e])r[e]=t,(n[e]=n[e]||[]).push(t)}}o("@fluentui/set-version","6.0.0")},function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f}));var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++)for(var o=i[r],a=Array.isArray(o)?o:Object.keys(o),s=0,l=a;s<l.length;s++){var u=l[s];n[u]=1}return n},i=r(["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),o=r(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),a=r(o,i),s=(r(a,["form"]),r(a,["height","loop","muted","preload","src","width"])),l=(r(s,["poster"]),r(a,["start"]),r(a,["value"]),r(a,["download","href","hrefLang","media","rel","target","type"])),u=r(a,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]),c=r(u,["accept","alt","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]),p=r(u,["autoCapitalize","cols","dirname","form","maxLength","placeholder","readOnly","required","rows","wrap"]),h=(r(u,["form","multiple","required"]),r(a,["selected","value"]),r(a,["cellPadding","cellSpacing"]),r(a,["rowSpan","scope"]),r(a,["colSpan","headers","rowSpan","scope"]),r(a,["span"]),r(a,["span"]),r(a,["acceptCharset","action","encType","encType","method","noValidate","target"]),r(a,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]),r(a,["alt","crossOrigin","height","src","srcSet","useMap","width"])),d=a;function f(e,t,n){for(var r=Array.isArray(t),i={},o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];!(!r&&t[s]||r&&t.indexOf(s)>=0||0===s.indexOf("data-")||0===s.indexOf("aria-"))||n&&-1!==(null===n||void 0===n?void 0:n.indexOf(s))||(i[s]=e[s])}return i}},,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(47),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var p=Symbol.for;i=p("react.element"),o=p("react.portal"),t.Fragment=p("react.fragment"),t.StrictMode=p("react.strict_mode"),t.Profiler=p("react.profiler"),a=p("react.provider"),s=p("react.context"),l=p("react.forward_ref"),t.Suspense=p("react.suspense"),u=p("react.memo"),c=p("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var _=v.prototype=new y;_.constructor=v,r(_,g.prototype),_.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:b.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case o:l=!0}}if(l)return a=a(l=e),e=""===r?"."+T(l,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(C,"$&/")+"/"),I(a,t,n,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+T(s=e[u],u);l+=I(s,t,n,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=I(s=s.value,t,n,c=r+T(s,u++),a);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function k(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function M(){var e=A.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var o=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!w.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var p=0;p<c;p++)u[p]=arguments[p+2];o.children=u}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return M().useCallback(e,t)},t.useContext=function(e,t){return M().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return M().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},t.useMemo=function(e,t){return M().useMemo(e,t)},t.useReducer=function(e,t,n){return M().useReducer(e,t,n)},t.useRef=function(e){return M().useRef(e)},t.useState=function(e){return M().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";var r=n(0),i=n(47),o=n(88);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var p=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,f={},m={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,E=60107,C=60108,T=60114,I=60109,k=60110,P=60112,A=60113,M=60120,O=60115,L=60116,R=60121,D=60128,z=60129,N=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var F=Symbol.for;w=F("react.element"),S=F("react.portal"),E=F("react.fragment"),C=F("react.strict_mode"),T=F("react.profiler"),I=F("react.provider"),k=F("react.context"),P=F("react.forward_ref"),A=F("react.suspense"),M=F("react.suspense_list"),O=F("react.memo"),L=F("react.lazy"),R=F("react.block"),F("react.scope"),D=F("react.opaque.id"),z=F("react.debug_trace_mode"),N=F("react.offscreen"),B=F("react.legacy_hidden")}var j,U="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function q(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var H=!1;function W(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function G(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case T:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return Z(e.type);case R:return Z(e._render);case L:t=e._payload,e=e._init;try{return Z(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ue(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var pe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ye=(ge=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||_e.hasOwnProperty(e)&&_e[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(_e).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_e[t]=_e[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,ke=null,Pe=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Ie)throw Error(a(280));var t=e.stateNode;t&&(t=oi(t),Ie(e.stateNode,e.type,t))}}function Me(e){ke?Pe?Pe.push(e):Pe=[e]:ke=e}function Oe(){if(ke){var e=ke,t=Pe;if(Pe=ke=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Le(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function De(){}var ze=Le,Ne=!1,Be=!1;function Fe(){null===ke&&null===Pe||(De(),Oe())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ue=!1;if(p)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ge){Ue=!1}function qe(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var He=!1,We=null,Ge=!1,Ze=null,Ke={onError:function(e){He=!0,We=e}};function Xe(e,t,n,r,i,o,a,s,l){He=!1,We=null,qe.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ye(e)!==e)throw Error(a(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,lt=null,ut=null,ct=new Map,pt=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(t.pointerId)}}function gt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=ft(t,n,r,i,o),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function _t(e,t,n){vt(e)&&n.delete(t)}function bt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&vt(st)&&(st=null),null!==lt&&vt(lt)&&(lt=null),null!==ut&&vt(ut)&&(ut=null),ct.forEach(_t),pt.forEach(_t)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function wt(e){function t(t){return xt(t,e)}if(0<at.length){xt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&xt(st,e),null!==lt&&xt(lt,e),null!==ut&&xt(ut,e),ct.forEach(t),pt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Ct={},Tt={};function It(e){if(Ct[e])return Ct[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Ct[e]=n[t];return e}p&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var kt=It("animationend"),Pt=It("animationiteration"),At=It("animationstart"),Mt=It("transitionend"),Ot=new Map,Lt=new Map,Rt=["abort","abort",kt,"animationEnd",Pt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mt,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Lt.set(r,t),Ot.set(r,i),u(i,[r])}}(0,o.unstable_now)();var zt=8;function Nt(e){if(0!==(1&e))return zt=15,1;if(0!==(2&e))return zt=14,2;if(0!==(4&e))return zt=13,4;var t=24&e;return 0!==t?(zt=12,t):0!==(32&e)?(zt=11,32):0!==(t=192&e)?(zt=10,t):0!==(256&e)?(zt=9,256):0!==(t=3584&e)?(zt=8,t):0!==(4096&e)?(zt=7,4096):0!==(t=4186112&e)?(zt=6,t):0!==(t=62914560&e)?(zt=5,t):67108864&e?(zt=4,67108864):0!==(134217728&e)?(zt=3,134217728):0!==(t=805306368&e)?(zt=2,t):0!==(1073741824&e)?(zt=1,1073741824):(zt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return zt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=zt=15;else if(0!==(o=134217727&n)){var l=o&~a;0!==l?(r=Nt(l),i=zt):0!==(s&=o)&&(r=Nt(s),i=zt)}else 0!==(o=n&~a)?(r=Nt(o),i=zt):0!==s&&(r=Nt(s),i=zt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Nt(t),i<=zt)return t;zt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function Ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?jt(10,t):e;case 10:return 0===(e=Ut(192&~t))?jt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Ut(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Gt|0)|0},Wt=Math.log,Gt=Math.LN2;var Zt=o.unstable_UserBlockingPriority,Kt=o.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,r){Ne||De();var i=$t,o=Ne;Ne=!0;try{Re(i,e,t,n,r)}finally{(Ne=o)||Fe()}}function Jt(e,t,n,r){Kt(Zt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Xt)if((i=0===(4&t))&&0<at.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),at.push(e);else{var o=Qt(e,t,n,r);if(null===o)i&&mt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=gt(st,e,t,n,r,i),!0;case"dragenter":return lt=gt(lt,e,t,n,r,i),!0;case"mouseover":return ut=gt(ut,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ct.set(o,gt(ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,pt.set(o,gt(pt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;mt(e,r)}Dr(e,t,r,null,n)}}}function Qt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var o=Ye(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Je(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function ln(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var un,cn,pn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=ln(hn),fn=i({},hn,{view:0,detail:0}),mn=ln(fn),gn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pn&&(pn&&"mousemove"===e.type?(un=e.screenX-pn.screenX,cn=e.screenY-pn.screenY):cn=un=0,pn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),yn=ln(gn),vn=ln(i({},gn,{dataTransfer:0})),_n=ln(i({},fn,{relatedTarget:0})),bn=ln(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=ln(xn),Sn=ln(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function kn(){return In}var Pn=i({},fn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=ln(Pn),Mn=ln(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=ln(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Ln=ln(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=ln(Rn),zn=[9,13,27,32],Nn=p&&"CompositionEvent"in window,Bn=null;p&&"documentMode"in document&&(Bn=document.documentMode);var Fn=p&&"TextEvent"in window&&!Bn,jn=p&&(!Nn||Bn&&8<Bn&&11>=Bn),Un=String.fromCharCode(32),Vn=!1;function qn(e,t){switch(e){case"keyup":return-1!==zn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Kn(e,t,n,r){Me(r),0<(t=Nr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function Jn(e){Pr(e,0)}function $n(e){if(J(ii(e)))return e}function Qn(e,t){if("change"===e)return t}var er=!1;if(p){var tr;if(p){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Xn&&(Xn.detachEvent("onpropertychange",or),Yn=Xn=null)}function or(e){if("value"===e.propertyName&&$n(Yn)){var t=[];if(Kn(t,Yn,e,Te(e)),e=Jn,Ne)e(t);else{Ne=!0;try{Le(e,t)}finally{Ne=!1,Fe()}}}}function ar(e,t,n){"focusin"===e?(ir(),Yn=n,(Xn=t).attachEvent("onpropertychange",or)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function lr(e,t){if("click"===e)return $n(t)}function ur(e,t){if("input"===e||"change"===e)return $n(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},pr=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!pr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=p&&"documentMode"in document&&11>=document.documentMode,_r=null,br=null,xr=null,wr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==_r||_r!==$(r)||("selectionStart"in(r=_r)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&hr(xr,r)||(xr=r,0<(r=Nr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_r)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Rt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Cr=0;Cr<Er.length;Cr++)Lt.set(Er[Cr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function kr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Xe.apply(this,arguments),He){if(!He)throw Error(a(198));var c=We;He=!1,We=null,Ge||(Ge=!0,Ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;kr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;kr(i,s,u),o=l}}}if(Ge)throw e=Ze,Ge=!1,Ze=null,e}function Ar(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Mr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Mr]||(e[Mr]=!0,s.forEach((function(t){Ir.has(t)||Lr(t,!1,e,null),Lr(t,!0,e,null)})))}function Lr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ai(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Rr(o,e,i,t),a.add(s))}function Rr(e,t,n,r){var i=Lt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Jt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ni(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Be)return e(t,n);Be=!0;try{ze(e,t,n)}finally{Be=!1,Fe()}}((function(){var r=o,i=Te(n),a=[];e:{var s=Ot.get(e);if(void 0!==s){var l=dn,u=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=_n;break;case"focusout":u="blur",l=_n;break;case"beforeblur":case"afterblur":l=_n;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case kt:case Pt:case At:l=bn;break;case Mt:l=Ln;break;case"scroll":l=mn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&t),p=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var d,f=r;null!==f;){var m=(d=f).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==h&&(null!=(m=je(f,h))&&c.push(zr(f,m,d)))),p)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!ni(u)&&!u[ei])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ni(u):null)&&(u!==(p=Ye(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=yn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),p=null==l?s:ii(l),d=null==u?s:ii(u),(s=new c(m,f+"leave",l,n,i)).target=p,s.relatedTarget=d,m=null,ni(i)===r&&((c=new c(h,f+"enter",u,n,i)).target=d,c.relatedTarget=p,m=c),p=m,l&&u)e:{for(h=u,f=0,d=c=l;d;d=Br(d))f++;for(d=0,m=h;m;m=Br(m))d++;for(;0<f-d;)c=Br(c),f--;for(;0<d-f;)h=Br(h),d--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=Br(c),h=Br(h)}c=null}else c=null;null!==l&&Fr(a,s,l,c,!1),null!==u&&null!==p&&Fr(a,p,u,c,!0)}if("select"===(l=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(Zn(s))if(er)g=ur;else{g=sr;var y=ar}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=lr);switch(g&&(g=g(e,r))?Kn(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Zn(y)||"true"===y.contentEditable)&&(_r=y,br=r,xr=null);break;case"focusout":xr=br=_r=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Sr(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":Sr(a,n,i)}var v;if(Nn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Wn?qn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Wn&&(v=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(y=Nr(r,_)).length&&(_=new Sn(_,e,null,n,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Hn(n))&&(_.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Nn&&qn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Nr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Pr(a,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=je(e,n))&&r.unshift(zr(e,o,i)),null!=(o=je(e,t))&&r.push(zr(e,o,i))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Fr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=je(n,o))&&a.unshift(zr(n,l,s)):i||null!=(l=je(n,o))&&a.push(zr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function jr(){}var Ur=null,Vr=null;function qr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Zr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Jr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Jr,Qr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[$r])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[$r]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function oi(e){return e[Qr]||null}function ai(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],li=-1;function ui(e){return{current:e}}function ci(e){0>li||(e.current=si[li],si[li]=null,li--)}function pi(e,t){li++,si[li]=e.current,e.current=t}var hi={},di=ui(hi),fi=ui(!1),mi=hi;function gi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vi(){ci(fi),ci(di)}function _i(e,t,n){if(di.current!==hi)throw Error(a(168));pi(di,t),pi(fi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,Z(t)||"Unknown",o));return i({},n,r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,mi=di.current,pi(di,e),pi(fi,fi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=bi(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,ci(fi),ci(di),pi(di,e)):ci(fi),pi(fi,n)}var Si=null,Ei=null,Ci=o.unstable_runWithPriority,Ti=o.unstable_scheduleCallback,Ii=o.unstable_cancelCallback,ki=o.unstable_shouldYield,Pi=o.unstable_requestPaint,Ai=o.unstable_now,Mi=o.unstable_getCurrentPriorityLevel,Oi=o.unstable_ImmediatePriority,Li=o.unstable_UserBlockingPriority,Ri=o.unstable_NormalPriority,Di=o.unstable_LowPriority,zi=o.unstable_IdlePriority,Ni={},Bi=void 0!==Pi?Pi:function(){},Fi=null,ji=null,Ui=!1,Vi=Ai(),qi=1e4>Vi?Ai:function(){return Ai()-Vi};function Hi(){switch(Mi()){case Oi:return 99;case Li:return 98;case Ri:return 97;case Di:return 96;case zi:return 95;default:throw Error(a(332))}}function Wi(e){switch(e){case 99:return Oi;case 98:return Li;case 97:return Ri;case 96:return Di;case 95:return zi;default:throw Error(a(332))}}function Gi(e,t){return e=Wi(e),Ci(e,t)}function Zi(e,t,n){return e=Wi(e),Ti(e,t,n)}function Ki(){if(null!==ji){var e=ji;ji=null,Ii(e)}Xi()}function Xi(){if(!Ui&&null!==Fi){Ui=!0;var e=0;try{var t=Fi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fi=null}catch(n){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ti(Oi,Ki),n}finally{Ui=!1}}}var Yi=x.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=ui(null),Qi=null,eo=null,to=null;function no(){to=eo=Qi=null}function ro(e){var t=$i.current;ci($i),e.type._context._currentValue=t}function io(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){Qi=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Na=!0),e.firstContext=null)}function ao(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===Qi)throw Error(a(308));eo=t,Qi.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function po(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ho(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fo(e,t,n,r){var o=e.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var p=e.alternate;if(null!==p){var h=(p=p.updateQueue).lastBaseUpdate;h!==s&&(null===h?p.firstBaseUpdate=c:h.next=c,p.lastBaseUpdate=u)}}if(null!==a){for(h=o.baseState,s=0,p=c=u=null;;){l=a.lane;var d=a.eventTime;if((r&l)===l){null!==p&&(p=p.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(l=t,d=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(d,h,l);break e}h=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(l="function"===typeof(f=m.payload)?f.call(d,h,l):f)||void 0===l)break e;h=i({},h,l);break e;case 2:so=!0}}null!==a.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else d={eventTime:d,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===p?(c=p=d,u=h):p=p.next=d,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===p&&(u=h),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=p,Us|=s,e.lanes=s,e.memoizedState=h}}function mo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var go=(new r.Component).refs;function yo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hl(),i=dl(e),o=co(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),po(e,o),fl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hl(),i=dl(e),o=co(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),po(e,o),fl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hl(),r=dl(e),i=co(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),po(e,i),fl(e,r,n)}};function _o(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,o))}function bo(e,t,n){var r=!1,i=hi,o=t.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=yi(t)?mi:di.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?gi(e,i):hi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function xo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=go,lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=yi(t)?mi:di.current,i.context=gi(e,o)),fo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(yo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&vo.enqueueReplaceState(i,i.state,null),fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var So=Array.isArray;function Eo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===go&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Co(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function To(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Yl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Eo(e,t,n),r.return=e,r):((r=Zl(n.type,n.key,n.props,null,e.mode,r)).ref=Eo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=Kl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Zl(t.type,t.key,t.props,null,e.mode,n)).ref=Eo(e,null,t),n.return=e,n;case S:return(t=Jl(t,e.mode,n)).return=e,t}if(So(t)||V(t))return(t=Kl(t,e.mode,n,null)).return=e,t;Co(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===E?p(e,t,n.props.children,r,i):u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null}if(So(n)||V(n))return null!==i?null:p(e,t,n,r,null);Co(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===E?p(t,e,r.props.children,i,r.key):u(t,e,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(So(r)||V(r))return p(t,e=e.get(n)||null,r,i,null);Co(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,p=a,m=a=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,s[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,p=g}if(m===s.length)return n(i,p),u;if(null===p){for(;m<s.length;m++)null!==(p=h(i,s[m],l))&&(a=o(p,a,m),null===c?u=p:c.sibling=p,c=p);return u}for(p=r(i,p);m<s.length;m++)null!==(g=f(p,i,m,s[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),u}function g(i,s,l,u){var c=V(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var p=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=d(i,m,v.value,u);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),s=o(_,s,g),null===p?c=_:p.sibling=_,p=_,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(s=o(v,s,g),null===p?c=v:p.sibling=v,p=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===p?c=v:p.sibling=v,p=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"===typeof o&&null!==o&&o.type===E&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case w:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===E){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Eo(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===E?((r=Kl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Zl(o.type,o.key,o.props,null,e.mode,l)).ref=Eo(e,r,o),l.return=e,e=l)}return s(e);case S:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jl(o,e.mode,l)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Yl(o,e.mode,l)).return=e,e=r),s(e);if(So(o))return m(e,r,o,l);if(V(o))return g(e,r,o,l);if(c&&Co(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,Z(e.type)||"Component"))}return n(e,r)}}var Io=To(!0),ko=To(!1),Po={},Ao=ui(Po),Mo=ui(Po),Oo=ui(Po);function Lo(e){if(e===Po)throw Error(a(174));return e}function Ro(e,t){switch(pi(Oo,t),pi(Mo,e),pi(Ao,Po),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Ao),pi(Ao,t)}function Do(){ci(Ao),ci(Mo),ci(Oo)}function zo(e){Lo(Oo.current);var t=Lo(Ao.current),n=fe(t,e.type);t!==n&&(pi(Mo,e),pi(Ao,n))}function No(e){Mo.current===e&&(ci(Ao),ci(Mo))}var Bo=ui(0);function Fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jo=null,Uo=null,Vo=!1;function qo(e,t){var n=Hl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ho(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wo(e){if(Vo){var t=Uo;if(t){var n=t;if(!Ho(e,t)){if(!(t=Kr(n.nextSibling))||!Ho(e,t))return e.flags=-1025&e.flags|2,Vo=!1,void(jo=e);qo(jo,n)}jo=e,Uo=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,Vo=!1,jo=e}}function Go(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jo=e}function Zo(e){if(e!==jo)return!1;if(!Vo)return Go(e),Vo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Uo;t;)qo(e,t),t=Kr(t.nextSibling);if(Go(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Uo=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Uo=null}}else Uo=jo?Kr(e.stateNode.nextSibling):null;return!0}function Ko(){Uo=jo=null,Vo=!1}var Xo=[];function Yo(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var Jo=x.ReactCurrentDispatcher,$o=x.ReactCurrentBatchConfig,Qo=0,ea=null,ta=null,na=null,ra=!1,ia=!1;function oa(){throw Error(a(321))}function aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function sa(e,t,n,r,i,o){if(Qo=o,ea=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jo.current=null===e||null===e.memoizedState?La:Ra,e=n(r,i),ia){o=0;do{if(ia=!1,!(25>o))throw Error(a(301));o+=1,na=ta=null,t.updateQueue=null,Jo.current=Da,e=n(r,i)}while(ia)}if(Jo.current=Oa,t=null!==ta&&null!==ta.next,Qo=0,na=ta=ea=null,ra=!1,t)throw Error(a(300));return e}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ea.memoizedState=na=e:na=na.next=e,na}function ua(){if(null===ta){var e=ea.alternate;e=null!==e?e.memoizedState:null}else e=ta.next;var t=null===na?ea.memoizedState:na.next;if(null!==t)na=t,ta=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ta=e).memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},null===na?ea.memoizedState=na=e:na=na.next=e}return na}function ca(e,t){return"function"===typeof t?t(e):t}function pa(e){var t=ua(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.lane;if((Qo&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var p={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=p,o=r):l=l.next=p,ea.lanes|=c,Us|=c}u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,cr(r,t.memoizedState)||(Na=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ha(e){var t=ua(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);cr(o,t.memoizedState)||(Na=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function da(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Qo&e)===e)&&(t._workInProgressVersionPrimary=r,Xo.push(t))),e)return n(t._source);throw Xo.push(t),Error(a(350))}function fa(e,t,n,r){var i=Ls;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),l=Jo.current,u=l.useState((function(){return da(i,t,n)})),c=u[1],p=u[0];u=na;var h=e.memoizedState,d=h.refs,f=d.getSnapshot,m=h.source;h=h.subscribe;var g=ea;return e.memoizedState={refs:d,source:t,subscribe:r},l.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var e=o(t._source);if(!cr(s,e)){e=n(t._source),cr(p,e)||(c(e),e=dl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var l=31-Ht(a),u=1<<l;r[l]|=e,a&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=dl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),cr(f,n)&&cr(m,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:p}).dispatch=c=Ma.bind(null,ea,e),u.queue=e,u.baseQueue=null,p=da(i,t,n),u.memoizedState=u.baseState=p),p}function ma(e,t,n){return fa(ua(),e,t,n)}function ga(e){var t=la();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e}).dispatch=Ma.bind(null,ea,e),[t.memoizedState,e]}function ya(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ea.updateQueue)?(t={lastEffect:null},ea.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function va(e){return e={current:e},la().memoizedState=e}function _a(){return ua().memoizedState}function ba(e,t,n,r){var i=la();ea.flags|=e,i.memoizedState=ya(1|t,n,void 0,void 0===r?null:r)}function xa(e,t,n,r){var i=ua();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void ya(t,n,o,r)}ea.flags|=e,i.memoizedState=ya(1|t,n,o,r)}function wa(e,t){return ba(516,4,e,t)}function Sa(e,t){return xa(516,4,e,t)}function Ea(e,t){return xa(4,2,e,t)}function Ca(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ta(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xa(4,2,Ca.bind(null,t,e),n)}function Ia(){}function ka(e,t){var n=ua();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pa(e,t){var n=ua();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Aa(e,t){var n=Hi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=$o.transition;$o.transition=1;try{e(!1),t()}finally{$o.transition=n}}))}function Ma(e,t,n){var r=hl(),i=dl(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ea||null!==a&&a===ea)ia=ra=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,cr(l,s))return}catch(u){}fl(e,i,r)}}var Oa={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},La={readContext:ao,useCallback:function(e,t){return la().memoizedState=[e,void 0===t?null:t],e},useContext:ao,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ba(4,2,Ca.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4,2,e,t)},useMemo:function(e,t){var n=la();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=la();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ma.bind(null,ea,e),[r.memoizedState,e]},useRef:va,useState:ga,useDebugValue:Ia,useDeferredValue:function(e){var t=ga(e),n=t[0],r=t[1];return wa((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=ga(!1),t=e[0];return va(e=Aa.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=la();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fa(r,e,t,n)},useOpaqueIdentifier:function(){if(Vo){var e=!1,t=function(e){return{$$typeof:D,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(a(355))})),n=ga(t)[1];return 0===(2&ea.mode)&&(ea.flags|=516,ya(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return ga(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Ra={readContext:ao,useCallback:ka,useContext:ao,useEffect:Sa,useImperativeHandle:Ta,useLayoutEffect:Ea,useMemo:Pa,useReducer:pa,useRef:_a,useState:function(){return pa(ca)},useDebugValue:Ia,useDeferredValue:function(e){var t=pa(ca),n=t[0],r=t[1];return Sa((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=pa(ca)[0];return[_a().current,e]},useMutableSource:ma,useOpaqueIdentifier:function(){return pa(ca)[0]},unstable_isNewReconciler:!1},Da={readContext:ao,useCallback:ka,useContext:ao,useEffect:Sa,useImperativeHandle:Ta,useLayoutEffect:Ea,useMemo:Pa,useReducer:ha,useRef:_a,useState:function(){return ha(ca)},useDebugValue:Ia,useDeferredValue:function(e){var t=ha(ca),n=t[0],r=t[1];return Sa((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=ha(ca)[0];return[_a().current,e]},useMutableSource:ma,useOpaqueIdentifier:function(){return ha(ca)[0]},unstable_isNewReconciler:!1},za=x.ReactCurrentOwner,Na=!1;function Ba(e,t,n,r){t.child=null===e?ko(t,null,n,r):Io(t,e.child,n,r)}function Fa(e,t,n,r,i){n=n.render;var o=t.ref;return oo(t,i),r=sa(e,t,n,r,o,i),null===e||Na?(t.flags|=1,Ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function ja(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Wl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Zl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ua(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=Gl(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ua(e,t,n,r,i,o){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Na=!1,0===(o&i))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Na=!0)}return Ha(e,t,n,r,o)}function Va(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wl(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wl(t,e),null;t.memoizedState={baseLanes:0},wl(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,wl(t,r);return Ba(e,t,i,n),t.child}function qa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ha(e,t,n,r,i){var o=yi(n)?mi:di.current;return o=gi(t,o),oo(t,i),n=sa(e,t,n,r,o,i),null===e||Na?(t.flags|=1,Ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Wa(e,t,n,r,i){if(yi(n)){var o=!0;xi(t)}else o=!1;if(oo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,r),wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=ao(u):u=gi(t,u=yi(n)?mi:di.current);var c=n.getDerivedStateFromProps,p="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;p||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&xo(t,a,r,u),so=!1;var h=t.memoizedState;a.state=h,fo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||fi.current||so?("function"===typeof c&&(yo(t,n,c,r),l=t.memoizedState),(s=so||_o(t,n,s,r,h,l,u))?(p||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,uo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ji(t.type,s),a.props=u,p=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ao(l):l=gi(t,l=yi(n)?mi:di.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==p||h!==l)&&xo(t,a,r,l),so=!1,h=t.memoizedState,a.state=h,fo(t,r,a,i);var f=t.memoizedState;s!==p||h!==f||fi.current||so?("function"===typeof d&&(yo(t,n,d,r),f=t.memoizedState),(u=so||_o(t,n,u,r,h,f,l))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ga(e,t,n,r,o,i)}function Ga(e,t,n,r,i,o){qa(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&wi(t,n,!1),os(e,t,o);r=t.stateNode,za.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Io(t,e.child,null,o),t.child=Io(t,null,s,o)):Ba(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Za(e){var t=e.stateNode;t.pendingContext?_i(0,t.pendingContext,t.pendingContext!==t.context):t.context&&_i(0,t.context,!1),Ro(e,t.containerInfo)}var Ka,Xa,Ya,Ja={dehydrated:null,retryLane:0};function $a(e,t,n){var r,i=t.pendingProps,o=Bo.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),pi(Bo,1&o),null===e?(void 0!==i.fallback&&Wo(t),e=i.children,o=i.fallback,a?(e=Qa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ja,e):"number"===typeof i.unstable_expectedLoadTime?(e=Qa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ja,t.lanes=33554432,e):((n=Xl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=ts(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ja,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Qa(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Xl(t,i,0,null),n=Kl(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Gl(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gl(a,s),null!==e?r=Gl(e,r):(r=Kl(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),io(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ba(e,t,r.children,n),0!==(2&(r=Bo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pi(Bo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Gl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!Vo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return yi(t.type)&&vi(),null;case 3:return Do(),ci(fi),ci(di),Yo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Zo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:No(t);var o=Lo(Oo.current);if(n=t.type,null!==e&&null!=t.stateNode)Xa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Lo(Ao.current),Zo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[$r]=t,r[Qr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":le(r,s),Ar("invalid",r)}for(var u in Ee(n,s),e=null,s)s.hasOwnProperty(u)&&(o=s[u],"children"===u?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===pe&&(e=de(n)),e===pe?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[$r]=t,e[Qr]=r,Ka(e,t),t.stateNode=e,u=Ce(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),o=r;break;case"iframe":case"object":case"embed":Ar("load",e),o=r;break;case"video":case"audio":for(o=0;o<Tr.length;o++)Ar(Tr[o],e);o=r;break;case"source":Ar("error",e),o=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),o=r;break;case"details":Ar("toggle",e),o=r;break;case"input":ee(e,r),o=Q(e,r),Ar("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":le(e,r),o=se(e,r),Ar("invalid",e);break;default:o=r}Ee(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var p=c[s];"style"===s?we(e,p):"dangerouslySetInnerHTML"===s?null!=(p=p?p.__html:void 0)&&ye(e,p):"children"===s?"string"===typeof p?("textarea"!==n||""!==p)&&ve(e,p):"number"===typeof p&&ve(e,""+p):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=p&&"onScroll"===s&&Ar("scroll",e):null!=p&&b(e,s,p,u))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=jr)}qr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ya(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Lo(Oo.current),Lo(Ao.current),Zo(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return ci(Bo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Zo(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Bo.current)?0===Bs&&(Bs=3):(0!==Bs&&3!==Bs||(Bs=4),null===Ls||0===(134217727&Us)&&0===(134217727&Vs)||vl(Ls,Ds))),(r||n)&&(t.flags|=4),null);case 4:return Do(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 17:return yi(t.type)&&vi(),null;case 19:if(ci(Bo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(u=r.rendering))if(s)as(r,!1);else{if(0!==Bs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Fo(e))){for(t.flags|=64,as(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pi(Bo,1&Bo.current|2),t.child}e=e.sibling}null!==r.tail&&qi()>Gs&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Fo(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Vo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=Bo.current,pi(Bo,s?1&t|2:1&t),n):null;case 23:case 24:return Sl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function ls(e){switch(e.tag){case 1:yi(e.type)&&vi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Do(),ci(fi),ci(di),Yo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return No(e),null;case 13:return ci(Bo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Bo),null;case 4:return Do(),null;case 10:return ro(e),null;case 23:case 24:return Sl(),null;default:return null}}function us(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ka=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Lo(Ao.current);var a,s=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(p in Ee(n,r),n=null,o)if(!r.hasOwnProperty(p)&&o.hasOwnProperty(p)&&null!=o[p])if("style"===p){var u=o[p];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==p&&"children"!==p&&"suppressContentEditableWarning"!==p&&"suppressHydrationWarning"!==p&&"autoFocus"!==p&&(l.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var c=r[p];if(u=null!=o?o[p]:void 0,r.hasOwnProperty(p)&&c!==u&&(null!=c||null!=u))if("style"===p)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(p,n)),n=c;else"dangerouslySetInnerHTML"===p?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(p,c)):"children"===p?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(p,""+c):"suppressContentEditableWarning"!==p&&"suppressHydrationWarning"!==p&&(l.hasOwnProperty(p)?(null!=c&&"onScroll"===p&&Ar("scroll",e),s||u===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===D?c.toString():(s=s||[]).push(p,c))}n&&(s=s||[]).push("style",n);var p=s;(t.updateQueue=p)&&(t.flags|=4)}},Ya=function(e,t,n,r){n!==r&&(t.flags|=4)};var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=co(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,Js=r),cs(0,t)},n}function ds(e,t,n){(n=co(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return cs(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$s?$s=new Set([this]):$s.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fs="function"===typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){jl(e,n)}else t.current=null}function gs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Zr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Nl(n,e),zl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&mo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}mo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&qr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function vs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xe("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function _s(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(Si,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Nl(t,n);else{r=t;try{i()}catch(o){jl(r,o)}}n=n.next}while(n!==e)}break;case 1:if(ms(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){jl(t,o)}break;case 5:ms(t);break;case 4:Cs(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xs(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(xs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):Es(e,n,t)}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Cs(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,l=i,u=l;;)if(_s(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,l=i.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(_s(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ce(e,i),t=Ce(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?we(n,l):"dangerouslySetInnerHTML"===s?ye(n,l):"children"===s?ve(n,l):b(n,s,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Ws=qi(),vs(t.child,!0)),void Is(t);case 19:return void Is(t);case 17:return;case 23:case 24:return void vs(t,null!==t.memoizedState)}throw Error(a(163))}function Is(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fs),t.forEach((function(t){var r=Vl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ks(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ps=Math.ceil,As=x.ReactCurrentDispatcher,Ms=x.ReactCurrentOwner,Os=0,Ls=null,Rs=null,Ds=0,zs=0,Ns=ui(0),Bs=0,Fs=null,js=0,Us=0,Vs=0,qs=0,Hs=null,Ws=0,Gs=1/0;function Zs(){Gs=qi()+500}var Ks,Xs=null,Ys=!1,Js=null,$s=null,Qs=!1,el=null,tl=90,nl=[],rl=[],il=null,ol=0,al=null,sl=-1,ll=0,ul=0,cl=null,pl=!1;function hl(){return 0!==(48&Os)?qi():-1!==sl?sl:sl=qi()}function dl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Hi()?1:2;if(0===ll&&(ll=js),0!==Yi.transition){0!==ul&&(ul=null!==Hs?Hs.pendingLanes:0),e=ll;var t=4186112&~ul;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!==(4&Os)&&98===e?e=jt(12,ll):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function fl(e,t,n){if(50<ol)throw ol=0,al=null,Error(a(185));if(null===(e=ml(e,t)))return null;qt(e,t,n),e===Ls&&(Vs|=t,4===Bs&&vl(e,Ds));var r=Hi();1===t?0!==(8&Os)&&0===(48&Os)?_l(e):(gl(e,n),0===Os&&(Zs(),Ki())):(0===(4&Os)||98!==r&&99!==r||(null===il?il=new Set([e]):il.add(e)),gl(e,n)),Hs=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Ht(s),u=1<<l,c=o[l];if(-1===c){if(0===(u&r)||0!==(u&i)){c=t,Nt(u);var p=zt;o[l]=10<=p?c+250:6<=p?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(r=Bt(e,e===Ls?Ds:0),t=zt,0===r)null!==n&&(n!==Ni&&Ii(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ni&&Ii(n)}15===t?(n=_l.bind(null,e),null===Fi?(Fi=[n],ji=Ti(Oi,Xi)):Fi.push(n),n=Ni):14===t?n=Zi(99,_l.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Zi(n,yl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yl(e){if(sl=-1,ul=ll=0,0!==(48&Os))throw Error(a(327));var t=e.callbackNode;if(Dl()&&e.callbackNode!==t)return null;var n=Bt(e,e===Ls?Ds:0);if(0===n)return null;var r=n,i=Os;Os|=16;var o=Tl();for(Ls===e&&Ds===r||(Zs(),El(e,r));;)try{Pl();break}catch(l){Cl(e,l)}if(no(),As.current=o,Os=i,null!==Rs?r=0:(Ls=null,Ds=0,r=Bs),0!==(js&Vs))El(e,0);else if(0!==r){if(2===r&&(Os|=64,e.hydrate&&(e.hydrate=!1,Zr(e.containerInfo)),0!==(n=Ft(e))&&(r=Il(e,n))),1===r)throw t=Fs,El(e,0),vl(e,n),gl(e,qi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Ol(e);break;case 3:if(vl(e,n),(62914560&n)===n&&10<(r=Ws+500-qi())){if(0!==Bt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Ol.bind(null,e),r);break}Ol(e);break;case 4:if(vl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=qi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ps(n/1960))-n)){e.timeoutHandle=Wr(Ol.bind(null,e),n);break}Ol(e);break;case 5:Ol(e);break;default:throw Error(a(329))}}return gl(e,qi()),e.callbackNode===t?yl.bind(null,e):null}function vl(e,t){for(t&=~qs,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function _l(e){if(0!==(48&Os))throw Error(a(327));if(Dl(),e===Ls&&0!==(e.expiredLanes&Ds)){var t=Ds,n=Il(e,t);0!==(js&Vs)&&(n=Il(e,t=Bt(e,t)))}else n=Il(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Os|=64,e.hydrate&&(e.hydrate=!1,Zr(e.containerInfo)),0!==(t=Ft(e))&&(n=Il(e,t))),1===n)throw n=Fs,El(e,0),vl(e,t),gl(e,qi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ol(e),gl(e,qi()),null}function bl(e,t){var n=Os;Os|=1;try{return e(t)}finally{0===(Os=n)&&(Zs(),Ki())}}function xl(e,t){var n=Os;Os&=-2,Os|=8;try{return e(t)}finally{0===(Os=n)&&(Zs(),Ki())}}function wl(e,t){pi(Ns,zs),zs|=t,js|=t}function Sl(){zs=Ns.current,ci(Ns)}function El(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Do(),ci(fi),ci(di),Yo();break;case 5:No(r);break;case 4:Do();break;case 13:case 19:ci(Bo);break;case 10:ro(r);break;case 23:case 24:Sl()}n=n.return}Ls=e,Rs=Gl(e.current,null),Ds=zs=js=t,Bs=0,Fs=null,qs=Vs=Us=0}function Cl(e,t){for(;;){var n=Rs;try{if(no(),Jo.current=Oa,ra){for(var r=ea.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ra=!1}if(Qo=0,na=ta=ea=null,ia=!1,Ms.current=null,null===n||null===n.return){Bs=1,Fs=t,Rs=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Ds,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var p=0!==(1&Bo.current),h=a;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var m=h.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!p)}}if(d){var g=h.updateQueue;if(null===g){var y=new Set;y.add(u),h.updateQueue=y}else g.add(u);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=co(-1,1);v.tag=2,po(s,v)}s.lanes|=1;break e}l=void 0,s=t;var _=o.pingCache;if(null===_?(_=o.pingCache=new ps,l=new Set,_.set(u,l)):void 0===(l=_.get(u))&&(l=new Set,_.set(u,l)),!l.has(s)){l.add(s);var b=Ul.bind(null,o,u,s);u.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((Z(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Bs&&(Bs=2),l=us(l,s),h=a;do{switch(h.tag){case 3:o=l,h.flags|=4096,t&=-t,h.lanes|=t,ho(h,hs(0,o,t));break e;case 1:o=l;var x=h.type,w=h.stateNode;if(0===(64&h.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===$s||!$s.has(w)))){h.flags|=4096,t&=-t,h.lanes|=t,ho(h,ds(h,o,t));break e}}h=h.return}while(null!==h)}Ml(n)}catch(S){t=S,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function Tl(){var e=As.current;return As.current=Oa,null===e?Oa:e}function Il(e,t){var n=Os;Os|=16;var r=Tl();for(Ls===e&&Ds===t||El(e,t);;)try{kl();break}catch(i){Cl(e,i)}if(no(),Os=n,As.current=r,null!==Rs)throw Error(a(261));return Ls=null,Ds=0,Bs}function kl(){for(;null!==Rs;)Al(Rs)}function Pl(){for(;null!==Rs&&!ki();)Al(Rs)}function Al(e){var t=Ks(e.alternate,e,zs);e.memoizedProps=e.pendingProps,null===t?Ml(e):Rs=t,Ms.current=null}function Ml(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,zs)))return void(Rs=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&zs)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ls(t)))return n.flags&=2047,void(Rs=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Bs&&(Bs=5)}function Ol(e){var t=Hi();return Gi(99,Ll.bind(null,e,t)),null}function Ll(e,t){do{Dl()}while(null!==el);if(0!==(48&Os))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<o;){var u=31-Ht(o),c=1<<u;i[u]=0,s[u]=-1,l[u]=-1,o&=~c}if(null!==il&&0===(24&r)&&il.has(e)&&il.delete(e),e===Ls&&(Rs=Ls=null,Ds=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Os,Os|=32,Ms.current=null,Ur=Xt,yr(s=gr())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(T){l=null;break e}var p=0,h=-1,d=-1,f=0,m=0,g=s,y=null;t:for(;;){for(var v;g!==l||0!==o&&3!==g.nodeType||(h=p+o),g!==u||0!==c&&3!==g.nodeType||(d=p+c),3===g.nodeType&&(p+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===s)break t;if(y===l&&++f===o&&(h=p),y===u&&++m===c&&(d=p),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}l=-1===h||-1===d?null:{start:h,end:d}}else l=null;l=l||{start:0,end:0}}else l=null;Vr={focusedElem:s,selectionRange:l},Xt=!1,cl=null,pl=!1,Xs=r;do{try{Rl()}catch(T){if(null===Xs)throw Error(a(330));jl(Xs,T),Xs=Xs.nextEffect}}while(null!==Xs);cl=null,Xs=r;do{try{for(s=e;null!==Xs;){var _=Xs.flags;if(16&_&&ve(Xs.stateNode,""),128&_){var b=Xs.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:ws(Xs),Xs.flags&=-3;break;case 6:ws(Xs),Xs.flags&=-3,Ts(Xs.alternate,Xs);break;case 1024:Xs.flags&=-1025;break;case 1028:Xs.flags&=-1025,Ts(Xs.alternate,Xs);break;case 4:Ts(Xs.alternate,Xs);break;case 8:Cs(s,l=Xs);var w=l.alternate;bs(l),null!==w&&bs(w)}Xs=Xs.nextEffect}}catch(T){if(null===Xs)throw Error(a(330));jl(Xs,T),Xs=Xs.nextEffect}}while(null!==Xs);if(x=Vr,b=gr(),_=x.focusedElem,s=x.selectionRange,b!==_&&_&&_.ownerDocument&&mr(_.ownerDocument.documentElement,_)){null!==s&&yr(_)&&(b=s.start,void 0===(x=s.end)&&(x=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(x,_.value.length)):(x=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),l=_.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!x.extend&&w>s&&(l=s,s=w,w=l),l=fr(_,w),o=fr(_,s),l&&o&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),w>s?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=_;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(x=b[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Xt=!!Ur,Vr=Ur=null,e.current=n,Xs=r;do{try{for(_=e;null!==Xs;){var S=Xs.flags;if(36&S&&ys(_,Xs.alternate,Xs),128&S){b=void 0;var E=Xs.ref;if(null!==E){var C=Xs.stateNode;Xs.tag,b=C,"function"===typeof E?E(b):E.current=b}}Xs=Xs.nextEffect}}catch(T){if(null===Xs)throw Error(a(330));jl(Xs,T),Xs=Xs.nextEffect}}while(null!==Xs);Xs=null,Bi(),Os=i}else e.current=n;if(Qs)Qs=!1,el=e,tl=t;else for(Xs=r;null!==Xs;)t=Xs.nextEffect,Xs.nextEffect=null,8&Xs.flags&&((S=Xs).sibling=null,S.stateNode=null),Xs=t;if(0===(r=e.pendingLanes)&&($s=null),1===r?e===al?ol++:(ol=0,al=e):ol=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(Si,n,void 0,64===(64&n.current.flags))}catch(T){}if(gl(e,qi()),Ys)throw Ys=!1,e=Js,Js=null,e;return 0!==(8&Os)||Ki(),null}function Rl(){for(;null!==Xs;){var e=Xs.alternate;pl||null===cl||(0!==(8&Xs.flags)?et(Xs,cl)&&(pl=!0):13===Xs.tag&&ks(e,Xs)&&et(Xs,cl)&&(pl=!0));var t=Xs.flags;0!==(256&t)&&gs(e,Xs),0===(512&t)||Qs||(Qs=!0,Zi(97,(function(){return Dl(),null}))),Xs=Xs.nextEffect}}function Dl(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Gi(e,Bl)}return!1}function zl(e,t){nl.push(t,e),Qs||(Qs=!0,Zi(97,(function(){return Dl(),null})))}function Nl(e,t){rl.push(t,e),Qs||(Qs=!0,Zi(97,(function(){return Dl(),null})))}function Bl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Os))throw Error(a(331));var t=Os;Os|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===o)throw Error(a(330));jl(o,u)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(u){if(null===o)throw Error(a(330));jl(o,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Os=t,Ki(),!0}function Fl(e,t,n){po(e,t=hs(0,t=us(n,t),1)),t=hl(),null!==(e=ml(e,1))&&(qt(e,1,t),gl(e,t))}function jl(e,t){if(3===e.tag)Fl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Fl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r))){var i=ds(n,e=us(t,e),1);if(po(n,i),i=hl(),null!==(n=ml(n,1)))qt(n,1,i),gl(n,i);else if("function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Ul(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hl(),e.pingedLanes|=e.suspendedLanes&n,Ls===e&&(Ds&n)===n&&(4===Bs||3===Bs&&(62914560&Ds)===Ds&&500>qi()-Ws?El(e,0):qs|=n),gl(e,t)}function Vl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Hi()?1:2:(0===ll&&(ll=js),0===(t=Ut(62914560&~ll))&&(t=4194304))),n=hl(),null!==(e=ml(e,t))&&(qt(e,t,n),gl(e,n))}function ql(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(e,t,n,r){return new ql(e,t,n,r)}function Wl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gl(e,t){var n=e.alternate;return null===n?((n=Hl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zl(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Wl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Kl(n.children,i,o,t);case z:s=8,i|=16;break;case C:s=8,i|=1;break;case T:return(e=Hl(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=o,e;case A:return(e=Hl(13,n,t,i)).type=A,e.elementType=A,e.lanes=o,e;case M:return(e=Hl(19,n,t,i)).elementType=M,e.lanes=o,e;case N:return Xl(n,i,o,t);case B:return(e=Hl(24,n,t,i)).elementType=B,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case k:s=9;break e;case P:s=11;break e;case O:s=14;break e;case L:s=16,r=null;break e;case R:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Hl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Kl(e,t,n,r){return(e=Hl(7,e,r,t)).lanes=n,e}function Xl(e,t,n,r){return(e=Hl(23,e,r,t)).elementType=N,e.lanes=n,e}function Yl(e,t,n){return(e=Hl(6,e,null,t)).lanes=n,e}function Jl(e,t,n){return(t=Hl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $l(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Ql(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function eu(e,t,n,r){var i=t.current,o=hl(),s=dl(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(yi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(yi(u)){n=bi(n,u,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),po(i,t),fl(i,s,o),s}function tu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ru(e,t){nu(e,t),(e=e.alternate)&&nu(e,t)}function iu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $l(e,t,null!=n&&!0===n.hydrate),t=Hl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,lo(t),e[ei]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ou(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function au(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tu(a);s.call(e)}}eu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new iu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var l=i;i=function(){var e=tu(a);l.call(e)}}xl((function(){eu(t,a,e,i)}))}return tu(a)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ou(t))throw Error(a(200));return Ql(e,t,null,n)}Ks=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Na=!0;else{if(0===(n&r)){switch(Na=!1,t.tag){case 3:Za(t),Ko();break;case 5:zo(t);break;case 1:yi(t.type)&&xi(t);break;case 4:Ro(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;pi($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$a(e,t,n):(pi(Bo,1&Bo.current),null!==(t=os(e,t,n))?t.sibling:null);pi(Bo,1&Bo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),pi(Bo,Bo.current),r)break;return null;case 23:case 24:return t.lanes=0,Va(e,t,n)}return os(e,t,n)}Na=0!==(16384&e.flags)}else Na=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,di.current),oo(t,n),i=sa(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var o=!0;xi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,lo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&yo(t,r,s,e),i.updater=vo,t.stateNode=i,i._reactInternals=t,wo(t,r,e,n),t=Ga(null,t,r,!0,o,n)}else t.tag=0,Ba(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Wl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===O)return 14}return 2}(i),e=Ji(i,e),o){case 0:t=Ha(null,t,i,e,n);break e;case 1:t=Wa(null,t,i,e,n);break e;case 11:t=Fa(null,t,i,e,n);break e;case 14:t=ja(null,t,i,Ji(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ha(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wa(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Za(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,uo(e,t),fo(t,r,null,n),(r=t.memoizedState.element)===i)Ko(),t=os(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Uo=Kr(t.stateNode.containerInfo.firstChild),jo=t,o=Vo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Xo.push(o);for(n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ba(e,t,r,n),Ko();t=t.child}return t;case 5:return zo(t),null===e&&Wo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Hr(r,i)?s=null:null!==o&&Hr(r,o)&&(t.flags|=16),qa(e,t),Ba(e,t,s,n),t.child;case 6:return null===e&&Wo(t),null;case 13:return $a(e,t,n);case 4:return Ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Io(t,null,r,n):Ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(pi($i,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=cr(l,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!fi.current){t=os(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===l.tag&&((c=co(-1,n&-n)).tag=2,po(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),io(l.return,n),u.lanes|=n;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(i=ao(i,o.unstable_observedBits)),t.flags|=1,Ba(e,t,r,n),t.child;case 14:return o=Ji(i=t.type,t.pendingProps),ja(e,t,i,o=Ji(i.type,o),r,n);case 15:return Ua(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,xi(t)):e=!1,oo(t,n),bo(t,r,i),wo(t,r,i,n),Ga(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Va(e,t,n)}throw Error(a(156,t.tag))},iu.prototype.render=function(e){eu(e,this._internalRoot,null,null)},iu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;eu(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(fl(e,4,hl()),ru(e,4))},nt=function(e){13===e.tag&&(fl(e,67108864,hl()),ru(e,67108864))},rt=function(e){if(13===e.tag){var t=hl(),n=dl(e);fl(e,n,t),ru(e,n)}},it=function(e,t){return t()},Ie=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oi(r);if(!i)throw Error(a(90));J(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Le=bl,Re=function(e,t,n,r,i){var o=Os;Os|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Os=o)&&(Zs(),Ki())}},De=function(){0===(49&Os)&&(function(){if(null!==il){var e=il;il=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gl(e,qi())}))}Ki()}(),Dl())},ze=function(e,t){var n=Os;Os|=2;try{return e(t)}finally{0===(Os=n)&&(Zs(),Ki())}};var lu={Events:[ri,ii,oi,Me,Oe,Dl,{current:!1}]},uu={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{Si=pu.inject(cu),Ei=pu}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Os;if(0!==(48&n))return e(t);Os|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Os=n,Ki()}},t.hydrate=function(e,t,n){if(!ou(t))throw Error(a(200));return au(null,e,t,!0,n)},t.render=function(e,t,n){if(!ou(t))throw Error(a(200));return au(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ou(e))throw Error(a(40));return!!e._reactRootContainer&&(xl((function(){au(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bl,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ou(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return au(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(89)},function(e,t,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,p=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(h,0))},i=function(e,t){p=setTimeout(e,t)},o=function(){clearTimeout(p)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,y=null,v=-1,_=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();b=e+_;try{y(!0,e)?w.postMessage(null):(g=!1,y=null)}catch(n){throw w.postMessage(null),n}}else g=!1},r=function(e){y=e,g||(g=!0,w.postMessage(null))},i=function(e,n){v=d((function(){e(t.unstable_now())}),n)},o=function(){f(v),v=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function C(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>T(a,n))void 0!==l&&0>T(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>T(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],k=[],P=1,A=null,M=3,O=!1,L=!1,R=!1;function D(e){for(var t=E(k);null!==t;){if(null===t.callback)C(k);else{if(!(t.startTime<=e))break;C(k),t.sortIndex=t.expirationTime,S(I,t)}t=E(k)}}function z(e){if(R=!1,D(e),!L)if(null!==E(I))L=!0,r(N);else{var t=E(k);null!==t&&i(z,t.startTime-e)}}function N(e,n){L=!1,R&&(R=!1,o()),O=!0;var r=M;try{for(D(n),A=E(I);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=A.callback;if("function"===typeof a){A.callback=null,M=A.priorityLevel;var s=a(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?A.callback=s:A===E(I)&&C(I),D(n)}else C(I);A=E(I)}if(null!==A)var l=!0;else{var u=E(k);null!==u&&i(z,u.startTime-n),l=!1}return l}finally{A=null,M=r,O=!1}}var B=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||O||(L=!0,r(N))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return E(I)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:P++,callback:n,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,S(k,e),null===E(I)&&e===E(k)&&(R?o():R=!0,i(z,a-s))):(e.sortIndex=l,S(I,e),L||O||(L=!0,r(N))),e},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},,function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(M){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new k(r||[]);return o._invoke=function(e,t,n){var r=p;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var l=c(e,t,n);if("normal"===l.type){if(r=n.done?f:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=f,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var p="suspendedStart",h="suspendedYield",d="executing",f="completed",m={};function g(){}function y(){}function v(){}var _={};l(_,o,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(P([])));x&&x!==n&&r.call(x,o)&&(_=x);var w=v.prototype=g.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,o,a,s){var l=c(e[i],e,o);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"===typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=v,l(w,"constructor",v),l(v,"constructor",y),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(E.prototype),l(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=n(16),i=n(52),o=n(95),a=n(58);var s=function e(t){var n=new o(t),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n(34));s.Axios=o,s.Cancel=n(35),s.CancelToken=n(108),s.isCancel=n(57),s.VERSION=n(59).version,s.all=function(e){return Promise.all(e)},s.spread=n(109),s.isAxiosError=n(110),e.exports=s,e.exports.default=s},function(e,t,n){"use strict";var r=n(16),i=n(53),o=n(96),a=n(97),s=n(58),l=n(107),u=l.validators;function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var c=[a,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(o),i=Promise.resolve(e);c.length;)i=i.then(c.shift(),c.shift());return i}for(var p=e;n.length;){var h=n.shift(),d=n.shift();try{p=h(p)}catch(f){d(f);break}}try{i=a(p)}catch(f){return Promise.reject(f)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},c.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(16);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(16),i=n(98),o=n(57),a=n(34),s=n(35);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return l(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(l(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(16),i=n(34);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},function(e,t,n){"use strict";var r=n(16);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(56);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(16);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(103),i=n(104);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(16),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(16);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(59).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],l=void 0===s||a(s,o,e);if(!0!==l)throw new TypeError("option "+o+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},function(e,t,n){"use strict";var r=n(35);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},function(e,t,n){"use strict";n(47);var r=n(0),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n(38),i=n(19),o=n(22);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(e,Object(i.a)())}function s(e,t){var n=e instanceof Array?e:[e],i=Object(r.a)(n),a=i.classes,s=i.objects;return s.length&&a.push(Object(o.c)(t||{},s)),a.join(" ")}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(40),i=n(38),o=n(19),a=n(22);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l(e,Object(o.a)())}function l(e,t){var n={subComponentStyles:{}};if(!e[0]&&e.length<=1)return{subComponentStyles:{}};var o=r.a.apply(void 0,e),s=[];for(var l in o)if(o.hasOwnProperty(l)){if("subComponentStyles"===l){n.subComponentStyles=o.subComponentStyles||{};continue}var u=o[l],c=Object(i.a)(u),p=c.classes,h=c.objects;if(null===h||void 0===h?void 0:h.length)(m=Object(a.d)(t||{},{displayName:l},h))&&(s.push(m),n[l]=p.concat([m.className]).join(" "));else n[l]=p.join(" ")}for(var d=0,f=s;d<f.length;d++){var m;(m=f[d])&&Object(a.a)(m,null===t||void 0===t?void 0:t.specificityMultiplier)}return n}},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];if(o)if("string"===typeof o)n.push(o);else if(o.hasOwnProperty("toString")&&"function"===typeof o.toString)n.push(o.toString());else for(var a in o)o[a]&&n.push(a)}return n.join(" ")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(0),i=r.createContext({window:"object"===typeof window?window:void 0}),o=function(){return r.useContext(i).window},a=function(){var e;return null===(e=r.useContext(i).window)||void 0===e?void 0:e.document}},function(e,t,n){"use strict";function r(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}n.d(t,"a",(function(){return r}))},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(40);function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o];s&&i.push("function"===typeof s?s(e):s)}return 1===i.length?i[0]:i.length?r.a.apply(void 0,i):{}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(14),i=n(114),o=n(63),a=n(6),s=0,l=r.a.getInstance();l&&l.onReset&&l.onReset((function(){return s++}));var u="__retval__";function c(e){void 0===e&&(e={});var t=new Map,n=0,r=0,l=s;return function(c,p){var d;if(void 0===p&&(p={}),e.useStaticStyles&&"function"===typeof c&&c.__noStyleOverride__)return c(p);r++;var f=t,m=p.theme,g=m&&void 0!==m.rtl?m.rtl:Object(o.a)(),y=e.disableCaching;if(l!==s&&(l=s,t=new Map,n=0),e.disableCaching||(f=h(t,c),f=h(f,p)),!y&&f[u]||(f[u]=void 0===c?{}:Object(i.a)(["function"===typeof c?c(p):c],{rtl:!!g,specificityMultiplier:e.useStaticStyles?5:void 0}),y||n++),n>(e.cacheSize||50)){var v=Object(a.a)();(null===(d=null===v||void 0===v?void 0:v.FabricConfig)||void 0===d?void 0:d.enableClassNameCacheFullWarning)&&(console.warn("Styles are being recalculated too frequently. Cache miss rate is "+n+"/"+r+"."),console.trace()),t.clear(),n=0,e.disableCaching=!0}return f[u]}}function p(e,t){return t=function(e){switch(e){case void 0:return"__undefined__";case null:return"__null__";default:return e}}(t),e.has(t)||e.set(t,new Map),e.get(t)}function h(e,t){if("function"===typeof t)if(t.__cachedInputs__)for(var n=0,r=t.__cachedInputs__;n<r.length;n++){e=p(e,r[n])}else e=p(e,t);else if("object"===typeof t)for(var i in t)t.hasOwnProperty(i)&&(e=p(e,t[i]));return e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var r,i=n(12),o=n(113),a=n(6),s=(Object(o.b)({overflow:"hidden !important"}),"data-is-scrollable");function l(){if(void 0===r){var e=document.createElement("div");e.style.setProperty("width","100px"),e.style.setProperty("height","100px"),e.style.setProperty("overflow","scroll"),e.style.setProperty("position","absolute"),e.style.setProperty("top","-9999px"),document.body.appendChild(e),r=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return r}function u(e){for(var t=e,n=Object(i.a)(e);t&&t!==n.body;){if("true"===t.getAttribute(s))return t;t=t.parentElement}for(t=e;t&&t!==n.body;){if("false"!==t.getAttribute(s)){var r=getComputedStyle(t),o=r?r.getPropertyValue("overflow-y"):"";if(o&&("scroll"===o||"auto"===o))return t}t=t.parentElement}return t&&t!==n.body||(t=Object(a.a)(e)),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(7);function i(e,t){for(var n=Object(r.a)({},t),i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];void 0===n[a]&&(n[a]=e[a])}return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),i=n(0),o=n(116);function a(e,t){var n=i.useRef(),a=i.useRef(null),s=Object(o.c)();if(!e||e!==n.current||"string"===typeof e){var l=null===t||void 0===t?void 0:t.current;if(e)if("string"===typeof e){var u=Object(r.a)(l);a.current=u?u.querySelector(e):null}else a.current="stopPropagation"in e||"getBoundingClientRect"in e?e:"current"in e?e.current:e;n.current=e}return[a,s]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(117),i=n(0);function o(e,t,n,o){var a=i.useRef(n);a.current=n,i.useEffect((function(){var n=e&&"current"in e?e.current:e;if(n)return Object(r.a)(n,t,(function(e){return a.current(e)}),o)}),[e,t,o])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(43);function i(e,t,n){void 0===n&&(n=!0);var i=!1;if(e&&t)if(n)if(e===t)i=!0;else for(i=!1;t;){var o=Object(r.a)(t);if(o===e){i=!0;break}t=o}else e.contains&&(i=e.contains(t));return i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(65);function o(e,t){var n=r.useRef(t);return n.current||(n.current=Object(i.a)(e)),n.current}},function(e,t,n){"use strict";n.d(t,"a",(function(){return zt}));var r=n(1),i=n(0),o=n(7),a=n(64),s=n(67);n(31);!function(e){function t(n,r){var i=e.call(this,n,r)||this;return function(e,t,n){for(var r=0,i=n.length;r<i;r++)l(e,t,n[r])}(i,t.prototype,["componentDidMount","shouldComponentUpdate","getSnapshotBeforeUpdate","render","componentDidUpdate","componentWillUnmount"]),i}Object(o.b)(t,e),t.prototype.componentDidUpdate=function(e,t){this._updateComponentRef(e,this.props)},t.prototype.componentDidMount=function(){this._setComponentRef(this.props.componentRef,this)},t.prototype.componentWillUnmount=function(){if(this._setComponentRef(this.props.componentRef,null),this.__disposables){for(var e=0,t=this._disposables.length;e<t;e++){var n=this.__disposables[e];n.dispose&&n.dispose()}this.__disposables=null}},Object.defineProperty(t.prototype,"className",{get:function(){if(!this.__className){var e=/function (.{1,})\(/.exec(this.constructor.toString());this.__className=e&&e.length>1?e[1]:""}return this.__className},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_disposables",{get:function(){return this.__disposables||(this.__disposables=[]),this.__disposables},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_async",{get:function(){return this.__async||(this.__async=new a.a(this),this._disposables.push(this.__async)),this.__async},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_events",{get:function(){return this.__events||(this.__events=new s.a(this),this._disposables.push(this.__events)),this.__events},enumerable:!1,configurable:!0}),t.prototype._resolveRef=function(e){var t=this;return this.__resolves||(this.__resolves={}),this.__resolves[e]||(this.__resolves[e]=function(n){return t[e]=n}),this.__resolves[e]},t.prototype._updateComponentRef=function(e,t){void 0===t&&(t={}),e&&t&&e.componentRef!==t.componentRef&&(this._setComponentRef(e.componentRef,null),this._setComponentRef(t.componentRef,this))},t.prototype._warnDeprecations=function(e){this.className,this.props},t.prototype._warnMutuallyExclusive=function(e){this.className,this.props},t.prototype._warnConditionallyRequiredProps=function(e,t,n){this.className,this.props},t.prototype._setComponentRef=function(e,t){!this._skipComponentRefResolution&&e&&("function"===typeof e&&e(t),"object"===typeof e&&(e.current=t))}}(i.Component);function l(e,t,n){var r=e[n],i=t[n];(r||i)&&(e[n]=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i&&(e=i.apply(this,t)),r!==i&&(e=r.apply(this,t)),e})}function u(){return null}var c=n(18);function p(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var h=n(27),d=n(40);function f(e,t,n){return function(r){var a,s=((a=function(a){function s(e){var t=a.call(this,e)||this;return t._styleCache={},t._onSettingChanged=t._onSettingChanged.bind(t),t}return Object(o.b)(s,a),s.prototype.componentDidMount=function(){c.a.observe(this._onSettingChanged)},s.prototype.componentWillUnmount=function(){c.a.unobserve(this._onSettingChanged)},s.prototype.render=function(){var a=this;return i.createElement(h.a.Consumer,null,(function(s){var l=c.a.getSettings(t,e,s.customizations),u=a.props;if(l.styles&&"function"===typeof l.styles&&(l.styles=l.styles(Object(o.a)(Object(o.a)({},l),u))),n&&l.styles){if(a._styleCache.default!==l.styles||a._styleCache.component!==u.styles){var p=Object(d.a)(l.styles,u.styles);a._styleCache.default=l.styles,a._styleCache.component=u.styles,a._styleCache.merged=p}return i.createElement(r,Object(o.a)({},l,u,{styles:a._styleCache.merged}))}return i.createElement(r,Object(o.a)({},l,u))}))},s.prototype._onSettingChanged=function(){this.forceUpdate()},s}(i.Component)).displayName="Customized"+e,a);return p(r,s)}}var m=n(69),g=function(e){return function(t){for(var n=0,r=e.refs;n<r.length;n++){var i=r[n];"function"===typeof i?i(t):i&&(i.current=t)}}},y=function(e){var t={refs:[]};return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.resolver&&Object(m.b)(t.refs,e)||(t.resolver=g(t)),t.refs=e,t.resolver}},v=n(30),_=n(115),b=n(41),x=n(49);function w(e,t){var n=Object(b.a)(e,(function(e){return t===e||e.hasAttribute(x.a)}));return null!==n&&n.hasAttribute(x.a)}var S=n(13),E=n(44),C=n(155),T=n(65),I=n(73),k=n(68),P=n(161);function A(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter((function(e){return e})).join(" ").trim();return""===n?void 0:n}var M,O=n(156),L=n(66),R=n(42),D=n(20),z=function(e){var t=e.className,n=e.imageProps,o=Object(I.d)(e,I.e,["aria-label","aria-labelledby","title","aria-describedby"]),a=n.alt||e["aria-label"],s=a||e["aria-labelledby"]||e.title||n["aria-label"]||n["aria-labelledby"]||n.title,l={"aria-labelledby":e["aria-labelledby"],"aria-describedby":e["aria-describedby"],title:e.title},u=s?{}:{"aria-hidden":!0};return i.createElement("div",Object(r.a)({},u,o,{className:Object(_.a)(D.a,D.b.root,D.b.image,t)}),i.createElement(R.a,Object(r.a)({},l,n,{alt:s?a:""})))},N=n(8),B=n(159);!function(e){e[e.Normal=0]="Normal",e[e.Divider=1]="Divider",e[e.Header=2]="Header",e[e.Section=3]="Section"}(M||(M={}));var F,j=1,U=2;!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.bidirectional=2]="bidirectional",e[e.domOrder=3]="domOrder"}(F||(F={}));var V=function(e,t){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},V(e,t)};var q=function(){return q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},q.apply(this,arguments)};Object.create;Object.create;var H=n(160),W=n(43),G=n(63),Z=n(6),K=n(149);function X(e){var t=function(e){var t;"function"===typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0);return t}("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}var Y,J=n(145),$=n(12),Q=n(113),ee=n(29),te="data-is-focusable",ne="data-focuszone-id",re="tabindex",ie="data-no-vertical-wrap",oe="data-no-horizontal-wrap",ae=999999999,se=-999999999;var le,ue={},ce=new Set,pe=["text","number","password","email","tel","url","search"],he=!1,de=function(e){function t(t){var n=e.call(this,t)||this;return n._root=i.createRef(),n._mergedRef=y(),n._onFocus=function(e){if(!n._portalContainsElement(e.target)){var t,r=n.props,i=r.onActiveElementChanged,o=r.doNotAllowFocusEventToPropagate,a=r.stopFocusPropagation,s=r.onFocusNotification,l=r.onFocus,u=r.shouldFocusInnerElementWhenReceivedFocus,c=r.defaultTabbableElement,p=n._isImmediateDescendantOfZone(e.target);if(p)t=e.target;else for(var h=e.target;h&&h!==n._root.current;){if(Object(H.n)(h)&&n._isImmediateDescendantOfZone(h)){t=h;break}h=Object(W.a)(h,he)}if(u&&e.target===n._root.current){var d=c&&"function"===typeof c&&c(n._root.current);d&&Object(H.n)(d)?(t=d,d.focus()):(n.focus(!0),n._activeElement&&(t=null))}var f=!n._activeElement;t&&t!==n._activeElement&&((p||f)&&n._setFocusAlignment(t,!0,!0),n._activeElement=t,f&&n._updateTabIndexes()),i&&i(n._activeElement,e),(a||o)&&e.stopPropagation(),l?l(e):s&&s()}},n._onBlur=function(){n._setParkedFocus(!1)},n._onMouseDown=function(e){if(!n._portalContainsElement(e.target)&&!n.props.disabled){for(var t=e.target,r=[];t&&t!==n._root.current;)r.push(t),t=Object(W.a)(t,he);for(;r.length&&((t=r.pop())&&Object(H.n)(t)&&n._setActiveElement(t,!0),!Object(H.m)(t)););}},n._onKeyDown=function(e,t){if(!n._portalContainsElement(e.target)){var r=n.props,i=r.direction,o=r.disabled,a=r.isInnerZoneKeystroke,s=r.pagingSupportDisabled,l=r.shouldEnterInnerZone;if(!o&&(n.props.onKeyDown&&n.props.onKeyDown(e),!e.isDefaultPrevented()&&(n._getDocument().activeElement!==n._root.current||!n._isInnerZone))){if((l&&l(e)||a&&a(e))&&n._isImmediateDescendantOfZone(e.target)){var u=n._getFirstInnerZone();if(u){if(!u.focus(!0))return}else{if(!Object(H.l)(e.target))return;if(!n.focusElement(Object(H.j)(e.target,e.target.firstChild,!0)))return}}else{if(e.altKey)return;switch(e.which){case S.a.space:if(n._tryInvokeClickForFocusable(e.target))break;return;case S.a.left:if(i!==F.vertical&&(n._preventDefaultWhenHandled(e),n._moveFocusLeft(t)))break;return;case S.a.right:if(i!==F.vertical&&(n._preventDefaultWhenHandled(e),n._moveFocusRight(t)))break;return;case S.a.up:if(i!==F.horizontal&&(n._preventDefaultWhenHandled(e),n._moveFocusUp()))break;return;case S.a.down:if(i!==F.horizontal&&(n._preventDefaultWhenHandled(e),n._moveFocusDown()))break;return;case S.a.pageDown:if(!s&&n._moveFocusPaging(!0))break;return;case S.a.pageUp:if(!s&&n._moveFocusPaging(!1))break;return;case S.a.tab:if(n.props.allowTabKey||n.props.handleTabKey===j||n.props.handleTabKey===U&&n._isElementInput(e.target)){var c=!1;if(n._processingTabKey=!0,i!==F.vertical&&n._shouldWrapFocus(n._activeElement,oe))c=(Object(G.a)(t)?!e.shiftKey:e.shiftKey)?n._moveFocusLeft(t):n._moveFocusRight(t);else c=e.shiftKey?n._moveFocusUp():n._moveFocusDown();if(n._processingTabKey=!1,c)break;n.props.shouldResetActiveElementWhenTabFromZone&&(n._activeElement=null)}return;case S.a.home:if(n._isContentEditableElement(e.target)||n._isElementInput(e.target)&&!n._shouldInputLoseFocus(e.target,!1))return!1;var p=n._root.current&&n._root.current.firstChild;if(n._root.current&&p&&n.focusElement(Object(H.j)(n._root.current,p,!0)))break;return;case S.a.end:if(n._isContentEditableElement(e.target)||n._isElementInput(e.target)&&!n._shouldInputLoseFocus(e.target,!0))return!1;var h=n._root.current&&n._root.current.lastChild;if(n._root.current&&n.focusElement(Object(H.k)(n._root.current,h,!0,!0,!0)))break;return;case S.a.enter:if(n._tryInvokeClickForFocusable(e.target))break;return;default:return}}e.preventDefault(),e.stopPropagation()}}},n._getHorizontalDistanceFromCenter=function(e,t,r){var i=n._focusAlignment.left||n._focusAlignment.x||0,o=Math.floor(r.top),a=Math.floor(t.bottom),s=Math.floor(r.bottom),l=Math.floor(t.top);return e&&o>a||!e&&s<l?i>=r.left&&i<=r.left+r.width?0:Math.abs(r.left+r.width/2-i):n._shouldWrapFocus(n._activeElement,ie)?ae:se},Object(C.a)(n),n._id=Object(T.a)("FocusZone"),n._focusAlignment={left:0,top:0},n._processingTabKey=!1,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.getOuterZones=function(){return ce.size},t._onKeyDownCapture=function(e){e.which===S.a.tab&&ce.forEach((function(e){return e._updateTabIndexes()}))},t.prototype.componentDidMount=function(){var e=this._root.current;if(ue[this._id]=this,e){this._windowElement=Object(Z.a)(e);for(var n=Object(W.a)(e,he);n&&n!==this._getDocument().body&&1===n.nodeType;){if(Object(H.m)(n)){this._isInnerZone=!0;break}n=Object(W.a)(n,he)}this._isInnerZone||(ce.add(this),this._windowElement&&1===ce.size&&this._windowElement.addEventListener("keydown",t._onKeyDownCapture,!0)),this._root.current&&this._root.current.addEventListener("blur",this._onBlur,!0),this._updateTabIndexes(),this.props.defaultTabbableElement&&"string"===typeof this.props.defaultTabbableElement?this._activeElement=this._getDocument().querySelector(this.props.defaultTabbableElement):this.props.defaultActiveElement&&(this._activeElement=this._getDocument().querySelector(this.props.defaultActiveElement)),this.props.shouldFocusOnMount&&this.focus()}},t.prototype.componentDidUpdate=function(){var e=this._root.current,t=this._getDocument();if(t&&this._lastIndexPath&&(t.activeElement===t.body||null===t.activeElement||!this.props.preventFocusRestoration&&t.activeElement===e)){var n=Object(H.g)(e,this._lastIndexPath);n?(this._setActiveElement(n,!0),n.focus(),this._setParkedFocus(!1)):this._setParkedFocus(!0)}},t.prototype.componentWillUnmount=function(){delete ue[this._id],this._isInnerZone||(ce.delete(this),this._windowElement&&0===ce.size&&this._windowElement.removeEventListener("keydown",t._onKeyDownCapture,!0)),this._root.current&&this._root.current.removeEventListener("blur",this._onBlur,!0),this._activeElement=null,this._defaultFocusElement=null},t.prototype.render=function(){var e=this,t=this.props,n=t.as,r=t.elementType,o=t.rootProps,a=t.ariaDescribedBy,s=t.ariaLabelledBy,l=t.className,u=Object(I.d)(this.props,I.e),c=n||r||"div";this._evaluateFocusBeforeRender();var p=Object(ee.r)();return i.createElement(c,q({"aria-labelledby":s,"aria-describedby":a},u,o,{className:Object(_.a)((Y||(Y=Object(Q.b)({selectors:{":focus":{outline:"none"}}},"ms-FocusZone")),Y),l),ref:this._mergedRef(this.props.elementRef,this._root),"data-focuszone-id":this._id,onKeyDown:function(t){return e._onKeyDown(t,p)},onFocus:this._onFocus,onMouseDownCapture:this._onMouseDown}),this.props.children)},t.prototype.focus=function(e){if(void 0===e&&(e=!1),this._root.current){if(!e&&"true"===this._root.current.getAttribute(te)&&this._isInnerZone){var t=this._getOwnerZone(this._root.current);if(t!==this._root.current){var n=ue[t.getAttribute(ne)];return!!n&&n.focusElement(this._root.current)}return!1}if(!e&&this._activeElement&&Object(K.a)(this._root.current,this._activeElement)&&Object(H.n)(this._activeElement))return this._activeElement.focus(),!0;var r=this._root.current.firstChild;return this.focusElement(Object(H.j)(this._root.current,r,!0))}return!1},t.prototype.focusLast=function(){if(this._root.current){var e=this._root.current&&this._root.current.lastChild;return this.focusElement(Object(H.k)(this._root.current,e,!0,!0,!0))}return!1},t.prototype.focusElement=function(e,t){var n=this.props,r=n.onBeforeFocus,i=n.shouldReceiveFocus;return!(i&&!i(e)||r&&!r(e))&&(!!e&&(this._setActiveElement(e,t),this._activeElement&&this._activeElement.focus(),!0))},t.prototype.setFocusAlignment=function(e){this._focusAlignment=e},t.prototype._evaluateFocusBeforeRender=function(){var e=this._root.current,t=this._getDocument();if(t){var n=t.activeElement;if(n!==e){var r=Object(K.a)(e,n,!1);this._lastIndexPath=r?Object(H.d)(e,n):void 0}}},t.prototype._setParkedFocus=function(e){var t=this._root.current;t&&this._isParked!==e&&(this._isParked=e,e?(this.props.allowFocusRoot||(this._parkedTabIndex=t.getAttribute("tabindex"),t.setAttribute("tabindex","-1")),t.focus()):this.props.allowFocusRoot||(this._parkedTabIndex?(t.setAttribute("tabindex",this._parkedTabIndex),this._parkedTabIndex=void 0):t.removeAttribute("tabindex")))},t.prototype._setActiveElement=function(e,t){var n=this._activeElement;this._activeElement=e,n&&(Object(H.m)(n)&&this._updateTabIndexes(n),n.tabIndex=-1),this._activeElement&&(this._focusAlignment&&!t||this._setFocusAlignment(e,!0,!0),this._activeElement.tabIndex=0)},t.prototype._preventDefaultWhenHandled=function(e){this.props.preventDefaultWhenHandled&&e.preventDefault()},t.prototype._tryInvokeClickForFocusable=function(e){if(e===this._root.current||!this.props.shouldRaiseClicks)return!1;do{if("BUTTON"===e.tagName||"A"===e.tagName||"INPUT"===e.tagName||"TEXTAREA"===e.tagName)return!1;if(this._isImmediateDescendantOfZone(e)&&"true"===e.getAttribute(te)&&"true"!==e.getAttribute("data-disable-click-on-enter"))return X(e),!0;e=Object(W.a)(e,he)}while(e!==this._root.current);return!1},t.prototype._getFirstInnerZone=function(e){if(!(e=e||this._activeElement||this._root.current))return null;if(Object(H.m)(e))return ue[e.getAttribute(ne)];for(var t=e.firstElementChild;t;){if(Object(H.m)(t))return ue[t.getAttribute(ne)];var n=this._getFirstInnerZone(t);if(n)return n;t=t.nextElementSibling}return null},t.prototype._moveFocus=function(e,t,n,r){void 0===r&&(r=!0);var i=this._activeElement,o=-1,a=void 0,s=!1,l=this.props.direction===F.bidirectional;if(!i||!this._root.current)return!1;if(this._isElementInput(i)&&!this._shouldInputLoseFocus(i,e))return!1;var u=l?i.getBoundingClientRect():null;do{if(i=e?Object(H.j)(this._root.current,i):Object(H.k)(this._root.current,i),!l){a=i;break}if(i){var c=t(u,i.getBoundingClientRect());if(-1===c&&-1===o){a=i;break}if(c>-1&&(-1===o||c<o)&&(o=c,a=i),o>=0&&c<0)break}}while(i);if(a&&a!==this._activeElement)s=!0,this.focusElement(a);else if(this.props.isCircularNavigation&&r)return e?this.focusElement(Object(H.j)(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(Object(H.k)(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return s},t.prototype._moveFocusDown=function(){var e=this,t=-1,n=this._focusAlignment.left||this._focusAlignment.x||0;return!!this._moveFocus(!0,(function(r,i){var o=-1,a=Math.floor(i.top),s=Math.floor(r.bottom);return a<s?e._shouldWrapFocus(e._activeElement,ie)?ae:se:((-1===t&&a>=s||a===t)&&(t=a,o=n>=i.left&&n<=i.left+i.width?0:Math.abs(i.left+i.width/2-n)),o)}))&&(this._setFocusAlignment(this._activeElement,!1,!0),!0)},t.prototype._moveFocusUp=function(){var e=this,t=-1,n=this._focusAlignment.left||this._focusAlignment.x||0;return!!this._moveFocus(!1,(function(r,i){var o=-1,a=Math.floor(i.bottom),s=Math.floor(i.top),l=Math.floor(r.top);return a>l?e._shouldWrapFocus(e._activeElement,ie)?ae:se:((-1===t&&a<=l||s===t)&&(t=s,o=n>=i.left&&n<=i.left+i.width?0:Math.abs(i.left+i.width/2-n)),o)}))&&(this._setFocusAlignment(this._activeElement,!1,!0),!0)},t.prototype._moveFocusLeft=function(e){var t=this,n=this._shouldWrapFocus(this._activeElement,oe);return!!this._moveFocus(Object(G.a)(e),(function(r,i){var o=-1;return(Object(G.a)(e)?parseFloat(i.top.toFixed(3))<parseFloat(r.bottom.toFixed(3)):parseFloat(i.bottom.toFixed(3))>parseFloat(r.top.toFixed(3)))&&i.right<=r.right&&t.props.direction!==F.vertical?o=r.right-i.right:n||(o=se),o}),void 0,n)&&(this._setFocusAlignment(this._activeElement,!0,!1),!0)},t.prototype._moveFocusRight=function(e){var t=this,n=this._shouldWrapFocus(this._activeElement,oe);return!!this._moveFocus(!Object(G.a)(e),(function(r,i){var o=-1;return(Object(G.a)(e)?parseFloat(i.bottom.toFixed(3))>parseFloat(r.top.toFixed(3)):parseFloat(i.top.toFixed(3))<parseFloat(r.bottom.toFixed(3)))&&i.left>=r.left&&t.props.direction!==F.vertical?o=i.left-r.left:n||(o=se),o}),void 0,n)&&(this._setFocusAlignment(this._activeElement,!0,!1),!0)},t.prototype._moveFocusPaging=function(e,t){void 0===t&&(t=!0);var n=this._activeElement;if(!n||!this._root.current)return!1;if(this._isElementInput(n)&&!this._shouldInputLoseFocus(n,e))return!1;var r=Object(J.a)(n);if(!r)return!1;var i=-1,o=void 0,a=-1,s=-1,l=r.clientHeight,u=n.getBoundingClientRect();do{if(n=e?Object(H.j)(this._root.current,n):Object(H.k)(this._root.current,n)){var c=n.getBoundingClientRect(),p=Math.floor(c.top),h=Math.floor(u.bottom),d=Math.floor(c.bottom),f=Math.floor(u.top),m=this._getHorizontalDistanceFromCenter(e,u,c);if(e&&p>h+l||!e&&d<f-l)break;m>-1&&(e&&p>a?(a=p,i=m,o=n):!e&&d<s?(s=d,i=m,o=n):(-1===i||m<=i)&&(i=m,o=n))}}while(n);var g=!1;if(o&&o!==this._activeElement)g=!0,this.focusElement(o),this._setFocusAlignment(o,!1,!0);else if(this.props.isCircularNavigation&&t)return e?this.focusElement(Object(H.j)(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(Object(H.k)(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return g},t.prototype._setFocusAlignment=function(e,t,n){if(this.props.direction===F.bidirectional&&(!this._focusAlignment||t||n)){var r=e.getBoundingClientRect(),i=r.left+r.width/2,o=r.top+r.height/2;this._focusAlignment||(this._focusAlignment={left:i,top:o}),t&&(this._focusAlignment.left=i),n&&(this._focusAlignment.top=o)}},t.prototype._isImmediateDescendantOfZone=function(e){return this._getOwnerZone(e)===this._root.current},t.prototype._getOwnerZone=function(e){for(var t=Object(W.a)(e,he);t&&t!==this._root.current&&t!==this._getDocument().body;){if(Object(H.m)(t))return t;t=Object(W.a)(t,he)}return t},t.prototype._updateTabIndexes=function(e){!this._activeElement&&this.props.defaultTabbableElement&&"function"===typeof this.props.defaultTabbableElement&&(this._activeElement=this.props.defaultTabbableElement(this._root.current)),!e&&this._root.current&&(this._defaultFocusElement=null,e=this._root.current,this._activeElement&&!Object(K.a)(e,this._activeElement)&&(this._activeElement=null)),this._activeElement&&!Object(H.n)(this._activeElement)&&(this._activeElement=null);for(var t=e&&e.children,n=0;t&&n<t.length;n++){var r=t[n];Object(H.m)(r)?"true"===r.getAttribute(te)&&(this._isInnerZone||(this._activeElement||this._defaultFocusElement)&&this._activeElement!==r?"-1"!==r.getAttribute(re)&&r.setAttribute(re,"-1"):(this._defaultFocusElement=r,"0"!==r.getAttribute(re)&&r.setAttribute(re,"0"))):(r.getAttribute&&"false"===r.getAttribute(te)&&r.setAttribute(re,"-1"),Object(H.n)(r)?this.props.disabled?r.setAttribute(re,"-1"):this._isInnerZone||(this._activeElement||this._defaultFocusElement)&&this._activeElement!==r?"-1"!==r.getAttribute(re)&&r.setAttribute(re,"-1"):(this._defaultFocusElement=r,"0"!==r.getAttribute(re)&&r.setAttribute(re,"0")):"svg"===r.tagName&&"false"!==r.getAttribute("focusable")&&r.setAttribute("focusable","false")),this._updateTabIndexes(r)}},t.prototype._isContentEditableElement=function(e){return e&&"true"===e.getAttribute("contenteditable")},t.prototype._isElementInput=function(e){return!(!e||!e.tagName||"input"!==e.tagName.toLowerCase()&&"textarea"!==e.tagName.toLowerCase())},t.prototype._shouldInputLoseFocus=function(e,t){if(!this._processingTabKey&&e&&e.type&&pe.indexOf(e.type.toLowerCase())>-1){var n=e.selectionStart,r=n!==e.selectionEnd,i=e.value,o=e.readOnly;if(r||n>0&&!t&&!o||n!==i.length&&t&&!o||this.props.handleTabKey&&(!this.props.shouldInputLoseFocusOnArrowKey||!this.props.shouldInputLoseFocusOnArrowKey(e)))return!1}return!0},t.prototype._shouldWrapFocus=function(e,t){return!this.props.checkForNoWrap||Object(H.o)(e,t)},t.prototype._portalContainsElement=function(e){return e&&!!this._root.current&&w(e,this._root.current)},t.prototype._getDocument=function(){return Object($.a)(this._root.current)},t.defaultProps={isCircularNavigation:!1,direction:F.bidirectional,shouldRaiseClicks:!0},t}(i.Component),fe=n(144),me=n(146);function ge(e){var t;if("undefined"===typeof le||e){var n=Object(Z.a)(),r=null===(t=null===n||void 0===n?void 0:n.navigator)||void 0===t?void 0:t.userAgent;le=!!r&&-1!==r.indexOf("Macintosh")}return!!le}var ye=function(){return!!(window&&window.navigator&&window.navigator.userAgent)&&/iPad|iPhone|iPod/i.test(window.navigator.userAgent)};function ve(e){return e.canCheck?!(!e.isChecked&&!e.checked):"boolean"===typeof e.isChecked?e.isChecked:"boolean"===typeof e.checked?e.checked:null}function _e(e){return!(!e.subMenuProps&&!e.items)}function be(e){return!(!e.isDisabled&&!e.disabled)}function xe(e){return null!==ve(e)?"menuitemcheckbox":"menuitem"}var we,Se=n(71),Ee=function(e){var t=e.item,n=e.classNames,o=t.iconProps;return i.createElement(O.a,Object(r.a)({},o,{className:n.icon}))},Ce=function(e){var t=e.item;return e.hasIcons?t.onRenderIcon?t.onRenderIcon(e,Ee):Ee(e):null},Te=function(e){var t=e.onCheckmarkClick,n=e.item,r=e.classNames,o=ve(n);if(t){return i.createElement(O.a,{iconName:!1!==n.canCheck&&o?"CheckMark":"",className:r.checkmarkIcon,onClick:function(e){return t(n,e)}})}return null},Ie=function(e){var t=e.item,n=e.classNames;return t.text||t.name?i.createElement("span",{className:n.label},t.text||t.name):null},ke=function(e){var t=e.item,n=e.classNames;return t.secondaryText?i.createElement("span",{className:n.secondaryText},t.secondaryText):null},Pe=function(e){var t=e.item,n=e.classNames,o=e.theme;return _e(t)?i.createElement(O.a,Object(r.a)({iconName:Object(G.a)(o)?"ChevronLeft":"ChevronRight"},t.submenuIconProps,{className:n.subMenuIcon})):null},Ae=function(e){function t(t){var n=e.call(this,t)||this;return n.openSubMenu=function(){var e=n.props,t=e.item,r=e.openSubMenu,i=e.getSubmenuTarget;if(i){var o=i();_e(t)&&r&&o&&r(t,o)}},n.dismissSubMenu=function(){var e=n.props,t=e.item,r=e.dismissSubMenu;_e(t)&&r&&r()},n.dismissMenu=function(e){var t=n.props.dismissMenu;t&&t(void 0,e)},Object(C.a)(n),n}return Object(r.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.classNames,r=t.onRenderContent||this._renderLayout;return i.createElement("div",{className:t.split?n.linkContentMenu:n.linkContent},r(this.props,{renderCheckMarkIcon:Te,renderItemIcon:Ce,renderItemName:Ie,renderSecondaryText:ke,renderSubMenuIcon:Pe}))},t.prototype._renderLayout=function(e,t){return i.createElement(i.Fragment,null,t.renderCheckMarkIcon(e),t.renderItemIcon(e),t.renderItemName(e),t.renderSecondaryText(e),t.renderSubMenuIcon(e))},t}(i.Component),Me=Object(v.b)((function(e){return Object(ee.t)({wrapper:{display:"inline-flex",height:"100%",alignItems:"center"},divider:{width:1,height:"100%",backgroundColor:e.palette.neutralTertiaryAlt}})})),Oe=36,Le=Object(ee.q)(0,ee.e),Re=Object(v.b)((function(){var e;return{selectors:(e={},e[ee.c]=Object(r.a)({backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText"},Object(ee.m)()),e)}})),De=Object(v.b)((function(e){var t,n,i,o,a,s,l,u=e.semanticColors,c=e.fonts,p=e.palette,h=u.menuItemBackgroundHovered,d=u.menuItemTextHovered,f=u.menuItemBackgroundPressed,m=u.bodyDivider,g={item:[c.medium,{color:u.bodyText,position:"relative",boxSizing:"border-box"}],divider:{display:"block",height:"1px",backgroundColor:m,position:"relative"},root:[Object(ee.k)(e),c.medium,{color:u.bodyText,backgroundColor:"transparent",border:"none",width:"100%",height:Oe,lineHeight:Oe,display:"block",cursor:"pointer",padding:"0px 8px 0 4px",textAlign:"left"}],rootDisabled:{color:u.disabledBodyText,cursor:"default",pointerEvents:"none",selectors:(t={},t[ee.c]=Object(r.a)({color:"GrayText",opacity:1},Object(ee.m)()),t)},rootHovered:Object(r.a)({backgroundColor:h,color:d,selectors:{".ms-ContextualMenu-icon":{color:p.themeDarkAlt},".ms-ContextualMenu-submenuIcon":{color:p.neutralPrimary}}},Re()),rootFocused:Object(r.a)({backgroundColor:p.white},Re()),rootChecked:Object(r.a)({selectors:{".ms-ContextualMenu-checkmarkIcon":{color:p.neutralPrimary}}},Re()),rootPressed:Object(r.a)({backgroundColor:f,selectors:{".ms-ContextualMenu-icon":{color:p.themeDark},".ms-ContextualMenu-submenuIcon":{color:p.neutralPrimary}}},Re()),rootExpanded:Object(r.a)({backgroundColor:f,color:u.bodyTextChecked},Re()),linkContent:{whiteSpace:"nowrap",height:"inherit",display:"flex",alignItems:"center",maxWidth:"100%"},anchorLink:{padding:"0px 8px 0 4px",textRendering:"auto",color:"inherit",letterSpacing:"normal",wordSpacing:"normal",textTransform:"none",textIndent:"0px",textShadow:"none",textDecoration:"none",boxSizing:"border-box"},label:{margin:"0 4px",verticalAlign:"middle",display:"inline-block",flexGrow:"1",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},secondaryText:{color:e.palette.neutralSecondary,paddingLeft:"20px",textAlign:"right"},icon:{display:"inline-block",minHeight:"1px",maxHeight:Oe,fontSize:ee.d.medium,width:ee.d.medium,margin:"0 4px",verticalAlign:"middle",flexShrink:"0",selectors:(n={},n[Le]={fontSize:ee.d.large,width:ee.d.large},n)},iconColor:{color:u.menuIcon,selectors:(i={},i[ee.c]={color:"inherit"},i["$root:hover &"]={selectors:(o={},o[ee.c]={color:"HighlightText"},o)},i["$root:focus &"]={selectors:(a={},a[ee.c]={color:"HighlightText"},a)},i)},iconDisabled:{color:u.disabledBodyText},checkmarkIcon:{color:u.bodySubtext,selectors:(s={},s[ee.c]={color:"HighlightText"},s)},subMenuIcon:{height:Oe,lineHeight:Oe,color:p.neutralSecondary,textAlign:"center",display:"inline-block",verticalAlign:"middle",flexShrink:"0",fontSize:ee.d.small,selectors:(l={":hover":{color:p.neutralPrimary},":active":{color:p.neutralPrimary}},l[Le]={fontSize:ee.d.medium},l[ee.c]={color:"HighlightText"},l)},splitButtonFlexContainer:[Object(ee.k)(e),{display:"flex",height:Oe,flexWrap:"nowrap",justifyContent:"center",alignItems:"flex-start"}]};return Object(ee.g)(g)})),ze="28px",Ne=Object(ee.q)(0,ee.e),Be=Object(v.b)((function(e){var t;return Object(ee.t)(Me(e),{wrapper:{position:"absolute",right:28,selectors:(t={},t[Ne]={right:32},t)},divider:{height:16,width:1}})})),Fe={item:"ms-ContextualMenu-item",divider:"ms-ContextualMenu-divider",root:"ms-ContextualMenu-link",isChecked:"is-checked",isExpanded:"is-expanded",isDisabled:"is-disabled",linkContent:"ms-ContextualMenu-linkContent",linkContentMenu:"ms-ContextualMenu-linkContent",icon:"ms-ContextualMenu-icon",iconColor:"ms-ContextualMenu-iconColor",checkmarkIcon:"ms-ContextualMenu-checkmarkIcon",subMenuIcon:"ms-ContextualMenu-submenuIcon",label:"ms-ContextualMenu-itemText",secondaryText:"ms-ContextualMenu-secondaryText",splitMenu:"ms-ContextualMenu-splitMenu",screenReaderText:"ms-ContextualMenu-screenReaderText"},je=Object(v.b)((function(e,t,n,r,i,o,a,s,l,u,c,p){var h,d,f,m,g=De(e),y=Object(ee.l)(Fe,e);return Object(ee.t)({item:[y.item,g.item,a],divider:[y.divider,g.divider,s],root:[y.root,g.root,r&&[y.isChecked,g.rootChecked],i&&g.anchorLink,n&&[y.isExpanded,g.rootExpanded],t&&[y.isDisabled,g.rootDisabled],!t&&!n&&[{selectors:(h={":hover":g.rootHovered,":active":g.rootPressed},h["."+E.a+" &:focus, ."+E.a+" &:focus:hover"]=g.rootFocused,h["."+E.a+" &:hover"]={background:"inherit;"},h)}],p],splitPrimary:[g.root,{width:"calc(100% - 28px)"},r&&["is-checked",g.rootChecked],(t||c)&&["is-disabled",g.rootDisabled],!(t||c)&&!r&&[{selectors:(d={":hover":g.rootHovered},d[":hover ~ ."+y.splitMenu]=g.rootHovered,d[":active"]=g.rootPressed,d["."+E.a+" &:focus, ."+E.a+" &:focus:hover"]=g.rootFocused,d["."+E.a+" &:hover"]={background:"inherit;"},d)}]],splitMenu:[y.splitMenu,g.root,{flexBasis:"0",padding:"0 8px",minWidth:ze},n&&["is-expanded",g.rootExpanded],t&&["is-disabled",g.rootDisabled],!t&&!n&&[{selectors:(f={":hover":g.rootHovered,":active":g.rootPressed},f["."+E.a+" &:focus, ."+E.a+" &:focus:hover"]=g.rootFocused,f["."+E.a+" &:hover"]={background:"inherit;"},f)}]],anchorLink:g.anchorLink,linkContent:[y.linkContent,g.linkContent],linkContentMenu:[y.linkContentMenu,g.linkContent,{justifyContent:"center"}],icon:[y.icon,o&&g.iconColor,g.icon,l,t&&[y.isDisabled,g.iconDisabled]],iconColor:g.iconColor,checkmarkIcon:[y.checkmarkIcon,o&&g.checkmarkIcon,g.icon,l],subMenuIcon:[y.subMenuIcon,g.subMenuIcon,u,n&&{color:e.palette.neutralPrimary},t&&[g.iconDisabled]],label:[y.label,g.label],secondaryText:[y.secondaryText,g.secondaryText],splitContainer:[g.splitButtonFlexContainer,!t&&!r&&[{selectors:(m={},m["."+E.a+" &:focus, ."+E.a+" &:focus:hover"]=g.rootFocused,m)}]],screenReaderText:[y.screenReaderText,g.screenReaderText,ee.s,{visibility:"hidden"}]})})),Ue=function(e){var t=e.theme,n=e.disabled,r=e.expanded,i=e.checked,o=e.isAnchorLink,a=e.knownIcon,s=e.itemClassName,l=e.dividerClassName,u=e.iconClassName,c=e.subMenuClassName,p=e.primaryDisabled,h=e.className;return je(t,n,r,i,o,a,s,l,u,c,p,h)},Ve=Object(B.a)(Ae,Ue,void 0,{scope:"ContextualMenuItem"}),qe=function(e){function t(t){var n=e.call(this,t)||this;return n._onItemMouseEnter=function(e){var t=n.props,r=t.item,i=t.onItemMouseEnter;i&&i(r,e,e.currentTarget)},n._onItemClick=function(e){var t=n.props,r=t.item,i=t.onItemClickBase;i&&i(r,e,e.currentTarget)},n._onItemMouseLeave=function(e){var t=n.props,r=t.item,i=t.onItemMouseLeave;i&&i(r,e)},n._onItemKeyDown=function(e){var t=n.props,r=t.item,i=t.onItemKeyDown;i&&i(r,e)},n._onItemMouseMove=function(e){var t=n.props,r=t.item,i=t.onItemMouseMove;i&&i(r,e,e.currentTarget)},n._getSubmenuTarget=function(){},Object(C.a)(n),n}return Object(r.c)(t,e),t.prototype.shouldComponentUpdate=function(e){return!Object(k.b)(e,this.props)},t}(i.Component),He="data-ktp-target",We="data-ktp-execute-target";!function(e){e.KEYTIP_ADDED="keytipAdded",e.KEYTIP_REMOVED="keytipRemoved",e.KEYTIP_UPDATED="keytipUpdated",e.PERSISTED_KEYTIP_ADDED="persistedKeytipAdded",e.PERSISTED_KEYTIP_REMOVED="persistedKeytipRemoved",e.PERSISTED_KEYTIP_EXECUTE="persistedKeytipExecute",e.ENTER_KEYTIP_MODE="enterKeytipMode",e.EXIT_KEYTIP_MODE="exitKeytipMode"}(we||(we={}));var Ge=n(70);function Ze(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e})),t.current}var Ke=function(){function e(){this.keytips={},this.persistedKeytips={},this.sequenceMapping={},this.inKeytipMode=!1,this.shouldEnterKeytipMode=!0,this.delayUpdatingKeytipChange=!1}return e.getInstance=function(){return this._instance},e.prototype.init=function(e){this.delayUpdatingKeytipChange=e},e.prototype.register=function(e,t){void 0===t&&(t=!1);var n=e;t||(n=this.addParentOverflow(e),this.sequenceMapping[n.keySequences.toString()]=n);var r=this._getUniqueKtp(n);if(t?this.persistedKeytips[r.uniqueID]=r:this.keytips[r.uniqueID]=r,this.inKeytipMode||!this.delayUpdatingKeytipChange){var i=t?we.PERSISTED_KEYTIP_ADDED:we.KEYTIP_ADDED;s.a.raise(this,i,{keytip:n,uniqueID:r.uniqueID})}return r.uniqueID},e.prototype.update=function(e,t){var n=this.addParentOverflow(e),r=this._getUniqueKtp(n,t),i=this.keytips[t];i&&(r.keytip.visible=i.keytip.visible,this.keytips[t]=r,delete this.sequenceMapping[i.keytip.keySequences.toString()],this.sequenceMapping[r.keytip.keySequences.toString()]=r.keytip,!this.inKeytipMode&&this.delayUpdatingKeytipChange||s.a.raise(this,we.KEYTIP_UPDATED,{keytip:r.keytip,uniqueID:r.uniqueID}))},e.prototype.unregister=function(e,t,n){void 0===n&&(n=!1),n?delete this.persistedKeytips[t]:delete this.keytips[t],!n&&delete this.sequenceMapping[e.keySequences.toString()];var r=n?we.PERSISTED_KEYTIP_REMOVED:we.KEYTIP_REMOVED;!this.inKeytipMode&&this.delayUpdatingKeytipChange||s.a.raise(this,r,{keytip:e,uniqueID:t})},e.prototype.enterKeytipMode=function(){s.a.raise(this,we.ENTER_KEYTIP_MODE)},e.prototype.exitKeytipMode=function(){s.a.raise(this,we.EXIT_KEYTIP_MODE)},e.prototype.getKeytips=function(){var e=this;return Object.keys(this.keytips).map((function(t){return e.keytips[t].keytip}))},e.prototype.addParentOverflow=function(e){var t=Object(r.e)(e.keySequences);if(t.pop(),0!==t.length){var n=this.sequenceMapping[t.toString()];if(n&&n.overflowSetSequence)return Object(r.a)(Object(r.a)({},e),{overflowSetSequence:n.overflowSetSequence})}return e},e.prototype.menuExecute=function(e,t){s.a.raise(this,we.PERSISTED_KEYTIP_EXECUTE,{overflowButtonSequences:e,keytipSequences:t})},e.prototype._getUniqueKtp=function(e,t){return void 0===t&&(t=Object(T.a)()),{keytip:Object(r.a)({},e),uniqueID:t}},e._instance=new e,e}();function Xe(e){return e.reduce((function(e,t){return e+"-"+t.split("").join("-")}),"ktp")}function Ye(e){var t=i.useRef(),n=e.keytipProps?Object(r.a)({disabled:e.disabled},e.keytipProps):void 0,o=Object(Ge.a)(Ke.getInstance()),a=Ze(e);i.useLayoutEffect((function(){t.current&&n&&((null===a||void 0===a?void 0:a.keytipProps)!==e.keytipProps||(null===a||void 0===a?void 0:a.disabled)!==e.disabled)&&o.update(n,t.current)})),i.useLayoutEffect((function(){return n&&(t.current=o.register(n)),function(){n&&o.unregister(n,t.current)}}),[]);var s={ariaDescribedBy:void 0,keytipId:void 0};return n&&(s=function(e,t,n){var i=e.addParentOverflow(t),o=A(n,function(e){var t=" ktp-layer-id";return e.length?t+" "+Xe(e):t}(i.keySequences)),a=Object(r.e)(i.keySequences);i.overflowSetSequence&&(a=function(e,t){var n=t.length,i=Object(r.e)(t).pop(),o=Object(r.e)(e);return Object(m.a)(o,n-1,i)}(a,i.overflowSetSequence));var s=Xe(a);return{ariaDescribedBy:o,keytipId:s}}(o,n,e.ariaDescribedBy)),s}var Je=function(e){var t,n=e.children,i=Ye(Object(r.d)(e,["children"])),o=i.keytipId,a=i.ariaDescribedBy;return n(((t={})[He]=o,t[We]=o,t["aria-describedby"]=a,t))},$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._anchor=i.createRef(),t._getMemoizedMenuButtonKeytipProps=Object(v.b)((function(e){return Object(r.a)(Object(r.a)({},e),{hasMenu:!0})})),t._getSubmenuTarget=function(){return t._anchor.current?t._anchor.current:void 0},t._onItemClick=function(e){var n=t.props,r=n.item,i=n.onItemClick;i&&i(r,e)},t._renderAriaDescription=function(e,n){return e?i.createElement("span",{id:t._ariaDescriptionId,className:n},e):null},t}return Object(r.c)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.item,o=t.classNames,a=t.index,s=t.focusableElementIndex,l=t.totalItemCount,u=t.hasCheckmarks,c=t.hasIcons,p=t.contextualMenuItemAs,h=void 0===p?Ve:p,d=t.expandedMenuItemKey,f=t.onItemClick,m=t.openSubMenu,g=t.dismissSubMenu,y=t.dismissMenu,v=n.rel;n.target&&"_blank"===n.target.toLowerCase()&&(v=v||"nofollow noopener noreferrer");var _=_e(n),b=Object(I.d)(n,I.a),x=be(n),w=n.itemProps,S=n.ariaDescription,E=n.keytipProps;E&&_&&(E=this._getMemoizedMenuButtonKeytipProps(E)),S&&(this._ariaDescriptionId=Object(T.a)());var C=A(n.ariaDescribedBy,S?this._ariaDescriptionId:void 0,b["aria-describedby"]),k={"aria-describedby":C};return i.createElement("div",null,i.createElement(Je,{keytipProps:n.keytipProps,ariaDescribedBy:C,disabled:x},(function(t){return i.createElement("a",Object(r.a)({},k,b,t,{ref:e._anchor,href:n.href,target:n.target,rel:v,className:o.root,role:"menuitem","aria-haspopup":_||void 0,"aria-expanded":_?n.key===d:void 0,"aria-posinset":s+1,"aria-setsize":l,"aria-disabled":be(n),style:n.style,onClick:e._onItemClick,onMouseEnter:e._onItemMouseEnter,onMouseLeave:e._onItemMouseLeave,onMouseMove:e._onItemMouseMove,onKeyDown:_?e._onItemKeyDown:void 0}),i.createElement(h,Object(r.a)({componentRef:n.componentRef,item:n,classNames:o,index:a,onCheckmarkClick:u&&f?f:void 0,hasIcons:c,openSubMenu:m,dismissSubMenu:g,dismissMenu:y,getSubmenuTarget:e._getSubmenuTarget},w)),e._renderAriaDescription(S,o.screenReaderText))})))},t}(qe),Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._btn=i.createRef(),t._getMemoizedMenuButtonKeytipProps=Object(v.b)((function(e){return Object(r.a)(Object(r.a)({},e),{hasMenu:!0})})),t._renderAriaDescription=function(e,n){return e?i.createElement("span",{id:t._ariaDescriptionId,className:n},e):null},t._getSubmenuTarget=function(){return t._btn.current?t._btn.current:void 0},t}return Object(r.c)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.item,o=t.classNames,a=t.index,s=t.focusableElementIndex,l=t.totalItemCount,u=t.hasCheckmarks,c=t.hasIcons,p=t.contextualMenuItemAs,h=void 0===p?Ve:p,d=t.expandedMenuItemKey,f=t.onItemMouseDown,m=t.onItemClick,g=t.openSubMenu,y=t.dismissSubMenu,v=t.dismissMenu,_=ve(n),b=null!==_,x=xe(n),w=_e(n),S=n.itemProps,E=n.ariaLabel,C=n.ariaDescription,k=Object(I.d)(n,I.b);delete k.disabled;var P=n.role||x;C&&(this._ariaDescriptionId=Object(T.a)());var M=A(n.ariaDescribedBy,C?this._ariaDescriptionId:void 0,k["aria-describedby"]),O={className:o.root,onClick:this._onItemClick,onKeyDown:w?this._onItemKeyDown:void 0,onMouseEnter:this._onItemMouseEnter,onMouseLeave:this._onItemMouseLeave,onMouseDown:function(e){return f?f(n,e):void 0},onMouseMove:this._onItemMouseMove,href:n.href,title:n.title,"aria-label":E,"aria-describedby":M,"aria-haspopup":w||void 0,"aria-expanded":w?n.key===d:void 0,"aria-posinset":s+1,"aria-setsize":l,"aria-disabled":be(n),"aria-checked":"menuitemcheckbox"!==P&&"menuitemradio"!==P||!b?void 0:!!_,"aria-selected":"menuitem"===P&&b?!!_:void 0,role:P,style:n.style},L=n.keytipProps;return L&&w&&(L=this._getMemoizedMenuButtonKeytipProps(L)),i.createElement(Je,{keytipProps:L,ariaDescribedBy:M,disabled:be(n)},(function(t){return i.createElement("button",Object(r.a)({ref:e._btn},k,O,t),i.createElement(h,Object(r.a)({componentRef:n.componentRef,item:n,classNames:o,index:a,onCheckmarkClick:u&&m?m:void 0,hasIcons:c,openSubMenu:g,dismissSubMenu:y,dismissMenu:v,getSubmenuTarget:e._getSubmenuTarget},S)),e._renderAriaDescription(C,o.screenReaderText))}))},t}(qe),et=Object(fe.a)(),tt=i.forwardRef((function(e,t){var n=e.styles,r=e.theme,o=e.getClassNames,a=e.className,s=et(n,{theme:r,getClassNames:o,className:a});return i.createElement("span",{className:s.wrapper,ref:t},i.createElement("span",{className:s.divider}))}));tt.displayName="VerticalDividerBase";var nt=Object(B.a)(tt,(function(e){var t=e.theme,n=e.getClassNames,r=e.className;if(!t)throw new Error("Theme is undefined or null.");if(n){var i=n(t);return{wrapper:[i.wrapper],divider:[i.divider]}}return{wrapper:[{display:"inline-flex",height:"100%",alignItems:"center"},r],divider:[{width:1,height:"100%",backgroundColor:t.palette.neutralTertiaryAlt}]}}),void 0,{scope:"VerticalDivider"}),rt=function(e){function t(t){var n=e.call(this,t)||this;return n._getMemoizedMenuButtonKeytipProps=Object(v.b)((function(e){return Object(r.a)(Object(r.a)({},e),{hasMenu:!0})})),n._onItemKeyDown=function(e){var t=n.props,r=t.item,i=t.onItemKeyDown;e.which===S.a.enter?(n._executeItemClick(e),e.preventDefault(),e.stopPropagation()):i&&i(r,e)},n._getSubmenuTarget=function(){return n._splitButton},n._renderAriaDescription=function(e,t){return e?i.createElement("span",{id:n._ariaDescriptionId,className:t},e):null},n._onItemMouseEnterPrimary=function(e){var t=n.props,i=t.item,o=t.onItemMouseEnter;o&&o(Object(r.a)(Object(r.a)({},i),{subMenuProps:void 0,items:void 0}),e,n._splitButton)},n._onItemMouseEnterIcon=function(e){var t=n.props,r=t.item,i=t.onItemMouseEnter;i&&i(r,e,n._splitButton)},n._onItemMouseMovePrimary=function(e){var t=n.props,i=t.item,o=t.onItemMouseMove;o&&o(Object(r.a)(Object(r.a)({},i),{subMenuProps:void 0,items:void 0}),e,n._splitButton)},n._onItemMouseMoveIcon=function(e){var t=n.props,r=t.item,i=t.onItemMouseMove;i&&i(r,e,n._splitButton)},n._onIconItemClick=function(e){var t=n.props,r=t.item,i=t.onItemClickBase;i&&i(r,e,n._splitButton?n._splitButton:e.currentTarget)},n._executeItemClick=function(e){var t=n.props,r=t.item,i=t.executeItemClick,o=t.onItemClick;if(!r.disabled&&!r.isDisabled)return n._processingTouch&&o?o(r,e):void(i&&i(r,e))},n._onTouchStart=function(e){n._splitButton&&!("onpointerdown"in n._splitButton)&&n._handleTouchAndPointerEvent(e)},n._onPointerDown=function(e){"touch"===e.pointerType&&(n._handleTouchAndPointerEvent(e),e.preventDefault(),e.stopImmediatePropagation())},n._async=new a.a(n),n._events=new s.a(n),n}return Object(r.c)(t,e),t.prototype.componentDidMount=function(){this._splitButton&&"onpointerdown"in this._splitButton&&this._events.on(this._splitButton,"pointerdown",this._onPointerDown,!0)},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.render=function(){var e=this,t=this.props,n=t.item,o=t.classNames,a=t.index,s=t.focusableElementIndex,l=t.totalItemCount,u=t.hasCheckmarks,c=t.hasIcons,p=t.onItemMouseLeave,h=t.expandedMenuItemKey,d=_e(n),f=n.keytipProps;f&&(f=this._getMemoizedMenuButtonKeytipProps(f));var m=n.ariaDescription;return m&&(this._ariaDescriptionId=Object(T.a)()),i.createElement(Je,{keytipProps:f,disabled:be(n)},(function(t){return i.createElement("div",{"data-ktp-target":t["data-ktp-target"],ref:function(t){return e._splitButton=t},role:xe(n),"aria-label":n.ariaLabel,className:o.splitContainer,"aria-disabled":be(n),"aria-expanded":d?n.key===h:void 0,"aria-haspopup":!0,"aria-describedby":A(n.ariaDescribedBy,m?e._ariaDescriptionId:void 0,t["aria-describedby"]),"aria-checked":n.isChecked||n.checked,"aria-posinset":s+1,"aria-setsize":l,onMouseEnter:e._onItemMouseEnterPrimary,onMouseLeave:p?p.bind(e,Object(r.a)(Object(r.a)({},n),{subMenuProps:null,items:null})):void 0,onMouseMove:e._onItemMouseMovePrimary,onKeyDown:e._onItemKeyDown,onClick:e._executeItemClick,onTouchStart:e._onTouchStart,tabIndex:0,"data-is-focusable":!0,"aria-roledescription":n["aria-roledescription"]},e._renderSplitPrimaryButton(n,o,a,u,c),e._renderSplitDivider(n),e._renderSplitIconButton(n,o,a,t),e._renderAriaDescription(m,o.screenReaderText))}))},t.prototype._renderSplitPrimaryButton=function(e,t,n,o,a){var s=this.props,l=s.contextualMenuItemAs,u=void 0===l?Ve:l,c=s.onItemClick,p={key:e.key,disabled:be(e)||e.primaryDisabled,name:e.name,text:e.text||e.name,secondaryText:e.secondaryText,className:t.splitPrimary,canCheck:e.canCheck,isChecked:e.isChecked,checked:e.checked,iconProps:e.iconProps,onRenderIcon:e.onRenderIcon,data:e.data,"data-is-focusable":!1},h=e.itemProps;return i.createElement("button",Object(r.a)({},Object(I.d)(p,I.b)),i.createElement(u,Object(r.a)({"data-is-focusable":!1,item:p,classNames:t,index:n,onCheckmarkClick:o&&c?c:void 0,hasIcons:a},h)))},t.prototype._renderSplitDivider=function(e){var t=e.getSplitButtonVerticalDividerClassNames||Be;return i.createElement(nt,{getClassNames:t})},t.prototype._renderSplitIconButton=function(e,t,n,o){var a=this.props,s=a.contextualMenuItemAs,l=void 0===s?Ve:s,u=a.onItemMouseLeave,c=a.onItemMouseDown,p=a.openSubMenu,h=a.dismissSubMenu,d=a.dismissMenu,f={onClick:this._onIconItemClick,disabled:be(e),className:t.splitMenu,subMenuProps:e.subMenuProps,submenuIconProps:e.submenuIconProps,split:!0,key:e.key},m=Object(r.a)(Object(r.a)({},Object(I.d)(f,I.b)),{onMouseEnter:this._onItemMouseEnterIcon,onMouseLeave:u?u.bind(this,e):void 0,onMouseDown:function(t){return c?c(e,t):void 0},onMouseMove:this._onItemMouseMoveIcon,"data-is-focusable":!1,"data-ktp-execute-target":o["data-ktp-execute-target"],"aria-hidden":!0}),g=e.itemProps;return i.createElement("button",Object(r.a)({},m),i.createElement(l,Object(r.a)({componentRef:e.componentRef,item:f,classNames:t,index:n,hasIcons:!1,openSubMenu:p,dismissSubMenu:h,dismissMenu:d,getSubmenuTarget:this._getSubmenuTarget},g)))},t.prototype._handleTouchAndPointerEvent=function(e){var t=this,n=this.props.onTap;n&&n(e),this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout((function(){t._processingTouch=!1,t._lastTouchTimeoutId=void 0}),500)},t}(qe),it=n(147),ot=n(148),at=["setState","render","componentWillMount","UNSAFE_componentWillMount","componentDidMount","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","UNSAFE_componentWillUpdate","componentDidUpdate","componentWillUnmount"];!function(e){function t(t){var n=e.call(this,t)||this;return n._updateComposedComponentRef=n._updateComposedComponentRef.bind(n),n}Object(r.c)(t,e),t.prototype._updateComposedComponentRef=function(e){var t;this._composedComponentInstance=e,e?this._hoisted=function(e,t,n){void 0===n&&(n=at);var r=[],i=function(i){"function"!==typeof t[i]||void 0!==e[i]||n&&-1!==n.indexOf(i)||(r.push(i),e[i]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t[i].apply(t,e)})};for(var o in t)i(o);return r}(this,e):this._hoisted&&(t=this,this._hoisted.forEach((function(e){return delete t[e]})))}}(i.Component);var st,lt=n(116);!function(e){e[e.small=0]="small",e[e.medium=1]="medium",e[e.large=2]="large",e[e.xLarge=3]="xLarge",e[e.xxLarge=4]="xxLarge",e[e.xxxLarge=5]="xxxLarge",e[e.unknown=999]="unknown"}(st||(st={}));var ut,ct,pt=[479,639,1023,1365,1919,99999999];function ht(){var e;return null!==(e=null!==ut&&void 0!==ut?ut:ct)&&void 0!==e?e:st.large}function dt(e){var t=st.small;if(e){try{for(;e.innerWidth>pt[t];)t++}catch(n){t=ht()}ct=t}else{if(void 0===ut)throw new Error("Content was rendered in a server environment without providing a default responsive mode. Call setResponsiveMode to define what the responsive mode is.");t=ut}return t}var ft=i.createContext({}),mt=Object(fe.a)(),gt=Object(fe.a)(),yt={items:[],shouldFocusOnMount:!0,gapSpace:0,directionalHint:N.a.bottomAutoEdge,beakWidth:16};function vt(e){return e.subMenuProps?e.subMenuProps.items:e.items}var _t=Object(v.b)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return ee.h.apply(void 0,Object(r.e)([t,Ue],e))}}));var bt=i.forwardRef((function(e,t){var n=Object(me.a)(yt,e),o=(n.ref,Object(r.d)(n,["ref"])),a=i.useRef(null),s=Object(it.a)(o.target,a),l=s[0],u=s[1],c=function(e){var t=e.hidden,n=i.useState(),r=n[0],o=n[1],a=i.useState(),s=a[0],l=a[1],u=i.useState(),c=u[0],p=u[1],h=i.useCallback((function(){p(void 0),o(void 0),l(void 0)}),[]),d=i.useCallback((function(e,t,n){var i=e.key;r!==i&&(t.focus(),p(n),o(i),l(t))}),[r]);return i.useEffect((function(){t&&h()}),[t,h]),[r,s,c,d,h]}(o),p=c[0],h=c[1],d=c[2],f=c[3],m=c[4],g=function(e){var t=e.delayUpdateFocusOnHover,n=e.hidden,r=i.useRef(!t),o=i.useRef(!1);i.useEffect((function(){r.current=!t,o.current=!n&&!t&&o.current}),[t,n]);var a=i.useCallback((function(){t&&(r.current=!0)}),[t]);return[r,o,a]}(o),y=g[0],v=g[1],_=g[2],b=function(e,t){var n=i.useState(ht()),r=n[0],o=n[1],a=i.useCallback((function(){var t=dt(Object(Z.a)(e.current));r!==t&&o(t)}),[e,r]),s=Object(lt.c)();return Object(ot.a)(s,"resize",a),i.useEffect((function(){void 0===t&&a()}),[t]),null!==t&&void 0!==t?t:r}(a,o.responsiveMode);return function(e,t){var n=e.hidden,r=void 0!==n&&n,o=e.onMenuDismissed,a=e.onMenuOpened,s=Ze(r),l=i.useRef(a),u=i.useRef(o),c=i.useRef(e);l.current=a,u.current=o,c.current=e,i.useEffect((function(){var e,t;r&&!1===s?null===(e=u.current)||void 0===e||e.call(u,c.current):r||!1===s||null===(t=l.current)||void 0===t||t.call(l,c.current)}),[r,s]),i.useEffect((function(){return function(){var e;return null===(e=u.current)||void 0===e?void 0:e.call(u,c.current)}}),[])}(o),i.createElement(xt,Object(r.a)({},o,{hoisted:{hostElement:a,forwardedRef:t,targetRef:l,targetWindow:u,expandedMenuItemKey:p,submenuTarget:h,expandedByMouseClick:d,openSubMenu:f,closeSubMenu:m,shouldUpdateFocusOnMouseEvent:y,gotMouseMove:v,onMenuFocusCapture:_},responsiveMode:b}))}));bt.displayName="ContextualMenuBase";var xt=function(e){function t(t){var n=e.call(this,t)||this;return n._mounted=!1,n.dismiss=function(e,t){var r=n.props.onDismiss;r&&r(e,t)},n._tryFocusPreviousActiveElement=function(e){var t,r;n.props.onRestoreFocus?n.props.onRestoreFocus(e):e&&e.documentContainsFocus&&n._previousActiveElement&&(null===(r=(t=n._previousActiveElement).focus)||void 0===r||r.call(t))},n._onRenderMenuList=function(e,t){var r=0,o=e.items,a=e.totalItemCount,s=e.hasCheckmarks,l=e.hasIcons;return i.createElement("ul",{className:n._classNames.list,onKeyDown:n._onKeyDown,onKeyUp:n._onKeyUp,role:"presentation"},o.map((function(e,t){var i=n._renderMenuItem(e,t,r,a,s,l);if(e.itemType!==M.Divider&&e.itemType!==M.Header){var o=e.customOnRenderListLength?e.customOnRenderListLength:1;r+=o}return i})))},n._renderMenuItem=function(e,t,r,o,a,s){var l,u,c=[],p=e.iconProps||{iconName:"None"},h=e.getItemClassNames,d=e.itemProps,f=d?d.styles:void 0,m=n.props.hoisted.expandedMenuItemKey,g=e.itemType===M.Divider?e.className:void 0,y=e.submenuIconProps?e.submenuIconProps.className:"";if(h)u=h(n.props.theme,be(e),m===e.key,!!ve(e),!!e.href,"None"!==p.iconName,e.className,g,p.className,y,e.primaryDisabled);else{var v={theme:n.props.theme,disabled:be(e),expanded:m===e.key,checked:!!ve(e),isAnchorLink:!!e.href,knownIcon:"None"!==p.iconName,itemClassName:e.className,dividerClassName:g,iconClassName:p.className,subMenuClassName:y,primaryDisabled:e.primaryDisabled};u=gt(_t(null===(l=n._classNames.subComponentStyles)||void 0===l?void 0:l.menuItem,f),v)}switch("-"!==e.text&&"-"!==e.name||(e.itemType=M.Divider),e.itemType){case M.Divider:c.push(n._renderSeparator(t,u));break;case M.Header:c.push(n._renderSeparator(t,u));var _=n._renderHeaderMenuItem(e,u,t,a,s);c.push(n._renderListItem(_,e.key||t,u,e.title));break;case M.Section:c.push(n._renderSectionItem(e,u,t,a,s));break;default:var b=n._renderNormalItem(e,u,t,r,o,a,s);c.push(n._renderListItem(b,e.key||t,u,e.title))}return i.createElement(i.Fragment,{key:e.key},c)},n._defaultMenuItemRenderer=function(e){var t=e.index,r=e.focusableElementIndex,i=e.totalItemCount,o=e.hasCheckmarks,a=e.hasIcons;return n._renderMenuItem(e,t,r,i,o,a)},n._onKeyDown=function(e){n._lastKeyDownWasAltOrMeta=n._isAltOrMeta(e);var t=e.which===S.a.escape&&(ge()||ye());return n._keyHandler(e,n._shouldHandleKeyDown,t)},n._shouldHandleKeyDown=function(e){return e.which===S.a.escape||n._shouldCloseSubMenu(e)||e.which===S.a.up&&(e.altKey||e.metaKey)},n._onKeyUp=function(e){return n._keyHandler(e,n._shouldHandleKeyUp,!0)},n._shouldHandleKeyUp=function(e){var t=n._lastKeyDownWasAltOrMeta&&n._isAltOrMeta(e);return n._lastKeyDownWasAltOrMeta=!1,!!t&&!(ye()||ge())},n._keyHandler=function(e,t,r){var i=!1;return t(e)&&(n.dismiss(e,r),e.preventDefault(),e.stopPropagation(),i=!0),i},n._shouldCloseSubMenu=function(e){var t=Object(G.a)(n.props.theme)?S.a.right:S.a.left;return!(e.which!==t||!n.props.isSubMenu)&&(n._adjustedFocusZoneProps.direction===F.vertical||!!n._adjustedFocusZoneProps.checkForNoWrap&&!Object(H.o)(e.target,"data-no-horizontal-wrap"))},n._onMenuKeyDown=function(e){var t=n._onKeyDown(e),r=n.props.hoisted.hostElement;if(!t&&r.current){var i=!(!e.altKey&&!e.metaKey),o=e.which===S.a.up,a=e.which===S.a.down;if(!i&&(o||a)){var s=o?Object(H.h)(r.current,r.current.lastChild,!0):Object(H.e)(r.current,r.current.firstChild,!0);s&&(s.focus(),e.preventDefault(),e.stopPropagation())}}},n._onScroll=function(){n._isScrollIdle||void 0===n._scrollIdleTimeoutId?n._isScrollIdle=!1:(n._async.clearTimeout(n._scrollIdleTimeoutId),n._scrollIdleTimeoutId=void 0),n._scrollIdleTimeoutId=n._async.setTimeout((function(){n._isScrollIdle=!0}),250)},n._onItemMouseEnterBase=function(e,t,r){n._shouldIgnoreMouseEvent()||n._updateFocusOnMouseEvent(e,t,r)},n._onItemMouseMoveBase=function(e,t,r){var i=t.currentTarget,o=n.props.hoisted,a=o.shouldUpdateFocusOnMouseEvent,s=o.gotMouseMove,l=o.targetWindow;a.current&&(s.current=!0,n._isScrollIdle&&void 0===n._enterTimerId&&i!==(null===l||void 0===l?void 0:l.document.activeElement)&&n._updateFocusOnMouseEvent(e,t,r))},n._onMouseItemLeave=function(e,t){var r,i=n.props.hoisted,o=i.expandedMenuItemKey,a=i.hostElement;if(!n._shouldIgnoreMouseEvent()&&(void 0!==n._enterTimerId&&(n._async.clearTimeout(n._enterTimerId),n._enterTimerId=void 0),void 0===o))if(a.current.setActive)try{a.current.setActive()}catch(s){}else null===(r=a.current)||void 0===r||r.focus()},n._onItemMouseDown=function(e,t){e.onMouseDown&&e.onMouseDown(e,t)},n._onItemClick=function(e,t){n._onItemClickBase(e,t,t.currentTarget)},n._onItemClickBase=function(e,t,r){var i=vt(e),o=n.props.hoisted,a=o.expandedMenuItemKey,s=o.openSubMenu;n._cancelSubMenuTimer(),_e(e)||i&&i.length?e.key!==a&&s(e,r,0!==t.nativeEvent.detail||"mouse"===t.nativeEvent.pointerType):n._executeItemClick(e,t),t.stopPropagation(),t.preventDefault()},n._onAnchorClick=function(e,t){n._executeItemClick(e,t),t.stopPropagation()},n._executeItemClick=function(e,t){if(!e.disabled&&!e.isDisabled){var r=!1;e.onClick?r=!!e.onClick(t,e):n.props.onItemClick&&(r=!!n.props.onItemClick(t,e)),!r&&t.defaultPrevented||n.dismiss(t,!0)}},n._onItemKeyDown=function(e,t){var r=Object(G.a)(n.props.theme)?S.a.left:S.a.right;e.disabled||t.which!==r&&t.which!==S.a.enter&&(t.which!==S.a.down||!t.altKey&&!t.metaKey)||(n.props.hoisted.openSubMenu(e,t.currentTarget,!1),t.preventDefault())},n._cancelSubMenuTimer=function(){void 0!==n._enterTimerId&&(n._async.clearTimeout(n._enterTimerId),n._enterTimerId=void 0)},n._onSubMenuDismiss=function(e,t){t?n.dismiss(e,t):n._mounted&&n.props.hoisted.closeSubMenu()},n._onPointerAndTouchEvent=function(e){n._cancelSubMenuTimer()},n._async=new a.a(n),n._events=new s.a(n),Object(C.a)(n),n.state={contextualMenuItems:void 0,subMenuId:Object(T.a)("ContextualMenu")},n._id=t.id||Object(T.a)("ContextualMenu"),n._isScrollIdle=!0,n}return Object(r.c)(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!(!e.shouldUpdateWhenHidden&&this.props.hidden&&e.hidden)&&(!Object(k.b)(this.props,e)||!Object(k.b)(this.state,t))},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this.props.hoisted;return this._isHidden(e)!==this._isHidden(this.props)&&(this._isHidden(this.props)?this._onMenuClosed():this._previousActiveElement=t.targetWindow?t.targetWindow.document.activeElement:void 0),null},t.prototype.componentDidMount=function(){var e=this.props,t=e.hidden,n=e.hoisted;t||(this._previousActiveElement=n.targetWindow?n.targetWindow.document.activeElement:void 0),this._mounted=!0},t.prototype.componentWillUnmount=function(){this._events.dispose(),this._async.dispose(),this._mounted=!1},t.prototype.render=function(){var e=this,t=this.props.isBeakVisible,n=this.props,o=n.items,a=n.labelElementId,s=n.id,l=n.className,u=n.beakWidth,c=n.directionalHint,p=n.directionalHintForRTL,h=n.alignTargetEdge,d=n.gapSpace,f=n.coverTarget,m=n.ariaLabel,g=n.doNotLayer,y=n.target,v=n.bounds,b=n.useTargetWidth,x=n.useTargetAsMinWidth,w=n.directionalHintFixed,S=n.shouldFocusOnMount,E=n.shouldFocusOnContainer,C=n.title,T=n.styles,I=n.theme,k=n.calloutProps,P=n.onRenderSubMenu,A=void 0===P?this._onRenderSubMenu:P,O=n.onRenderMenuList,L=void 0===O?this._onRenderMenuList:O,R=n.focusZoneProps,D=n.getMenuClassNames,z=n.hoisted,N=z.expandedMenuItemKey,B=z.targetRef,F=z.onMenuFocusCapture,U=z.hostElement,V=z.forwardedRef;this._classNames=D?D(I,l):mt(T,{theme:I,className:l});var q=function e(t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.iconProps)return!0;if(i.itemType===M.Section&&i.sectionProps&&e(i.sectionProps.items))return!0}return!1}(o);this._adjustedFocusZoneProps=Object(r.a)(Object(r.a)({},R),{className:this._classNames.root,isCircularNavigation:!0,handleTabKey:j,direction:this._getFocusZoneDirection()});var H,W=function(e){return e.some((function(e){return!!e.canCheck||!(!e.sectionProps||!e.sectionProps.items.some((function(e){return!0===e.canCheck})))}))}(o),G=N&&!0!==this.props.hidden?this._getSubmenuProps():null;t=void 0===t?this.props.responsiveMode<=st.medium:t;var Z=B.current;if((b||x)&&Z&&Z.offsetWidth){var K=Z.getBoundingClientRect().width-2;b?H={width:K}:x&&(H={minWidth:K})}if(o&&o.length>0){for(var X=0,Y=0,J=o;Y<J.length;Y++){var $=J[Y];if($.itemType!==M.Divider&&$.itemType!==M.Header){var Q=$.customOnRenderListLength?$.customOnRenderListLength:1;X+=Q}}var ee=this._classNames.subComponentStyles?this._classNames.subComponentStyles.callout:void 0;return i.createElement(ft.Consumer,null,(function(n){return i.createElement(Se.a,Object(r.a)({styles:ee,onRestoreFocus:e._tryFocusPreviousActiveElement},k,{target:y||n.target,isBeakVisible:t,beakWidth:u,directionalHint:c,directionalHintForRTL:p,gapSpace:d,coverTarget:f,doNotLayer:g,className:Object(_.a)("ms-ContextualMenu-Callout",k&&k.className),setInitialFocus:S,onDismiss:e.props.onDismiss||n.onDismiss,onScroll:e._onScroll,bounds:v,directionalHintFixed:w,alignTargetEdge:h,hidden:e.props.hidden||n.hidden,ref:V}),i.createElement("div",{style:H,ref:U,id:s,className:e._classNames.container,tabIndex:E?0:-1,onKeyDown:e._onMenuKeyDown,onKeyUp:e._onKeyUp,onFocusCapture:F,"aria-label":m,"aria-labelledby":a,role:"menu"},C&&i.createElement("div",{className:e._classNames.title}," ",C," "),o&&o.length?e._renderFocusZone(L({ariaLabel:m,items:o,totalItemCount:X,hasCheckmarks:W,hasIcons:q,defaultMenuItemRenderer:e._defaultMenuItemRenderer,labelElementId:a},e._onRenderMenuList)):null,G&&A(G,e._onRenderSubMenu)))}))}return null},t.prototype._onMenuClosed=function(){var e,t;null===(e=this._tryFocusPreviousActiveElement)||void 0===e||e.call(this,{originalElement:this._previousActiveElement,containsFocus:!0,documentContainsFocus:(null===(t=Object($.a)())||void 0===t?void 0:t.hasFocus())||!1})},t.prototype._isHidden=function(e){return!!e.hidden},t.prototype._getFocusZoneDirection=function(){var e=this.props.focusZoneProps;return e&&void 0!==e.direction?e.direction:F.vertical},t.prototype._onRenderSubMenu=function(e,t){throw Error("ContextualMenuBase: onRenderSubMenu callback is null or undefined. Please ensure to set `onRenderSubMenu` property either manually or with `styled` helper.")},t.prototype._renderFocusZone=function(e){var t=this.props.focusZoneAs,n=void 0===t?de:t;return i.createElement(n,Object(r.a)({},this._adjustedFocusZoneProps),e)},t.prototype._renderSectionItem=function(e,t,n,o,a){var s=this,l=e.sectionProps;if(l){var u,c;if(l.title){var p=void 0,h="";if("string"===typeof l.title){var d=this._id+l.title.replace(/\s/g,"");p={key:"section-"+l.title+"-title",itemType:M.Header,text:l.title,id:d},h=d}else{d=l.title.id||this._id+l.title.key.replace(/\s/g,"");p=Object(r.a)(Object(r.a)({},l.title),{id:d}),h=d}p&&(c={role:"group","aria-labelledby":h},u=this._renderHeaderMenuItem(p,t,n,o,a))}return l.items&&l.items.length>0?i.createElement("li",{role:"presentation",key:l.key||e.key||"section-"+n},i.createElement("div",Object(r.a)({},c),i.createElement("ul",{className:this._classNames.list,role:"presentation"},l.topDivider&&this._renderSeparator(n,t,!0,!0),u&&this._renderListItem(u,e.key||n,t,e.title),l.items.map((function(e,t){return s._renderMenuItem(e,t,t,l.items.length,o,a)})),l.bottomDivider&&this._renderSeparator(n,t,!1,!0)))):void 0}},t.prototype._renderListItem=function(e,t,n,r){return i.createElement("li",{role:"presentation",title:r,key:t,className:n.item},e)},t.prototype._renderSeparator=function(e,t,n,r){return r||e>0?i.createElement("li",{role:"separator",key:"separator-"+e+(void 0===n?"":n?"-top":"-bottom"),className:t.divider,"aria-hidden":"true"}):null},t.prototype._renderNormalItem=function(e,t,n,i,o,a,s){return e.onRender?e.onRender(Object(r.a)({"aria-posinset":i+1,"aria-setsize":o},e),this.dismiss):e.href?this._renderAnchorMenuItem(e,t,n,i,o,a,s):e.split&&_e(e)?this._renderSplitButton(e,t,n,i,o,a,s):this._renderButtonItem(e,t,n,i,o,a,s)},t.prototype._renderHeaderMenuItem=function(e,t,n,o,a){var s=this.props.contextualMenuItemAs,l=void 0===s?Ve:s,u=e.itemProps,c=e.id,p=u&&Object(I.d)(u,I.c);return i.createElement("div",Object(r.a)({id:c,className:this._classNames.header},p,{style:e.style}),i.createElement(l,Object(r.a)({item:e,classNames:t,index:n,onCheckmarkClick:o?this._onItemClick:void 0,hasIcons:a},u)))},t.prototype._renderAnchorMenuItem=function(e,t,n,r,o,a,s){var l=this.props,u=l.contextualMenuItemAs,c=l.hoisted,p=c.expandedMenuItemKey,h=c.openSubMenu;return i.createElement($e,{item:e,classNames:t,index:n,focusableElementIndex:r,totalItemCount:o,hasCheckmarks:a,hasIcons:s,contextualMenuItemAs:u,onItemMouseEnter:this._onItemMouseEnterBase,onItemMouseLeave:this._onMouseItemLeave,onItemMouseMove:this._onItemMouseMoveBase,onItemMouseDown:this._onItemMouseDown,executeItemClick:this._executeItemClick,onItemClick:this._onAnchorClick,onItemKeyDown:this._onItemKeyDown,expandedMenuItemKey:p,openSubMenu:h,dismissSubMenu:this._onSubMenuDismiss,dismissMenu:this.dismiss})},t.prototype._renderButtonItem=function(e,t,n,r,o,a,s){var l=this.props,u=l.contextualMenuItemAs,c=l.hoisted,p=c.expandedMenuItemKey,h=c.openSubMenu;return i.createElement(Qe,{item:e,classNames:t,index:n,focusableElementIndex:r,totalItemCount:o,hasCheckmarks:a,hasIcons:s,contextualMenuItemAs:u,onItemMouseEnter:this._onItemMouseEnterBase,onItemMouseLeave:this._onMouseItemLeave,onItemMouseMove:this._onItemMouseMoveBase,onItemMouseDown:this._onItemMouseDown,executeItemClick:this._executeItemClick,onItemClick:this._onItemClick,onItemClickBase:this._onItemClickBase,onItemKeyDown:this._onItemKeyDown,expandedMenuItemKey:p,openSubMenu:h,dismissSubMenu:this._onSubMenuDismiss,dismissMenu:this.dismiss})},t.prototype._renderSplitButton=function(e,t,n,r,o,a,s){var l=this.props,u=l.contextualMenuItemAs,c=l.hoisted,p=c.expandedMenuItemKey,h=c.openSubMenu;return i.createElement(rt,{item:e,classNames:t,index:n,focusableElementIndex:r,totalItemCount:o,hasCheckmarks:a,hasIcons:s,contextualMenuItemAs:u,onItemMouseEnter:this._onItemMouseEnterBase,onItemMouseLeave:this._onMouseItemLeave,onItemMouseMove:this._onItemMouseMoveBase,onItemMouseDown:this._onItemMouseDown,executeItemClick:this._executeItemClick,onItemClick:this._onItemClick,onItemClickBase:this._onItemClickBase,onItemKeyDown:this._onItemKeyDown,openSubMenu:h,dismissSubMenu:this._onSubMenuDismiss,dismissMenu:this.dismiss,expandedMenuItemKey:p,onTap:this._onPointerAndTouchEvent})},t.prototype._isAltOrMeta=function(e){return e.which===S.a.alt||"Meta"===e.key},t.prototype._shouldIgnoreMouseEvent=function(){return!this._isScrollIdle||!this.props.hoisted.gotMouseMove.current},t.prototype._updateFocusOnMouseEvent=function(e,t,n){var r=this,i=n||t.currentTarget,o=this.props,a=o.subMenuHoverDelay,s=void 0===a?250:a,l=o.hoisted,u=l.expandedMenuItemKey,c=l.openSubMenu;e.key!==u&&(void 0!==this._enterTimerId&&(this._async.clearTimeout(this._enterTimerId),this._enterTimerId=void 0),void 0===u&&i.focus(),_e(e)?(t.stopPropagation(),this._enterTimerId=this._async.setTimeout((function(){i.focus(),c(e,i,!0),r._enterTimerId=void 0}),s)):this._enterTimerId=this._async.setTimeout((function(){r._onSubMenuDismiss(t),i.focus(),r._enterTimerId=void 0}),s))},t.prototype._getSubmenuProps=function(){var e=this.props.hoisted,t=e.submenuTarget,n=e.expandedMenuItemKey,r=e.expandedByMouseClick,i=this._findItemByKey(n),o=null;return i&&(o={items:vt(i),target:t,onDismiss:this._onSubMenuDismiss,isSubMenu:!0,id:this.state.subMenuId,shouldFocusOnMount:!0,shouldFocusOnContainer:r,directionalHint:Object(G.a)(this.props.theme)?N.a.leftTopEdge:N.a.rightTopEdge,className:this.props.className,gapSpace:0,isBeakVisible:!1},i.subMenuProps&&Object(k.a)(o,i.subMenuProps)),o},t.prototype._findItemByKey=function(e){var t=this.props.items;return this._findItemByKeyFromItems(e,t)},t.prototype._findItemByKeyFromItems=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.itemType===M.Section&&i.sectionProps){var o=this._findItemByKeyFromItems(e,i.sectionProps.items);if(o)return o}else if(i.key&&i.key===e)return i}},t}(i.Component),wt={root:"ms-ContextualMenu",container:"ms-ContextualMenu-container",list:"ms-ContextualMenu-list",header:"ms-ContextualMenu-header",title:"ms-ContextualMenu-title",isopen:"is-open"};function St(e){return i.createElement(Et,Object(r.a)({},e))}var Et=Object(B.a)(bt,(function(e){var t=e.className,n=e.theme,r=Object(ee.l)(wt,n),i=n.fonts,o=n.semanticColors,a=n.effects;return{root:[n.fonts.medium,r.root,r.isopen,{backgroundColor:o.menuBackground,minWidth:"180px"},t],container:[r.container,{selectors:{":focus":{outline:0}}}],list:[r.list,r.isopen,{listStyleType:"none",margin:"0",padding:"0"}],header:[r.header,i.small,{fontWeight:ee.b.semibold,color:o.menuHeader,background:"none",backgroundColor:"transparent",border:"none",height:Oe,lineHeight:Oe,cursor:"default",padding:"0px 6px",userSelect:"none",textAlign:"left"}],title:[r.title,{fontSize:i.mediumPlus.fontSize,paddingRight:"14px",paddingLeft:"14px",paddingBottom:"5px",paddingTop:"5px",backgroundColor:o.menuItemBackgroundPressed}],subComponentStyles:{callout:{root:{boxShadow:a.elevation8}},menuItem:{}}}}),(function(){return{onRenderSubMenu:St}}),{scope:"ContextualMenu"}),Ct=Et;Ct.displayName="ContextualMenu";var Tt={msButton:"ms-Button",msButtonHasMenu:"ms-Button--hasMenu",msButtonIcon:"ms-Button-icon",msButtonMenuIcon:"ms-Button-menuIcon",msButtonLabel:"ms-Button-label",msButtonDescription:"ms-Button-description",msButtonScreenReaderText:"ms-Button-screenReaderText",msButtonFlexContainer:"ms-Button-flexContainer",msButtonTextContainer:"ms-Button-textContainer"},It=Object(v.b)((function(e,t,n,r,i,o,a,s,l,u,c){var p,h,d=Object(ee.l)(Tt,e||{}),f=u&&!c;return Object(ee.t)({root:[d.msButton,t.root,r,l&&["is-checked",t.rootChecked],f&&["is-expanded",t.rootExpanded,{selectors:(p={},p[":hover ."+d.msButtonIcon]=t.iconExpandedHovered,p[":hover ."+d.msButtonMenuIcon]=t.menuIconExpandedHovered||t.rootExpandedHovered,p[":hover"]=t.rootExpandedHovered,p)}],s&&[Tt.msButtonHasMenu,t.rootHasMenu],a&&["is-disabled",t.rootDisabled],!a&&!f&&!l&&{selectors:(h={":hover":t.rootHovered},h[":hover ."+d.msButtonLabel]=t.labelHovered,h[":hover ."+d.msButtonIcon]=t.iconHovered,h[":hover ."+d.msButtonDescription]=t.descriptionHovered,h[":hover ."+d.msButtonMenuIcon]=t.menuIconHovered,h[":focus"]=t.rootFocused,h[":active"]=t.rootPressed,h[":active ."+d.msButtonIcon]=t.iconPressed,h[":active ."+d.msButtonDescription]=t.descriptionPressed,h[":active ."+d.msButtonMenuIcon]=t.menuIconPressed,h)},a&&l&&[t.rootCheckedDisabled],!a&&l&&{selectors:{":hover":t.rootCheckedHovered,":active":t.rootCheckedPressed}},n],flexContainer:[d.msButtonFlexContainer,t.flexContainer],textContainer:[d.msButtonTextContainer,t.textContainer],icon:[d.msButtonIcon,i,t.icon,f&&t.iconExpanded,l&&t.iconChecked,a&&t.iconDisabled],label:[d.msButtonLabel,t.label,l&&t.labelChecked,a&&t.labelDisabled],menuIcon:[d.msButtonMenuIcon,o,t.menuIcon,l&&t.menuIconChecked,a&&!c&&t.menuIconDisabled,!a&&!f&&!l&&{selectors:{":hover":t.menuIconHovered,":active":t.menuIconPressed}},f&&["is-expanded",t.menuIconExpanded]],description:[d.msButtonDescription,t.description,l&&t.descriptionChecked,a&&t.descriptionDisabled],screenReaderText:[d.msButtonScreenReaderText,t.screenReaderText]})})),kt=Object(v.b)((function(e,t,n,r,i){return{root:Object(ee.u)(e.splitButtonMenuButton,n&&[e.splitButtonMenuButtonExpanded],t&&[e.splitButtonMenuButtonDisabled],r&&!t&&[e.splitButtonMenuButtonChecked],i&&!t&&[{selectors:{":focus":e.splitButtonMenuFocused}}]),splitButtonContainer:Object(ee.u)(e.splitButtonContainer,!t&&r&&[e.splitButtonContainerChecked,{selectors:{":hover":e.splitButtonContainerCheckedHovered}}],!t&&!r&&[{selectors:{":hover":e.splitButtonContainerHovered,":focus":e.splitButtonContainerFocused}}],t&&e.splitButtonContainerDisabled),icon:Object(ee.u)(e.splitButtonMenuIcon,t&&e.splitButtonMenuIconDisabled,!t&&i&&e.splitButtonMenuIcon),flexContainer:Object(ee.u)(e.splitButtonFlexContainer),divider:Object(ee.u)(e.splitButtonDivider,(i||t)&&e.splitButtonDividerDisabled)}})),Pt=function(e){function t(t){var n=e.call(this,t)||this;return n._buttonElement=i.createRef(),n._splitButtonContainer=i.createRef(),n._mergedRef=y(),n._renderedVisibleMenu=!1,n._getMemoizedMenuButtonKeytipProps=Object(v.b)((function(e){return Object(r.a)(Object(r.a)({},e),{hasMenu:!0})})),n._onRenderIcon=function(e,t){var o=n.props.iconProps;if(o&&(void 0!==o.iconName||o.imageProps)){var a=o.className,s=o.imageProps,l=Object(r.d)(o,["className","imageProps"]);if(o.styles)return i.createElement(O.a,Object(r.a)({className:Object(_.a)(n._classNames.icon,a),imageProps:s},l));if(o.iconName)return i.createElement(L.a,Object(r.a)({className:Object(_.a)(n._classNames.icon,a)},l));if(s)return i.createElement(z,Object(r.a)({className:Object(_.a)(n._classNames.icon,a),imageProps:s},l))}return null},n._onRenderTextContents=function(){var e=n.props,t=e.text,r=e.children,o=e.secondaryText,a=void 0===o?n.props.description:o,s=e.onRenderText,l=void 0===s?n._onRenderText:s,u=e.onRenderDescription,c=void 0===u?n._onRenderDescription:u;return t||"string"===typeof r||a?i.createElement("span",{className:n._classNames.textContainer},l(n.props,n._onRenderText),c(n.props,n._onRenderDescription)):[l(n.props,n._onRenderText),c(n.props,n._onRenderDescription)]},n._onRenderText=function(){var e=n.props.text,t=n.props.children;return void 0===e&&"string"===typeof t&&(e=t),n._hasText()?i.createElement("span",{key:n._labelId,className:n._classNames.label,id:n._labelId},e):null},n._onRenderChildren=function(){var e=n.props.children;return"string"===typeof e?null:e},n._onRenderDescription=function(e){var t=e.secondaryText,r=void 0===t?n.props.description:t;return r?i.createElement("span",{key:n._descriptionId,className:n._classNames.description,id:n._descriptionId},r):null},n._onRenderAriaDescription=function(){var e=n.props.ariaDescription;return e?i.createElement("span",{className:n._classNames.screenReaderText,id:n._ariaDescriptionId},e):null},n._onRenderMenuIcon=function(e){var t=n.props.menuIconProps;return i.createElement(L.a,Object(r.a)({iconName:"ChevronDown"},t,{className:n._classNames.menuIcon}))},n._onRenderMenu=function(e){var t=n.props.persistMenu,o=n.state.menuHidden,a=n.props.menuAs||Ct;return e.ariaLabel||e.labelElementId||!n._hasText()||(e=Object(r.a)(Object(r.a)({},e),{labelElementId:n._labelId})),i.createElement(a,Object(r.a)({id:n._labelId+"-menu",directionalHint:N.a.bottomLeftEdge},e,{shouldFocusOnContainer:n._menuShouldFocusOnContainer,shouldFocusOnMount:n._menuShouldFocusOnMount,hidden:t?o:void 0,className:Object(_.a)("ms-BaseButton-menuhost",e.className),target:n._isSplitButton?n._splitButtonContainer.current:n._buttonElement.current,onDismiss:n._onDismissMenu}))},n._onDismissMenu=function(e){var t=n.props.menuProps;t&&t.onDismiss&&t.onDismiss(e),e&&e.defaultPrevented||n._dismissMenu()},n._dismissMenu=function(){n._menuShouldFocusOnMount=void 0,n._menuShouldFocusOnContainer=void 0,n.setState({menuHidden:!0})},n._openMenu=function(e,t){void 0===t&&(t=!0),n.props.menuProps&&(n._menuShouldFocusOnContainer=e,n._menuShouldFocusOnMount=t,n._renderedVisibleMenu=!0,n.setState({menuHidden:!1}))},n._onToggleMenu=function(e){var t=!0;n.props.menuProps&&!1===n.props.menuProps.shouldFocusOnMount&&(t=!1),n.state.menuHidden?n._openMenu(e,t):n._dismissMenu()},n._onSplitContainerFocusCapture=function(e){var t=n._splitButtonContainer.current;!t||e.target&&w(e.target,t)||t.focus()},n._onSplitButtonPrimaryClick=function(e){n.state.menuHidden||n._dismissMenu(),!n._processingTouch&&n.props.onClick?n.props.onClick(e):n._processingTouch&&n._onMenuClick(e)},n._onKeyDown=function(e){!n.props.disabled||e.which!==S.a.enter&&e.which!==S.a.space?n.props.disabled||(n.props.menuProps?n._onMenuKeyDown(e):void 0!==n.props.onKeyDown&&n.props.onKeyDown(e)):(e.preventDefault(),e.stopPropagation())},n._onKeyUp=function(e){n.props.disabled||void 0===n.props.onKeyUp||n.props.onKeyUp(e)},n._onKeyPress=function(e){n.props.disabled||void 0===n.props.onKeyPress||n.props.onKeyPress(e)},n._onMouseUp=function(e){n.props.disabled||void 0===n.props.onMouseUp||n.props.onMouseUp(e)},n._onMouseDown=function(e){n.props.disabled||void 0===n.props.onMouseDown||n.props.onMouseDown(e)},n._onClick=function(e){n.props.disabled||(n.props.menuProps?n._onMenuClick(e):void 0!==n.props.onClick&&n.props.onClick(e))},n._onSplitButtonContainerKeyDown=function(e){e.which===S.a.enter||e.which===S.a.space?n._buttonElement.current&&(n._buttonElement.current.click(),e.preventDefault(),e.stopPropagation()):n._onMenuKeyDown(e)},n._onMenuKeyDown=function(e){if(!n.props.disabled){n.props.onKeyDown&&n.props.onKeyDown(e);var t=e.which===S.a.up,r=e.which===S.a.down;if(!e.defaultPrevented&&n._isValidMenuOpenKey(e)){var i=n.props.onMenuClick;i&&i(e,n.props),n._onToggleMenu(!1),e.preventDefault(),e.stopPropagation()}if(e.which!==S.a.enter&&e.which!==S.a.space||Object(E.b)(!0,e.target),!e.altKey&&!e.metaKey&&(t||r))if(!n.state.menuHidden&&n.props.menuProps)(void 0!==n._menuShouldFocusOnMount?n._menuShouldFocusOnMount:n.props.menuProps.shouldFocusOnMount)||(e.preventDefault(),e.stopPropagation(),n._menuShouldFocusOnMount=!0,n.forceUpdate())}},n._onTouchStart=function(){n._isSplitButton&&n._splitButtonContainer.current&&!("onpointerdown"in n._splitButtonContainer.current)&&n._handleTouchAndPointerEvent()},n._onMenuClick=function(e){var t=n.props.onMenuClick;if(t&&t(e,n.props),!e.defaultPrevented){var r=0!==e.nativeEvent.detail||"mouse"===e.nativeEvent.pointerType;n._onToggleMenu(r),e.preventDefault(),e.stopPropagation()}},Object(C.a)(n),n._async=new a.a(n),n._events=new s.a(n),n.props.split,n._labelId=Object(T.a)(),n._descriptionId=Object(T.a)(),n._ariaDescriptionId=Object(T.a)(),n.state={menuHidden:!0},n}return Object(r.c)(t,e),Object.defineProperty(t.prototype,"_isSplitButton",{get:function(){return!!this.props.menuProps&&!!this.props.onClick&&!0===this.props.split},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t=this.props,n=t.ariaDescription,r=t.ariaLabel,i=t.ariaHidden,o=t.className,a=t.disabled,s=t.allowDisabledFocus,l=t.primaryDisabled,c=t.secondaryText,p=void 0===c?this.props.description:c,h=t.href,d=t.iconProps,f=t.menuIconProps,m=t.styles,g=t.checked,y=t.variantClassName,v=t.theme,_=t.toggle,b=t.getClassNames,x=t.role,w=this.state.menuHidden,S=a||l;this._classNames=b?b(v,o,y,d&&d.className,f&&f.className,S,g,!w,!!this.props.menuProps,this.props.split,!!s):It(v,m,o,y,d&&d.className,f&&f.className,S,!!this.props.menuProps,g,!w,this.props.split);var E=this,C=E._ariaDescriptionId,T=E._labelId,P=E._descriptionId,A=!S&&!!h,M=A?"a":"button",O=Object(I.d)(Object(k.a)(A?{}:{type:"button"},this.props.rootProps,this.props),A?I.a:I.b,["disabled"]),L=r||O["aria-label"],R=void 0;n?R=C:p&&this.props.onRenderDescription!==u?R=P:O["aria-describedby"]&&(R=O["aria-describedby"]);var D=void 0;O["aria-labelledby"]?D=O["aria-labelledby"]:R&&!L&&(D=this._hasText()?T:void 0);var z=!(!1===this.props["data-is-focusable"]||a&&!s||this._isSplitButton),N="menuitemcheckbox"===x||"checkbox"===x,B=N||!0===_?!!g:void 0,F=Object(k.a)(O,((e={className:this._classNames.root,ref:this._mergedRef(this.props.elementRef,this._buttonElement),disabled:S&&!s,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onClick:this._onClick,"aria-label":L,"aria-labelledby":D,"aria-describedby":R,"aria-disabled":S,"data-is-focusable":z})[N?"aria-checked":"aria-pressed"]=B,e));if(i&&(F["aria-hidden"]=!0),this._isSplitButton)return this._onRenderSplitButtonContent(M,F);if(this.props.menuProps){var j=this.props.menuProps.id,U=void 0===j?this._labelId+"-menu":j;Object(k.a)(F,{"aria-expanded":!w,"aria-controls":w?null:U,"aria-haspopup":!0})}return this._onRenderContent(M,F)},t.prototype.componentDidMount=function(){this._isSplitButton&&this._splitButtonContainer.current&&("onpointerdown"in this._splitButtonContainer.current&&this._events.on(this._splitButtonContainer.current,"pointerdown",this._onPointerDown,!0),"onpointerup"in this._splitButtonContainer.current&&this.props.onPointerUp&&this._events.on(this._splitButtonContainer.current,"pointerup",this.props.onPointerUp,!0))},t.prototype.componentDidUpdate=function(e,t){this.props.onAfterMenuDismiss&&!t.menuHidden&&this.state.menuHidden&&this.props.onAfterMenuDismiss()},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.focus=function(){this._isSplitButton&&this._splitButtonContainer.current?(Object(E.b)(!0),this._splitButtonContainer.current.focus()):this._buttonElement.current&&(Object(E.b)(!0),this._buttonElement.current.focus())},t.prototype.dismissMenu=function(){this._dismissMenu()},t.prototype.openMenu=function(e,t){this._openMenu(e,t)},t.prototype._onRenderContent=function(e,t){var n=this,o=this.props,a=e,s=o.menuIconProps,l=o.menuProps,u=o.onRenderIcon,c=void 0===u?this._onRenderIcon:u,p=o.onRenderAriaDescription,h=void 0===p?this._onRenderAriaDescription:p,d=o.onRenderChildren,f=void 0===d?this._onRenderChildren:d,m=o.onRenderMenu,g=void 0===m?this._onRenderMenu:m,y=o.onRenderMenuIcon,v=void 0===y?this._onRenderMenuIcon:y,_=o.disabled,b=o.keytipProps;b&&l&&(b=this._getMemoizedMenuButtonKeytipProps(b));var x=function(e){return i.createElement(a,Object(r.a)({},t,e),i.createElement("span",{className:n._classNames.flexContainer,"data-automationid":"splitbuttonprimary"},c(o,n._onRenderIcon),n._onRenderTextContents(),h(o,n._onRenderAriaDescription),f(o,n._onRenderChildren),!n._isSplitButton&&(l||s||n.props.onRenderMenuIcon)&&v(n.props,n._onRenderMenuIcon),l&&!l.doNotLayer&&n._shouldRenderMenu()&&g(l,n._onRenderMenu)))},w=b?i.createElement(Je,{keytipProps:this._isSplitButton?void 0:b,ariaDescribedBy:t["aria-describedby"],disabled:_},(function(e){return x(e)})):x();return l&&l.doNotLayer?i.createElement(i.Fragment,null,w,this._shouldRenderMenu()&&g(l,this._onRenderMenu)):i.createElement(i.Fragment,null,w,i.createElement(P.a,null))},t.prototype._shouldRenderMenu=function(){var e=this.state.menuHidden,t=this.props,n=t.persistMenu,r=t.renderPersistedMenuHiddenOnMount;return!e||!(!n||!this._renderedVisibleMenu&&!r)},t.prototype._hasText=function(){return null!==this.props.text&&(void 0!==this.props.text||"string"===typeof this.props.children)},t.prototype._onRenderSplitButtonContent=function(e,t){var n=this,o=this.props,a=o.styles,s=void 0===a?{}:a,l=o.disabled,u=o.allowDisabledFocus,c=o.checked,p=o.getSplitButtonClassNames,h=o.primaryDisabled,d=o.menuProps,f=o.toggle,m=o.role,g=o.primaryActionButtonProps,y=this.props.keytipProps,v=this.state.menuHidden,_=p?p(!!l,!v,!!c,!!u):s&&kt(s,!!l,!v,!!c,!!h);Object(k.a)(t,{onClick:void 0,onPointerDown:void 0,onPointerUp:void 0,tabIndex:-1,"data-is-focusable":!1}),y&&d&&(y=this._getMemoizedMenuButtonKeytipProps(y));var b=Object(I.d)(t,[],["disabled"]);g&&Object(k.a)(t,g);var x=function(o){return i.createElement("div",Object(r.a)({},b,{"data-ktp-target":o?o["data-ktp-target"]:void 0,role:m||"button","aria-disabled":l,"aria-haspopup":!0,"aria-expanded":!v,"aria-pressed":f?!!c:void 0,"aria-describedby":A(t["aria-describedby"],o?o["aria-describedby"]:void 0),className:_&&_.splitButtonContainer,onKeyDown:n._onSplitButtonContainerKeyDown,onTouchStart:n._onTouchStart,ref:n._splitButtonContainer,"data-is-focusable":!0,onClick:l||h?void 0:n._onSplitButtonPrimaryClick,tabIndex:!l&&!h||u?0:void 0,"aria-roledescription":t["aria-roledescription"],onFocusCapture:n._onSplitContainerFocusCapture}),i.createElement("span",{style:{display:"flex"}},n._onRenderContent(e,t),n._onRenderSplitButtonMenuButton(_,o),n._onRenderSplitButtonDivider(_)))};return y?i.createElement(Je,{keytipProps:y,disabled:l},(function(e){return x(e)})):x()},t.prototype._onRenderSplitButtonDivider=function(e){if(e&&e.divider){return i.createElement("span",{className:e.divider,"aria-hidden":!0,onClick:function(e){e.stopPropagation()}})}return null},t.prototype._onRenderSplitButtonMenuButton=function(e,n){var o=this.props,a=o.allowDisabledFocus,s=o.checked,l=o.disabled,u=o.splitButtonMenuProps,c=o.splitButtonAriaLabel,p=o.primaryDisabled,h=this.state.menuHidden,d=this.props.menuIconProps;void 0===d&&(d={iconName:"ChevronDown"});var f=Object(r.a)(Object(r.a)({},u),{styles:e,checked:s,disabled:l,allowDisabledFocus:a,onClick:this._onMenuClick,menuProps:void 0,iconProps:Object(r.a)(Object(r.a)({},d),{className:this._classNames.menuIcon}),ariaLabel:c,"aria-haspopup":!0,"aria-expanded":!h,"data-is-focusable":!1});return i.createElement(t,Object(r.a)({},f,{"data-ktp-execute-target":n?n["data-ktp-execute-target"]:n,onMouseDown:this._onMouseDown,tabIndex:p&&!a?0:-1}))},t.prototype._onPointerDown=function(e){var t=this.props.onPointerDown;t&&t(e),"touch"===e.pointerType&&(this._handleTouchAndPointerEvent(),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._handleTouchAndPointerEvent=function(){var e=this;void 0!==this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout((function(){e._processingTouch=!1,e._lastTouchTimeoutId=void 0,e.focus()}),500)},t.prototype._isValidMenuOpenKey=function(e){return this.props.menuTriggerKeyCode?e.which===this.props.menuTriggerKeyCode:!!this.props.menuProps&&(e.which===S.a.down&&(e.altKey||e.metaKey))},t.defaultProps={baseClassName:"ms-Button",styles:{},split:!1},t}(i.Component),At={outline:0},Mt=function(e){return{fontSize:e,margin:"0 4px",height:"16px",lineHeight:"16px",textAlign:"center",flexShrink:0}},Ot=Object(v.b)((function(e){var t,n,r=e.semanticColors,i=e.effects,o=e.fonts,a=r.buttonBorder,s=r.disabledBackground,l=r.disabledText,u={left:-2,top:-2,bottom:-2,right:-2,outlineColor:"ButtonText"};return{root:[Object(ee.k)(e,{inset:1,highContrastStyle:u,borderColor:"transparent"}),e.fonts.medium,{boxSizing:"border-box",border:"1px solid "+a,userSelect:"none",display:"inline-block",textDecoration:"none",textAlign:"center",cursor:"pointer",padding:"0 16px",borderRadius:i.roundedCorner2,selectors:{":active > *":{position:"relative",left:0,top:0}}}],rootDisabled:[Object(ee.k)(e,{inset:1,highContrastStyle:u,borderColor:"transparent"}),{backgroundColor:s,borderColor:s,color:l,cursor:"default",selectors:{":hover":At,":focus":At}}],iconDisabled:{color:l,selectors:(t={},t[ee.c]={color:"GrayText"},t)},menuIconDisabled:{color:l,selectors:(n={},n[ee.c]={color:"GrayText"},n)},flexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},description:{display:"block"},textContainer:{flexGrow:1,display:"block"},icon:Mt(o.mediumPlus.fontSize),menuIcon:Mt(o.small.fontSize),label:{margin:"0 4px",lineHeight:"100%",display:"block"},screenReaderText:ee.s}})),Lt=Object(v.b)((function(e,t){var n,i,o,a,s,l,u,c,p,h,d,f,m,g=e.effects,y=e.palette,v=e.semanticColors,_={left:-2,top:-2,bottom:-2,right:-2,border:"none"},b={position:"absolute",width:1,right:31,top:8,bottom:8},x={splitButtonContainer:[Object(ee.k)(e,{highContrastStyle:_,inset:2}),{display:"inline-flex",selectors:{".ms-Button--default":{borderTopRightRadius:"0",borderBottomRightRadius:"0",borderRight:"none"},".ms-Button--primary":{borderTopRightRadius:"0",borderBottomRightRadius:"0",border:"none",selectors:(n={},n[ee.c]=Object(r.a)({color:"WindowText",backgroundColor:"Window",border:"1px solid WindowText",borderRightWidth:"0"},Object(ee.m)()),n)},".ms-Button--primary + .ms-Button":{border:"none",selectors:(i={},i[ee.c]={border:"1px solid WindowText",borderLeftWidth:"0"},i)}}}],splitButtonContainerHovered:{selectors:{".ms-Button--primary":{selectors:(o={},o[ee.c]={color:"Window",backgroundColor:"Highlight"},o)},".ms-Button.is-disabled":{color:v.buttonTextDisabled,selectors:(a={},a[ee.c]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},a)}}},splitButtonContainerChecked:{selectors:{".ms-Button--primary":{selectors:(s={},s[ee.c]=Object(r.a)({color:"Window",backgroundColor:"WindowText"},Object(ee.m)()),s)}}},splitButtonContainerCheckedHovered:{selectors:{".ms-Button--primary":{selectors:(l={},l[ee.c]=Object(r.a)({color:"Window",backgroundColor:"WindowText"},Object(ee.m)()),l)}}},splitButtonContainerFocused:{outline:"none!important"},splitButtonMenuButton:(u={padding:6,height:"auto",boxSizing:"border-box",borderRadius:0,borderTopRightRadius:g.roundedCorner2,borderBottomRightRadius:g.roundedCorner2,border:"1px solid "+y.neutralSecondaryAlt,borderLeft:"none",outline:"transparent",userSelect:"none",display:"inline-block",textDecoration:"none",textAlign:"center",cursor:"pointer",verticalAlign:"top",width:32,marginLeft:-1,marginTop:0,marginRight:0,marginBottom:0},u[ee.c]={".ms-Button-menuIcon":{color:"WindowText"}},u),splitButtonDivider:Object(r.a)(Object(r.a)({},b),{selectors:(c={},c[ee.c]={backgroundColor:"WindowText"},c)}),splitButtonDividerDisabled:Object(r.a)(Object(r.a)({},b),{selectors:(p={},p[ee.c]={backgroundColor:"GrayText"},p)}),splitButtonMenuButtonDisabled:{pointerEvents:"none",border:"none",selectors:(h={":hover":{cursor:"default"},".ms-Button--primary":{selectors:(d={},d[ee.c]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},d)},".ms-Button-menuIcon":{selectors:(f={},f[ee.c]={color:"GrayText"},f)}},h[ee.c]={color:"GrayText",border:"1px solid GrayText",backgroundColor:"Window"},h)},splitButtonFlexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},splitButtonContainerDisabled:{outline:"none",border:"none",selectors:(m={},m[ee.c]=Object(r.a)({color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},Object(ee.m)()),m)},splitButtonMenuFocused:Object(r.a)({},Object(ee.k)(e,{highContrastStyle:_,inset:2}))};return Object(ee.g)(x,t)}));var Rt=Object(v.b)((function(e,t,n){var i=Ot(e),o=Lt(e),a={root:{minWidth:"80px",height:"32px"},label:{fontWeight:ee.b.semibold}};return Object(ee.g)(i,a,n?function(e){var t,n,i,o,a,s,l,u,c,p=e.palette,h=e.semanticColors;return{root:{backgroundColor:h.primaryButtonBackground,border:"1px solid "+h.primaryButtonBackground,color:h.primaryButtonText,selectors:(t={},t[ee.c]=Object(r.a)({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},Object(ee.m)()),t["."+E.a+" &:focus"]={selectors:{":after":{border:"none",outlineColor:p.white}}},t)},rootHovered:{backgroundColor:h.primaryButtonBackgroundHovered,border:"1px solid "+h.primaryButtonBackgroundHovered,color:h.primaryButtonTextHovered,selectors:(n={},n[ee.c]={color:"Window",backgroundColor:"Highlight",borderColor:"Highlight"},n)},rootPressed:{backgroundColor:h.primaryButtonBackgroundPressed,border:"1px solid "+h.primaryButtonBackgroundPressed,color:h.primaryButtonTextPressed,selectors:(i={},i[ee.c]=Object(r.a)({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},Object(ee.m)()),i)},rootExpanded:{backgroundColor:h.primaryButtonBackgroundPressed,color:h.primaryButtonTextPressed},rootChecked:{backgroundColor:h.primaryButtonBackgroundPressed,color:h.primaryButtonTextPressed},rootCheckedHovered:{backgroundColor:h.primaryButtonBackgroundPressed,color:h.primaryButtonTextPressed},rootDisabled:{color:h.primaryButtonTextDisabled,backgroundColor:h.primaryButtonBackgroundDisabled,selectors:(o={},o[ee.c]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},o)},splitButtonContainer:{selectors:(a={},a[ee.c]={border:"none"},a)},splitButtonDivider:Object(r.a)(Object(r.a)({},{position:"absolute",width:1,right:31,top:8,bottom:8}),{backgroundColor:p.white,selectors:(s={},s[ee.c]={backgroundColor:"Window"},s)}),splitButtonMenuButton:{backgroundColor:h.primaryButtonBackground,color:h.primaryButtonText,selectors:(l={},l[ee.c]={backgroundColor:"WindowText"},l[":hover"]={backgroundColor:h.primaryButtonBackgroundHovered,selectors:(u={},u[ee.c]={color:"Highlight"},u)},l)},splitButtonMenuButtonDisabled:{backgroundColor:h.primaryButtonBackgroundDisabled,selectors:{":hover":{backgroundColor:h.primaryButtonBackgroundDisabled}}},splitButtonMenuButtonChecked:{backgroundColor:h.primaryButtonBackgroundPressed,selectors:{":hover":{backgroundColor:h.primaryButtonBackgroundPressed}}},splitButtonMenuButtonExpanded:{backgroundColor:h.primaryButtonBackgroundPressed,selectors:{":hover":{backgroundColor:h.primaryButtonBackgroundPressed}}},splitButtonMenuIcon:{color:h.primaryButtonText},splitButtonMenuIconDisabled:{color:p.neutralTertiary,selectors:(c={},c[ee.c]={color:"GrayText"},c)}}}(e):function(e){var t,n,i,o,a,s=e.semanticColors,l=e.palette,u=s.buttonBackground,c=s.buttonBackgroundPressed,p=s.buttonBackgroundHovered,h=s.buttonBackgroundDisabled,d=s.buttonText,f=s.buttonTextHovered,m=s.buttonTextDisabled,g=s.buttonTextChecked,y=s.buttonTextCheckedHovered;return{root:{backgroundColor:u,color:d},rootHovered:{backgroundColor:p,color:f,selectors:(t={},t[ee.c]={borderColor:"Highlight",color:"Highlight"},t)},rootPressed:{backgroundColor:c,color:g},rootExpanded:{backgroundColor:c,color:g},rootChecked:{backgroundColor:c,color:g},rootCheckedHovered:{backgroundColor:c,color:y},rootDisabled:{color:m,backgroundColor:h,selectors:(n={},n[ee.c]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},n)},splitButtonContainer:{selectors:(i={},i[ee.c]={border:"none"},i)},splitButtonMenuButton:{color:l.white,backgroundColor:"transparent",selectors:{":hover":{backgroundColor:l.neutralLight,selectors:(o={},o[ee.c]={color:"Highlight"},o)}}},splitButtonMenuButtonDisabled:{backgroundColor:s.buttonBackgroundDisabled,selectors:{":hover":{backgroundColor:s.buttonBackgroundDisabled}}},splitButtonDivider:Object(r.a)(Object(r.a)({},{position:"absolute",width:1,right:31,top:8,bottom:8}),{backgroundColor:l.neutralTertiaryAlt,selectors:(a={},a[ee.c]={backgroundColor:"WindowText"},a)}),splitButtonDividerDisabled:{backgroundColor:e.palette.neutralTertiaryAlt},splitButtonMenuButtonChecked:{backgroundColor:l.neutralQuaternaryAlt,selectors:{":hover":{backgroundColor:l.neutralQuaternaryAlt}}},splitButtonMenuButtonExpanded:{backgroundColor:l.neutralQuaternaryAlt,selectors:{":hover":{backgroundColor:l.neutralQuaternaryAlt}}},splitButtonMenuIcon:{color:s.buttonText},splitButtonMenuIconDisabled:{color:s.buttonTextDisabled}}}(e),o,t)})),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.primary,n=void 0!==t&&t,o=e.styles,a=e.theme;return i.createElement(Pt,Object(r.a)({},this.props,{variantClassName:n?"ms-Button--primary":"ms-Button--default",styles:Rt(a,o,n),onRenderDescription:u}))},t=Object(r.b)([f("DefaultButton",["theme","styles"],!0)],t)}(i.Component),zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.c)(t,e),t.prototype.render=function(){return i.createElement(Dt,Object(r.a)({},this.props,{primary:!0,onRenderDescription:u}))},t=Object(r.b)([f("PrimaryButton",["theme","styles"],!0)],t)}(i.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n(159),i=n(29),o={host:"ms-HoverCard-host"};var a,s,l=n(1),u=n(0),c=n(144),p=n(13),h=n(155),d=n(64),f=n(67),m=n(65),g=n(73),y=n(12);!function(e){e[e.hover=0]="hover",e[e.hotKey=1]="hotKey"}(a||(a={})),function(e){e.plain="PlainCard",e.expanding="ExpandingCard"}(s||(s={}));var v,_={root:"ms-ExpandingCard-root",compactCard:"ms-ExpandingCard-compactCard",expandedCard:"ms-ExpandingCard-expandedCard",expandedCardScroll:"ms-ExpandingCard-expandedCardScrollRegion"};!function(e){e[e.compact=0]="compact",e[e.expanded=1]="expanded"}(v||(v={}));var b=n(8),x=n(71),w=n(149),S=n(160),E=n(117);var C=n(158),T=n(150),I=n(70),k=n(116),P=u.forwardRef((function(e,t){var n=u.useRef(null),r=u.useRef(null),i=u.useRef(null),o=Object(C.a)(n,t),a=Object(T.a)(void 0,e.id),s=Object(k.b)(),c=Object(g.d)(e,g.c),p=Object(I.a)((function(){return{previouslyFocusedElementOutsideTrapZone:void 0,previouslyFocusedElementInTrapZone:void 0,disposeFocusHandler:void 0,disposeClickHandler:void 0,hasFocus:!1,unmodalize:void 0}})),h=e.ariaLabelledBy,d=e.className,f=e.children,m=e.componentRef,v=e.disabled,_=e.disableFirstFocus,b=void 0!==_&&_,x=e.disabled,M=void 0!==x&&x,O=e.elementToFocusOnDismiss,L=e.forceFocusInsideTrap,R=void 0===L||L,D=e.focusPreviouslyFocusedInnerElement,z=e.firstFocusableSelector,N=e.ignoreExternalFocusing,B=e.isClickableOutsideFocusTrap,F=void 0!==B&&B,j=e.onFocus,U=e.onBlur,V=e.onFocusCapture,q=e.onBlurCapture,H=e.enableAriaHiddenSiblings,W={"aria-hidden":!0,style:{pointerEvents:"none",position:"fixed"},tabIndex:v?-1:0,"data-is-visible":!0},G=u.useCallback((function(){if(D&&p.previouslyFocusedElementInTrapZone&&Object(w.a)(n.current,p.previouslyFocusedElementInTrapZone))Object(S.b)(p.previouslyFocusedElementInTrapZone);else{var e="string"===typeof z?z:z&&z(),t=null;n.current&&(e&&(t=n.current.querySelector("."+e)),t||(t=Object(S.j)(n.current,n.current.firstChild,!1,!1,!1,!0))),t&&Object(S.b)(t)}}),[z,D,p]),Z=u.useCallback((function(e){if(!v){var t=e===p.hasFocus?i.current:r.current;if(n.current){var o=e===p.hasFocus?Object(S.i)(n.current,t,!0,!1):Object(S.f)(n.current,t,!0,!1);o&&(o===r.current||o===i.current?G():o.focus())}}}),[v,G,p]),K=u.useCallback((function(e){null===q||void 0===q||q(e);var t=e.relatedTarget;null===e.relatedTarget&&(t=s.activeElement),Object(w.a)(n.current,t)||(p.hasFocus=!1)}),[s,p,q]),X=u.useCallback((function(e){null===V||void 0===V||V(e),e.target===r.current?Z(!0):e.target===i.current&&Z(!1),p.hasFocus=!0,e.target!==e.currentTarget&&e.target!==r.current&&e.target!==i.current&&(p.previouslyFocusedElementInTrapZone=e.target)}),[V,p,Z]),Y=u.useCallback((function(){if(P.focusStack=P.focusStack.filter((function(e){return a!==e})),s){var e=s.activeElement;N||!p.previouslyFocusedElementOutsideTrapZone||"function"!==typeof p.previouslyFocusedElementOutsideTrapZone.focus||!Object(w.a)(n.current,e)&&e!==s.body||p.previouslyFocusedElementOutsideTrapZone!==r.current&&p.previouslyFocusedElementOutsideTrapZone!==i.current&&Object(S.b)(p.previouslyFocusedElementOutsideTrapZone)}}),[s,a,N,p]),J=u.useCallback((function(e){if(!v&&P.focusStack.length&&a===P.focusStack[P.focusStack.length-1]){var t=e.target;Object(w.a)(n.current,t)||(G(),p.hasFocus=!0,e.preventDefault(),e.stopPropagation())}}),[v,a,G,p]),$=u.useCallback((function(e){if(!v&&P.focusStack.length&&a===P.focusStack[P.focusStack.length-1]){var t=e.target;t&&!Object(w.a)(n.current,t)&&(G(),p.hasFocus=!0,e.preventDefault(),e.stopPropagation())}}),[v,a,G,p]),Q=u.useCallback((function(){R&&!p.disposeFocusHandler?p.disposeFocusHandler=Object(E.a)(window,"focus",J,!0):!R&&p.disposeFocusHandler&&(p.disposeFocusHandler(),p.disposeFocusHandler=void 0),F||p.disposeClickHandler?F&&p.disposeClickHandler&&(p.disposeClickHandler(),p.disposeClickHandler=void 0):p.disposeClickHandler=Object(E.a)(window,"click",$,!0)}),[$,J,R,F,p]);return u.useEffect((function(){var e=n.current;return Q(),function(){v&&!R&&Object(w.a)(e,null===s||void 0===s?void 0:s.activeElement)||Y()}}),[Q]),u.useEffect((function(){var e=void 0===R||R,t=void 0!==v&&v;if(!t||e){if(M)return;P.focusStack.push(a),p.previouslyFocusedElementOutsideTrapZone=O||s.activeElement,b||Object(w.a)(n.current,p.previouslyFocusedElementOutsideTrapZone)||G(),!p.unmodalize&&n.current&&H&&(p.unmodalize=function(e){for(var t,n=[],r=Object(y.a)(e)||document;e!==r.body;){for(var i=0,o=e.parentElement.children;i<o.length;i++){var a=o[i];a!==e&&"true"!==(null===(t=a.getAttribute("aria-hidden"))||void 0===t?void 0:t.toLowerCase())&&n.push(a)}if(!e.parentElement)break;e=e.parentElement}return n.forEach((function(e){e.setAttribute("aria-hidden","true")})),function(){!function(e){e.forEach((function(e){e.setAttribute("aria-hidden","false")}))}(n),n=[]}}(n.current))}else e&&!t||(Y(),p.unmodalize&&p.unmodalize());O&&p.previouslyFocusedElementOutsideTrapZone!==O&&(p.previouslyFocusedElementOutsideTrapZone=O)}),[O,R,v]),A((function(){p.disposeClickHandler&&(p.disposeClickHandler(),p.disposeClickHandler=void 0),p.disposeFocusHandler&&(p.disposeFocusHandler(),p.disposeFocusHandler=void 0),p.unmodalize&&p.unmodalize(),delete p.previouslyFocusedElementInTrapZone,delete p.previouslyFocusedElementOutsideTrapZone})),function(e,t,n){u.useImperativeHandle(e,(function(){return{get previouslyFocusedElement(){return t},focus:n}}),[t,n])}(m,p.previouslyFocusedElementInTrapZone,G),u.createElement("div",Object(l.a)({},c,{className:d,ref:o,"aria-labelledby":h,onFocusCapture:X,onFocus:j,onBlur:U,onBlurCapture:K}),u.createElement("div",Object(l.a)({},W,{ref:r})),f,u.createElement("div",Object(l.a)({},W,{ref:i})))})),A=function(e){var t=u.useRef(e);t.current=e,u.useEffect((function(){return function(){t.current&&t.current()}}),[e])};P.displayName="FocusTrapZone",P.focusStack=[];var M=function(e){return u.createElement(x.a,Object(l.a)({},e),u.createElement(P,Object(l.a)({disabled:e.hidden},e.focusTrapProps),e.children))},O=function(e){var t=e.gapSpace,n=void 0===t?0:t,r=e.directionalHint,i=void 0===r?b.a.bottomLeftEdge:r,o=e.directionalHintFixed,a=e.targetElement,s=e.firstFocus,c=e.trapFocus,p=e.onLeave,h=e.className,d=e.finalHeight,f=e.content,m=e.calloutProps,y=Object(l.a)(Object(l.a)(Object(l.a)({},Object(g.d)(e,g.c)),{className:h,target:a,isBeakVisible:!1,directionalHint:i,directionalHintFixed:o,finalHeight:d,minPagePadding:24,onDismiss:p,gapSpace:n}),m);return u.createElement(u.Fragment,null,c?u.createElement(M,Object(l.a)({},y,{focusTrapProps:{forceFocusInsideTrap:!1,isClickableOutsideFocusTrap:!0,disableFirstFocus:!s}}),f):u.createElement(x.a,Object(l.a)({},y),f))},L=Object(c.a)(),R=function(e){function t(t){var n=e.call(this,t)||this;return n._expandedElem=u.createRef(),n._onKeyDown=function(e){e.which===p.a.escape&&n.props.onLeave&&n.props.onLeave(e)},n._onRenderCompactCard=function(){return u.createElement("div",{className:n._classNames.compactCard},n.props.onRenderCompactCard(n.props.renderData))},n._onRenderExpandedCard=function(){return!n.state.firstFrameRendered&&n._async.requestAnimationFrame((function(){n.setState({firstFrameRendered:!0})})),u.createElement("div",{className:n._classNames.expandedCard,ref:n._expandedElem},u.createElement("div",{className:n._classNames.expandedCardScroll},n.props.onRenderExpandedCard&&n.props.onRenderExpandedCard(n.props.renderData)))},n._checkNeedsScroll=function(){var e=n.props.expandedCardHeight;n._async.requestAnimationFrame((function(){n._expandedElem.current&&n._expandedElem.current.scrollHeight>=e&&n.setState({needsScroll:!0})}))},n._async=new d.a(n),Object(h.a)(n),n.state={firstFrameRendered:!1,needsScroll:!1},n}return Object(l.c)(t,e),t.prototype.componentDidMount=function(){this._checkNeedsScroll()},t.prototype.componentWillUnmount=function(){this._async.dispose()},t.prototype.render=function(){var e=this.props,t=e.styles,n=e.compactCardHeight,r=e.expandedCardHeight,i=e.theme,o=e.mode,a=e.className,s=this.state,c=s.needsScroll,p=s.firstFrameRendered,h=n+r;this._classNames=L(t,{theme:i,compactCardHeight:n,className:a,expandedCardHeight:r,needsScroll:c,expandedCardFirstFrameRendered:o===v.expanded&&p});var d=u.createElement("div",{onMouseEnter:this.props.onEnter,onMouseLeave:this.props.onLeave,onKeyDown:this._onKeyDown},this._onRenderCompactCard(),this._onRenderExpandedCard());return u.createElement(O,Object(l.a)({},this.props,{content:d,finalHeight:h,className:this._classNames.root}))},t.defaultProps={compactCardHeight:156,expandedCardHeight:384,directionalHintFixed:!0},t}(u.Component),D=Object(r.a)(R,(function(e){var t,n=e.theme,r=e.needsScroll,o=e.expandedCardFirstFrameRendered,a=e.compactCardHeight,s=e.expandedCardHeight,l=e.className,u=n.palette,c=Object(i.l)(_,n);return{root:[c.root,{width:320,pointerEvents:"none",selectors:(t={},t[i.c]={border:"1px solid WindowText"},t)},l],compactCard:[c.compactCard,{pointerEvents:"auto",position:"relative",height:a}],expandedCard:[c.expandedCard,{height:1,overflowY:"hidden",pointerEvents:"auto",transition:"height 0.467s cubic-bezier(0.5, 0, 0, 1)",selectors:{":before":{content:'""',position:"relative",display:"block",top:0,left:24,width:272,height:1,backgroundColor:u.neutralLighter}}},o&&{height:s}],expandedCardScroll:[c.expandedCardScroll,r&&{height:"100%",boxSizing:"border-box",overflowY:"auto"}]}}),void 0,{scope:"ExpandingCard"}),z={root:"ms-PlainCard-root"};var N=Object(c.a)(),B=function(e){function t(t){var n=e.call(this,t)||this;return n._onKeyDown=function(e){e.which===p.a.escape&&n.props.onLeave&&n.props.onLeave(e)},Object(h.a)(n),n}return Object(l.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.styles,n=e.theme,r=e.className;this._classNames=N(t,{theme:n,className:r});var i=u.createElement("div",{onMouseEnter:this.props.onEnter,onMouseLeave:this.props.onLeave,onKeyDown:this._onKeyDown},this.props.onRenderPlainCard(this.props.renderData));return u.createElement(O,Object(l.a)({},this.props,{content:i,className:this._classNames.root}))},t}(u.Component),F=Object(r.a)(B,(function(e){var t,n=e.theme,r=e.className;return{root:[Object(i.l)(z,n).root,{pointerEvents:"auto",selectors:(t={},t[i.c]={border:"1px solid WindowText"},t)},r]}}),void 0,{scope:"PlainCard"}),j=Object(c.a)(),U=function(e){function t(t){var n=e.call(this,t)||this;return n._hoverCard=u.createRef(),n.dismiss=function(e){n._async.clearTimeout(n._openTimerId),n._async.clearTimeout(n._dismissTimerId),e?n._dismissTimerId=n._async.setTimeout((function(){n._setDismissedState()}),n.props.cardDismissDelay):n._setDismissedState()},n._cardOpen=function(e){n._shouldBlockHoverCard()||"keydown"===e.type&&e.which!==n.props.openHotKey||(n._async.clearTimeout(n._dismissTimerId),"mouseenter"===e.type&&(n._currentMouseTarget=e.currentTarget),n._executeCardOpen(e))},n._executeCardOpen=function(e){n._async.clearTimeout(n._openTimerId),n._openTimerId=n._async.setTimeout((function(){n.setState((function(t){return t.isHoverCardVisible?t:{isHoverCardVisible:!0,mode:v.compact,openMode:"keydown"===e.type?a.hotKey:a.hover}}))}),n.props.cardOpenDelay)},n._cardDismiss=function(e,t){if(e){if(!(t instanceof MouseEvent))return;if("keydown"===t.type&&t.which!==p.a.escape)return;n.props.sticky||n._currentMouseTarget!==t.currentTarget&&t.which!==p.a.escape||n.dismiss(!0)}else{if(n.props.sticky&&!(t instanceof MouseEvent)&&t.nativeEvent instanceof MouseEvent&&"mouseleave"===t.type)return;n.dismiss(!0)}},n._setDismissedState=function(){n.setState({isHoverCardVisible:!1,mode:v.compact,openMode:a.hover})},n._instantOpenAsExpanded=function(e){n._async.clearTimeout(n._dismissTimerId),n.setState((function(e){return e.isHoverCardVisible?e:{isHoverCardVisible:!0,mode:v.expanded}}))},n._setEventListeners=function(){var e=n.props,t=e.trapFocus,r=e.instantOpenOnClick,i=e.eventListenerTarget,o=i?n._getTargetElement(i):n._getTargetElement(n.props.target),a=n._nativeDismissEvent;o&&(n._events.on(o,"mouseenter",n._cardOpen),n._events.on(o,"mouseleave",a),t?n._events.on(o,"keydown",n._cardOpen):(n._events.on(o,"focus",n._cardOpen),n._events.on(o,"blur",a)),r?n._events.on(o,"click",n._instantOpenAsExpanded):(n._events.on(o,"mousedown",a),n._events.on(o,"keydown",a)))},Object(h.a)(n),n._async=new d.a(n),n._events=new f.a(n),n._nativeDismissEvent=n._cardDismiss.bind(n,!0),n._childDismissEvent=n._cardDismiss.bind(n,!1),n.state={isHoverCardVisible:!1,mode:v.compact,openMode:a.hover},n}return Object(l.c)(t,e),t.prototype.componentDidMount=function(){this._setEventListeners()},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},t.prototype.componentDidUpdate=function(e,t){var n=this;e.target!==this.props.target&&(this._events.off(),this._setEventListeners()),t.isHoverCardVisible!==this.state.isHoverCardVisible&&(this.state.isHoverCardVisible?(this._async.setTimeout((function(){n.setState({mode:v.expanded},(function(){n.props.onCardExpand&&n.props.onCardExpand()}))}),this.props.expandedCardOpenDelay),this.props.onCardVisible&&this.props.onCardVisible()):(this.setState({mode:v.compact}),this.props.onCardHide&&this.props.onCardHide()))},t.prototype.render=function(){var e=this.props,t=e.expandingCardProps,n=e.children,r=e.id,i=e.setAriaDescribedBy,o=void 0===i||i,c=e.styles,p=e.theme,h=e.className,d=e.type,f=e.plainCardProps,y=e.trapFocus,v=e.setInitialFocus,_=this.state,b=_.isHoverCardVisible,x=_.mode,w=_.openMode,S=r||Object(m.a)("hoverCard");this._classNames=j(c,{theme:p,className:h});var E=Object(l.a)(Object(l.a)({},Object(g.d)(this.props,g.c)),{id:S,trapFocus:!!y,firstFocus:v||w===a.hotKey,targetElement:this._getTargetElement(this.props.target),onEnter:this._cardOpen,onLeave:this._childDismissEvent}),C=Object(l.a)(Object(l.a)(Object(l.a)({},t),E),{mode:x}),T=Object(l.a)(Object(l.a)({},f),E);return u.createElement("div",{className:this._classNames.host,ref:this._hoverCard,"aria-describedby":o&&b?S:void 0,"data-is-focusable":!this.props.target},n,b&&(d===s.expanding?u.createElement(D,Object(l.a)({},C)):u.createElement(F,Object(l.a)({},T))))},t.prototype._getTargetElement=function(e){switch(typeof e){case"string":return Object(y.a)().querySelector(e);case"object":return e;default:return this._hoverCard.current||void 0}},t.prototype._shouldBlockHoverCard=function(){return!(!this.props.shouldBlockHoverCard||!this.props.shouldBlockHoverCard())},t.defaultProps={cardOpenDelay:500,cardDismissDelay:100,expandedCardOpenDelay:1500,instantOpenOnClick:!1,setInitialFocus:!1,openHotKey:p.a.c,type:s.expanding},t}(u.Component),V=Object(r.a)(U,(function(e){var t=e.className,n=e.theme;return{host:[Object(i.l)(o,n).host,t]}}),void 0,{scope:"HoverCard"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(159),i=n(1),o=n(0),a=n(73),s=n(144),l=Object(s.a)({cacheSize:100}),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.as,n=void 0===t?"label":t,r=e.children,s=e.className,u=e.disabled,c=e.styles,p=e.required,h=e.theme,d=l(c,{className:s,disabled:u,required:p,theme:h});return o.createElement(n,Object(i.a)({},Object(a.d)(this.props,a.c),{className:d.root}),r)},t}(o.Component),c=n(29),p=Object(r.a)(u,(function(e){var t,n=e.theme,r=e.className,o=e.disabled,a=e.required,s=n.semanticColors,l=c.b.semibold,u=s.bodyText,p=s.disabledBodyText,h=s.errorText;return{root:["ms-Label",n.fonts.medium,{fontWeight:l,color:u,boxSizing:"border-box",boxShadow:"none",margin:0,display:"block",padding:"5px 0",wordWrap:"break-word",overflowWrap:"break-word"},o&&{color:p,selectors:(t={},t[c.c]=Object(i.a)({color:"GrayText"},Object(c.m)()),t)},a&&{selectors:{"::after":{content:"' *'",color:h,paddingRight:12}}},r]}}),void 0,{scope:"Label"}),h=n(156),d=n(155),f=n(64),m=n(65),g=n(7),y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isRendered:!1},n}return Object(g.b)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.delay;this._timeoutId=window.setTimeout((function(){e.setState({isRendered:!0})}),t)},t.prototype.componentWillUnmount=function(){this._timeoutId&&clearTimeout(this._timeoutId)},t.prototype.render=function(){return this.state.isRendered?o.Children.only(this.props.children):null},t.defaultProps={delay:0},t}(o.Component);var v=n(31);var _,b=n(6),x=Object(s.a)(),w="TextField",S=function(e){function t(t){var n=e.call(this,t)||this;n._textElement=o.createRef(),n._onFocus=function(e){n.props.onFocus&&n.props.onFocus(e),n.setState({isFocused:!0},(function(){n.props.validateOnFocusIn&&n._validate(n.value)}))},n._onBlur=function(e){n.props.onBlur&&n.props.onBlur(e),n.setState({isFocused:!1},(function(){n.props.validateOnFocusOut&&n._validate(n.value)}))},n._onRenderLabel=function(e){var t=e.label,r=e.required,i=n._classNames.subComponentStyles?n._classNames.subComponentStyles.label:void 0;return t?o.createElement(p,{required:r,htmlFor:n._id,styles:i,disabled:e.disabled,id:n._labelId},e.label):null},n._onRenderDescription=function(e){return e.description?o.createElement("span",{className:n._classNames.description},e.description):null},n._onRevealButtonClick=function(e){n.setState((function(e){return{isRevealingPassword:!e.isRevealingPassword}}))},n._onInputChange=function(e){var t,r,i=e.target.value,o=E(n.props,n.state)||"";void 0!==i&&i!==n._lastChangeValue&&i!==o?(n._lastChangeValue=i,null===(r=(t=n.props).onChange)||void 0===r||r.call(t,e,i),n._isControlled||n.setState({uncontrolledValue:i})):n._lastChangeValue=void 0},Object(d.a)(n),n._async=new f.a(n),n._fallbackId=Object(m.a)(w),n._descriptionId=Object(m.a)("TextFieldDescription"),n._labelId=Object(m.a)("TextFieldLabel"),n._warnControlledUsage();var r=t.defaultValue,i=void 0===r?"":r;return"number"===typeof i&&(i=String(i)),n.state={uncontrolledValue:n._isControlled?void 0:i,isFocused:!1,errorMessage:""},n._delayedValidate=n._async.debounce(n._validate,n.props.deferredValidationTime),n._lastValidation=0,n}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return E(this.props,this.state)},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this._adjustInputHeight(),this.props.validateOnLoad&&this._validate(this.value)},t.prototype.componentWillUnmount=function(){this._async.dispose()},t.prototype.getSnapshotBeforeUpdate=function(e,t){return{selection:[this.selectionStart,this.selectionEnd]}},t.prototype.componentDidUpdate=function(e,t,n){var r=this.props,i=(n||{}).selection,o=void 0===i?[null,null]:i,a=o[0],s=o[1];!!e.multiline!==!!r.multiline&&t.isFocused&&(this.focus(),null!==a&&null!==s&&a>=0&&s>=0&&this.setSelectionRange(a,s)),e.value!==r.value&&(this._lastChangeValue=void 0);var l=E(e,t),u=this.value;l!==u&&(this._warnControlledUsage(e),this.state.errorMessage&&!r.errorMessage&&this.setState({errorMessage:""}),this._adjustInputHeight(),C(r)&&this._delayedValidate(u))},t.prototype.render=function(){var e=this.props,t=e.borderless,n=e.className,r=e.disabled,a=e.iconProps,s=e.inputClassName,l=e.label,u=e.multiline,c=e.required,p=e.underlined,d=e.prefix,f=e.resizable,m=e.suffix,g=e.theme,v=e.styles,w=e.autoAdjustHeight,S=e.canRevealPassword,E=e.revealPasswordAriaLabel,C=e.type,T=e.onRenderPrefix,I=void 0===T?this._onRenderPrefix:T,k=e.onRenderSuffix,P=void 0===k?this._onRenderSuffix:k,A=e.onRenderLabel,M=void 0===A?this._onRenderLabel:A,O=e.onRenderDescription,L=void 0===O?this._onRenderDescription:O,R=this.state,D=R.isFocused,z=R.isRevealingPassword,N=this._errorMessage,B=!!S&&"password"===C&&function(){if("boolean"!==typeof _){var e=Object(b.a)();if(null===e||void 0===e?void 0:e.navigator){var t=/^Edg/.test(e.navigator.userAgent||"");_=!(function(){var e,t=Object(b.a)();return!!(null===(e=null===t||void 0===t?void 0:t.navigator)||void 0===e?void 0:e.userAgent)&&t.navigator.userAgent.indexOf("rv:11.0")>-1}()||t)}else _=!0}return _}(),F=this._classNames=x(v,{theme:g,className:n,disabled:r,focused:D,required:c,multiline:u,hasLabel:!!l,hasErrorMessage:!!N,borderless:t,resizable:f,hasIcon:!!a,underlined:p,inputClassName:s,autoAdjustHeight:w,hasRevealButton:B});return o.createElement("div",{ref:this.props.elementRef,className:F.root},o.createElement("div",{className:F.wrapper},M(this.props,this._onRenderLabel),o.createElement("div",{className:F.fieldGroup},(void 0!==d||this.props.onRenderPrefix)&&o.createElement("div",{className:F.prefix},I(this.props,this._onRenderPrefix)),u?this._renderTextArea():this._renderInput(),a&&o.createElement(h.a,Object(i.a)({className:F.icon},a)),B&&o.createElement("button",{"aria-label":E,className:F.revealButton,onClick:this._onRevealButtonClick,"aria-pressed":!!z,type:"button"},o.createElement("span",{className:F.revealSpan},o.createElement(h.a,{className:F.revealIcon,iconName:z?"Hide":"RedEye"}))),(void 0!==m||this.props.onRenderSuffix)&&o.createElement("div",{className:F.suffix},P(this.props,this._onRenderSuffix)))),this._isDescriptionAvailable&&o.createElement("span",{id:this._descriptionId},L(this.props,this._onRenderDescription),N&&o.createElement("div",{role:"alert"},o.createElement(y,null,this._renderErrorMessage()))))},t.prototype.focus=function(){this._textElement.current&&this._textElement.current.focus()},t.prototype.blur=function(){this._textElement.current&&this._textElement.current.blur()},t.prototype.select=function(){this._textElement.current&&this._textElement.current.select()},t.prototype.setSelectionStart=function(e){this._textElement.current&&(this._textElement.current.selectionStart=e)},t.prototype.setSelectionEnd=function(e){this._textElement.current&&(this._textElement.current.selectionEnd=e)},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._textElement.current?this._textElement.current.selectionStart:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._textElement.current?this._textElement.current.selectionEnd:-1},enumerable:!1,configurable:!0}),t.prototype.setSelectionRange=function(e,t){this._textElement.current&&this._textElement.current.setSelectionRange(e,t)},t.prototype._warnControlledUsage=function(e){this._id,this.props,null!==this.props.value||this._hasWarnedNullValue||(this._hasWarnedNullValue=!0,Object(v.a)("Warning: 'value' prop on 'TextField' should not be null. Consider using an empty string to clear the component or undefined to indicate an uncontrolled component."))},Object.defineProperty(t.prototype,"_id",{get:function(){return this.props.id||this._fallbackId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isControlled",{get:function(){return void 0!==(e=this.props)[t="value"]&&null!==e[t];var e,t},enumerable:!1,configurable:!0}),t.prototype._onRenderPrefix=function(e){var t=e.prefix;return o.createElement("span",{style:{paddingBottom:"1px"}},t)},t.prototype._onRenderSuffix=function(e){var t=e.suffix;return o.createElement("span",{style:{paddingBottom:"1px"}},t)},Object.defineProperty(t.prototype,"_errorMessage",{get:function(){var e=this.props.errorMessage;return(void 0===e?this.state.errorMessage:e)||""},enumerable:!1,configurable:!0}),t.prototype._renderErrorMessage=function(){var e=this._errorMessage;return e?"string"===typeof e?o.createElement("p",{className:this._classNames.errorMessage},o.createElement("span",{"data-automation-id":"error-message"},e)):o.createElement("div",{className:this._classNames.errorMessage,"data-automation-id":"error-message"},e):null},Object.defineProperty(t.prototype,"_isDescriptionAvailable",{get:function(){var e=this.props;return!!(e.onRenderDescription||e.description||this._errorMessage)},enumerable:!1,configurable:!0}),t.prototype._renderTextArea=function(){var e=Object(a.d)(this.props,a.h,["defaultValue"]),t=this.props["aria-labelledby"]||(this.props.label?this._labelId:void 0);return o.createElement("textarea",Object(i.a)({id:this._id},e,{ref:this._textElement,value:this.value||"",onInput:this._onInputChange,onChange:this._onInputChange,className:this._classNames.field,"aria-labelledby":t,"aria-describedby":this._isDescriptionAvailable?this._descriptionId:this.props["aria-describedby"],"aria-invalid":!!this._errorMessage,"aria-label":this.props.ariaLabel,readOnly:this.props.readOnly,onFocus:this._onFocus,onBlur:this._onBlur}))},t.prototype._renderInput=function(){var e,t=Object(a.d)(this.props,a.g,["defaultValue","type"]),n=this.props["aria-labelledby"]||(this.props.label?this._labelId:void 0),r=this.state.isRevealingPassword?"text":null!==(e=this.props.type)&&void 0!==e?e:"text";return o.createElement("input",Object(i.a)({type:r,id:this._id,"aria-labelledby":n},t,{ref:this._textElement,value:this.value||"",onInput:this._onInputChange,onChange:this._onInputChange,className:this._classNames.field,"aria-label":this.props.ariaLabel,"aria-describedby":this._isDescriptionAvailable?this._descriptionId:this.props["aria-describedby"],"aria-invalid":!!this._errorMessage,readOnly:this.props.readOnly,onFocus:this._onFocus,onBlur:this._onBlur}))},t.prototype._validate=function(e){var t=this;if(this._latestValidateValue!==e||!C(this.props)){this._latestValidateValue=e;var n=this.props.onGetErrorMessage,r=n&&n(e||"");if(void 0!==r)if("string"!==typeof r&&"then"in r){var i=++this._lastValidation;r.then((function(n){i===t._lastValidation&&t.setState({errorMessage:n}),t._notifyAfterValidate(e,n)}))}else this.setState({errorMessage:r}),this._notifyAfterValidate(e,r);else this._notifyAfterValidate(e,"")}},t.prototype._notifyAfterValidate=function(e,t){e===this.value&&this.props.onNotifyValidationResult&&this.props.onNotifyValidationResult(t,e)},t.prototype._adjustInputHeight=function(){if(this._textElement.current&&this.props.autoAdjustHeight&&this.props.multiline){var e=this._textElement.current;e.style.height="",e.style.height=e.scrollHeight+"px"}},t.defaultProps={resizable:!0,deferredValidationTime:200,validateOnLoad:!0},t}(o.Component);function E(e,t){var n=e.value,r=void 0===n?t.uncontrolledValue:n;return"number"===typeof r?String(r):r}function C(e){return!(e.validateOnFocusIn||e.validateOnFocusOut)}var T={root:"ms-TextField",description:"ms-TextField-description",errorMessage:"ms-TextField-errorMessage",field:"ms-TextField-field",fieldGroup:"ms-TextField-fieldGroup",prefix:"ms-TextField-prefix",suffix:"ms-TextField-suffix",wrapper:"ms-TextField-wrapper",revealButton:"ms-TextField-reveal",multiline:"ms-TextField--multiline",borderless:"ms-TextField--borderless",underlined:"ms-TextField--underlined",unresizable:"ms-TextField--unresizable",required:"is-required",disabled:"is-disabled",active:"is-active"};function I(e){var t=e.underlined,n=e.disabled,r=e.focused,i=e.theme,o=i.palette,a=i.fonts;return function(){var e;return{root:[t&&n&&{color:o.neutralTertiary},t&&{fontSize:a.medium.fontSize,marginRight:8,paddingLeft:12,paddingRight:0,lineHeight:"22px",height:32},t&&r&&{selectors:(e={},e[c.c]={height:31},e)}]}}}var k=Object(r.a)(S,(function(e){var t,n,r,o,a,s,l,u,p,h,d,f,m=e.theme,g=e.className,y=e.disabled,v=e.focused,_=e.required,b=e.multiline,x=e.hasLabel,w=e.borderless,S=e.underlined,E=e.hasIcon,C=e.resizable,k=e.hasErrorMessage,P=e.inputClassName,A=e.autoAdjustHeight,M=e.hasRevealButton,O=m.semanticColors,L=m.effects,R=m.fonts,D=Object(c.l)(T,m),z={background:O.disabledBackground,color:y?O.disabledText:O.inputPlaceholderText,display:"flex",alignItems:"center",padding:"0 10px",lineHeight:1,whiteSpace:"nowrap",flexShrink:0,selectors:(t={},t[c.c]={background:"Window",color:y?"GrayText":"WindowText"},t)},N=[R.medium,{color:O.inputPlaceholderText,opacity:1,selectors:(n={},n[c.c]={color:"GrayText"},n)}],B={color:O.disabledText,selectors:(r={},r[c.c]={color:"GrayText"},r)};return{root:[D.root,R.medium,_&&D.required,y&&D.disabled,v&&D.active,b&&D.multiline,w&&D.borderless,S&&D.underlined,c.v,{position:"relative"},g],wrapper:[D.wrapper,S&&[{display:"flex",borderBottom:"1px solid "+(k?O.errorText:O.inputBorder),width:"100%"},y&&{borderBottomColor:O.disabledBackground,selectors:(o={},o[c.c]=Object(i.a)({borderColor:"GrayText"},Object(c.m)()),o)},!y&&{selectors:{":hover":{borderBottomColor:k?O.errorText:O.inputBorderHovered,selectors:(a={},a[c.c]=Object(i.a)({borderBottomColor:"Highlight"},Object(c.m)()),a)}}},v&&[{position:"relative"},Object(c.o)(k?O.errorText:O.inputFocusBorderAlt,0,"borderBottom")]]],fieldGroup:[D.fieldGroup,c.v,{border:"1px solid "+O.inputBorder,borderRadius:L.roundedCorner2,background:O.inputBackground,cursor:"text",height:32,display:"flex",flexDirection:"row",alignItems:"stretch",position:"relative"},b&&{minHeight:"60px",height:"auto",display:"flex"},!v&&!y&&{selectors:{":hover":{borderColor:O.inputBorderHovered,selectors:(s={},s[c.c]=Object(i.a)({borderColor:"Highlight"},Object(c.m)()),s)}}},v&&!S&&Object(c.o)(k?O.errorText:O.inputFocusBorderAlt,L.roundedCorner2),y&&{borderColor:O.disabledBackground,selectors:(l={},l[c.c]=Object(i.a)({borderColor:"GrayText"},Object(c.m)()),l),cursor:"default"},w&&{border:"none"},w&&v&&{border:"none",selectors:{":after":{border:"none"}}},S&&{flex:"1 1 0px",border:"none",textAlign:"left"},S&&y&&{backgroundColor:"transparent"},k&&!S&&{borderColor:O.errorText,selectors:{"&:hover":{borderColor:O.errorText}}},!x&&_&&{selectors:(u={":before":{content:"'*'",color:O.errorText,position:"absolute",top:-5,right:-10}},u[c.c]={selectors:{":before":{color:"WindowText",right:-14}}},u)}],field:[R.medium,D.field,c.v,{borderRadius:0,border:"none",background:"none",backgroundColor:"transparent",color:O.inputText,padding:"0 8px",width:"100%",minWidth:0,textOverflow:"ellipsis",outline:0,selectors:(p={"&:active, &:focus, &:hover":{outline:0},"::-ms-clear":{display:"none"}},p[c.c]={background:"Window",color:y?"GrayText":"WindowText"},p)},Object(c.p)(N),b&&!C&&[D.unresizable,{resize:"none"}],b&&{minHeight:"inherit",lineHeight:17,flexGrow:1,paddingTop:6,paddingBottom:6,overflow:"auto",width:"100%"},b&&A&&{overflow:"hidden"},E&&!M&&{paddingRight:24},b&&E&&{paddingRight:40},y&&[{backgroundColor:O.disabledBackground,color:O.disabledText,borderColor:O.disabledBackground},Object(c.p)(B)],S&&{textAlign:"left"},v&&!w&&{selectors:(h={},h[c.c]={paddingLeft:11,paddingRight:11},h)},v&&b&&!w&&{selectors:(d={},d[c.c]={paddingTop:4},d)},P],icon:[b&&{paddingRight:24,alignItems:"flex-end"},{pointerEvents:"none",position:"absolute",bottom:6,right:8,top:"auto",fontSize:c.d.medium,lineHeight:18},y&&{color:O.disabledText}],description:[D.description,{color:O.bodySubtext,fontSize:R.xSmall.fontSize}],errorMessage:[D.errorMessage,c.a.slideDownIn20,R.small,{color:O.errorText,margin:0,paddingTop:5,display:"flex",alignItems:"center"}],prefix:[D.prefix,z],suffix:[D.suffix,z],revealButton:[D.revealButton,"ms-Button","ms-Button--icon",Object(c.k)(m,{inset:1}),{height:30,width:32,border:"none",padding:"0px 4px",backgroundColor:"transparent",color:O.link,selectors:{":hover":{outline:0,color:O.primaryButtonBackgroundHovered,backgroundColor:O.buttonBackgroundHovered,selectors:(f={},f[c.c]={borderColor:"Highlight",color:"Highlight"},f)},":focus":{outline:0}}},E&&{marginRight:28}],revealSpan:{display:"flex",height:"100%",alignItems:"center"},revealIcon:{margin:"0px 4px",pointerEvents:"none",bottom:6,right:8,top:"auto",fontSize:c.d.medium,lineHeight:18},subComponentStyles:{label:I(e)}}}),void 0,{scope:"TextField"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.create;function i(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}Object.create;var o=n(0),a=n(29),s=n(27),l=n(18),u=n(113),c=n(30),p=n(63),h=r;function d(e,t){void 0===t&&(t={});var n=t.defaultProp,i=void 0===n?"children":n;return function(t,n,a,s,l){if(o.isValidElement(n))return n;var c=function(e,t){var n,r;"string"===typeof t||"number"===typeof t||"boolean"===typeof t?((n={})[e]=t,r=n):r=t;return r}(i,n),d=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i={},o=[],a=0,s=n;a<s.length;a++){var l=s[a];o.push(l&&l.className),h(i,l)}return i.className=Object(u.a)([e,o],{rtl:Object(p.a)(t)}),i}(s,l,t,c);if(a){if(a.component){var f=a.component;return o.createElement(f,r({},d))}if(a.render)return a.render(d,e)}return o.createElement(e,r({},d))}}var f=Object(c.b)((function(e){return d(e)}));function m(e,t,n,r,i,o){return void 0!==e.create?e.create(t,n,r,i):f(e)(t,n,r,i,o)}function g(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var o={},a=0,s=n;a<s.length;a++){var l=s[a];l&&(l="function"===typeof l?l(e,t):l,Array.isArray(l)&&(l=g.apply(void 0,i([e,t],l))),h(o,l))}return o}var y=n(1),v=n(73),_=function(e,t){void 0===t&&(t={});var n=t.factoryOptions,i=(void 0===n?{}:n).defaultProp,u=function(n){var i=function(e,t,n){var r=["theme","styles","tokens"];return l.a.getSettings(n||r,e,t.customizations)}(t.displayName,o.useContext(s.a),t.fields),u=t.state;u&&(n=r(r({},n),u(n)));var c=n.theme||i.theme,p=g(n,c,t.tokens,i.tokens,n.tokens),h=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return a.g.apply(void 0,r.map((function(r){return"function"===typeof r?r(e,t,n):r})))}(n,c,p,t.styles,i.styles,n.styles),d=r(r({},n),{styles:h,tokens:p,_defaultStyles:h,theme:c});return e(d)};return u.displayName=t.displayName||e.name,i&&(u.create=d(u,{defaultProp:i})),h(u,t.statics),u}((function(e){if(null==e.children)return null;e.block,e.className;var t=e.as,n=void 0===t?"span":t,a=(e.variant,e.nowrap,Object(y.d)(e,["block","className","as","variant","nowrap"])),s=function(e,t){var n={},r=e,i=function(e){if(t.hasOwnProperty(e)){var i=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(i.length>0)throw new Error("Any module using getSlots must use withSlots. Please see withSlots javadoc for more info.");return m(t[e],n,r[e],r.slots&&r.slots[e],r._defaultStyles&&r._defaultStyles[e],r.theme)};i.isSlot=!0,n[e]=i}};for(var o in t)i(o);return n}(e,{root:n});return function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];var s=e;return s.isSlot?0===(n=o.Children.toArray(n)).length?s(t):s(r(r({},t),{children:n})):o.createElement.apply(o,i([e,t],n))}(s.root,Object(y.a)({},Object(v.d)(a,v.e)))}),{displayName:"Text",styles:function(e,t){var n=e.as,r=e.className,i=e.block,o=e.nowrap,a=e.variant,s=t.fonts,l=t.semanticColors,u=s[a||"medium"];return{root:[u,{color:u.color||l.bodyText,display:i?"td"===n?"table-cell":"block":"inline",mozOsxFontSmoothing:u.MozOsxFontSmoothing,webkitFontSmoothing:u.WebkitFontSmoothing},o&&{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},r]}}})},function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.length<2?t[0]:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.forEach((function(t){return t&&t.apply(e,n)}))}}function i(e){!function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=r(e,e[n],t[n]))}(e,{componentDidMount:o,componentDidUpdate:a,componentWillUnmount:s})}function o(){l(this.props.componentRef,this)}function a(e){e.componentRef!==this.props.componentRef&&(l(e.componentRef,null),l(this.props.componentRef,this))}function s(){l(this.props.componentRef,null)}function l(e,t){e&&("object"===typeof e?e.current=t:"function"===typeof e&&e(t))}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,i=n(159),o=n(1),a=n(0);!function(e){e[e.default=0]="default",e[e.image=1]="image",e[e.Default=1e5]="Default",e[e.Image=100001]="Image"}(r||(r={}));var s=n(42),l=n(5),u=n(144),c=n(73),p=n(66),h=Object(u.a)({cacheSize:100}),d=function(e){function t(t){var n=e.call(this,t)||this;return n._onImageLoadingStateChange=function(e){n.props.imageProps&&n.props.imageProps.onLoadingStateChange&&n.props.imageProps.onLoadingStateChange(e),e===l.c.error&&n.setState({imageLoadError:!0})},n.state={imageLoadError:!1},n}return Object(o.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,i=e.styles,l=e.iconName,u=e.imageErrorAs,d=e.theme,f="string"===typeof l&&0===l.length,m=!!this.props.imageProps||this.props.iconType===r.image||this.props.iconType===r.Image,g=Object(p.b)(l)||{},y=g.iconClassName,v=g.children,_=g.mergeImageProps,b=h(i,{theme:d,className:n,iconClassName:y,isImage:m,isPlaceholder:f}),x=m?"span":"i",w=Object(c.d)(this.props,c.e,["aria-label"]),S=this.state.imageLoadError,E=Object(o.a)(Object(o.a)({},this.props.imageProps),{onLoadingStateChange:this._onImageLoadingStateChange}),C=S&&u||s.a,T=this.props["aria-label"]||this.props.ariaLabel,I=E.alt||T||this.props.title,k=!!(I||this.props["aria-labelledby"]||E["aria-label"]||E["aria-labelledby"])?{role:m||_?void 0:"img","aria-label":m||_?void 0:I}:{"aria-hidden":!0},P=v;return _&&v&&"object"===typeof v&&I&&(P=a.cloneElement(v,{alt:I})),a.createElement(x,Object(o.a)({"data-icon-name":l},k,w,_?{title:void 0,"aria-label":void 0}:{},{className:b.root}),m?a.createElement(C,Object(o.a)({},E)):t||P)},t}(a.Component),f=n(20),m=Object(i.a)(d,f.c,void 0,{scope:"Icon"},!0);m.displayName="Icon"},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n(1),i=n(0),o=n(155),a=n(64),s=n(67),l=n(145),u=n(73),c=n(115),p=n(43),h=n(69),d=n(6),f=0,m=1,g=2,y=3,v=n(30);var _=Object(v.a)((function(e){return Object(v.a)((function(t){var n=Object(v.a)((function(e){return function(n){return t(n,e)}}));return function(r,i){return e(r,i?n(i):t)}}))}));function b(e,t){return _(e)(t)}var x="spacer-",w={top:-1,bottom:-1,left:-1,right:-1,width:0,height:0},S=function(e){return e.getBoundingClientRect()},E=S,C=S,T=function(e){function t(t){var n=e.call(this,t)||this;return n._root=i.createRef(),n._surface=i.createRef(),n._pageRefs={},n._getDerivedStateFromProps=function(e,t){return e.items!==n.props.items||e.renderCount!==n.props.renderCount||e.startIndex!==n.props.startIndex||e.version!==n.props.version?(n._resetRequiredWindows(),n._requiredRect=null,n._measureVersion++,n._invalidatePageCache(),n._updatePages(e,t)):t},n._onRenderRoot=function(e){var t=e.rootRef,n=e.surfaceElement,o=e.divProps;return i.createElement("div",Object(r.a)({ref:t},o),n)},n._onRenderSurface=function(e){var t=e.surfaceRef,n=e.pageElements,o=e.divProps;return i.createElement("div",Object(r.a)({ref:t},o),n)},n._onRenderPage=function(e,t){for(var o=n.props,a=o.onRenderCell,s=o.role,l=e.page,u=l.items,c=void 0===u?[]:u,p=l.startIndex,h=Object(r.d)(e,["page"]),d=void 0===s?"listitem":"presentation",f=[],m=0;m<c.length;m++){var g=p+m,y=c[m],v=n.props.getKey?n.props.getKey(y,g):y&&y.key;null!==v&&void 0!==v||(v=g),f.push(i.createElement("div",{role:d,className:"ms-List-cell",key:v,"data-list-index":g,"data-automationid":"ListCell"},a&&a(y,g,n.props.ignoreScrollingState?void 0:n.state.isScrolling)))}return i.createElement("div",Object(r.a)({},h),f)},Object(o.a)(n),n.state={pages:[],isScrolling:!1,getDerivedStateFromProps:n._getDerivedStateFromProps},n._async=new a.a(n),n._events=new s.a(n),n._estimatedPageHeight=0,n._totalEstimates=0,n._requiredWindowsAhead=0,n._requiredWindowsBehind=0,n._measureVersion=0,n._onAsyncScroll=n._async.debounce(n._onAsyncScroll,100,{leading:!1,maxWait:500}),n._onAsyncIdle=n._async.debounce(n._onAsyncIdle,200,{leading:!1}),n._onAsyncResize=n._async.debounce(n._onAsyncResize,16,{leading:!1}),n._onScrollingDone=n._async.debounce(n._onScrollingDone,500,{leading:!1}),n._cachedPageHeights={},n._estimatedPageHeight=0,n._focusedIndex=-1,n._pageCache={},n}return Object(r.c)(t,e),t.getDerivedStateFromProps=function(e,t){return t.getDerivedStateFromProps(e,t)},Object.defineProperty(t.prototype,"pageRefs",{get:function(){return this._pageRefs},enumerable:!1,configurable:!0}),t.prototype.scrollToIndex=function(e,t,n){void 0===n&&(n=f);for(var r=this.props.startIndex,i=r+this._getRenderCount(),o=this._allowedRect,a=0,s=1,l=r;l<i;l+=s){var u=this._getPageSpecification(l,o),c=u.height;if(s=u.itemCount,l<=e&&l+s>e){if(t&&this._scrollElement){for(var p=C(this._scrollElement),h={top:this._scrollElement.scrollTop,bottom:this._scrollElement.scrollTop+p.height},d=e-l,v=0;v<d;++v)a+=t(l+v);var _=a+t(e);switch(n){case m:return void(this._scrollElement.scrollTop=a);case g:return void(this._scrollElement.scrollTop=_-p.height);case y:return void(this._scrollElement.scrollTop=(a+_-p.height)/2)}if(a>=h.top&&_<=h.bottom)return;a<h.top||_>h.bottom&&(a=_-p.height)}return void(this._scrollElement&&(this._scrollElement.scrollTop=a))}a+=c}},t.prototype.getStartItemIndexInView=function(e){for(var t=0,n=this.state.pages||[];t<n.length;t++){var r=n[t];if(!r.isSpacer&&(this._scrollTop||0)>=r.top&&(this._scrollTop||0)<=r.top+r.height){if(!e){var i=Math.floor(r.height/r.itemCount);return r.startIndex+Math.floor((this._scrollTop-r.top)/i)}for(var o=0,a=r.startIndex;a<r.startIndex+r.itemCount;a++){i=e(a);if(r.top+o<=this._scrollTop&&this._scrollTop<r.top+o+i)return a;o+=i}}}return 0},t.prototype.componentDidMount=function(){this.setState(this._updatePages(this.props,this.state)),this._measureVersion++,this._scrollElement=Object(l.a)(this._root.current),this._events.on(window,"resize",this._onAsyncResize),this._root.current&&this._events.on(this._root.current,"focus",this._onFocus,!0),this._scrollElement&&(this._events.on(this._scrollElement,"scroll",this._onScroll),this._events.on(this._scrollElement,"scroll",this._onAsyncScroll))},t.prototype.componentDidUpdate=function(){var e=this.props,t=this.state;e.getPageHeight?this._onAsyncIdle():this._updatePageMeasurements(t.pages)?(this._materializedRect=null,this._hasCompletedFirstRender?this._onAsyncScroll():(this._hasCompletedFirstRender=!0,this.setState(this._updatePages(e,t)))):this._onAsyncIdle();e.onPagesUpdated&&e.onPagesUpdated(t.pages)},t.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose(),delete this._scrollElement},t.prototype.shouldComponentUpdate=function(e,t){var n=this.state.pages,r=t.pages,i=!1;if(!t.isScrolling&&this.state.isScrolling)return!0;if(e.version!==this.props.version)return!0;if(e.items===this.props.items&&n.length===r.length)for(var o=0;o<n.length;o++){var a=n[o],s=r[o];if(a.key!==s.key||a.itemCount!==s.itemCount){i=!0;break}}else i=!0;return i},t.prototype.forceUpdate=function(){this._invalidatePageCache(),this._updateRenderRects(this.props,this.state,!0),this.setState(this._updatePages(this.props,this.state)),this._measureVersion++,e.prototype.forceUpdate.call(this)},t.prototype.getTotalListHeight=function(){return this._surfaceRect.height},t.prototype.render=function(){for(var e=this.props,t=e.className,n=e.role,i=void 0===n?"list":n,o=e.onRenderSurface,a=e.onRenderRoot,s=this.state.pages,l=void 0===s?[]:s,p=[],h=Object(u.d)(this.props,u.c),d=0,f=l;d<f.length;d++){var m=f[d];p.push(this._renderPage(m))}var g=o?b(o,this._onRenderSurface):this._onRenderSurface;return(a?b(a,this._onRenderRoot):this._onRenderRoot)({rootRef:this._root,pages:l,surfaceElement:g({surfaceRef:this._surface,pages:l,pageElements:p,divProps:{role:"presentation",className:"ms-List-surface"}}),divProps:Object(r.a)(Object(r.a)({},h),{className:Object(c.a)("ms-List",t),role:p.length>0?i:void 0})})},t.prototype._shouldVirtualize=function(e){void 0===e&&(e=this.props);var t=e.onShouldVirtualize;return!t||t(e)},t.prototype._invalidatePageCache=function(){this._pageCache={}},t.prototype._renderPage=function(e){var t,n=this,r=this.props.usePageCache;if(r&&(t=this._pageCache[e.key])&&t.pageElement)return t.pageElement;var i=this._getPageStyle(e),o=this.props.onRenderPage,a=(void 0===o?this._onRenderPage:o)({page:e,className:"ms-List-page",key:e.key,ref:function(t){n._pageRefs[e.key]=t},style:i,role:"presentation"},this._onRenderPage);return r&&0===e.startIndex&&(this._pageCache[e.key]={page:e,pageElement:a}),a},t.prototype._getPageStyle=function(e){var t=this.props.getPageStyle;return Object(r.a)(Object(r.a)({},t?t(e):{}),e.items?{}:{height:e.height})},t.prototype._onFocus=function(e){for(var t=e.target;t!==this._surface.current;){var n=t.getAttribute("data-list-index");if(n){this._focusedIndex=Number(n);break}t=Object(p.a)(t)}},t.prototype._onScroll=function(){this.state.isScrolling||this.props.ignoreScrollingState||this.setState({isScrolling:!0}),this._resetRequiredWindows(),this._onScrollingDone()},t.prototype._resetRequiredWindows=function(){this._requiredWindowsAhead=0,this._requiredWindowsBehind=0},t.prototype._onAsyncScroll=function(){var e,t;this._updateRenderRects(this.props,this.state),this._materializedRect&&(e=this._requiredRect,t=this._materializedRect,e.top>=t.top&&e.left>=t.left&&e.bottom<=t.bottom&&e.right<=t.right)||this.setState(this._updatePages(this.props,this.state))},t.prototype._onAsyncIdle=function(){var e=this.props,t=e.renderedWindowsAhead,n=e.renderedWindowsBehind,r=this._requiredWindowsAhead,i=this._requiredWindowsBehind,o=Math.min(t,r+1),a=Math.min(n,i+1);o===r&&a===i||(this._requiredWindowsAhead=o,this._requiredWindowsBehind=a,this._updateRenderRects(this.props,this.state),this.setState(this._updatePages(this.props,this.state))),(t>o||n>a)&&this._onAsyncIdle()},t.prototype._onScrollingDone=function(){this.props.ignoreScrollingState||this.setState({isScrolling:!1})},t.prototype._onAsyncResize=function(){this.forceUpdate()},t.prototype._updatePages=function(e,t){this._requiredRect||this._updateRenderRects(e,t);var n=this._buildPages(e,t),i=t.pages;return this._notifyPageChanges(i,n.pages,this.props),Object(r.a)(Object(r.a)({},t),n)},t.prototype._notifyPageChanges=function(e,t,n){var r=n.onPageAdded,i=n.onPageRemoved;if(r||i){for(var o={},a=0,s=e;a<s.length;a++){(c=s[a]).items&&(o[c.startIndex]=c)}for(var l=0,u=t;l<u.length;l++){var c;(c=u[l]).items&&(o[c.startIndex]?delete o[c.startIndex]:this._onPageAdded(c))}for(var p in o)o.hasOwnProperty(p)&&this._onPageRemoved(o[p])}},t.prototype._updatePageMeasurements=function(e){var t=!1;if(!this._shouldVirtualize())return t;for(var n=0;n<e.length;n++){var r=e[n];r.items&&(t=this._measurePage(r)||t)}return t},t.prototype._measurePage=function(e){var t=!1,n=this._pageRefs[e.key],r=this._cachedPageHeights[e.startIndex];if(n&&this._shouldVirtualize()&&(!r||r.measureVersion!==this._measureVersion)){var i={width:n.clientWidth,height:n.clientHeight};(i.height||i.width)&&(t=e.height!==i.height,e.height=i.height,this._cachedPageHeights[e.startIndex]={height:i.height,measureVersion:this._measureVersion},this._estimatedPageHeight=Math.round((this._estimatedPageHeight*this._totalEstimates+i.height)/(this._totalEstimates+1)),this._totalEstimates++)}return t},t.prototype._onPageAdded=function(e){var t=this.props.onPageAdded;t&&t(e)},t.prototype._onPageRemoved=function(e){var t=this.props.onPageRemoved;t&&t(e)},t.prototype._buildPages=function(e,t){var n=e.renderCount,i=e.items,o=e.startIndex,a=e.getPageHeight;n=this._getRenderCount(e);for(var s=Object(r.a)({},w),l=[],u=1,c=0,p=null,d=this._focusedIndex,f=o+n,m=this._shouldVirtualize(e),g=0===this._estimatedPageHeight&&!a,y=this._allowedRect,v=function(e){var n=_._getPageSpecification(e,y),r=n.height,a=n.data,v=n.key;u=n.itemCount;var b,w,S=c+r-1,E=Object(h.c)(t.pages,(function(t){return!!t.items&&t.startIndex===e}))>-1,C=!y||S>=y.top&&c<=y.bottom,T=!_._requiredRect||S>=_._requiredRect.top&&c<=_._requiredRect.bottom;if(!g&&(T||C&&E)||!m||d>=e&&d<e+u||e===o){p&&(l.push(p),p=null);var I=Math.min(u,f-e),k=_._createPage(v,i.slice(e,e+I),e,void 0,void 0,a);k.top=c,k.height=r,_._visibleRect&&_._visibleRect.bottom&&(k.isVisible=S>=_._visibleRect.top&&c<=_._visibleRect.bottom),l.push(k),T&&_._allowedRect&&(b=s,w={top:c,bottom:S,height:r,left:y.left,right:y.right,width:y.width},b.top=w.top<b.top||-1===b.top?w.top:b.top,b.left=w.left<b.left||-1===b.left?w.left:b.left,b.bottom=w.bottom>b.bottom||-1===b.bottom?w.bottom:b.bottom,b.right=w.right>b.right||-1===b.right?w.right:b.right,b.width=b.right-b.left+1,b.height=b.bottom-b.top+1)}else p||(p=_._createPage(x+e,void 0,e,0,void 0,a,!0)),p.height=(p.height||0)+(S-c)+1,p.itemCount+=u;if(c+=S-c+1,g&&m)return"break"},_=this,b=o;b<f;b+=u){if("break"===v(b))break}return p&&(p.key="spacer-end",l.push(p)),this._materializedRect=s,Object(r.a)(Object(r.a)({},t),{pages:l,measureVersion:this._measureVersion})},t.prototype._getPageSpecification=function(e,t){var n=this.props.getPageSpecification;if(n){var r=n(e,t),i=r.itemCount,o=void 0===i?this._getItemCountForPage(e,t):i,a=r.height;return{itemCount:o,height:void 0===a?this._getPageHeight(e,t,o):a,data:r.data,key:r.key}}return{itemCount:o=this._getItemCountForPage(e,t),height:this._getPageHeight(e,t,o)}},t.prototype._getPageHeight=function(e,t,n){if(this.props.getPageHeight)return this.props.getPageHeight(e,t,n);var r=this._cachedPageHeights[e];return r?r.height:this._estimatedPageHeight||30},t.prototype._getItemCountForPage=function(e,t){var n=this.props.getItemCountForPage?this.props.getItemCountForPage(e,t):10;return n||10},t.prototype._createPage=function(e,t,n,r,i,o,a){void 0===n&&(n=-1),void 0===r&&(r=t?t.length:0),void 0===i&&(i={}),e=e||"page-"+n;var s=this._pageCache[e];return s&&s.page?s.page:{key:e,startIndex:n,itemCount:r,items:t,style:i,top:0,height:0,data:o,isSpacer:a||!1}},t.prototype._getRenderCount=function(e){var t=e||this.props,n=t.items,r=t.startIndex,i=t.renderCount;return void 0===i?n?n.length-r:0:i},t.prototype._updateRenderRects=function(e,t,n){var i=e.renderedWindowsAhead,o=e.renderedWindowsBehind,a=t.pages;if(this._shouldVirtualize(e)){var s=this._surfaceRect||Object(r.a)({},w),l=this._scrollElement&&this._scrollElement.scrollHeight,u=this._scrollElement?this._scrollElement.scrollTop:0;this._surface.current&&(n||!a||!this._surfaceRect||!l||l!==this._scrollHeight||Math.abs(this._scrollTop-u)>this._estimatedPageHeight/3)&&(s=this._surfaceRect=E(this._surface.current),this._scrollTop=u),!n&&l&&l===this._scrollHeight||this._measureVersion++,this._scrollHeight=l||0;var c=Math.max(0,-s.top),p=Object(d.a)(this._root.current),h={top:c,left:s.left,bottom:c+p.innerHeight,right:s.right,width:s.width,height:p.innerHeight};this._requiredRect=I(h,this._requiredWindowsBehind,this._requiredWindowsAhead),this._allowedRect=I(h,o,i),this._visibleRect=h}},t.defaultProps={startIndex:0,onRenderCell:function(e,t,n){return i.createElement(i.Fragment,null,e&&e.name||"")},renderedWindowsAhead:2,renderedWindowsBehind:2},t}(i.Component);function I(e,t,n){var r=e.top-t*e.height,i=e.height+(t+n)*e.height;return{top:r,bottom:r+i,height:i,left:e.left,right:e.right,width:e.width}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));Object.create;function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}Object.create;var i=n(0);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.useCallback((function(t){n.current=t;for(var r=0,i=e;r<i.length;r++){var o=i[r];"function"===typeof o?o(t):o&&(o.current=t)}}),r(e));return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),i=n(0),o=n(143),a=n(18),s=n(27);function l(e,t){var n=function(){var e=i.useState(0)[1];return function(){return e((function(e){return++e}))}}(),r=i.useContext(s.a).customizations,o=r.inCustomizerContext;return i.useEffect((function(){return o||a.a.observe(n),function(){o||a.a.unobserve(n)}}),[o]),a.a.getSettings(e,t,r)}var u=["theme","styles"];function c(e,t,n,a,s){var c=(a=a||{scope:"",fields:void 0}).scope,p=a.fields,h=void 0===p?u:p,d=i.forwardRef((function(a,s){var u=i.useRef(),p=l(h,c),d=p.styles,f=(p.dir,Object(r.c)(p,["styles","dir"])),m=n?n(a):void 0,g=u.current&&u.current.__cachedInputs__||[];if(!u.current||d!==g[1]||a.styles!==g[2]){var y=function(e){return Object(o.a)(e,t,d,a.styles)};y.__cachedInputs__=[t,d,a.styles],y.__noStyleOverride__=!d&&!a.styles,u.current=y}return i.createElement(e,Object(r.a)({ref:s},f,m,a,{styles:u.current}))}));d.displayName="Styled"+(e.displayName||e.name);var f=s?i.memo(d):d;return d.displayName&&(f.displayName=d.displayName),f}},function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"i",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"k",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"n",(function(){return g})),n.d(t,"m",(function(){return y})),n.d(t,"l",(function(){return v})),n.d(t,"a",(function(){return _})),n.d(t,"o",(function(){return b})),n.d(t,"b",(function(){return w})),n.d(t,"g",(function(){return S})),n.d(t,"d",(function(){return E}));var r=n(41);var i=n(149),o=n(43),a=n(6),s=n(12);function l(e,t,n){return f(e,t,!0,!1,!1,n)}function u(e,t,n){return d(e,t,!0,!1,!0,n)}function c(e,t,n,r){return void 0===r&&(r=!0),f(e,t,r,!1,!1,n,!1,!0)}function p(e,t,n,r){return void 0===r&&(r=!0),d(e,t,r,!1,!0,n,!1,!0)}function h(e){var t=f(e,e,!0,!1,!1,!0);return!!t&&(w(t),!0)}function d(e,t,n,r,i,o,a,s){if(!t||!a&&t===e)return null;var l=m(t);if(i&&l&&(o||!y(t)&&!v(t))){var u=d(e,t.lastElementChild,!0,!0,!0,o,a,s);if(u){if(s&&g(u,!0)||!s)return u;var c=d(e,u.previousElementSibling,!0,!0,!0,o,a,s);if(c)return c;for(var p=u.parentElement;p&&p!==t;){var h=d(e,p.previousElementSibling,!0,!0,!0,o,a,s);if(h)return h;p=p.parentElement}}}if(n&&l&&g(t,s))return t;var f=d(e,t.previousElementSibling,!0,!0,!0,o,a,s);return f||(r?null:d(e,t.parentElement,!0,!1,!1,o,a,s))}function f(e,t,n,r,i,o,a,s){if(!t||t===e&&i&&!a)return null;var l=m(t);if(n&&l&&g(t,s))return t;if(!i&&l&&(o||!y(t)&&!v(t))){var u=f(e,t.firstElementChild,!0,!0,!1,o,a,s);if(u)return u}if(t===e)return null;var c=f(e,t.nextElementSibling,!0,!0,!1,o,a,s);return c||(r?null:f(e,t.parentElement,!1,!1,!0,o,a,s))}function m(e){if(!e||!e.getAttribute)return!1;var t=e.getAttribute("data-is-visible");return null!==t&&void 0!==t?"true"===t:0!==e.offsetHeight||null!==e.offsetParent||!0===e.isVisible}function g(e,t){if(!e||e.disabled)return!1;var n=0,r=null;e&&e.getAttribute&&(r=e.getAttribute("tabIndex"))&&(n=parseInt(r,10));var i=e.getAttribute?e.getAttribute("data-is-focusable"):null,o=null!==r&&n>=0,a=!!e&&"false"!==i&&("A"===e.tagName||"BUTTON"===e.tagName||"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||"true"===i||o);return t?-1!==n&&a:a}function y(e){return!!(e&&e.getAttribute&&e.getAttribute("data-focuszone-id"))}function v(e){return!(!e||!e.getAttribute||"true"!==e.getAttribute("data-is-sub-focuszone"))}function _(e){var t=Object(s.a)(e),n=t&&t.activeElement;return!(!n||!Object(i.a)(e,n))}function b(e,t){return"true"!==function(e,t){var n=Object(r.a)(e,(function(e){return e.hasAttribute(t)}));return n&&n.getAttribute(t)}(e,t)}var x=void 0;function w(e){if(e){if(x)return void(x=e);x=e;var t=Object(a.a)(e);t&&t.requestAnimationFrame((function(){x&&x.focus(),x=void 0}))}}function S(e,t){for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r],a=n.children[Math.min(o,n.children.length-1)];if(!a)break;n=a}return n=g(n)&&m(n)?n:f(e,n,!0)||d(e,n)}function E(e,t){for(var n=[];t&&e&&t!==e;){var r=Object(o.a)(t,!0);if(null===r)return[];n.unshift(Array.prototype.indexOf.call(r.children,t)),t=r}return n}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}));var r,i=n(0),o=n(6),a=n(13),s=((r={})[a.a.up]=1,r[a.a.down]=1,r[a.a.left]=1,r[a.a.right]=1,r[a.a.home]=1,r[a.a.end]=1,r[a.a.tab]=1,r[a.a.pageUp]=1,r[a.a.pageDown]=1,r);var l=n(44),u=new WeakMap;function c(e,t){var n,r=u.get(e);return n=r?r+t:1,u.set(e,n),n}function p(e){i.useEffect((function(){var t,n=Object(o.a)(null===e||void 0===e?void 0:e.current);if(n&&!0!==(null===(t=n.FabricConfig)||void 0===t?void 0:t.disableFocusRects)){var r=c(n,1);return r<=1&&(n.addEventListener("mousedown",d,!0),n.addEventListener("pointerdown",f,!0),n.addEventListener("keydown",m,!0)),function(){var e;n&&!0!==(null===(e=n.FabricConfig)||void 0===e?void 0:e.disableFocusRects)&&0===(r=c(n,-1))&&(n.removeEventListener("mousedown",d,!0),n.removeEventListener("pointerdown",f,!0),n.removeEventListener("keydown",m,!0))}}}),[e])}var h=function(e){return p(e.rootRef),null};function d(e){Object(l.b)(!1,e.target)}function f(e){"mouse"!==e.pointerType&&Object(l.b)(!1,e.target)}function m(e){var t;t=e.which,s[t]&&Object(l.b)(!0,e.target)}}]]);
//# sourceMappingURL=2.8e1b0082.chunk.js.map